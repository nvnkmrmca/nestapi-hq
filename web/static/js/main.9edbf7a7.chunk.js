(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),r=n(19),i=n.n(r),l=n(2),c=n(4),m=n(6),u=n(5),d=n(7),p=n(9),h=n(20),f=n(24),g=n(60),y=n(1);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.RESET=14]="RESET"}(a||(a={}));var E=function(e,t){return Object(y.a)({},e,{isLoggedIn:t})},b=function(e,t){return Object(y.a)({},e,{role:t})},v=function(e,t){return Object(y.a)({},e,{homeIndex:t})},O=function(e,t){return Object(y.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},S=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},x=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},I=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},C=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},A=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=Object(f.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_LOGIN_STATUS:return E(e,t.payload);case a.SET_ROLE:return b(e,t.payload);case a.SET_HOME_INDEX:return v(e,t.payload);case a.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USER:return O(e,t.payload);case a.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_ADS:return S(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_POLLS:return w(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_OUTINGS:return j(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_DOCUMENTS:return k(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERS:return x(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_HOMES:return I(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERHOMES:return N(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_TICKETS:return C(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_BLOCKS:return A(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e}}),U=Object(f.e)(T,Object(f.d)(Object(f.a)(g.a))),L=n(29),D=n.n(L),R=n(39),_="https://nestadmin.herokuapp.com/",M="DD-MMM-YYYY",P=_+"image/",F=_+"file/",B="#0078d7",H="#0067b9",W="#FFFFFF",V="#FF0000",G="#cce1f1",Y="#e1e1e1",K="#000000",Z="#FFFFFF",q={USER:"USER",ADMIN:"ADMIN",GATEKEEPER:"GATEKEEPER",MANAGER:"MANAGER"},z=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function J(e){return X(e)&&e.length>0}function X(e){return null!==e&&void 0!==e}function $(e){try{return X(e)?JSON.stringify(e):""}catch(t){return ee(t,"JSON2String"),""}}function Q(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function ee(e,t){console.log("Error:"+t+":"+e)}var te=function e(){var t=this;Object(l.a)(this,e),this.url="https://nestadmin.herokuapp.com/",this.get=function(e,n){t.fetch(e,"GET",n)},this.post=function(e,n,a){t.fetch(e,"POST",n,a)},this.delete=function(e,n,a){t.fetch(e,"DELETE",n,a)},this.patch=function(e,n,a){t.fetch(e,"PATCH",n,a)},this.put=function(e,n,a){t.fetch(e,"PUT",n,a)},this.upload=function(){var e=Object(R.a)(D.a.mark(function e(n,a,o){var s,r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return s=e.sent,e.next=5,t.getAS("client_id");case 5:return r=e.sent,e.next=8,t.getAS("user_id");case 8:i=e.sent,(l=new FormData).append("file",o.file,o.name),l.append("name",o.name),fetch(t.url+n,{method:"POST",headers:{Accept:"application/json","x-access-token":J(s)?"Bearer "+s:"","client-id":J(r)?""+r:"","user-id":J(i)?""+i:""},body:l}).then(function(e){return e.json()}).then(function(e){X(e)?X(e.data)?t.callback(a,e,"Some problem occurs. Please contact administrator."):t.callback(a,null,e.message):t.callback(a,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(a,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(R.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(R.a)(D.a.mark(function e(n,a,o,s){var r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return r=e.sent,e.next=5,t.getAS("client_id");case 5:return i=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,fetch(t.url+n,{method:a,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":J(r)?"Bearer "+r:"","client-id":J(i)?""+i:"","user-id":J(l)?""+l:""},body:X(s)?$(s):null}).then(function(e){return e.json()}).then(function(e){X(e)?X(e.data)?t.callback(o,e,"Some problem occurs. Please contact administrator."):t.callback(o,null,e.message):t.callback(o,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(o,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,n,a,o){return e.apply(this,arguments)}}(),this.callback=function(e,t,n){X(e)&&"function"==typeof e&&e(t,n)}},ne=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(ae(!1)),t(se(-1)),t(me()),e(!0)}catch(n){e(!1)}}},ae=function(e){return{type:a.SET_LOGIN_STATUS,payload:e}},oe=function(e){return{type:a.SET_ROLE,payload:e}},se=function(e){return{type:a.SET_HOME_INDEX,payload:e}},re=function(e){return{type:a.LOAD_USER,payload:e}},ie=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},le=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},ce=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},me=function(){return{type:a.RESET}},ue=n(28),de=n(3),pe=n(22),he=n(23);function fe(){var e=Object(pe.a)(["\n"]);return fe=function(){return e},e}function ge(){var e=Object(pe.a)(["\n"]);return ge=function(){return e},e}function ye(){var e=Object(pe.a)(["\n"]);return ye=function(){return e},e}function Ee(){var e=Object(pe.a)(["\n"]);return Ee=function(){return e},e}function be(){var e=Object(pe.a)(["\n"]);return be=function(){return e},e}function ve(){var e=Object(pe.a)(["\n"]);return ve=function(){return e},e}function Oe(){var e=Object(pe.a)(["\noverflow: auto;\n"]);return Oe=function(){return e},e}function Se(){var e=Object(pe.a)(["\n"]);return Se=function(){return e},e}var we=he.a.div(Se()),je=he.a.div(Oe()),ke=he.a.img(ve()),xe=he.a.input(be()),Ie=he.a.textarea(Ee()),Ne=he.a.select(ye()),Ce=he.a.label(ge()),Ae=he.a.span(fe()),Te=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("input",{type:"button",className:"btn",value:this.props.title,onClick:function(){return e.props.onPress()},style:Object(y.a)({},Ue.btn,this.props.style)})}}]),t}(o.Component);Te.defaultProps={title:"",onPress:function(){},style:{}};var Ue={btn:{backgroundColor:B,borderColor:B,color:Z,cursor:"pointer"}},Le=function e(){Object(l.a)(this,e)};Le.logo=P+"logo.png",Le.logoInv=P+"logo-inv.png",Le.icon=P+"icon.png",Le.logout=P+"logout.png",Le.homeIcon=P+"home-icon.png",Le.homeIconInv=P+"home-icon-inv.png",Le.notification=P+"notification.png",Le.notificationInv=P+"notification-inv.png",Le.setting=P+"setting.png",Le.settingInv=P+"setting-inv.png",Le.info=P+"info.png",Le.infoInv=P+"info-inv.png",Le.workInProgress=P+"work-in-progress.png",Le.members=P+"members.png",Le.membersInv=P+"members-inv.png",Le.vehicle=P+"vehicle.png",Le.vehicleInv=P+"vehicle-inv.png",Le.username=P+"username.png",Le.password=P+"password.png",Le.support=P+"support.png",Le.supportInv=P+"support-inv.png",Le.visitors=P+"visitors.png",Le.visitorsInv=P+"visitors-inv.png",Le.servent=P+"servent.png",Le.serventInv=P+"servent-inv.png",Le.add=P+"add.png",Le.edit=P+"edit.png",Le.delete=P+"delete.png",Le.close=P+"close.png",Le.tick=P+"tick.png",Le.cancel=P+"cancel.png",Le.mobile=P+"mobile.png",Le.email=P+"email.png",Le.addvertise=P+"addvertise.png",Le.reminder=P+"reminder.png",Le.users=P+"users.png",Le.homes=P+"homes.png",Le.blocks=P+"blocks.png",Le.search=P+"search.png",Le.datePicker=P+"date-picker.png",Le.money=P+"money.png",Le.moneyInv=P+"money-inv.png",Le.view=P+"view.png",Le.document=P+"document.png",Le.documentInv=P+"document-inv.png",Le.menu=P+"menu.png",Le.loading=P+"loading.gif";var De=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.visible&&o.createElement(we,null,o.createElement(we,{className:"loader-overlay"}),o.createElement(we,{className:"loader"},o.createElement(ke,{className:"",src:Le.loading,style:{width:"50px",height:"50px"}}),o.createElement(we,{style:{color:H,fontWeight:"bold",marginTop:5}},this.props.text)))}}]),t}(o.Component);De.defaultProps={visible:!1,text:"Loading..."};var Re={},_e=function e(){Object(l.a)(this,e)};_e.success=function(e){h.ToastsStore.success(e)},_e.fail=function(e){h.ToastsStore.error(e)},_e.warn=function(e){h.ToastsStore.warning(e)},_e.info=function(e){h.ToastsStore.info(e)},_e.show=function(e,t,n){h.ToastsStore.info(e)};var Me=_e,Pe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onLogin=function(){J(n.state.userName)&&J(n.state.password)?(n.setState({message:"",isLoading:!0}),n.props.onLogin(n.state.userName,n.state.password,function(e,t){!0===e?n.setState({isLoading:!1,message:""}):n.setState({message:t,isLoading:!1})})):Me.warn("Enter Mobile Number and Password to continue.")},n.onForgetPassword=function(){n.setState({isForgetPass:!0,mobileNumber:"",email:"",message:""})},n.onCreateAccount=function(){alert("Contact administrator/manager to create/join your flat.")},n.onForgetPassSubmit=function(){J(n.state.mobileNumber)&&J(n.state.email)?(n.setState({message:"",isLoading:!0}),n.props.onForgetPassword(n.state.mobileNumber,n.state.email.toLowerCase(),function(e,t){!0===e?(Me.success("Password reset success. Login with New password sent to your Email. Change password after login."),n.setState({isLoading:!1,message:"",isForgetPass:!1,userName:"",password:""})):n.setState({message:t,isLoading:!1})})):Me.warn("Enter Mobile Number and Email to continue.")},n.state={userName:"",password:"",message:"",isLoading:!1,isForgetPass:!1,mobileNumber:"",email:""},n.onLogin=n.onLogin.bind(Object(de.a)(n)),n.onForgetPassword=n.onForgetPassword.bind(Object(de.a)(n)),n.onCreateAccount=n.onCreateAccount.bind(Object(de.a)(n)),n.onForgetPassSubmit=n.onForgetPassSubmit.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(we,{className:"container",style:{backgroundColor:W,maxWidth:"270px"}},o.createElement(we,{className:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30,marginTop:5}},o.createElement(ke,{src:Le.logo,style:{width:150,height:150}})),this.state.isForgetPass?o.createElement(we,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(we,{className:"col-12",style:Fe.row},o.createElement(ke,{className:"absolute",src:Le.mobile,style:Fe.txtIcon}),o.createElement(xe,{type:"text",className:"form-control",placeholder:"Registered Mobile Number",value:this.state.mobileNumber,style:Object(y.a)({},Re,Fe.txt),onChange:function(t){return e.setState({mobileNumber:t.target.value})}})),o.createElement(we,{className:"col-12",style:Object(y.a)({},Fe.row,{marginBottom:40})},o.createElement(ke,{className:"absolute",src:Le.email,style:Fe.txtIcon}),o.createElement(xe,{type:"text",className:"form-control",placeholder:"Registered Email",value:this.state.email,style:Object(y.a)({},Re,Fe.txt),onChange:function(t){return e.setState({email:t.target.value})}})),o.createElement(Te,{title:!1===this.state.isLoading?"Reset my password":"Loading...",onPress:this.onForgetPassSubmit}),o.createElement(Ce,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?K:V}},this.state.message),o.createElement(we,{style:{marginTop:15}},o.createElement(Ce,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:H}},"Go back to Login."))):o.createElement(we,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(we,{className:"col-12",style:Fe.row},o.createElement(ke,{className:"absolute",src:Le.username,style:Fe.txtIcon}),o.createElement(xe,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},Re,Fe.txt),value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),o.createElement(we,{className:"col-12",style:Object(y.a)({},Fe.row,{marginBottom:15})},o.createElement(ke,{className:"absolute",src:Le.password,style:Fe.txtIcon}),o.createElement(xe,{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,style:Object(y.a)({},Re,Fe.txt),onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(Ce,{className:"col-12 pointer",onClick:this.onForgetPassword,style:{marginBottom:15,textAlign:"right",color:H}},"Forgot Password?"),o.createElement(Te,{title:!1===this.state.isLoading?"LOGIN":"Loading...",onPress:this.onLogin}),o.createElement(Ce,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?K:V}},this.state.message),o.createElement(we,{className:"col-12",style:{marginTop:15,alignItems:"center",justifyContent:"center"}},o.createElement(Ce,{className:"col-12",style:{marginBottom:5,textAlign:"center"}},"Dont have an account?"),o.createElement(we,{className:"col",style:{float:"left",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#000000",borderStyle:"solid",borderRadius:10}},o.createElement(Ce,{style:{textAlign:"center",margin:"7px",cursor:"pointer"},onClick:this.onCreateAccount},"CREATE / JOIN YOUR FLAT")))),o.createElement(De,{visible:this.state.isLoading,text:""}))}}]),t}(o.Component),Fe={row:{marginBottom:25},txtIcon:{marginLeft:3,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11},txt:{flex:1,paddingLeft:20}},Be=Object(p.b)(function(e,t){return{}},function(e){return{onLogin:function(t,n,a){return e(function(e,t,n){return function(a){var o=sessionStorage.getItem("fcm_token");(new te).post("account/login",function(e,t){if(X(e)&&X(e.data)&&J(e.data.token)&&J(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(o){}a(ae(!0)),n(!0,"")}else n(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:o,os:"web",osVersion:"web"})}}(t,n,a))},onForgetPassword:function(t,n,a){return e(function(e,t,n){return function(a){(new te).post("account/resetpassword",function(e,t){X(e)&&X(e.data)&&X(e.data.data)?!0===e.data.data?n(!0,""):n(!1,e.data.message):n(!1,t)},{mobileNo:e,emailId:t})}}(t,n,a))}}})(Pe),He=n(25),We=n(13),Ve=n(10),Ge={container:{height:"80%",marginTop:30,marginBottom:25,marginLeft:15,marginRight:15},head:{alignContent:"center"},title:{flex:1,alignContent:"center",color:K},close:{width:20,flex:1,justifyContent:"flex-end",alignContent:"flex-end",alignSelf:"flex-end"},content:{}},Ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleHomeModel=function(e){n.setState({isShowHomeModel:e})},n.onHomeChange=function(e){n.props.onHomeChange(e,function(e){!0===e&&n.onToggleHomeModel(!1)})},n.logout=function(){Object(Ve.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){n.props.onLogout(function(e){!0===e?Me.success("Logout Success!"):Me.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})},n.state={isShowHomeModel:!1},n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(de.a)(n)),n.onHomeChange=n.onHomeChange.bind(Object(de.a)(n)),n.logout=n.logout.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("header",{className:"center",style:Ke.titleBar},o.createElement(ue.b,{className:"fl",to:""},o.createElement(ke,{src:Le.logoInv,className:"",style:{width:22,height:22},onClick:function(){e.props.isMenuExpand&&e.props.onToggleMenu()}})),o.createElement(ke,{src:this.props.isMenuExpand?Le.close:Le.menu,className:"fl pointer",style:this.props.isMenuExpand?{width:17,height:17,marginLeft:15,marginTop:6}:{width:22,height:22,marginLeft:15,marginTop:4},onClick:this.props.onToggleMenu}),this.props.appUser.role===q.USER?o.createElement(Ce,{className:"pointer",style:Ke.titleText,onClick:function(){return e.onToggleHomeModel(!0)}},J(this.props.user.homes)&&this.props.appUser.homeIndex>=0?this.props.user.homes[this.props.appUser.homeIndex].number:""):o.createElement(Ce,{style:Ke.titleText},this.props.appUser.role===q.ADMIN?"Admin":this.props.appUser.role===q.MANAGER?"Manager":this.props.appUser.role===q.GATEKEEPER?"Gate Keeper":this.props.appUser.role),o.createElement("span",{className:"fr pointer",onClick:this.logout,style:{flex:1}},o.createElement(ke,{src:Le.logout,style:{width:20,height:20}})),J(this.props.user.homes)&&o.createElement(We.a,{open:this.state.isShowHomeModel,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(we,{style:Ge.container},this.props.user.homes.map(function(t,n){return o.createElement(Ce,{className:"col-12 pointer",key:"h"+n,onClick:function(){return e.onHomeChange(n)},style:e.props.appUser.homeIndex===n?Object(y.a)({},Ke.homeList,Ke.activeHome):Object(y.a)({},Ke.homeList,Ke.inActiveHome)},""+t.number)}))))}}]),t}(o.Component),Ke={titleBar:{backgroundColor:B,width:"100%",padding:7},titleText:{flex:15,color:Z,fontSize:15},homeList:{padding:15,borderBottomWidth:1,borderBottomColor:B,"border-bottom-style":"solid"},inActiveHome:{color:K},activeHome:{color:B,fontSize:20}},Ze=[{title:"Home",path:"/"},{title:"Manage",roles:[q.USER,q.ADMIN,q.MANAGER],child:[{title:"Members",path:"members",roles:[q.USER]},{title:"Vehicles",path:"vehicles",roles:[q.USER]},{title:"Servents",path:"servents",roles:[q.USER]},{title:"Tickets",path:"tickets",roles:[q.USER,q.ADMIN,q.MANAGER]},{title:"Visitors",path:"visitors",roles:[q.USER]},{title:"Ads",path:"ads",roles:[q.ADMIN,q.MANAGER]},{title:"Notification",path:"notification",roles:[q.ADMIN,q.MANAGER]},{title:"Users",path:"users",roles:[q.ADMIN]},{title:"Homes",path:"homes",roles:[q.ADMIN]},{title:"Blocks",path:"blocks",roles:[q.ADMIN]},{title:"Visitors",path:"all-visitors",roles:[q.ADMIN,q.MANAGER,q.GATEKEEPER]},{title:"Payment",path:"payment",roles:[q.ADMIN,q.MANAGER]}]},{title:"Notice",path:"notice"},{title:"Settings",child:[{title:"My Profile",path:"my-profile"},{title:"My Role",path:"my-role",isMRole:!0},{title:"My Documents",path:"my-documents"},{title:"Change Password",path:"change-password"}]},{title:"Info",path:"info"}],qe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadNav=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(de.a)(n);return o.createElement("ul",{className:"navbar-nav"+(a||n.state.activeTopMenu===t?"":" hide"),style:a?{}:ze.inner},e.map(function(e,t){return(J(e.path)||J(e.child))&&(!J(e.roles)||e.roles.indexOf(n.props.appUser.role)>=0)&&(!e.isMRole||n.props.user.role.split(",").length>0)?o.createElement("li",{className:"nav-item"},o.createElement(ue.b,{className:"nav-link",to:J(e.path)?e.path:"#",onClick:function(){n.state.activeTopMenu===e.title?n.setState({activeTopMenu:""}):a&&n.setState({activeTopMenu:e.title}),n.setState({activeMenu:e.title}),J(e.path)&&n.props.onToggleMenu()}},e.title),J(e.child)&&s.loadNav(e.child,e.title)):null}))},n.state={activeMenu:"",activeTopMenu:""},n.loadNav=n.loadNav.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("nav",{className:this.props.isExpand?"":"collapse",style:ze.nav},this.loadNav(Ze,"",!0))}}]),t}(o.Component),ze={nav:{backgroundColor:H,color:W},inner:{backgroundColor:B,paddingLeft:10}},Je=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("footer",{style:Xe.tabBar},o.createElement(we,{className:"center"},"\xa9 Nest"))}}]),t}(o.Component),Xe={tabBar:{flex:1,borderTopColor:Y,borderTopWidth:1,"border-top-style":"solid",width:"100%",marginTop:25,paddingTop:15,paddingBottom:15},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},tabImage:{width:20,height:20},activeTab:{backgroundColor:W}},$e=function(e,t,n,a){return function(e){(new te).get("payments"+(J(t)?"/"+t:""),function(e,t){X(e)&&X(e.data)?n(e.data):a(J(t)?t:"Failed to load Payments.")})}},Qe=function(e){return{type:a.LOAD_USER,payload:e}},et=function(e,t,n,a){return function(e){(new te).get("visitors"+(J(t)?"/"+t:""),function(e,t){X(e)&&X(e.data)?n(e.data):a(J(e.message)?e.message:"Failed to load Visitors.")})}},tt=function(e,t,n,a,o){return function(n){t&&J(t._id)?(new te).put("visitor/"+t._id,function(e,t){X(e)&&X(e.data)&&e.data.length>0?o(!0):o(!1)},t):(new te).post("visitor/"+e,function(e,t){X(e)&&X(e.data)&&e.data.length>0?o(!0):o(!1)},t)}},nt=function(e,t){return function(n){(new te).upload("upload",function(e,n){X(e)&&X(e.data)&&!0===e.data?t(!0,""):t(!1,n)},e)}},at=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getTotalDue=function(){var e=0;return n.props.home.payments.map(function(t,n){var a=0;return t.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),e+=t.amount-a,1}),e},n.payNow=function(e,t){if(e&&e.length>0&&t&&t>0)if(J(n.props.user.client.upi.id)&&J(n.props.user.client.upi.name)){var a=Q();n.setState({payment:{paymentId:e,amount:t,transactionRef:a}}),Me.warn("Payment is in progress. Please contact administrator.")}else Me.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else Me.warn("Amount should be more then 0 to proceed payment.")},n.successCallback=function(e){if(console.log("Payment Success...",e),e&&e.Status)if("SUCCESS"===e.Status&&e.responseCode&&"00"===e.responseCode){n.setState({isLoading:!0});var t={txnRef:e.txnRef,txnId:e.txnId,amount:n.state.payment.amount,status:"PAID",isSuccess:!0,reason:""};n.props.onPaymentUpdate(n.state.payment.paymentId,t,function(e){n.setState({isLoading:!1}),n.clearTxn(),!0===e?Me.success("Payment success."):Me.fail("Payment failed.")})}else n.txnFailure(e);else n.txnFailure(e)},n.failureCallback=function(e){n.txnFailure(e)},n.txnFailure=function(e){console.log("Payment Failure...",e);var t="";t=e&&e.Status?"FAILURE"===e.Status&&e.responseCode&&"ZM"===e.responseCode?"Payment failed because of wrong pin.":"FAILURE"===e.Status&&e.message&&e.message.length>0?"Payment failed because "+e.message:"Payment failed.":"Payment failed.",Me.fail(t),n.setState({isLoading:!0});var a={txnRef:n.state.payment.transactionRef,txnId:"",amount:n.state.payment.amount,status:"FAIL",isSuccess:!1,reason:t};n.props.onPaymentUpdate(n.state.payment.paymentId,a,function(e){n.setState({isLoading:!1}),n.clearTxn()})},n.clearTxn=function(){n.setState({payment:{paymentId:"",amount:0,transactionRef:""}})},n.state={isLoading:!1,payment:{paymentId:"",amount:0,transactionRef:""}},n.getTotalDue=n.getTotalDue.bind(Object(de.a)(n)),n.payNow=n.payNow.bind(Object(de.a)(n)),n.clearTxn=n.clearTxn.bind(Object(de.a)(n)),n.txnFailure=n.txnFailure.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(we,null,o.createElement(we,{style:{margin:5}},o.createElement(Ce,{style:{marginTop:2,fontWeight:"bold",fontSize:17}},"Total Due Amount: Rs "+this.getTotalDue())),o.createElement(je,null,J(this.props.home.payments)?this.props.home.payments.filter(function(e,t){var n=0;return J(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<e.amount}).map(function(t,n){var a=0;return J(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<t.amount?o.createElement(we,{key:"my-due"+n,style:0===n?ot.myDueFirst:ot.myDue},o.createElement(we,{style:{marginTop:4}},o.createElement(Ce,null,"Due for: "+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(we,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Ce,{style:{fontSize:17}},"Rs "+(t.amount-a))),o.createElement(we,{style:{width:"100%"}},o.createElement(Ce,null,"Due Date: 15/"+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(we,{style:{marginTop:4}},o.createElement(Te,{title:"PAY NOW",onPress:function(){return e.payNow(t._id,t.amount-a)}}))):null}):o.createElement(Ce,{style:{padding:20}},"No Dues found!!!")),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),ot={myDue:{margin:7,paddingLeft:15,borderLeftColor:Y,borderLeftWidth:1},myDueFirst:{margin:7}},st=n(67),rt=n.n(st);function it(e,t){try{return X(e)?("string"!=typeof e&&e.toString(),J(t)||(t=M),rt()(e).format(t)):""}catch(n){return ee(n,"convert.toDateString"),""}}var lt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(je,{style:{}},J(this.props.home.payments.filter(function(e,t){return J(e.transactions)&&J(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?this.props.home.payments.filter(function(e,t){return J(e.transactions)&&J(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var n=0,a=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount,0===t&&(a=e.createdAt),1}),o.createElement(we,{key:"my-his"+t,style:0===t?ct.myDueFirst:ct.myDue},o.createElement(we,{style:{marginTop:4}},o.createElement(Ce,{style:{}},"Paid for: "+z.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),o.createElement(we,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Ce,{style:{fontSize:17}},"Rs "+n)),o.createElement(we,{style:{width:"100%"}},o.createElement(Ce,null,"Paid On: "+it(a))))}):o.createElement(Ce,{style:{padding:20}},"No History found"))}}]),t}(o.Component),ct={myDue:{margin:7,paddingLeft:15,borderLeftColor:Y,borderLeftWidth:1},myDueFirst:{margin:7}},mt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return J(this.props.data)?this.props.data.map(function(e,t){return o.createElement(we,{style:{flex:1,borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid",paddingBottom:3}},o.createElement(we,null,o.createElement(Ce,{key:t,style:{flex:1,fontWeight:"bold"}},e.title)),o.createElement(we,null,o.createElement(Ce,{key:t,style:{flex:1}},e.description)))}):o.createElement(Ce,null,this.props.message)}}]),t}(o.Component),ut={container:{flex:1,width:"100%",padding:10,marginBottom:10,borderBottomColor:Y,borderBottomWidth:1,"border-bottom-style":"solid"},row:{flex:1},card:{flex:1,justifyContent:"center",alignItems:"center",borderRadius:10,padding:5,margin:7},inner:{margin:5,padding:"0px 10px"},txt:{flex:1,paddingTop:7,paddingBottom:5,fontSize:14},img:{width:25,height:25,margin:5}},dt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:pt.content},o.createElement(we,{className:"fl",style:ut.container},o.createElement(we,{style:ut.row},o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("members")}},o.createElement(ke,{src:Le.members,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},(this.props.home.members?this.props.home.members.length+"":"")+" MEMBER"+(0===this.props.home.members.length||this.props.home.members.length>1?"S":""))),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("vehicles")}},o.createElement(ke,{src:Le.vehicle,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},(this.props.home.vehicles?this.props.home.vehicles.length+"":"")+" VEHICLE"+(0===this.props.home.vehicles.length||this.props.home.vehicles.length>1?"S":""))),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("servents")}},o.createElement(ke,{src:Le.servent,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},(this.props.home.servents?this.props.home.servents.length+"":"")+" SERVANT"+(0===this.props.home.servents.length||this.props.home.servents.length>1?"S":""))),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(ke,{src:Le.support,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"TICKET(S)")),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("visitors")}},o.createElement(ke,{src:Le.visitors,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"VISITOR(S)")))),o.createElement(we,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(we,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ae,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},pt.tab,pt.activeTab):pt.tab,onClick:function(){return e.setState({activeTab:1})}},"MY DUES"),o.createElement(Ae,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},pt.tab,pt.activeTab):pt.tab,onClick:function(){return e.setState({activeTab:2})}},"ADVANCE"),o.createElement(Ae,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},pt.tab,pt.activeTab):pt.tab,onClick:function(){return e.setState({activeTab:3})}},"HISTORY")),o.createElement(we,{style:{flex:1,flexDirection:"row",padding:10}},1===this.state.activeTab?o.createElement(at,{history:this.props.history,user:this.props.user,home:this.props.home,onPaymentUpload:this.props.onPaymentUpload,onPaymentUpdate:this.props.onPaymentUpdate}):2===this.state.activeTab?o.createElement(mt,{data:[],message:"No advance found!"}):3===this.state.activeTab?o.createElement(lt,{history:this.props.history,home:this.props.home}):4===this.state.activeTab?o.createElement(mt,{data:[],message:"Work in progress"}):[])))}}]),t}(o.Component),pt={content:{flex:1,width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:B,"border-bottom-style":"solid",color:B}},ht=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:ft.content},o.createElement(we,{className:"fl",style:ut.container},o.createElement(we,{style:ut.row},o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(ke,{src:Le.support,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"TICKET")),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("ads")}},o.createElement(ke,{src:Le.addvertise,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"ADS")),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("notification")}},o.createElement(ke,{src:Le.reminder,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"NOTIFICATION")),this.props.appUser.role===q.ADMIN&&o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("users")}},o.createElement(ke,{src:Le.users,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},this.props.users.isUpToDate?(this.props.users.isError?0:this.props.users.data.length)+" USER"+(this.props.users.isError||0===this.props.users.data.length||this.props.users.data.length>1?"S":""):"Loading")),this.props.appUser.role===q.ADMIN&&o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("homes")}},o.createElement(ke,{src:Le.homes,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},this.props.homes.isUpToDate?(this.props.homes.isError?0:this.props.homes.data.length)+" HOME"+(this.props.homes.isError||0===this.props.homes.data.length||this.props.homes.data.length>1?"S":""):"Loading")),this.props.appUser.role===q.ADMIN&&o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("blocks")}},o.createElement(ke,{src:Le.blocks,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},this.props.blocks.isUpToDate?(this.props.blocks.isError?0:this.props.blocks.data.length)+" BLOCK"+(this.props.blocks.isError||0===this.props.blocks.data.length||this.props.blocks.data.length>1?"S":""):"Loading")),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("all-visitors")}},o.createElement(ke,{src:Le.visitors,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"VISITOR(S)")),o.createElement(we,{className:"fl pointer",style:Object(y.a)({},ut.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("payment")}},o.createElement(ke,{src:Le.money,style:ut.img}),o.createElement(we,{className:"pointer",style:ut.txt},"PAYMENT")))))}}]),t}(o.Component),ft={content:{flex:1,width:"100%"}},gt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{style:yt.container},o.createElement("input",{type:"radio",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),J(this.props.text)&&o.createElement("label",{style:yt.text},this.props.text))}}]),t}(o.Component);gt.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var yt={container:{marginRight:10},circle:{height:24,width:24,borderRadius:12,borderWidth:2,borderColor:B,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,borderRadius:6,backgroundColor:B},text:{marginLeft:5}},Et={container:{},head:{flexDirection:"row",alignContent:"flex-start",backgroundColor:B,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},title:{flex:15,alignSelf:"flex-start",width:"auto","font-weight":"bold",fontSize:20,color:Z},close:{flex:1,alignSelf:"flex-end",marginBottom:5},row:{marginTop:3,marginBottom:3,paddingTop:5,paddingBottom:5},ele:{flex:1,width:"100%"},radio:{borderColor:Y,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioText:{},radioActive:{backgroundColor:B,borderColor:B,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioActiveText:{color:Z},saveBtn:{marginTop:5,marginBottom:3,paddingTop:5,paddingBottom:5}},bt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onImageSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=Q();o+="."+a[a.length-1],n.setState({fileName:o});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){e||Me.fail(t||"Failed to upload file.")})}}},n.onSave=function(){var e=n.state.name;if(J(e)?e+=" ("+n.state.type+")":e=n.state.type,!1===n.state.showHomes&&n.state.homeId.length>0&&J(e)&&J(n.state.fileName)){var t={_id:"",name:e,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",image:n.state.fileName};n.props.onSave(n.state.homeId,t,n.props.user,n.props.appUser,function(t){!0===t||Me.fail("Failed to save visitor "+e+".")}),n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""}),Me.info("Visitor will be saved and notified to the home.")}else Me.warn("Please fill Home and Image before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""})},n.state={homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onClear=n.onClear.bind(Object(de.a)(n)),n.onImageSelect=n.onImageSelect.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(we,{style:vt.container},o.createElement(we,{style:Et.row},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("all-visitors")},style:Object(y.a)({},vt.ele,{color:H,fontWeight:"bold",textAlign:"right"})},"View all Active Visitors"))),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Et.ele,vt.ele,{flexDirection:"row",padding:12,borderWidth:1,borderColor:Y,borderRadius:5}),value:this.state.homeSearchText,onChange:function(t){return e.setState({showHomes:!0,homeSearchText:t.target.value})}})),this.state.showHomes&&J(this.state.homeSearchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(je,{style:Object(y.a)({},Et.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.homeSearchText.toLowerCase())>=0}).map(function(t,n){return o.createElement(Ce,{className:"pointer",key:"ho"+n,style:Object(y.a)({},vt.ele,{flexDirection:"column",margin:3,padding:6,backgroundColor:G}),onClick:function(){e.setState({homeSearchText:t.number,homeId:t._id,showHomes:!1})}},t.number)})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"VISITOR"===this.state.type,text:"Visitor",onPress:function(){return e.setState({type:"VISITOR"})}}),o.createElement(gt,{isActive:"FOOD"===this.state.type,text:"Food",onPress:function(){return e.setState({type:"FOOD"})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},vt.ele,Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},vt.ele,Re,Et.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},vt.ele,Re,Et.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:this.onImageSelect}),J(this.state.fileName)&&o.createElement(Ce,{style:Object(y.a)({},vt.ele,{marginLeft:15})},this.state.fileName)),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{title:"SAVE",onPress:this.onSave,style:Object(y.a)({},vt.ele,{marginRight:10})}),o.createElement(Te,{title:"CLEAR",onPress:this.onClear,style:vt.ele})))}}]),t}(o.Component),vt={container:{width:"100%",paddingLeft:15,paddingRight:15},ele:{fontSize:17}},Ot=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:St.content},o.createElement(bt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.props.onSaveVisitor,onUpload:this.props.onUpload}),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),St={content:{flex:1,width:"100%"}},wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.appUser.role===q.USER?this.props.appUser.homeIndex>=0&&J(this.props.user.homes)?o.createElement(dt,{history:this.props.history,user:this.props.user,home:this.props.user.homes[this.props.appUser.homeIndex],onPaymentUpload:function(t,n,a){return e.props.onPaymentUpload(t,n,e.props.user,a)},onPaymentUpdate:function(t,n,a){return e.props.onPaymentUpdate(t,n,e.props.appUser.homeIndex,e.props.user,a)}}):o.createElement(Ce,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."):this.props.appUser.role===q.ADMIN||this.props.appUser.role===q.MANAGER?o.createElement(ht,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,ads:this.props.ads,users:this.props.users,homes:this.props.homes,tickets:this.props.tickets,blocks:this.props.blocks}):this.props.appUser.role===q.GATEKEEPER?o.createElement(Ot,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSaveVisitor:this.props.onSaveVisitor,onUpload:this.props.onUpload}):o.createElement(Ce,{style:{margin:20}},"No role assigned to you. Please contact administrator/manager.")}}]),t}(o.Component),jt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks}},function(e){return{onPaymentUpload:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new te).post("paymentupload",function(e,o){X(e)&&X(e.data)&&e.data.approvalid>0?(t(Qe(n)),a(!0)):a(!1)},e)}}(t,0,a,o))},onPaymentUpdate:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new te).post("payment/transaction/"+e,function(r,i){if(X(r)&&X(r.data)&&r.data.length>0){t._id=r.data;var l=a.homes[n].payments.findIndex(function(t){return t._id===e});a.homes[n].payments[l].transactions||(a.homes[n].payments[l].transactions=[]),a.homes[n].payments[l].transactions.push(t),s(Qe(a)),o(!0)}else o(!1)},t)}}(t,n,a,o,s))},onSaveVisitor:function(t,n,a,o,s){return e(tt(t,n,0,0,s))},onUpload:function(t,n){return e(nt(t,n))}}})(wt),kt=function(e,t,n,a){return function(o){e&&e._id&&e._id.length>0?(new te).put("member/"+e._id,function(s,r){if(X(s)&&X(s.data)&&s.data.length>0){var i=t.homes[n].members,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,i[l].type=e.type,t.homes[n].members=i,o(xt(t)),a(!0,"")}else a(!1,r)},e):(new te).post("member/"+t.homes[n]._id,function(s,r){if(X(s)&&X(s.data)&&s.data.length>0){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].members;i.push(e),t.homes[n].members=i,o(xt(t)),a(!0,"")}else a(!1,r)},e)}},xt=function(e){return{type:a.LOAD_USER,payload:e}},It=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Nt={content:{backgroundColor:W},row:{alignItems:"flex-start",borderBottomColor:Y,borderBottomWidth:1,"border-bottom-style":"solid",marginTop:5},ele:{alignItems:"flex-start",marginTop:1,marginBottom:3,padding:2}},Ct={addIcon:{width:20,height:20,cursor:"pointer"},editIcon:{width:20,height:20,cursor:"pointer"},deleteIcon:{width:18,height:20,cursor:"pointer"},closeIcon:{width:17,height:17,cursor:"pointer"},datePicker:{width:20,height:23,cursor:"pointer"}},At=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)&&J(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),Me.success("Member saved successfully.")):Me.fail(J(t)?t:"Failed to save member.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Member removed successfully."):Me.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("new-member")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),J(this.props.user.homes[this.props.homeIndex].members)?this.props.user.homes[this.props.homeIndex].members.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Re,Et.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Nt.ele},o.createElement(gt,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(gt,{isActive:"OWNER"===e.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(gt,{isActive:"TENANT"===e.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.name)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"Female"))),J(t.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.emailId)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.type)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No Member found!!!"),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Tt=Object(p.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(kt(t,n,a,o))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new te).delete("member/"+e,function(r,i){X(r)&&X(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(xt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&J(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(It(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(At),Ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)&&J(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),Me.success("Member saved successfully.")):Me.fail(J(t)?t:"Failed to save member.")})}else Me.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Re,Et.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(gt,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Lt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(kt(t,n,a,o))}}})(Ut),Dt=function(e,t,n,a){return function(o){e&&J(e._id)?(new te).put("vehicle/"+e._id,function(s,r){if(X(s)&&J(s.data)){var i=t.homes[n].vehicles,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].type=e.type,t.homes[n].vehicles=i,o(Rt(t)),a(!0)}else a(!1)},e):(new te).post("vehicle/"+t.homes[n]._id,function(s,r){if(X(s)&&J(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].vehicles;i.push(e),t.homes[n].vehicles=i,o(Rt(t)),a(!0)}else a(!1)},e)}},Rt=function(e){return{type:a.LOAD_USER,payload:e}},_t=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.number)&&J(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",type:""}),Me.success("Vehicle saved successfully.")):Me.fail("Failed to save vehicle.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Vehicle removed successfully."):Me.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("new-vehicle")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),J(this.props.user.homes[this.props.homeIndex].vehicles)?this.props.user.homes[this.props.homeIndex].vehicles.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(gt,{isActive:"TWO WHEELER"===e.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(gt,{isActive:"FOUR WHEELER"===e.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",type:""})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.type)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.number)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,type:t.type})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No Vehicle found!!!"),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Mt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Dt(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).delete("vehicle/"+e,function(s,r){X(s)&&X(s.data)&&!0===s.data?(t.homes[n].vehicles=t.homes[n].vehicles.filter(function(t,n){return t._id!==e}),o(Rt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(_t),Pt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.number)&&J(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",type:""}),Me.success("Vehicle saved successfully.")):Me.fail("Failed to save vehicle.")})}else Me.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"TWO WHEELER"===this.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(gt,{isActive:"FOUR WHEELER"===this.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Ft=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Dt(t,n,a,o))}}})(Pt),Bt=function(e,t,n,a){return function(o){e&&J(e._id)?(new te).put("servent/"+e._id,function(s,r){if(X(s)&&J(s.data)){var i=t.homes[n].servents,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,t.homes[n].servents=i,o(Ht(t)),a(!0)}else a(!1)},e):(new te).post("servent/"+t.homes[n]._id,function(s,r){if(X(s)&&J(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].servents;i.push(e),t.homes[n].servents=i,o(Ht(t)),a(!0)}else a(!1)},e)}},Ht=function(e){return{type:a.LOAD_USER,payload:e}},Wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),Me.success("Servent saved successfully.")):Me.fail("Failed to save servent.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Servent removed successfully."):Me.fail("Failed to remove servent.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("new-servent")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),J(this.props.user.homes[this.props.homeIndex].servents)?this.props.user.homes[this.props.homeIndex].servents.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Re,Et.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Nt.ele},o.createElement(gt,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.name)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"Female"))),J(t.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.emailId)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No Servent found!!!"),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Vt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Bt(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).delete("servent/"+e,function(s,r){X(s)&&X(s.data)&&!0===s.data?(t.homes[n].servents=t.homes[n].servents.filter(function(t,n){return t._id!==e}),o(Ht(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Wt),Gt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),Me.success("Servent saved successfully.")):Me.fail("Failed to save servent.")})}else Me.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},Re,Et.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Yt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Bt(t,n,a,o))}}})(Gt),Kt=function(e,t,n,a,o){return function(s){e&&e._id&&e._id.length>0?(new te).put("ticket/"+e._id,function(n,r){if(X(n)&&J(n.data)){var i=[];if(J(a.data)){var l=(i=a.data).findIndex(function(e){return e._id===n.data});i[l]._id=n.data,i[l].title=e.title,i[l].description=e.description,i[l].status=e.status,i[l].updatedBy=t.name,s(qt(i,!0,!1,""))}o(!0)}else o(!1)},e):(new te).post("ticket/"+t.homes[n]._id,function(r,i){if(X(r)&&J(r.data)){var l=[];J(a.data)&&((l=a.data).unshift({_id:r.data,_homeId:t.homes[n].number,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),s(qt(l,!0,!1,""))),o(!0)}else o(!1)},e)}},Zt=function(e){return{type:a.LOAD_USER,payload:e}},qt=function(e,t,n,o){return{type:a.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},zt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.title)&&J(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}),Me.success("Ticket saved successfully.")):Me.fail("Failed to save ticket.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?Me.success("Ticket removed successfully."):Me.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})},n.onResolve=function(e){Object(Ve.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onResolve(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?Me.success("Ticket resolved successfully."):Me.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})},n.onStart=function(e){Object(Ve.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onStart(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?Me.success("Ticket started successfully."):Me.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})},n.onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[],comment:""}):n.setState({viewId:e,comments:t,comment:""})},n.onAddComment=function(e){J(n.state.comment)?(n.setState({isLoading:!0}),n.props.onAddComment(e,{_id:"",comment:n.state.comment,createdBy:n.props.user.name,createdAt:new Date},n.props.appUser,n.props.user,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({comment:""}),Me.success("Comment added successfully.")):Me.fail("Failed to add comment.")})):Me.warn("Please fill comment before Add.")},n.state={isLoading:!1,data:[],isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n.onResolve=n.onResolve.bind(Object(de.a)(n)),n.onStart=n.onStart.bind(Object(de.a)(n)),n.onView=n.onView.bind(Object(de.a)(n)),n.onAddComment=n.onAddComment.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.appUser.role===q.ADMIN||this.props.appUser.role===q.MANAGER?"":this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||Me.fail("Failed to load Tickets.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},this.props.appUser.role===q.USER&&o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ticket")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),X(this.props.tickets)&&this.props.tickets.isUpToDate&&!this.props.tickets.isError&&J(this.props.tickets.data)?this.props.tickets.data.map(function(t,n){return o.createElement(we,{key:"tkt"+n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.createdBy+" from "+t._homeId+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}}):o.createElement(Ce,null,t.title)),o.createElement(we,{style:Nt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}}):o.createElement(Ce,null,t.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.status)),e.state.isEdit&&e.state.id===t._id?o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon}))):o.createElement(we,{style:Nt.ele},e.props.appUser.role===q.USER&&o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),e.props.appUser.role===q.USER&&o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon})),e.props.appUser.role===q.USER&&o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.onResolve(t._id)}},o.createElement(Ce,{className:"pointer",style:{color:H}},"RESOLVE")),(e.props.appUser.role===q.ADMIN||e.props.appUser.role===q.MANAGER)&&"INIT"===t.status&&o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.onStart(t._id)}},o.createElement(Ce,{className:"pointer",style:{color:H}},"START")),o.createElement(Ae,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Ce,{className:"pointer",style:{color:H}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(we,{style:Jt.cmntsCnr},o.createElement(we,{style:Jt.cmntsHdr},o.createElement(Ce,{style:Jt.cmntsHdrTxt},"Comments")),o.createElement(we,{style:Jt.cmntsCnt},J(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(we,{key:"tktcmt"+t,style:0===t?Jt.cmntCnrFst:Jt.cmntCnr},o.createElement(we,{style:Jt.cmntHdr},o.createElement(Ce,null,e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:Jt.cmntCnt},o.createElement(Ce,null,e.comment)))}):o.createElement(Ce,{style:{padding:20}},"No Comments found!!!"),o.createElement(we,{style:Jt.addCmntCnt},o.createElement(Ie,{placeholder:"Comment Text",className:"form-control",style:Object(y.a)({},Re,Jt.newCmnt),value:e.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),o.createElement(we,{style:Jt.saveBtn},o.createElement(Te,{title:"ADD COMMENT",onPress:function(){return e.onAddComment(t._id)}}))))))}):o.createElement(Ce,{style:{padding:20}},this.props.tickets.isUpToDate?this.props.tickets.isError?this.props.tickets.errorMessage:"No Ticket found!!!":"Loading..."),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Jt={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:Y,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:Y},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{},addCmntCnt:{marginTop:5,marginBottom:5},newCmnt:{width:"100%",borderWidth:1,borderColor:Y},saveBtn:{marginTop:5}},Xt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(e){e(qt([],!1,!1,"")),(new te).get("tickets"+(J(t)?"/"+t:""),function(t,a){X(t)?(e(qt(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onSave:function(t,n,a,o,s){return e(Kt(t,n,a,o,s))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new te).delete("ticket/"+e,function(r,i){X(r)&&X(r.data)&&!0===r.data?(((","+t.role+",").indexOf(","+q.ADMIN+",")>=0||(","+t.role+",").indexOf(","+q.MANAGER+",")>=0)&&X(a)&&a.isUpToDate&&!a.isError&&J(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(qt(a.data,!0,!1,""))),(","+t.role+",").indexOf(","+q.USER+",")>=0&&(t.homes[n].tickets=t.homes[n].tickets.filter(function(t,n){return t._id!==e}),s(Zt(t))),o(!0)):o(!1)})}}(t,n,a,o,s))},onResolve:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new te).delete("ticket/resolve/"+e,function(n,s){X(n)&&X(n.data)&&!0===n.data?(J(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(qt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onStart:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new te).put("ticket/start/"+e,function(n,s){if(X(n)&&X(n.data)&&!0===n.data){if(J(a.data)){var r=[],i=(r=a.data).findIndex(function(t){return t._id===e});r[i].status="IN-PROGRESS",t(qt(r,!0,!1,""))}o(!0)}else o(!1)},{status:"IN-PROGRESS"})}}(t,0,0,o,s))},onAddComment:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){J(t._id)?(new te).put("ticket/comment/"+t._id,function(a,r){if(X(a)&&J(a.data)){t.createdAt=new Date;var i=[];if(J(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e}),c=i[l].comments.findIndex(function(e){return e._id===t._id});i[l].comments[c]=t,n(qt(i,!0,!1,""))}s(!0)}else s(!1)},t):(new te).post("ticket/comment/"+e,function(a,r){if(X(a)&&J(a.data)){t._id=a.data,t.createdAt=new Date;var i=[];if(J(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e});i[l].comments.unshift(t),n(qt(i,!0,!1,""))}s(!0)}else s(!1)},t)}}(t,n,0,0,s,r))}}})(zt),$t=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.title)&&J(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:"",status:"INIT"}),Me.success("Ticket saved successfully.")):Me.fail("Failed to save ticket.")})}else Me.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",title:"",description:"",status:"INIT"},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},this.props.appUser.role===q.USER?o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))):o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings->My Role and try again."))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Qt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,n,a,o,s){return e(Kt(t,n,a,o,s))}}})($t),en=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",image:"img.jpg"};n.props.onSave(n.props.user.homes[n.props.appUser.homeIndex]._id,e,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""}),Me.success("Visitor saved successfully.")):Me.fail("Failed to save visitor.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Visitor removed successfully."):Me.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1,isZoomImage:!1,zoomImage:"",isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Me.fail(t)})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},J(this.state.data)?this.state.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Et.ele},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Re,Et.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Nt.ele},o.createElement(gt,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),J(t.name)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"["+t._homeId+"] "+t.name)),(t.age>0||J(t.gender))&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"Female"))),J(t.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.mobileNo)),J(t.image)&&o.createElement(we,{style:Nt.ele},o.createElement(Ae,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(ke,{src:F+t.image,style:{height:100}}))))}):o.createElement(Ce,{style:{padding:20}},"No Visitor found!!!"),o.createElement(We.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(we,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(ke,{src:F+this.state.zoomImage,style:{height:"40%"}}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),tn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onLoad:function(t,n,a,o){return e(et(0,n,a,o))},onSave:function(t,n,a,o,s){return e(tt(t,n,0,0,s))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new te).delete("visitor/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,0,0,o))}}})(en),nn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).passwordPolicyCheck=function(e){var t=/[A-Z]/,n=/[a-z]/,a=/[0-9]/,o=/[!|@|#|$|%|^|&|*|(|)|-|_]/,s="";if(e.length<6)return s="New Password not long enough!";for(var r=0,i=0,l=0,c=0,m=0;m<e.length;m++)t.test(e[m])?r++:n.test(e[m])?i++:a.test(e[m])?l++:o.test(e[m])&&c++;return r<1||i<1||l<1||c<1?s="New Password dose not match with password policy!":s},n.onUpdate=function(){if(J(n.state.password)&&J(n.state.newPassword)&&J(n.state.confirmNewPassword))if(n.state.newPassword===n.state.confirmNewPassword){var e=n.passwordPolicyCheck(n.state.newPassword);e.length<1?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.password,n.state.newPassword,function(e,t){n.setState({isLoading:!1}),!0===e?(Me.success("Password updated successfully. Please login with your new password."),n.props.onLogout(function(e){})):Me.fail(t)})):Me.warn(e)}else Me.warn("New Password and Confirm New Password not matchs.");else Me.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,password:"",newPassword:"",confirmNewPassword:""},n.passwordPolicyCheck=n.passwordPolicyCheck.bind(Object(de.a)(n)),n.onUpdate=n.onUpdate.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"password",placeholder:"Password",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"password",placeholder:"New Password",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"password",placeholder:"Confirm New Password",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"UPDATE",onPress:this.onUpdate})),o.createElement(we,{style:{marginTop:7}},o.createElement(Ce,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),an=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).post("account/changepassword/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0,""):a(!1,t)},{password:t,newPassword:n})}}(t,n,a,o))},onLogout:function(t){return e(ne(t))}}})(nn),on=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){J(n.state.name)&&J(n.state.mobileNo)&&J(n.state.emailId)?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.name,n.state.mobileNo,n.state.emailId?n.state.emailId.toLowerCase():"",n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?Me.success("Profile updated successfully."):Me.fail(t)})):Me.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,name:"",mobileNo:"",emailId:""},n.onUpdate=n.onUpdate.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.user.name,mobileNo:this.props.user.mobileNo,emailId:this.props.user.emailId})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),sn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(r){(new te).put("account/profile/"+e,function(e,i){X(e)&&X(e.data)&&!0===e.data?(o.name=t,o.mobileNo=n,o.emailId=a,r(re(o)),s(!0,"")):s(!1,i)},{name:t,mobileNo:n,emailId:a})}}(t,n,a,o,s,r))}}})(on),rn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){J(n.state.role)?(n.setState({isLoading:!0}),n.props.onUpdate(n.state.role,function(e,t){n.setState({isLoading:!1}),!0===e?Me.success("Role updated successfully."):Me.fail(t)})):Me.warn("Please select role before Update.")},n.state={isLoading:!1,role:""},n.onUpdate=n.onUpdate.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({role:this.props.appUser.role})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(Ne,{className:"form-control",value:this.state.role,style:Et.ele,onChange:function(t){return e.setState({role:t.target.value})}},this.props.user.role.split(",").map(function(e,t){return o.createElement("option",{key:"role"+t,value:e},e)}))),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),ln=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,n){return e(function(e,t){return function(n){n(oe(e)),t(!0,"")}}(t,n))}}})(rn),cn=function(e,t){return function(n){n(un([],!1,!1,"")),(new te).get("ads/"+e,function(e,a){X(e)&&X(e.data)?(n(un(e.data,!0,!1,"")),t(!0)):t(!1)})}},mn=function(e,t,n,a,o){return function(s){t&&J(t._id)?(new te).put("ad/"+t._id,function(e,n){if(X(e)&&J(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].title=t.title,a[r].description=t.description,s(un(a,!0,!1,"")),o(!0)}else o(!1)},t):(new te).post("ad/"+e,function(e,r){X(e)&&J(e.data)?(a.unshift({_id:e.data,title:t.title,description:t.description,createdBy:n.name,createdAt:new Date}),s(un(a,!0,!1,"")),o(!0)):o(!1)},t)}},un=function(e,t,n,o){return{type:a.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},dn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.title)&&J(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:""}),Me.success("Ad saved successfully.")):Me.fail("Failed to save ad.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Ad removed successfully."):Me.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1}),t||Me.fail("Failed to load Ads.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ad")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),this.props.ads.isUpToDate&&!this.props.ads.isError&&J(this.props.ads.data)?this.props.ads.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:""})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.title)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No Ad found!!!":"Loading..."),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),pn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,n){return e(cn(t,n))},onSave:function(t,n,a,o,s){return e(mn(t,n,a,o,s))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new te).delete("ad/"+e,function(o,s){X(o)&&X(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(un(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(dn),hn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.title)&&J(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:""}),Me.success("Ad saved successfully.")):Me.fail("Failed to save ad.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),fn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,n,a,o,s){return e(mn(t,n,a,o,s))}}})(hn),gn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(e){var t="";if(n.props.homes.isUpToDate&&!n.props.homes.isError&&J(n.props.homes.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&J(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.userId===e}).map(function(e,t){return a.push(e.homeId)}),n.props.homes.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.number})}return t},n.onSearch=function(){if(J(n.state.searchText)&&n.props.users.isUpToDate&&!n.props.users.isError&&J(n.props.users.data)){var e=n.state.searchText.toLocaleLowerCase(),t=n.props.homes.data.filter(function(t){return t.number.toLocaleLowerCase()===e});n.setState({searchResult:n.props.users.data.filter(function(n){return(n.name+"").toLocaleLowerCase().indexOf(e)>=0||(n.mobileNo+"").toLocaleLowerCase().indexOf(e)>=0||(n.emailId+"").toLocaleLowerCase().indexOf(e)>=0||(n.number+"").toLocaleLowerCase().indexOf(e)>=0||J(t.filter(function(e){return e.memberIds.indexOf(n._id)>=0}))}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.appUser.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),Me.success("User removed successfully.")):Me.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getHomes=n.getHomes.bind(Object(de.a)(n)),n.onSearch=n.onSearch.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-user/0")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),o.createElement(we,{style:Object(y.a)({},Et.row,{marginTop:0,paddingTop:0})},o.createElement(xe,{type:"text",placeholder:"Search User",className:"form-control",style:Object(y.a)({},Re,Et.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ae,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(ke,{className:"pointer",src:Le.search,style:{width:30,height:30}}))),J(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(we,{key:"usr"+n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Name: "+(J(t.name)?t.name:""))),t._id!==e.props.user._id&&o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-user/"+t._id)}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No user match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(we,{style:Nt.row},o.createElement(we,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ce,{style:{color:H,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),yn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new te).delete("member/"+e,function(r,i){X(r)&&X(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(xt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&J(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(It(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(gn),En=function(e,t,n){return function(a){(new te).get("home/"+e,function(e,a){X(e)&&X(e.data)&&J(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):n(J(e.message)?e.message:"Failed to load Home.")})}},bn=function(e){return{type:a.LOAD_USER,payload:e}},vn=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},On=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(e){var t="";if(n.props.users.isUpToDate&&!n.props.users.isError&&J(n.props.users.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&J(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.homeId===e}).map(function(e,t){return a.push(e.userId)}),n.props.users.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.name})}return t},n.onSearch=function(){if(J(n.state.searchText)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&J(n.props.homes.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.homes.data.filter(function(t){return(t.number+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homes,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),Me.success("Home removed successfully.")):Me.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getUsers=n.getUsers.bind(Object(de.a)(n)),n.onSearch=n.onSearch.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-home/0")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),o.createElement(we,{style:Object(y.a)({},Et.row,{marginTop:0,paddingTop:0})},o.createElement(xe,{type:"text",placeholder:"Search Home",className:"form-control",style:Object(y.a)({},Re,Et.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ae,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(ke,{className:"pointer",src:Le.search,style:{width:30,height:30}}))),J(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(we,{key:"home"+n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Number: "+t.number)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.props.history.push("view-home/"+t._id)}},o.createElement(ke,{src:Le.view,style:Ct.editIcon})),o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-home/"+t._id)}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No home match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(we,{style:Nt.row},o.createElement(we,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ce,{style:{color:H,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Sn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).delete("home/"+e,function(s,r){X(s)&&X(s.data)&&!0===s.data?(t.homes=t.homes.filter(function(t,n){return t._id!==e}),n.data=n.data.filter(function(t,n){return t._id!==e}),o(bn(t)),o(vn(n.data,!0,!1,"")),a(!0)):a(!1)})}}(t,n,a,o))}}})(On),wn=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{style:jn.container},o.createElement("input",{type:"checkbox",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),o.createElement("label",{style:jn.text},this.props.text))}}]),t}(o.Component);wn.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var jn={container:{marginRight:10},circle:{height:24,width:24,borderWidth:2,borderColor:B,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,backgroundColor:B},text:{marginLeft:5}},kn={mListCnr:{borderColor:H,borderWidth:1,height:"50%"},mListActiveRow:{padding:3,backgroundColor:H,color:Z,borderBottomWidth:1,borderBottomColor:Y,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"},mListRow:{padding:3,borderBottomWidth:1,borderBottomColor:Y,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"}},xn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(){var e="";return J(n.state.homeIds)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&J(n.props.homes.data)&&n.props.homes.data.filter(function(e){return n.state.homeIds.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.number}),e},n.onSave=function(){if(J(n.state.name)&&n.state.age>0&&J(n.state.gender)){var e="";n.state.role.isAdmin&&(e=q.ADMIN),n.state.role.isManager&&(e+=(e.length>0?",":"")+q.MANAGER),n.state.role.isGatekeeper&&(e+=(e.length>0?",":"")+q.GATEKEEPER),n.state.role.isUser&&(e+=(e.length>0?",":"")+q.USER),n.setState({isLoading:!0});var t={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:e};n.props.onSave(t,n.state.homeIds,n.props.user,n.props.users,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),Me.success("User saved successfully.")):Me.fail(J(t)?t:"Failed to save user.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleHomeModel=function(e){n.setState({isShowHomes:e})},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1},isShowHomes:!1},n.getHomes=n.getHomes.bind(Object(de.a)(n)),n.onSave=n.onSave.bind(Object(de.a)(n)),n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t,n){t&&J(t._id)?e.setState({isLoading:!1,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,homeIds:n,role:{isAdmin:(","+t.role+",").indexOf(","+q.ADMIN+",")>=0,isManager:(","+t.role+",").indexOf(","+q.MANAGER+",")>=0,isGatekeeper:(","+t.role+",").indexOf(","+q.GATEKEEPER+",")>=0,isUser:(","+t.role+",").indexOf(","+q.USER+",")>=0}}):Me.fail("Failed to load User.")},function(e){Me.fail(J(e)?e:"Failed to load User.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Re,Et.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(gt,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(gt,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Role: ")),o.createElement(we,{style:Et.row},o.createElement(wn,{isActive:this.state.role.isAdmin,text:q.ADMIN,onPress:function(){e.state.role.isAdmin=!e.state.role.isAdmin,e.setState({})}}),o.createElement(wn,{isActive:this.state.role.isManager,text:q.MANAGER,onPress:function(){e.state.role.isManager=!e.state.role.isManager,e.setState({})}}),o.createElement(wn,{isActive:this.state.role.isGatekeeper,text:q.GATEKEEPER,onPress:function(){e.state.role.isGatekeeper=!e.state.role.isGatekeeper,e.setState({})}}),o.createElement(wn,{isActive:this.state.role.isUser,text:q.USER,onPress:function(){e.state.role.isUser=!e.state.role.isUser,e.setState({})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Home(s): "+this.getHomes())),o.createElement(we,{style:Et.row},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isShowHomes:!0})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon}))),this.props.homes.isUpToDate&&!this.props.homes.isError&&J(this.props.homes.data)&&o.createElement(We.a,{open:this.state.isShowHomes,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(we,{style:Ge.container},o.createElement(je,{style:Object(y.a)({},kn.mListCnr,{maxHeight:"50%"})},this.props.homes.data.map(function(t,n){return o.createElement(Ce,{key:"home"+n,style:e.state.homeIds.indexOf(t._id)>=0?kn.mListActiveRow:kn.mListRow,onClick:function(){e.state.homeIds.indexOf(t._id)>=0?e.setState({homeIds:e.state.homeIds.filter(function(e){return e!==t._id})}):(e.state.homeIds.push(t._id),e.setState({}))}},t.number)})))),o.createElement(we,{style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),In=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("member/"+e,function(e,a){X(e)&&X(e.data)&&X(e.data.member)&&J(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):n(J(e.message)?e.message:"Failed to load Member.")})}}(t,n,a))},onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(e=Object.assign(e,{isAM:!0,homeIds:t}))&&J(e._id)?(new te).put("member/"+e._id,function(t,s){if(X(t)&&X(t.data)&&t.data.length>0){if(a.isUpToDate&&!a.isError&&J(a.data)){var r=a.data.findIndex(function(e){return e._id===t.data});a.data[r]._id=t.data,a.data[r].name=e.name,n(It(a.data,!0,!1,""))}o(!0,"")}else o(!1,s)},e):(new te).post("member/0",function(t,s){X(t)&&X(t.data)&&t.data.length>0?(a.isUpToDate&&!a.isError&&J(a.data)&&(a.data.push({_id:t.data,name:e.name}),n(It(a.data,!0,!1,""))),o(!0,"")):o(!1,s)},e)}}(t,n,0,o,s))}}})(xn),Nn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(){var e="";return J(n.state.members)&&n.props.users.isUpToDate&&!n.props.users.isError&&J(n.props.users.data)&&n.props.users.data.filter(function(e){return n.state.members.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.name+(J(t.number)?"("+t.number+")":"")}),e},n.onSave=function(){if(J(n.state.blockId)&&J(n.state.number)){n.setState({isLoading:!0});var e={_id:n.state.id,_blockId:n.state.blockId,number:n.state.number,address:n.state.address,bedRoom:n.state.bedRoom,parking:n.state.parking,description:n.state.description,memberIds:n.state.members};n.props.onSave(e,n.props.user,n.props.homes,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),Me.success("Home saved successfully.")):Me.fail(J(t)?t:"Failed to save home.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleUserModel=function(e){n.setState({isShowUsers:e})},n.state={isLoading:!1,id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[],isShowUsers:!1},n.getUsers=n.getUsers.bind(Object(de.a)(n)),n.onSave=n.onSave.bind(Object(de.a)(n)),n.onToggleUserModel=n.onToggleUserModel.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){t&&J(t._id)?e.setState({isLoading:!1,id:t._id,blockId:t._blockId,number:t.number,address:t.address,bedRoom:t.bedRoom,parking:t.parking,description:t.description,members:t.memberIds}):Me.fail("Failed to load Home.")},function(e){Me.fail(J(e)?e:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(Ne,{className:"form-control",value:this.state.blockId,style:Et.ele,onChange:function(t){return e.setState({blockId:t.target.value})}},o.createElement("option",{key:"block0",value:""},"Select Block"),this.props.blocks&&this.props.blocks.isUpToDate&&!this.props.blocks.isError&&J(this.props.blocks.data)&&this.props.blocks.data.map(function(e,t){return o.createElement("option",{key:"block"+t,value:e._id},e.name)}))),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Address",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"No of bed rooms: ")),o.createElement(we,{style:Et.row},o.createElement(gt,{isActive:1===this.state.bedRoom,text:"1",onPress:function(){return e.setState({bedRoom:1})}}),o.createElement(gt,{isActive:2===this.state.bedRoom,text:"2",onPress:function(){return e.setState({bedRoom:2})}}),o.createElement(gt,{isActive:3===this.state.bedRoom,text:"3",onPress:function(){return e.setState({bedRoom:3})}}),o.createElement(gt,{isActive:4===this.state.bedRoom,text:"4",onPress:function(){return e.setState({bedRoom:4})}}),o.createElement(gt,{isActive:5===this.state.bedRoom,text:"5",onPress:function(){return e.setState({bedRoom:5})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Parking",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.parking,onChange:function(t){return e.setState({parking:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"User(s): "+this.getUsers())),o.createElement(we,{style:Et.row},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isShowUsers:!0})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon}))),this.props.users.isUpToDate&&!this.props.users.isError&&J(this.props.users.data)&&o.createElement(We.a,{open:this.state.isShowUsers,onClose:function(){return e.onToggleUserModel(!1)}},o.createElement(we,{style:Ge.container},o.createElement(je,{style:Object(y.a)({},kn.mListCnr,{maxHeight:"50%"})},this.props.users.data.map(function(t,n){return o.createElement(Ce,{key:"user"+n,style:e.state.members.indexOf(t._id)>=0?kn.mListActiveRow:kn.mListRow,onClick:function(){e.state.members.indexOf(t._id)>=0?e.setState({members:e.state.members.filter(function(e){return e!==t._id})}):(e.state.members.push(t._id),e.setState({}))}},t.name+(t.number?"("+t.number+")":""))})))),o.createElement(we,{style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Cn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(En(t,n,a))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(t){e&&J(e._id)?(new te).put("home/"+e._id,function(o,s){if(X(o)&&X(o.data)&&o.data.length>0){if(n.isUpToDate&&!n.isError&&J(n.data)){var r=n.data.findIndex(function(e){return e._id===o.data});n.data[r]._id=o.data,n.data[r].number=e.number,t(vn(n.data,!0,!1,""))}a(!0,"")}else a(!1,s)},e):(new te).post("home/0",function(o,s){X(o)&&X(o.data)&&o.data.length>0?(n.isUpToDate&&!n.isError&&J(n.data)&&(n.data.push({_id:o.data,number:e.number}),t(vn(n.data,!0,!1,""))),a(!0,"")):a(!1,s)},e)}}(t,0,a,o))},onCheckNumberAvail:function(t,n,a){return e(function(e,t,n){return function(e){(new te).get("home/checkno/"+t,function(e,t){X(e)&&X(e.data)&&!0===e.data?n(!0):n(!1)})}}(0,n,a))}}})(Nn),An=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.getHomeNumber=function(e){if(n.props.homes&&n.props.homes.data&&n.props.homes.data.length>0){var t=n.props.homes.data.filter(function(t,n){return t._id===e});return t&&t.length>0?t[0].number:""}return""},n.onExit=function(e){Object(Ve.confirmAlert)({title:"Confirm to Send Out",message:"Are you sure you wish to Send Out?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onExit(e,n.props.user,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),Me.success("Visitor sent out successfully.")):Me.fail("Failed to send out visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1,isZoomImage:!1,zoomImage:""},n.onExit=n.onExit.bind(Object(de.a)(n)),n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,"",function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Me.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:Nt.row},o.createElement(Ce,null,"No of Active Visitors: "+this.state.data.length)),J(this.state.data)?this.state.data.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),J(t.name)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"["+t._homeId+"] "+t.name)),(t.age>0||J(t.gender))&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,(t.age>0?t.age:"")+(t.age>0&&J(t.gender)?", ":"")+(J(t.gender)?"M"===t.gender?"Male":"Female":""))),J(t.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.mobileNo)),J(t.image)&&o.createElement(we,{style:Nt.ele},o.createElement(Ae,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(ke,{src:F+t.image,style:{height:100}}))),e.props.appUser.role===q.GATEKEEPER&&o.createElement(we,{style:Nt.ele},o.createElement(Te,{title:"Exit",onPress:function(){e.onExit(t._id)}})))}):o.createElement(Ce,{style:{padding:20}},"No Visitor found!!!"),o.createElement(We.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(we,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(ke,{src:F+this.state.zoomImage,style:{height:"40%"}}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Tn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e(et(0,n,a,o))},onExit:function(t,n,a){return e(function(e,t,n){return function(t){(new te).delete("visitor/exit/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,0,a))}}})(An),Un=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onPush=function(){J(n.state.title)&&J(n.state.body)?Object(Ve.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0});var e={title:n.state.title,body:n.state.body};n.props.onPush(n.props.user.client._id,e,n.props.user,function(e){if(n.setState({isLoading:!1}),X(e)){var t=n.state.data;t.unshift(e),n.setState({data:t,title:"",body:""}),Me.success("Notification pushed successfully.")}else Me.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):Me.warn("Please fill all the required fields before Push.")},n.state={isLoading:!1,data:[],title:"",body:""},n.onPush=n.onPush.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Me.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Body",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})}})),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{style:{marginRight:10},title:"PUSH",onPress:this.onPush}),o.createElement(Te,{title:"CLEAR",onPress:function(){e.setState({title:"",body:""})}})),J(this.state.data)?this.state.data.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.title)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.body)),o.createElement(we,{style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{title:"Duplicate",onPress:function(){e.setState({title:t.title,body:t.body})}})))}):o.createElement(Ce,{style:{padding:20}},"No Nofification found!!!"),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Ln=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("notifications/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Notification.")})}}(t,n,a))},onPush:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).post("notification/"+e,function(e,o){X(e)&&J(e.data)?a({_id:e.data,title:t.title,body:t.body,createdBy:n.name,createdAt:new Date}):a(null)},t)}}(t,n,a,o))}}})(Un),Dn=function(e,t,n,o){return{type:a.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Rn=n(17),_n=n.n(Rn),Mn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(X(n.state.fromDate)&&X(n.state.toDate)&&J(n.state.place)&&J(n.state.address)){n.setState({isLoading:!0});var e={_homeId:n.props.user.homes[n.props.appUser.homeIndex].number,fromDate:n.state.fromDate,toDate:n.state.toDate,place:n.state.place,address:n.state.address,isReturned:!1,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(e,n.props.user.homes[n.props.appUser.homeIndex]._id,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date}),Me.success("Outing submitted successfully.")):Me.fail("Failed to submit Outing.")})}else Me.warn("Please fill all the required fields before submit Outing.")},n.state={isLoading:!1,fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(_n.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(we,{style:Et.row},o.createElement(_n.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Place",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.place,onChange:function(t){return e.setState({place:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Address",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(we,{className:"center",style:Et.saveBtn},o.createElement(Te,{title:"SUBMIT",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Pn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){e&&J(e._id)?o(!1):(new te).post("outing/"+t,function(t,r){console.log("result:",t),X(t)&&J(t.data)?(e._id=t.data,e.createdBy=n.name,a.data.unshift(e),s(Dn(a.data,!0,!1,"")),o(!0)):o(!1)},e)}}(t,n,a,o,s))}}})(Mn),Fn=function(e,t,n,o){return{type:a.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Bn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onFileSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=Q();o+="."+a[a.length-1],n.setState({isLoading:!0});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){n.setState({isLoading:!1}),e?n.setState({fileName:o}):Me.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if(J(n.state.title)&&J(n.state.fileName)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,file:n.state.fileName,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(n.state.homeId,e,n.props.homeIndex,n.props.user,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",homeId:J(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""}),Me.success("Document saved successfully.")):Me.fail("Failed to save document.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({id:"",homeId:J(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""})},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Document removed successfully."):Me.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",homeId:J(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n.onClear=n.onClear.bind(Object(de.a)(n)),n.onFileSelect=n.onFileSelect.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||Me.fail("Failed to load Documents.")})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),J(this.props.user.homes)&&o.createElement(we,{style:Et.row},o.createElement(Ce,{style:{marginRight:10}},"Home:"),this.props.user.homes.map(function(t,n){return o.createElement(gt,{isActive:t._id===e.state.homeId,text:t.number,key:"home"+n,onPress:function(){return e.setState({homeId:t._id})}})})),o.createElement(we,{style:Et.row},o.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:this.onFileSelect}),J(this.state.fileName)&&o.createElement(Ce,{style:{marginLeft:15}},this.state.fileName)),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Te,{title:"CLEAR",onPress:this.onClear})),this.props.documents.isUpToDate&&!this.props.documents.isError&&J(this.props.documents.data)?this.props.documents.data.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.title)),J(t.description)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),J(e.props.user.homes.filter(function(e){return e._id===t._id}))&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Home: "+e.props.user.homes.filter(function(e){return e._id===t._id})[0].number)),J(t.file)&&o.createElement(we,{style:Nt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:F+t.file},t.file)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},this.props.documents.isUpToDate?"No Documents found!!!":this.props.documents.isError?this.props.documents.errorMessage:"No Documents found!!!"),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Hn=Object(p.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){n(Fn([],!1,!1,"")),(new te).get("documents/"+e,function(e,a){X(e)&&X(e.data)?(n(Fn(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,n))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){t&&J(t._id)?(new te).put("document/"+t._id,function(e,a){if(X(e)&&J(e.data)){var r=o.findIndex(function(t){return t._id===e.data._id});o[r]._id=e.data._id,o[r].title=t.title,o[r].description=t.description,o[r].file=t.file,n(Fn(o,!0,!1,"")),s(!0)}else s(!1)},t):(new te).post("document/"+e,function(e,r){X(e)&&J(e.data)?(o.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:a.name,createdAt:new Date}),n(Fn(o,!0,!1,"")),s(!0)):s(!1)},t)}}(t,n,0,o,s,r))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new te).delete("document/"+e,function(o,s){X(o)&&X(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Fn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))},onUpload:function(t,n){return e(nt(t,n))}}})(Bn),Wn=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Vn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(J(n.state.searchText)&&n.props.blocks.isUpToDate&&!n.props.blocks.isError&&J(n.props.blocks.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.blocks.data.filter(function(t){return(t.name+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.blocks.data,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),Me.success("Home removed successfully.")):Me.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.onSearch=n.onSearch.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(we,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ce,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-block/0")},style:Object(y.a)({},Nt.ele,{color:H,textAlign:"right"})},"Add New")),o.createElement(we,{style:Object(y.a)({},Et.row,{marginTop:0,paddingTop:0})},o.createElement(xe,{type:"text",placeholder:"Search Block",className:"form-control",style:Object(y.a)({},Re,Et.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ae,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(ke,{className:"pointer",src:Le.search,style:{width:30,height:30}}))),J(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(we,{key:"block"+n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Name: "+t.name)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Description: "+(J(t.description)?t.description:""))),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-block/"+t._id)}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon}))))}):o.createElement(Ce,{style:{padding:20}},"No block match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(we,{style:Nt.row},o.createElement(we,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ce,{style:{color:H,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Gn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new te).delete("block/"+e,function(o,s){X(o)&&X(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Wn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(Vn),Yn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.name)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.blocks&&n.props.blocks.data?n.props.blocks.data:[],function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",description:""}),Me.success("Block saved successfully.")):Me.fail(J(t)?t:"Failed to save block.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",name:"",description:""},n.onSave=n.onSave.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;if(e.length>0&&"0"!==e&&this.props.blocks&&J(this.props.blocks.data)){var t=this.props.blocks.data.filter(function(t,n){return t._id===e});J(t)&&this.setState({id:t[0]._id,name:t[0].name,description:t[0].description})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Nt.content,{flex:1,backgroundColor:W})},o.createElement(we,{style:Et.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Et.saveBtn},o.createElement(Te,{title:"SAVE",onPress:this.onSave}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Kn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&J(t._id)?(new te).put("block/"+t._id,function(e,n){if(X(e)&&J(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].name=t.name,a[r].description=t.description,s(Wn(a,!0,!1,"")),o(!0,"")}else o(!1,n)},t):(new te).post("block/"+e,function(e,r){X(e)&&J(e.data)?(a.unshift({_id:e.data,name:t.name,description:t.description,createdBy:n.name}),s(Wn(a,!0,!1,"")),o(!0,"")):o(!1,r)},t)}}(t,n,a,o,s))}}})(Yn),Zn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(n.state.amount>0&&(n.state.isAllHome||n.state.homes.length>0)){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={amount:n.state.amount,description:n.state.description,month:n.state.month,year:n.state.year,isAllHome:n.state.isAllHome,homes:e};n.setState({isLoading:!0}),n.props.onSave(n.props.user.client._id,t,n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]}),Me.success("Payment saved successfully.")):Me.fail(t||"Failed to save payment.")})}else Me.warn("Please fill all required fields before Save.")},n.onClear=function(){n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]})},n.state={isLoading:!1,amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onClear=n.onClear.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(we,{style:qn.container},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.amount>0?this.state.amount+"":"",onChange:function(t){return e.setState({amount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:{marginTop:15}},"Payment for "+this.state.year+" "),o.createElement(Ne,{className:"form-control",value:this.state.month,style:Et.ele,onChange:function(t){return e.setState({month:t.target.value})}},z.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return o.createElement("option",{key:"month"+t,value:e.value},e.title)}))),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:{marginRight:15}},"Apply to Home(s): "+(this.state.isAllHome?"":this.state.homes.length)),o.createElement(wn,{isActive:this.state.isAllHome,text:"All Homes",onPress:function(){return e.setState({isAllHome:!e.state.isAllHome})}})),!this.state.isAllHome&&o.createElement(je,{style:Object(y.a)({},Et.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Ce,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:H},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),!this.state.isAllHome&&o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Et.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:Y,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),!this.state.isAllHome&&this.state.showHomes&&J(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(je,{style:Object(y.a)({},Et.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Ce,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Te,{title:"CLEAR",onPress:this.onClear})),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),qn={container:{width:"100%",paddingLeft:15,paddingRight:15}},zn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(n.state.fromDate&&n.state.toDate){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={fromDate:n.state.fromDate,toDate:n.state.toDate,homes:e};n.setState({isLoading:!0}),n.props.onSearch(n.props.user.client._id,t,n.props.user,function(e){n.setState({isLoading:!1,isShowSearch:!1,data:e})},function(e){n.setState({isLoading:!1}),Me.fail(e||"Failed to load payment.")})}else Me.warn("Please fill all required fields before Search.")},n.onUpdate=function(){if(J(n.state.uPaymentId)&&n.state.uAmount>0){var e={amount:n.state.uAmount,description:n.state.uDescription};n.setState({isLoading:!0}),n.props.onUpdate(n.state.uPaymentId,e,n.props.user,function(e,t){if(n.setState({isLoading:!1}),!0===e){var a=n.state.data,o=a.findIndex(function(e){return e._id===n.state.uPaymentId});a[o].amount=n.state.uAmount,a[o].description=n.state.uDescription,n.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a}),Me.success("Payment updated successfully.")}else Me.fail(t||"Failed to update payment.")})}else Me.warn("Please fill all required fields before update.")},n.state={isLoading:!1,isShowSearch:!0,fromDate:"",toDate:"",datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""},n.onSearch=n.onSearch.bind(Object(de.a)(n)),n.onUpdate=n.onUpdate.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(we,{style:Jn.container},this.state.isShowSearch?o.createElement(we,null,o.createElement(we,{style:Et.row},o.createElement(_n.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(we,{style:Et.row},o.createElement(_n.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:{marginRight:15}},"Home(s): "+(this.state.homes.length>0?this.state.homes.length:"All"))),o.createElement(je,{style:Object(y.a)({},Et.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Ce,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:H},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Et.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:Y,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),this.state.showHomes&&J(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(je,{style:Object(y.a)({},Et.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Ce,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{title:"SEARCH",onPress:this.onSearch}))):o.createElement(we,null,o.createElement(Ce,{className:"fr pointer",style:{color:H,fontWeight:"bold",textAlign:"right"},onClick:function(){e.setState({isShowSearch:!0})}},"Show Search")),o.createElement(we,null,J(this.state.data)?this.state.data.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},"Rs."+t.amount+" for "+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(J(t.mode)?" "+t.mode:"")+(J(t.type)?" "+t.type:""))),J(t.description)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),o.createElement(we,{style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{title:"Update",onPress:function(){e.setState({isShowUpdateModel:!0,uPaymentId:t._id,uAmount:t.amount,uDescription:t.description})}})))}):o.createElement(Ce,{style:{padding:20}},"No Payment found!!!")),o.createElement(We.a,{open:this.state.isShowUpdateModel,onClose:function(){e.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""})}},o.createElement(we,{style:Ge.container},o.createElement(we,{style:Ge.content},o.createElement(we,{style:Et.row},o.createElement(xe,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.uAmount>0?this.state.uAmount+"":"",onChange:function(t){return e.setState({uAmount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(we,{style:Et.row},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.uDescription,onChange:function(t){return e.setState({uDescription:t.target.value})}})),o.createElement(we,{className:"center",style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{style:{marginRight:10},title:"SAVE",onPress:this.onUpdate}),o.createElement(Te,{title:"CLEAR",onPress:function(){e.setState({uAmount:0,uDescription:""})}}))))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Jn={container:{width:"100%",paddingLeft:15,paddingRight:15}},Xn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1,history:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:$n.content},o.createElement(we,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(we,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ae,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},$n.tab,$n.activeTab):$n.tab,onClick:function(){return e.setState({activeTab:1})}},"NEW"),o.createElement(Ae,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},$n.tab,$n.activeTab):$n.tab,onClick:function(){return e.setState({activeTab:2})}},"HISTORY")),o.createElement(we,{className:"tab-content",style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?o.createElement(Zn,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSave:this.props.onSave}):o.createElement(zn,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSearch:this.props.onSearch,onUpdate:this.props.onUpdate}))))}}]),t}(o.Component),$n={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:B,"border-bottom-style":"solid",color:B}},Qn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e($e(0,n,a,o))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new te).post("payment/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to save Payment.")},t)}}(t,n,0,o))},onSearch:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(new te).post("payments/"+e,function(e,t){X(e)?a(e.data):o(J(t)?t:"Failed to load Payments.")},t)}}(t,n,0,o,s))},onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new te).put("payment/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to update Payment.")},t)}}(t,n,0,o))}}})(Xn),ea=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,homeId:"",data:{}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.blocks,n=e.data,a="";if(n&&J(n._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var s=t.data.filter(function(e,t){return e._id===n._blockId});s&&s.length>0&&(a=s[0].name)}return n&&J(n._id)?o.createElement(we,null,o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Block: "+a)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Number: "+n.number)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Address: "+n.address)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"No of bed room(s): "+n.bedRoom)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Parking: "+n.parking)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Description: "+n.description))):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),ta=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Members.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return J(e)?o.createElement(we,null,e.map(function(e,t){return o.createElement(we,{key:t,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},(J(e.createdBy)?e.createdBy:"")+" on "+it(e.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.name)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.age+", "+("M"===e.gender?"Male":"Female"))),J(e.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.mobileNo)),J(e.emailId)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.emailId)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.type)))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),na=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return J(e)?o.createElement(we,null,e.map(function(e,t){return o.createElement(we,{key:t,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.type)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.number)))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),aa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Servents.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return J(e)?o.createElement(we,null,e.map(function(e,t){return o.createElement(we,{key:t,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.name)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.age+", "+("M"===e.gender?"Male":"Female"))),J(e.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.mobileNo)),J(e.emailId)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.emailId)))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),oa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[]}):n.setState({viewId:e,comments:t})},n.state={data:[],viewId:"",comments:[]},n.onView=n.onView.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return J(t)?o.createElement(we,null,t.map(function(t,n){return o.createElement(we,{key:"tkt"+n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.createdBy+" from "+t._homeId+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.title)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.status)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Ce,{className:"pointer",style:{color:H}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(we,{style:sa.cmntsCnr},o.createElement(we,{style:sa.cmntsHdr},o.createElement(Ce,{style:sa.cmntsHdrTxt},"Comments")),o.createElement(we,{style:sa.cmntsCnt},J(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(we,{key:"tktcmt"+t,style:0===t?sa.cmntCnrFst:sa.cmntCnr},o.createElement(we,{style:sa.cmntHdr},o.createElement(Ce,null,e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:sa.cmntCnt},o.createElement(Ce,null,e.comment)))}):o.createElement(Ce,{style:{padding:20}},"No Comments found!!!"))))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),sa={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:Y,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:Y},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},ra=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.state={data:[],isZoomImage:!1,zoomImage:""},n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Visitors.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return J(t)?o.createElement(we,null,t.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),J(t.name)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"["+t._homeId+"] "+t.name)),(t.age>0||J(t.gender))&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"Female"))),J(t.mobileNo)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.mobileNo)),J(t.image)&&o.createElement(we,{style:Nt.ele},o.createElement(Ae,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(ke,{src:F+t.image,style:{height:100}}))))}),o.createElement(We.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(we,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(ke,{src:F+this.state.zoomImage,style:{height:"40%"}})))):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),ia=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",transactions:[]}):n.setState({viewId:e,transactions:t})},n.getAmountPaid=function(e){var t=0;return J(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,n){return t+=e.amount}),t},n.state={data:[],viewId:"",transactions:[]},n.onView=n.onView.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Payments.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return J(t)?o.createElement(we,null,t.map(function(t,n){return o.createElement(we,{key:n,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Rs. "+t.amount+" for "+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(J(t.mode)?" "+t.mode:"")+(J(t.type)?" "+t.type:""))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Amount Paid Rs. "+e.getAmountPaid(t.transactions))),J(t.description)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{},onClick:function(){e.onView(t._id,t.transactions)}},o.createElement(Ce,{className:"pointer",style:{color:H}},(e.state.viewId===t._id?"Hide":"View")+" Transactions"))),e.state.viewId===t._id&&o.createElement(we,{style:la.cmntsCnr},o.createElement(we,{style:la.cmntsHdr},o.createElement(Ce,{style:la.cmntsHdrTxt},"Transactions")),o.createElement(we,{style:la.cmntsCnt},J(e.state.transactions)?e.state.transactions.map(function(e,t){return o.createElement(we,{key:"tktcmt"+t,style:0===t?la.cmntCnrFst:la.cmntCnr},o.createElement(we,{style:la.cmntHdr},o.createElement(Ce,null,e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:la.cmntCnt},o.createElement(Ce,null,"Ref Id: "+e.txnRef)),o.createElement(we,{style:la.cmntCnt},o.createElement(Ce,null,"Txn Id: "+e.txnId)),o.createElement(we,{style:la.cmntCnt},o.createElement(Ce,null,"Amount: "+e.amount)),o.createElement(we,{style:la.cmntCnt},o.createElement(Ce,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),J(e.reason)&&o.createElement(we,{style:la.cmntCnt},o.createElement(Ce,null,"Reason: "+e.reason)))}):o.createElement(Ce,{style:{padding:20}},"No transactions found!!!"))))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),la={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:Y,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:Y},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},ca=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Me.fail(J(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return J(e)?o.createElement(we,null,e.map(function(e,t){return o.createElement(we,{key:t,style:Nt.row},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},e.createdBy+" on "+it(e.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},e.title)),J(e.description)&&o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,e.description)),J(e.file)&&o.createElement(we,{style:Nt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:F+e.file},e.file)))})):o.createElement(Ce,null,"No data found!!!")}}]),t}(o.Component),ma=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleLoading=function(e){n.setState({isLoading:e})},n.state={isLoading:!1,homeId:"",activeTab:1,data:{}},n.toggleLoading=n.toggleLoading.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({homeId:t}),t.length>0&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){e.setState({isLoading:!1}),t&&J(t._id)?e.setState({data:t}):Me.fail("Failed to load Home.")},function(t){e.setState({isLoading:!1}),Me.fail(J(t)?t:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return o.createElement("main",{style:ua.content},o.createElement(we,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(we,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ae,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:1})}},o.createElement(ke,{src:1===t?Le.infoInv:Le.info,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:2})}},o.createElement(ke,{src:2===t?Le.membersInv:Le.members,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:3})}},o.createElement(ke,{src:3===t?Le.vehicleInv:Le.vehicle,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:4===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:4})}},o.createElement(ke,{src:4===t?Le.serventInv:Le.servent,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:5===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:5})}},o.createElement(ke,{src:5===t?Le.supportInv:Le.support,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:6===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:6})}},o.createElement(ke,{src:6===t?Le.visitorsInv:Le.visitors,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:7===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:7})}},o.createElement(ke,{src:7===t?Le.moneyInv:Le.money,style:ua.tabImage})),o.createElement(Ae,{className:"tab",style:8===this.state.activeTab?Object(y.a)({},ua.tab,ua.activeTab):ua.tab,onClick:function(){return e.setState({activeTab:8})}},o.createElement(ke,{src:8===t?Le.documentInv:Le.document,style:ua.tabImage}))),o.createElement(we,{style:{flex:1,flexDirection:"column",padding:15}},1===t?o.createElement(ea,{blocks:this.props.blocks,data:this.state.data}):2===t?o.createElement(ta,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadMembers}):3===t?o.createElement(na,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVehicles}):4===t?o.createElement(aa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadServents}):5===t?o.createElement(oa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadTickets}):6===t?o.createElement(ra,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVisitors}):7===t?o.createElement(ia,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadPayments}):o.createElement(ca,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadDocuments}))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),ua={content:{width:"100%"},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:B,"border-bottom-style":"solid",color:B},tabImage:{width:20,height:20}},da=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(En(t,n,a))},onLoadMembers:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("members/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadVehicles:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("vehicles/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadServents:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("servents/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadTickets:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("tickets/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Tickets.")})}}(t,n,a))},onLoadVisitors:function(t,n,a){return e(et(0,t,n,a))},onLoadPayments:function(t,n,a){return e($e(0,t,n,a))},onLoadDocuments:function(t,n,a){return e(function(e,t,n){return function(a){(new te).get("documents/"+e,function(e,a){X(e)&&X(e.data)?t(e.data):n(J(e.message)?e.message:"Failed to load Documents.")})}}(t,n,a))}}})(ma),pa=function(e,t,n,o){return{type:a.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}};function ha(e,t){try{return t>0?100*e/t:0}catch(n){return ee(n,"calc.percentage"),0}}var fa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.topic)&&J(n.state.description)&&X(n.state.fromDate)&&X(n.state.toDate)&&J(n.state.pollOption.filter(function(e){return J(e)}))){n.setState({isLoading:!0});var e={_id:n.state.id,topic:n.state.topic,description:n.state.description,isAllowMultiple:n.state.isAllowMultiple,isOneVotePerFlat:n.state.isOneVotePerFlat,isAnonymous:n.state.isAnonymous,fromDate:n.state.fromDate,toDate:n.state.toDate,options:n.state.pollOption.filter(function(e){return J(e)})};n.props.onSave(n.props.user.client._id,e,n.props.polls.data,n.props.user,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),Me.success("Poll saved successfully.")):Me.fail("Failed to save pol.")})}else Me.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Ve.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.polls.data,n.props.user._id,function(e){n.setState({isLoading:!1}),!0===e?Me.success("Poll removed successfully."):Me.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})},n.loadVotes=function(){if(X(n.state.showVotePoll)&&n.state.showVotePoll._id.length>0){var e=[];return n.state.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.state.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),o.createElement(we,{style:{padding:15}},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},n.state.showVotePoll.topic)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,n.state.showVotePoll.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},"Votes: "+n.state.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return o.createElement(we,{key:"pvo"+t,style:Nt.ele},o.createElement(Ce,null,e.votes+" ("+ha(e.votes,n.state.showVotePoll.votes.length)+"%) - "+e.option))}))}return""},n.state={isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(de.a)(n)),n.onRemove=n.onRemove.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(we,null,!1===this.state.isEdit&&o.createElement(Te,{title:"ADD NEW",onPress:function(){e.setState({isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})}}),!0===this.state.isEdit&&0===this.state.id.length?o.createElement(we,{key:"p0",style:Object(y.a)({},Nt.row,{borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid"})},o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(_n.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(we,{style:Nt.ele},o.createElement(_n.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:this.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:this.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:this.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Options: ")),J(this.state.pollOption)?this.state.pollOption.map(function(t,n){return o.createElement(we,{key:"pop"+n,style:Nt.ele},o.createElement(xe,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Re,Et.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Ae,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))}):o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"No Option found!!!")),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{onClick:function(){if(!J(e.state.pollOption.filter(function(e){return!J(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Ce,null,"Add More +"))),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:this.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):[],X(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&J(this.props.polls.data)?this.props.polls.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(we,{key:"p"+t._id,style:Object(y.a)({},Nt.row,{borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid"})},o.createElement(we,{style:Nt.ele},o.createElement(xe,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ie,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Re,Et.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(we,{style:Nt.ele},o.createElement(_n.a,{onChange:function(t){e.setState({fromDate:t})},value:e.state.fromDate})),o.createElement(we,{style:Nt.ele},o.createElement(_n.a,{onChange:function(t){e.setState({toDate:t})},value:e.state.toDate})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:e.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:e.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(we,{style:Nt.ele},o.createElement(wn,{isActive:e.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Options: ")),J(e.state.pollOption)?e.state.pollOption.map(function(t,n){return o.createElement(we,{key:"pop"+n,style:Nt.ele},o.createElement(xe,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Re,Et.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Ae,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))}):o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"No Option found!!!")),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{onClick:function(){if(!J(e.state.pollOption.filter(function(e){return!J(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Ce,null,"Add More +"))),o.createElement(we,{style:Nt.ele},o.createElement(Ae,{style:{marginRight:25},onClick:e.onSave},o.createElement(ke,{src:Le.tick,style:Ct.editIcon})),o.createElement(Ae,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(ke,{src:Le.cancel,style:Ct.deleteIcon})))):o.createElement(we,{key:"p"+t._id,style:Object(y.a)({},Nt.row,{borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid"})},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.topic)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,it(t.fromDate)+" to "+it(t.toDate))),o.createElement(we,{style:Nt.ele},o.createElement(we,{style:!0===t.isAllowMultiple?Et.radioActive:Object(y.a)({},Et.radio,{marginLeft:5})},o.createElement(Ce,{style:!0===t.isAllowMultiple?Object(y.a)({},Et.radioActiveText):Object(y.a)({},Et.radioText)},"Allow Multiple Votes"))),o.createElement(we,{style:Nt.ele},o.createElement(we,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Et.radioActive):Object(y.a)({},Et.radio,{marginLeft:5})},o.createElement(Ce,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Et.radioActiveText):Object(y.a)({},Et.radioText)},"One Vote per Flat"))),o.createElement(we,{style:Nt.ele},o.createElement(we,{style:!0===t.isAnonymous?Object(y.a)({},Et.radioActive):Object(y.a)({},Et.radio,{marginLeft:5})},o.createElement(Ce,{style:!0===t.isAnonymous?Object(y.a)({},Et.radioActiveText):Object(y.a)({},Et.radioText)},"Anonymous Voting"))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,"Options: ")),J(t.options)?t.options.map(function(e,t){return o.createElement(we,{key:"po"+t,style:Nt.ele},o.createElement(Ce,{key:"pot"+t,style:{width:"100%"}},e))}):o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{padding:10}},"No Option found!!!")),o.createElement(we,{style:Nt.ele},t.fromDate>new Date&&o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:J(t.options)?t.options:[]})}},o.createElement(ke,{src:Le.edit,style:Ct.editIcon})),o.createElement(Ae,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(ke,{src:Le.delete,style:Ct.deleteIcon})),o.createElement(Ce,{className:"pointer",style:{color:H},onClick:function(){e.setState({showVotePoll:t})}},"View Votes")))}):o.createElement(Ce,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No poll found!!!":"Loading..."),o.createElement(We.a,{open:X(this.state.showVotePoll)&&this.state.showVotePoll._id.length>0,onClose:function(){return e.setState({showVotePoll:{_id:""}})}},o.createElement(we,{style:Ge.container},o.createElement(we,{style:Ge.content},this.loadVotes()))),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),ga=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadVotes=function(e){var t=[];return e.options.map(function(n,a){return t.push({option:n,votes:e.votes.filter(function(e){return e.option===a}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,n){return o.createElement(we,{key:"pvo"+n,style:Nt.ele},o.createElement(Ce,null,t.votes+" ("+ha(t.votes,e.votes.length)+"%) - "+t.option))})},n.onSelectOption=function(e,t){if(n.state.votePollId===e._id)if(J(n.state.votes.filter(function(e){return e.option===t})))n.setState({votes:n.state.votes.filter(function(e){return e.option!==t})});else{var a=[];e.isAllowMultiple&&(a=n.state.votes),a.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votes:a})}else{var o=[];o.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votePollId:e._id,votes:o})}},n.onVote=function(e){n.state.votePollId===e&&J(n.state.votes)?(n.setState({isLoading:!0}),n.props.onVote(e,n.state.votes,n.props.polls,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({votePollId:"",votes:[]}),Me.success("Your vote saved successfully.")):Me.fail("Failed to save your vote.")})):Me.warn("Please select any option to vote.")};var a=new Date;return n.state={isLoading:!1,votePollId:"",votes:[],currentDate:new Date(a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear())},n.loadVotes=n.loadVotes.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(we,null,X(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&J(this.props.polls.data.filter(function(t){return J(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}))?this.props.polls.data.filter(function(t){return J(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}).map(function(t,n){return o.createElement(we,{key:"p"+t._id,style:Object(y.a)({},Nt.row,{borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid"})},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.topic)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.description)),(!0!==t.isOneVotePerFlat||!J(t.votes)||!J(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&t.options.map(function(n,a){return o.createElement(we,{key:"popt"+a,style:Nt.ele},o.createElement(wn,{isActive:e.state.votePollId===t._id&&J(e.state.votes.filter(function(e){return e.option===a})),text:n,onPress:function(){return e.onSelectOption(t,a)}}))}),(!0!==t.isOneVotePerFlat||!J(t.votes)||!J(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&o.createElement(we,{style:{marginTop:5,width:"100%"}},o.createElement(Te,{title:"Vote",onPress:function(){return e.onVote(t._id)},style:{width:"100%"}})),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},"Your Votes:")),J(t.options)&&e.loadVotes(t))}):o.createElement(Ce,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No active poll found!!!":"Loading..."),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),ya=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onReturnBack=function(e){Object(Ve.confirmAlert)({title:"Confirm to return back from outing",message:"Are you sure? You return back from this outing?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReturnBack(e,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),X(e)?Me.success("Successfully returned back."):Me.fail("Failed to Return back.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1},n.onReturnBack=n.onReturnBack.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(we,null,this.props.appUser.role===q.USER&&(!X(this.props.outings)||!J(this.props.outings.data.filter(function(e){return!0!==e.isReturned})))&&o.createElement(Te,{title:"Go Outing",onPress:function(){e.props.history.push("new-outing")}}),X(this.props.outings)&&this.props.outings.isUpToDate&&!this.props.outings.isError&&J(this.props.outings.data)?this.props.outings.data.map(function(t,n){return o.createElement(we,{key:"o"+t._id,style:Object(y.a)({},Nt.row,{borderBottomWidth:1,borderBottomColor:Y,borderBottomStyle:"solid"})},o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+it(t.createdAt))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},it(t.fromDate)+" to "+it(t.toDate))),o.createElement(we,{style:Nt.ele},o.createElement(Ce,{style:{fontWeight:"bold"}},t.place)),o.createElement(we,{style:Nt.ele},o.createElement(Ce,null,t.address)),e.props.appUser.role!==q.USER&&o.createElement(we,{style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Ce,null,"No one in the home")),e.props.appUser.role===q.USER&&!0!==t.isReturned&&o.createElement(we,{style:Object(y.a)({},Et.saveBtn,{flexDirection:"row"})},o.createElement(Te,{title:"Return to Home",onPress:function(){e.onReturnBack(t._id)}})))}):o.createElement(Ce,{style:{padding:20}},this.props.outings.isUpToDate?this.props.outings.isError?this.props.outings.errorMessage:"No Outings found!!!":"Loading..."),o.createElement(De,{visible:this.state.isLoading}))}}]),t}(o.Component),Ea=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:!X(n.props.user)||n.props.appUser.role!==q.ADMIN&&n.props.appUser.role!==q.MANAGER?2:1,isShowPoll:X(n.props.user)&&(n.props.appUser.role===q.ADMIN||n.props.appUser.role===q.MANAGER||n.props.appUser.role===q.USER&&n.props.appUser.homeIndex>=0)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadAds(this.props.user.client._id,function(e){e||Me.fail("Failed to load Ads.")}),this.state.isShowPoll&&this.props.onLoadPoll(this.props.user.client._id,this.props.appUser.role,function(e){e||Me.fail("Failed to load Poll.")}),this.props.onLoadOuting(this.props.user.client._id,this.props.appUser.role===q.USER?this.props.user.homes[this.props.appUser.homeIndex]._id:"",function(e){e||Me.fail("Failed to load Outing.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:ba.content},o.createElement(we,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(we,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},this.state.isShowPoll&&o.createElement(Ae,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},ba.tab,ba.activeTab):ba.tab,onClick:function(){return e.setState({activeTab:1})}},"POLL"),o.createElement(Ae,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},ba.tab,ba.activeTab):ba.tab,onClick:function(){return e.setState({activeTab:2})}},"ADS"),o.createElement(Ae,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},ba.tab,ba.activeTab):ba.tab,onClick:function(){return e.setState({activeTab:3})}},"OUTING")),o.createElement(we,{style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?this.props.appUser.role===q.ADMIN||this.props.appUser.role===q.MANAGER?o.createElement(fa,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onSave:this.props.onSavePoll,onRemove:this.props.onRemovePoll}):o.createElement(ga,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onVote:this.props.onVote}):2===this.state.activeTab?o.createElement(mt,{data:this.props.ads.isUpToDate?this.props.ads.data:[],message:this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No data found!!!":"Loading..."}):3===this.state.activeTab?o.createElement(ya,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,outings:this.props.outings,onReturnBack:this.props.onReturnBack}):o.createElement(mt,{data:4===this.state.activeTab?this.props.remainders:this.props.complaints,message:"No data found!!!"}))))}}]),t}(o.Component),ba={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:B,"border-bottom-style":"solid",color:B}},va=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,outings:e.Outings,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,n){return e(cn(t,n))},onLoadPoll:function(t,n,a){return e(function(e,t,n){return function(t){t(pa([],!1,!1,"")),(new te).get("polls/"+e,function(e,a){X(e)&&X(e.data)?(t(pa(e.data,!0,!1,"")),n(!0)):n(!1)})}}(t,0,a))},onSavePoll:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&J(t._id)?(new te).put("poll/"+t._id,function(e,a){if(X(e)&&J(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].topic=t.topic,n[r].description=t.description,n[r].isAllowMultiple=t.isAllowMultiple,n[r].isOneVotePerFlat=t.isOneVotePerFlat,n[r].isAnonymous=t.isAnonymous,n[r].fromDate=t.fromDate,n[r].toDate=t.toDate,n[r].options=t.options,s(pa(X(n)?n:[],!0,!1,"")),o(!0)}else o(!1)},t):(new te).post("poll/"+e,function(e,r){X(e)&&J(e.data)?(t._id=e.data,t.createdBy=a.name,n.unshift(t),s(pa(X(n)?n:[],!0,!1,"")),o(!0)):o(!1)},t)}}(t,n,a,o,s))},onRemovePoll:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new te).delete("poll/"+e,function(n,s){X(n)&&X(n.data)&&!0===n.data?(t=t.filter(function(t,n){return t._id!==e}),o(pa(X(t)?t:[],!0,!1,"")),a(!0)):a(!1)},{Id:e,UserId:n})}}(t,n,a,o))},onVote:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(a){(new te).post("poll/vote/"+e,function(t,o){if(X(t)&&J(t.data)){var r=n.data.findIndex(function(t){return t._id===e});if(n.data[r].votes=t.data,a(pa(n.data,!0,!1,"")),n.isUpToDate&&!n.isError&&J(n.data)){var i=n.data,l=i.findIndex(function(t){return t._id===e});i[l].votes=t.data,a(pa(i,!0,!1,""))}s(!0)}else s(!1)},{votes:t})}}(t,n,a,0,0,r))},onLoadOuting:function(t,n,a){return e(function(e,t,n){return function(e){e(Dn([],!1,!1,"")),(new te).get("outings"+(J(t)?"/"+t:""),function(t,a){X(t)&&X(t.data)?(e(Dn(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onReturnBack:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new te).delete("outing/return/"+e,function(o,s){if(X(o)&&X(o.data)&&!0===o.data){var r=n.data.findIndex(function(t){return t._id===e});n.data[r].isReturned=!0,n.data[r].returnedAt=new Date,t(Dn(n.data,!0,!1,"")),a(!0)}else a(!1)})}}(t,0,a,o))}}})(Ea),Oa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:Sa.content},o.createElement(we,{style:Object(y.a)({},Et.container,{paddingLeft:10,paddingRight:10})},o.createElement(we,{className:"center",style:Et.row},o.createElement(Ce,{style:{color:H,fontWeight:"bold",textAlign:"center"}},this.props.user.client.name)),o.createElement(we,{className:"center",style:Et.row},o.createElement(Ce,{style:{color:H,fontWeight:"bold",textAlign:"center"}},this.props.user.client.description)),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Home users")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Maintenance Admin Payment")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Receive real-time notifications")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Visitor management")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Lodge any complaint related to your apartment and track")),o.createElement(we,{style:Et.row},o.createElement(Ce,null,"Admin Users")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Create polls and gather the opinion of all Apartment residents")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"All details of your flat, staff who work in your flat, visitors coming to your flat")),o.createElement(we,{style:Et.row},o.createElement(Ce,{style:Sa.listItem},"Accounts  and much more..."))))}}]),t}(o.Component),Sa={content:{flex:1,width:"100%"},listItem:{marginLeft:15}},wa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(Oa),ja=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(we,{style:{flex:1,backgroundColor:W,padding:40}},o.createElement(Ce,null,"Page not found!!!"))}}]),t}(o.Component),ka=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleMenu=function(){n.setState({isMenuExpand:!n.state.isMenuExpand})},n.isUser=function(){return n.props.appUser.role===q.USER},n.isAdmin=function(){return n.props.appUser.role===q.ADMIN},n.isManager=function(){return n.props.appUser.role===q.MANAGER},n.isGateKeeper=function(){return n.props.appUser.role===q.GATEKEEPER},n.state={isLoading:!1,isMenuExpand:!1},n.onToggleMenu=n.onToggleMenu.bind(Object(de.a)(n)),n.isUser=n.isUser.bind(Object(de.a)(n)),n.isAdmin=n.isAdmin.bind(Object(de.a)(n)),n.isManager=n.isManager.bind(Object(de.a)(n)),n.isGateKeeper=n.isGateKeeper.bind(Object(de.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;X(this.props.user)&&J(this.props.user._id)||(this.setState({isLoading:!0}),this.props.getProfile(function(t,n){e.setState({isLoading:!1}),!0!==t&&Me.fail("Failed to load Profile: "+n)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return!this.state.isLoading&&o.createElement(we,{style:xa.container},o.createElement(Ye,{appUser:this.props.appUser,user:this.props.user,isMenuExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu,onHomeChange:this.props.onHomeChange,onLogout:this.props.onLogout}),o.createElement(qe,{appUser:this.props.appUser,user:this.props.user,isExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu}),J(this.props.appUser.role)&&!this.isUser()||J(this.props.user.homes)?o.createElement(He.c,null,o.createElement(He.a,{path:"/",exact:!0,component:jt}),this.isUser()&&o.createElement(He.a,{path:"/members",exact:!0,component:Tt}),this.isUser()&&o.createElement(He.a,{path:"/new-member",exact:!0,component:Lt}),this.isUser()&&o.createElement(He.a,{path:"/vehicles",exact:!0,component:Mt}),this.isUser()&&o.createElement(He.a,{path:"/new-vehicle",exact:!0,component:Ft}),this.isUser()&&o.createElement(He.a,{path:"/servents",exact:!0,component:Vt}),this.isUser()&&o.createElement(He.a,{path:"/new-servent",exact:!0,component:Yt}),(this.isUser()||this.isAdmin()||this.isManager())&&o.createElement(He.a,{path:"/tickets",exact:!0,component:Xt}),this.isUser()&&o.createElement(He.a,{path:"/new-ticket",exact:!0,component:Qt}),this.isUser()&&o.createElement(He.a,{path:"/visitors",exact:!0,component:tn}),(this.isAdmin()||this.isManager())&&o.createElement(He.a,{path:"/ads",exact:!0,component:pn}),(this.isAdmin()||this.isManager())&&o.createElement(He.a,{path:"/new-ad",exact:!0,component:fn}),(this.isAdmin()||this.isManager())&&o.createElement(He.a,{path:"/notification",exact:!0,component:Ln}),this.isAdmin()&&o.createElement(He.a,{path:"/users",exact:!0,component:yn}),this.isAdmin()&&o.createElement(He.a,{path:"/edit-user/:id",exact:!0,component:In}),this.isAdmin()&&o.createElement(He.a,{path:"/homes",exact:!0,component:Sn}),this.isAdmin()&&o.createElement(He.a,{path:"/view-home/:id",exact:!0,component:da}),this.isAdmin()&&o.createElement(He.a,{path:"/edit-home/:id",exact:!0,component:Cn}),this.isAdmin()&&o.createElement(He.a,{path:"/blocks",exact:!0,component:Gn}),this.isAdmin()&&o.createElement(He.a,{path:"/edit-block/:id",exact:!0,component:Kn}),(this.isAdmin()||this.isManager())&&o.createElement(He.a,{path:"/payment",exact:!0,component:Qn}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&o.createElement(He.a,{path:"/all-visitors",exact:!0,component:Tn}),o.createElement(He.a,{path:"/notice",exact:!0,component:va}),this.isUser()&&o.createElement(He.a,{path:"/new-outing",exact:!0,component:Pn}),o.createElement(He.a,{path:"/my-profile",exact:!0,component:sn}),this.props.user.role.split(",").length>0&&o.createElement(He.a,{path:"/my-role",exact:!0,component:ln}),o.createElement(He.a,{path:"/my-documents",exact:!0,component:Hn}),o.createElement(He.a,{path:"/change-password",exact:!0,component:an}),o.createElement(He.a,{path:"/info",exact:!0,component:wa}),o.createElement(He.a,{component:ja})):o.createElement(Ce,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."),X(this.props.user)&&J(this.props.user._id)&&o.createElement(Je,null),o.createElement(De,{visible:this.state.isLoading,text:"Loading..."}))}}]),t}(o.Component),xa={container:{flex:1,backgroundColor:W,alignItems:"flex-start",justifyContent:"flex-start"}},Ia=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new te).get("account/profile",function(n,a){if(X(n)&&X(n.data)&&J(n.data._id)){t(re(n.data)),t(se(J(n.data.homes)?0:-1));var o=n.data.role.split(",");J(o)&&t(oe(o[0])),(o.indexOf(q.ADMIN)>=0||o.indexOf(q.MANAGER)>=0)&&((new te).get("members",function(e,n){X(e)&&J(e.data)&&t(ie(e.data,!0,!1,""))}),(new te).get("blocks/"+n.data.client._id,function(e,n){X(e)&&J(e.data)&&t(ce(e.data,!0,!1,""))})),(o.indexOf(q.ADMIN)>=0||o.indexOf(q.MANAGER)>=0||o.indexOf(q.GATEKEEPER)>=0)&&(new te).get("homes/"+n.data.client._id,function(e,n){X(e)&&J(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(le(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,a)})}}(t))},onHomeChange:function(t,n){return e(function(e,t){return function(n){n(se(e)),t(!0)}}(t,n))},onLogout:function(t){return e(ne(t))}}})(ka),Na=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){J(sessionStorage.getItem("auth_token"))&&this.props.setLogin(!0)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.appUser.isLoggedIn?o.createElement(ue.a,null,o.createElement(Ia,null)):o.createElement(Be,null)}}]),t}(o.Component),Ca=Object(p.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(ae(e))}}(t))}}})(Na),Aa=(n(119),n(120),n(121),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(p.a,{store:U},s.a.createElement(Ca,null),s.a.createElement(h.ToastsContainer,{store:h.ToastsStore,position:h.ToastsContainerPosition.TOP_RIGHT}))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,n){e.exports=n(122)}},[[71,1,2]]]);
//# sourceMappingURL=main.9edbf7a7.chunk.js.map