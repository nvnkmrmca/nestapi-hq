(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),r=n(19),i=n.n(r),l=n(2),c=n(4),m=n(6),u=n(5),d=n(7),p=n(9),h=n(20),f=n(24),g=n(60),y=n(1);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.RESET=14]="RESET"}(a||(a={}));var E=function(e,t){return Object(y.a)({},e,{isLoggedIn:t})},b=function(e,t){return Object(y.a)({},e,{role:t})},v=function(e,t){return Object(y.a)({},e,{homeIndex:t})},O=function(e,t){return Object(y.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},S=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},x=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},I=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},C=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},A=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=Object(f.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_LOGIN_STATUS:return E(e,t.payload);case a.SET_ROLE:return b(e,t.payload);case a.SET_HOME_INDEX:return v(e,t.payload);case a.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USER:return O(e,t.payload);case a.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_ADS:return S(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_POLLS:return w(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_OUTINGS:return j(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_DOCUMENTS:return k(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERS:return x(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_HOMES:return I(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERHOMES:return N(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_TICKETS:return C(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_BLOCKS:return A(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e}}),U=Object(f.e)(T,Object(f.d)(Object(f.a)(g.a))),L=n(29),D=n.n(L),R=n(39),_="DD-MMM-YYYY",M="http://10.100.41.97:3001/image/",P="http://10.100.41.97:3001/file/",F="#0078d7",B="#0067b9",H="#FFFFFF",W="#FF0000",V="#cce1f1",G="#e1e1e1",Y="#000000",K="#FFFFFF",Z={USER:"USER",ADMIN:"ADMIN",GATEKEEPER:"GATEKEEPER",MANAGER:"MANAGER"},q=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function z(e){return J(e)&&e.length>0}function J(e){return null!==e&&void 0!==e}function X(e){try{return J(e)?JSON.stringify(e):""}catch(t){return Q(t,"JSON2String"),""}}function $(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function Q(e,t){console.log("Error:"+t+":"+e)}var ee=function e(){var t=this;Object(l.a)(this,e),this.url="http://10.100.41.97:3001/",this.get=function(e,n){t.fetch(e,"GET",n)},this.post=function(e,n,a){t.fetch(e,"POST",n,a)},this.delete=function(e,n,a){t.fetch(e,"DELETE",n,a)},this.patch=function(e,n,a){t.fetch(e,"PATCH",n,a)},this.put=function(e,n,a){t.fetch(e,"PUT",n,a)},this.upload=function(){var e=Object(R.a)(D.a.mark(function e(n,a,o){var s,r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return s=e.sent,e.next=5,t.getAS("client_id");case 5:return r=e.sent,e.next=8,t.getAS("user_id");case 8:i=e.sent,(l=new FormData).append("file",o.file,o.name),l.append("name",o.name),fetch(t.url+n,{method:"POST",headers:{Accept:"application/json","x-access-token":z(s)?"Bearer "+s:"","client-id":z(r)?""+r:"","user-id":z(i)?""+i:""},body:l}).then(function(e){return e.json()}).then(function(e){J(e)?J(e.data)?t.callback(a,e,"Some problem occurs. Please contact administrator."):t.callback(a,null,e.message):t.callback(a,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(a,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(R.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(R.a)(D.a.mark(function e(n,a,o,s){var r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return r=e.sent,e.next=5,t.getAS("client_id");case 5:return i=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,fetch(t.url+n,{method:a,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":z(r)?"Bearer "+r:"","client-id":z(i)?""+i:"","user-id":z(l)?""+l:""},body:J(s)?X(s):null}).then(function(e){return e.json()}).then(function(e){J(e)?J(e.data)?t.callback(o,e,"Some problem occurs. Please contact administrator."):t.callback(o,null,e.message):t.callback(o,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(o,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,n,a,o){return e.apply(this,arguments)}}(),this.callback=function(e,t,n){J(e)&&"function"==typeof e&&e(t,n)}},te=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(ne(!1)),t(oe(-1)),t(ce()),e(!0)}catch(n){e(!1)}}},ne=function(e){return{type:a.SET_LOGIN_STATUS,payload:e}},ae=function(e){return{type:a.SET_ROLE,payload:e}},oe=function(e){return{type:a.SET_HOME_INDEX,payload:e}},se=function(e){return{type:a.LOAD_USER,payload:e}},re=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},ie=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},le=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},ce=function(){return{type:a.RESET}},me=n(28),ue=n(3),de=n(22),pe=n(23);function he(){var e=Object(de.a)(["\n"]);return he=function(){return e},e}function fe(){var e=Object(de.a)(["\n"]);return fe=function(){return e},e}function ge(){var e=Object(de.a)(["\n"]);return ge=function(){return e},e}function ye(){var e=Object(de.a)(["\n"]);return ye=function(){return e},e}function Ee(){var e=Object(de.a)(["\n"]);return Ee=function(){return e},e}function be(){var e=Object(de.a)(["\n"]);return be=function(){return e},e}function ve(){var e=Object(de.a)(["\noverflow: auto;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(de.a)(["\n"]);return Oe=function(){return e},e}var Se=pe.a.div(Oe()),we=pe.a.div(ve()),je=pe.a.img(be()),ke=pe.a.input(Ee()),xe=pe.a.textarea(ye()),Ie=pe.a.select(ge()),Ne=pe.a.label(fe()),Ce=pe.a.span(he()),Ae=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("input",{type:"button",className:"btn",value:this.props.title,onClick:function(){return e.props.onPress()},style:Object(y.a)({},Te.btn,this.props.style)})}}]),t}(o.Component);Ae.defaultProps={title:"",onPress:function(){},style:{}};var Te={btn:{backgroundColor:F,borderColor:F,color:K,cursor:"pointer"}},Ue=function e(){Object(l.a)(this,e)};Ue.logo=M+"logo.png",Ue.logoInv=M+"logo-inv.png",Ue.icon=M+"icon.png",Ue.logout=M+"logout.png",Ue.homeIcon=M+"home-icon.png",Ue.homeIconInv=M+"home-icon-inv.png",Ue.notification=M+"notification.png",Ue.notificationInv=M+"notification-inv.png",Ue.setting=M+"setting.png",Ue.settingInv=M+"setting-inv.png",Ue.info=M+"info.png",Ue.infoInv=M+"info-inv.png",Ue.workInProgress=M+"work-in-progress.png",Ue.members=M+"members.png",Ue.membersInv=M+"members-inv.png",Ue.vehicle=M+"vehicle.png",Ue.vehicleInv=M+"vehicle-inv.png",Ue.username=M+"username.png",Ue.password=M+"password.png",Ue.support=M+"support.png",Ue.supportInv=M+"support-inv.png",Ue.visitors=M+"visitors.png",Ue.visitorsInv=M+"visitors-inv.png",Ue.servent=M+"servent.png",Ue.serventInv=M+"servent-inv.png",Ue.add=M+"add.png",Ue.edit=M+"edit.png",Ue.delete=M+"delete.png",Ue.close=M+"close.png",Ue.tick=M+"tick.png",Ue.cancel=M+"cancel.png",Ue.mobile=M+"mobile.png",Ue.email=M+"email.png",Ue.addvertise=M+"addvertise.png",Ue.reminder=M+"reminder.png",Ue.users=M+"users.png",Ue.homes=M+"homes.png",Ue.blocks=M+"blocks.png",Ue.search=M+"search.png",Ue.datePicker=M+"date-picker.png",Ue.money=M+"money.png",Ue.moneyInv=M+"money-inv.png",Ue.view=M+"view.png",Ue.document=M+"document.png",Ue.documentInv=M+"document-inv.png",Ue.menu=M+"menu.png",Ue.loading=M+"loading.gif";var Le=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.visible&&o.createElement(Se,null,o.createElement(Se,{className:"loader-overlay"}),o.createElement(Se,{className:"loader"},o.createElement(je,{className:"",src:Ue.loading,style:{width:"50px",height:"50px"}}),o.createElement(Se,{style:{color:B,fontWeight:"bold",marginTop:5}},this.props.text)))}}]),t}(o.Component);Le.defaultProps={visible:!1,text:"Loading..."};var De={},Re=function e(){Object(l.a)(this,e)};Re.success=function(e){h.ToastsStore.success(e)},Re.fail=function(e){h.ToastsStore.error(e)},Re.warn=function(e){h.ToastsStore.warning(e)},Re.info=function(e){h.ToastsStore.info(e)},Re.show=function(e,t,n){h.ToastsStore.info(e)};var _e=Re,Me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onLogin=function(){z(n.state.userName)&&z(n.state.password)?(n.setState({message:"",isLoading:!0}),n.props.onLogin(n.state.userName,n.state.password,function(e,t){!0===e?n.setState({isLoading:!1,message:""}):n.setState({message:t,isLoading:!1})})):_e.warn("Enter Mobile Number and Password to continue.")},n.onForgetPassword=function(){n.setState({isForgetPass:!0,mobileNumber:"",email:"",message:""})},n.onCreateAccount=function(){alert("Contact administrator/manager to create/join your flat.")},n.onForgetPassSubmit=function(){z(n.state.mobileNumber)&&z(n.state.email)?(n.setState({message:"",isLoading:!0}),n.props.onForgetPassword(n.state.mobileNumber,n.state.email.toLowerCase(),function(e,t){!0===e?(_e.success("Password reset success. Login with New password sent to your Email. Change password after login."),n.setState({isLoading:!1,message:"",isForgetPass:!1,userName:"",password:""})):n.setState({message:t,isLoading:!1})})):_e.warn("Enter Mobile Number and Email to continue.")},n.state={userName:"",password:"",message:"",isLoading:!1,isForgetPass:!1,mobileNumber:"",email:""},n.onLogin=n.onLogin.bind(Object(ue.a)(n)),n.onForgetPassword=n.onForgetPassword.bind(Object(ue.a)(n)),n.onCreateAccount=n.onCreateAccount.bind(Object(ue.a)(n)),n.onForgetPassSubmit=n.onForgetPassSubmit.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Se,{className:"container",style:{backgroundColor:H,maxWidth:"270px"}},o.createElement(Se,{className:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30,marginTop:5}},o.createElement(je,{src:Ue.logo,style:{width:150,height:150}})),this.state.isForgetPass?o.createElement(Se,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Se,{className:"col-12",style:Pe.row},o.createElement(je,{className:"absolute",src:Ue.mobile,style:Pe.txtIcon}),o.createElement(ke,{type:"text",className:"form-control",placeholder:"Registered Mobile Number",value:this.state.mobileNumber,style:Object(y.a)({},De,Pe.txt),onChange:function(t){return e.setState({mobileNumber:t.target.value})}})),o.createElement(Se,{className:"col-12",style:Object(y.a)({},Pe.row,{marginBottom:40})},o.createElement(je,{className:"absolute",src:Ue.email,style:Pe.txtIcon}),o.createElement(ke,{type:"text",className:"form-control",placeholder:"Registered Email",value:this.state.email,style:Object(y.a)({},De,Pe.txt),onChange:function(t){return e.setState({email:t.target.value})}})),o.createElement(Ae,{title:!1===this.state.isLoading?"Reset my password":"Loading...",onPress:this.onForgetPassSubmit}),o.createElement(Ne,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Y:W}},this.state.message),o.createElement(Se,{style:{marginTop:15}},o.createElement(Ne,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:B}},"Go back to Login."))):o.createElement(Se,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Se,{className:"col-12",style:Pe.row},o.createElement(je,{className:"absolute",src:Ue.username,style:Pe.txtIcon}),o.createElement(ke,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},De,Pe.txt),value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),o.createElement(Se,{className:"col-12",style:Object(y.a)({},Pe.row,{marginBottom:15})},o.createElement(je,{className:"absolute",src:Ue.password,style:Pe.txtIcon}),o.createElement(ke,{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,style:Object(y.a)({},De,Pe.txt),onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(Ne,{className:"col-12 pointer",onClick:this.onForgetPassword,style:{marginBottom:15,textAlign:"right",color:B}},"Forgot Password?"),o.createElement(Ae,{title:!1===this.state.isLoading?"LOGIN":"Loading...",onPress:this.onLogin}),o.createElement(Ne,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Y:W}},this.state.message),o.createElement(Se,{className:"col-12",style:{marginTop:15,alignItems:"center",justifyContent:"center"}},o.createElement(Ne,{className:"col-12",style:{marginBottom:5,textAlign:"center"}},"Dont have an account?"),o.createElement(Se,{className:"col",style:{float:"left",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#000000",borderStyle:"solid",borderRadius:10}},o.createElement(Ne,{style:{textAlign:"center",margin:"7px",cursor:"pointer"},onClick:this.onCreateAccount},"CREATE / JOIN YOUR FLAT")))),o.createElement(Le,{visible:this.state.isLoading,text:""}))}}]),t}(o.Component),Pe={row:{marginBottom:25},txtIcon:{marginLeft:3,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11},txt:{flex:1,paddingLeft:20}},Fe=Object(p.b)(function(e,t){return{}},function(e){return{onLogin:function(t,n,a){return e(function(e,t,n){return function(a){var o=sessionStorage.getItem("fcm_token");(new ee).post("account/login",function(e,t){if(J(e)&&J(e.data)&&z(e.data.token)&&z(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(o){}a(ne(!0)),n(!0,"")}else n(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:o,os:"web",osVersion:"web"})}}(t,n,a))},onForgetPassword:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).post("account/resetpassword",function(e,t){J(e)&&J(e.data)&&J(e.data.data)?!0===e.data.data?n(!0,""):n(!1,e.data.message):n(!1,t)},{mobileNo:e,emailId:t})}}(t,n,a))}}})(Me),Be=n(25),He=n(13),We=n(10),Ve={container:{height:"80%",marginTop:30,marginBottom:25,marginLeft:15,marginRight:15},head:{alignContent:"center"},title:{flex:1,alignContent:"center",color:Y},close:{width:20,flex:1,justifyContent:"flex-end",alignContent:"flex-end",alignSelf:"flex-end"},content:{}},Ge=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleHomeModel=function(e){n.setState({isShowHomeModel:e})},n.onHomeChange=function(e){n.props.onHomeChange(e,function(e){!0===e&&n.onToggleHomeModel(!1)})},n.logout=function(){Object(We.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){n.props.onLogout(function(e){!0===e?_e.success("Logout Success!"):_e.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})},n.state={isShowHomeModel:!1},n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ue.a)(n)),n.onHomeChange=n.onHomeChange.bind(Object(ue.a)(n)),n.logout=n.logout.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("header",{className:"center",style:Ye.titleBar},o.createElement(me.b,{className:"fl",to:""},o.createElement(je,{src:Ue.logoInv,className:"",style:{width:22,height:22},onClick:function(){e.props.isMenuExpand&&e.props.onToggleMenu()}})),o.createElement(je,{src:this.props.isMenuExpand?Ue.close:Ue.menu,className:"fl pointer",style:this.props.isMenuExpand?{width:17,height:17,marginLeft:15,marginTop:6}:{width:22,height:22,marginLeft:15,marginTop:4},onClick:this.props.onToggleMenu}),this.props.appUser.role===Z.USER?o.createElement(Ne,{className:"pointer",style:Ye.titleText,onClick:function(){return e.onToggleHomeModel(!0)}},z(this.props.user.homes)&&this.props.appUser.homeIndex>=0?this.props.user.homes[this.props.appUser.homeIndex].number:""):o.createElement(Ne,{style:Ye.titleText},this.props.appUser.role===Z.ADMIN?"Admin":this.props.appUser.role===Z.MANAGER?"Manager":this.props.appUser.role===Z.GATEKEEPER?"Gate Keeper":this.props.appUser.role),o.createElement("span",{className:"fr pointer",onClick:this.logout,style:{flex:1}},o.createElement(je,{src:Ue.logout,style:{width:20,height:20}})),z(this.props.user.homes)&&o.createElement(He.a,{open:this.state.isShowHomeModel,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Se,{style:Ve.container},this.props.user.homes.map(function(t,n){return o.createElement(Ne,{className:"col-12 pointer",key:"h"+n,onClick:function(){return e.onHomeChange(n)},style:e.props.appUser.homeIndex===n?Object(y.a)({},Ye.homeList,Ye.activeHome):Object(y.a)({},Ye.homeList,Ye.inActiveHome)},""+t.number)}))))}}]),t}(o.Component),Ye={titleBar:{backgroundColor:F,width:"100%",padding:7},titleText:{flex:15,color:K,fontSize:15},homeList:{padding:15,borderBottomWidth:1,borderBottomColor:F,"border-bottom-style":"solid"},inActiveHome:{color:Y},activeHome:{color:F,fontSize:20}},Ke=[{title:"Home",path:"/"},{title:"Manage",roles:[Z.USER,Z.ADMIN,Z.MANAGER],child:[{title:"Members",path:"members",roles:[Z.USER]},{title:"Vehicles",path:"vehicles",roles:[Z.USER]},{title:"Servents",path:"servents",roles:[Z.USER]},{title:"Tickets",path:"tickets",roles:[Z.USER,Z.ADMIN,Z.MANAGER]},{title:"Visitors",path:"visitors",roles:[Z.USER]},{title:"Ads",path:"ads",roles:[Z.ADMIN,Z.MANAGER]},{title:"Notification",path:"notification",roles:[Z.ADMIN,Z.MANAGER]},{title:"Users",path:"users",roles:[Z.ADMIN]},{title:"Homes",path:"homes",roles:[Z.ADMIN]},{title:"Blocks",path:"blocks",roles:[Z.ADMIN]},{title:"Visitors",path:"all-visitors",roles:[Z.ADMIN,Z.MANAGER,Z.GATEKEEPER]},{title:"Payment",path:"payment",roles:[Z.ADMIN,Z.MANAGER]}]},{title:"Notice",path:"notice"},{title:"Settings",child:[{title:"My Profile",path:"my-profile"},{title:"My Role",path:"my-role",isMRole:!0},{title:"My Documents",path:"my-documents"},{title:"Change Password",path:"change-password"}]},{title:"Info",path:"info"}],Ze=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadNav=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(ue.a)(n);return o.createElement("ul",{className:"navbar-nav"+(a||n.state.activeTopMenu===t?"":" hide"),style:a?{}:qe.inner},e.map(function(e,t){return(z(e.path)||z(e.child))&&(!z(e.roles)||e.roles.indexOf(n.props.appUser.role)>=0)&&(!e.isMRole||n.props.user.role.split(",").length>0)?o.createElement("li",{className:"nav-item"},o.createElement(me.b,{className:"nav-link",to:z(e.path)?e.path:"#",onClick:function(){n.state.activeTopMenu===e.title?n.setState({activeTopMenu:""}):a&&n.setState({activeTopMenu:e.title}),n.setState({activeMenu:e.title}),z(e.path)&&n.props.onToggleMenu()}},e.title),z(e.child)&&s.loadNav(e.child,e.title)):null}))},n.state={activeMenu:"",activeTopMenu:""},n.loadNav=n.loadNav.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("nav",{className:this.props.isExpand?"":"collapse",style:qe.nav},this.loadNav(Ke,"",!0))}}]),t}(o.Component),qe={nav:{backgroundColor:B,color:H},inner:{backgroundColor:F,paddingLeft:10}},ze=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("footer",{style:Je.tabBar},o.createElement(Se,{className:"center"},"\xa9 Nest"))}}]),t}(o.Component),Je={tabBar:{flex:1,borderTopColor:G,borderTopWidth:1,"border-top-style":"solid",width:"100%",marginTop:25,paddingTop:15,paddingBottom:15},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},tabImage:{width:20,height:20},activeTab:{backgroundColor:H}},Xe=function(e,t,n,a){return function(e){(new ee).get("payments"+(z(t)?"/"+t:""),function(e,t){J(e)&&J(e.data)?n(e.data):a(z(t)?t:"Failed to load Payments.")})}},$e=function(e){return{type:a.LOAD_USER,payload:e}},Qe=function(e,t,n,a){return function(e){(new ee).get("visitors"+(z(t)?"/"+t:""),function(e,t){J(e)&&J(e.data)?n(e.data):a(z(e.message)?e.message:"Failed to load Visitors.")})}},et=function(e,t,n,a,o){return function(n){t&&z(t._id)?(new ee).put("visitor/"+t._id,function(e,t){J(e)&&J(e.data)&&e.data.length>0?o(!0):o(!1)},t):(new ee).post("visitor/"+e,function(e,t){J(e)&&J(e.data)&&e.data.length>0?o(!0):o(!1)},t)}},tt=function(e,t){return function(n){(new ee).upload("upload",function(e,n){J(e)&&J(e.data)&&!0===e.data?t(!0,""):t(!1,n)},e)}},nt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getTotalDue=function(){var e=0;return n.props.home.payments.map(function(t,n){var a=0;return t.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),e+=t.amount-a,1}),e},n.payNow=function(e,t){if(e&&e.length>0&&t&&t>0)if(z(n.props.user.client.upi.id)&&z(n.props.user.client.upi.name)){var a=$();n.setState({payment:{paymentId:e,amount:t,transactionRef:a}}),_e.warn("Payment is in progress. Please contact administrator.")}else _e.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else _e.warn("Amount should be more then 0 to proceed payment.")},n.successCallback=function(e){if(console.log("Payment Success...",e),e&&e.Status)if("SUCCESS"===e.Status&&e.responseCode&&"00"===e.responseCode){n.setState({isLoading:!0});var t={txnRef:e.txnRef,txnId:e.txnId,amount:n.state.payment.amount,status:"PAID",isSuccess:!0,reason:""};n.props.onPaymentUpdate(n.state.payment.paymentId,t,function(e){n.setState({isLoading:!1}),n.clearTxn(),!0===e?_e.success("Payment success."):_e.fail("Payment failed.")})}else n.txnFailure(e);else n.txnFailure(e)},n.failureCallback=function(e){n.txnFailure(e)},n.txnFailure=function(e){console.log("Payment Failure...",e);var t="";t=e&&e.Status?"FAILURE"===e.Status&&e.responseCode&&"ZM"===e.responseCode?"Payment failed because of wrong pin.":"FAILURE"===e.Status&&e.message&&e.message.length>0?"Payment failed because "+e.message:"Payment failed.":"Payment failed.",_e.fail(t),n.setState({isLoading:!0});var a={txnRef:n.state.payment.transactionRef,txnId:"",amount:n.state.payment.amount,status:"FAIL",isSuccess:!1,reason:t};n.props.onPaymentUpdate(n.state.payment.paymentId,a,function(e){n.setState({isLoading:!1}),n.clearTxn()})},n.clearTxn=function(){n.setState({payment:{paymentId:"",amount:0,transactionRef:""}})},n.state={isLoading:!1,payment:{paymentId:"",amount:0,transactionRef:""}},n.getTotalDue=n.getTotalDue.bind(Object(ue.a)(n)),n.payNow=n.payNow.bind(Object(ue.a)(n)),n.clearTxn=n.clearTxn.bind(Object(ue.a)(n)),n.txnFailure=n.txnFailure.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Se,null,o.createElement(Se,{style:{margin:5}},o.createElement(Ne,{style:{marginTop:2,fontWeight:"bold",fontSize:17}},"Total Due Amount: Rs "+this.getTotalDue())),o.createElement(we,null,z(this.props.home.payments)?this.props.home.payments.filter(function(e,t){var n=0;return z(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<e.amount}).map(function(t,n){var a=0;return z(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<t.amount?o.createElement(Se,{key:"my-due"+n,style:0===n?at.myDueFirst:at.myDue},o.createElement(Se,{style:{marginTop:4}},o.createElement(Ne,null,"Due for: "+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Se,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Ne,{style:{fontSize:17}},"Rs "+(t.amount-a))),o.createElement(Se,{style:{width:"100%"}},o.createElement(Ne,null,"Due Date: 15/"+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Se,{style:{marginTop:4}},o.createElement(Ae,{title:"PAY NOW",onPress:function(){return e.payNow(t._id,t.amount-a)}}))):null}):o.createElement(Ne,{style:{padding:20}},"No Dues found!!!")),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),at={myDue:{margin:7,paddingLeft:15,borderLeftColor:G,borderLeftWidth:1},myDueFirst:{margin:7}},ot=n(67),st=n.n(ot);function rt(e,t){try{return J(e)?("string"!=typeof e&&e.toString(),z(t)||(t=_),st()(e).format(t)):""}catch(n){return Q(n,"convert.toDateString"),""}}var it=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(we,{style:{}},z(this.props.home.payments.filter(function(e,t){return z(e.transactions)&&z(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?this.props.home.payments.filter(function(e,t){return z(e.transactions)&&z(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var n=0,a=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount,0===t&&(a=e.createdAt),1}),o.createElement(Se,{key:"my-his"+t,style:0===t?lt.myDueFirst:lt.myDue},o.createElement(Se,{style:{marginTop:4}},o.createElement(Ne,{style:{}},"Paid for: "+q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),o.createElement(Se,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Ne,{style:{fontSize:17}},"Rs "+n)),o.createElement(Se,{style:{width:"100%"}},o.createElement(Ne,null,"Paid On: "+rt(a))))}):o.createElement(Ne,{style:{padding:20}},"No History found"))}}]),t}(o.Component),lt={myDue:{margin:7,paddingLeft:15,borderLeftColor:G,borderLeftWidth:1},myDueFirst:{margin:7}},ct=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return z(this.props.data)?this.props.data.map(function(e,t){return o.createElement(Se,{style:{flex:1,borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid",paddingBottom:3}},o.createElement(Se,null,o.createElement(Ne,{key:t,style:{flex:1,fontWeight:"bold"}},e.title)),o.createElement(Se,null,o.createElement(Ne,{key:t,style:{flex:1}},e.description)))}):o.createElement(Ne,null,this.props.message)}}]),t}(o.Component),mt={container:{flex:1,width:"100%",padding:10,marginBottom:10,borderBottomColor:G,borderBottomWidth:1,"border-bottom-style":"solid"},row:{flex:1},card:{flex:1,justifyContent:"center",alignItems:"center",borderRadius:10,padding:5,margin:7},inner:{margin:5,padding:"0px 10px"},txt:{flex:1,paddingTop:7,paddingBottom:5,fontSize:14},img:{width:25,height:25,margin:5}},ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:dt.content},o.createElement(Se,{className:"fl",style:mt.container},o.createElement(Se,{style:mt.row},o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("members")}},o.createElement(je,{src:Ue.members,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},(this.props.home.members?this.props.home.members.length+"":"")+" MEMBER"+(0===this.props.home.members.length||this.props.home.members.length>1?"S":""))),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("vehicles")}},o.createElement(je,{src:Ue.vehicle,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},(this.props.home.vehicles?this.props.home.vehicles.length+"":"")+" VEHICLE"+(0===this.props.home.vehicles.length||this.props.home.vehicles.length>1?"S":""))),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("servents")}},o.createElement(je,{src:Ue.servent,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},(this.props.home.servents?this.props.home.servents.length+"":"")+" SERVANT"+(0===this.props.home.servents.length||this.props.home.servents.length>1?"S":""))),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(je,{src:Ue.support,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"TICKET(S)")),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("visitors")}},o.createElement(je,{src:Ue.visitors,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"VISITOR(S)")))),o.createElement(Se,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Se,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ce,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},dt.tab,dt.activeTab):dt.tab,onClick:function(){return e.setState({activeTab:1})}},"MY DUES"),o.createElement(Ce,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},dt.tab,dt.activeTab):dt.tab,onClick:function(){return e.setState({activeTab:2})}},"ADVANCE"),o.createElement(Ce,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},dt.tab,dt.activeTab):dt.tab,onClick:function(){return e.setState({activeTab:3})}},"HISTORY")),o.createElement(Se,{style:{flex:1,flexDirection:"row",padding:10}},1===this.state.activeTab?o.createElement(nt,{history:this.props.history,user:this.props.user,home:this.props.home,onPaymentUpload:this.props.onPaymentUpload,onPaymentUpdate:this.props.onPaymentUpdate}):2===this.state.activeTab?o.createElement(ct,{data:[],message:"No advance found!"}):3===this.state.activeTab?o.createElement(it,{history:this.props.history,home:this.props.home}):4===this.state.activeTab?o.createElement(ct,{data:[],message:"Work in progress"}):[])))}}]),t}(o.Component),dt={content:{flex:1,width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:F,"border-bottom-style":"solid",color:F}},pt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:ht.content},o.createElement(Se,{className:"fl",style:mt.container},o.createElement(Se,{style:mt.row},o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(je,{src:Ue.support,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"TICKET")),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("ads")}},o.createElement(je,{src:Ue.addvertise,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"ADS")),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("notification")}},o.createElement(je,{src:Ue.reminder,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"NOTIFICATION")),this.props.appUser.role===Z.ADMIN&&o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("users")}},o.createElement(je,{src:Ue.users,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},this.props.users.isUpToDate?(this.props.users.isError?0:this.props.users.data.length)+" USER"+(this.props.users.isError||0===this.props.users.data.length||this.props.users.data.length>1?"S":""):"Loading")),this.props.appUser.role===Z.ADMIN&&o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("homes")}},o.createElement(je,{src:Ue.homes,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},this.props.homes.isUpToDate?(this.props.homes.isError?0:this.props.homes.data.length)+" HOME"+(this.props.homes.isError||0===this.props.homes.data.length||this.props.homes.data.length>1?"S":""):"Loading")),this.props.appUser.role===Z.ADMIN&&o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("blocks")}},o.createElement(je,{src:Ue.blocks,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},this.props.blocks.isUpToDate?(this.props.blocks.isError?0:this.props.blocks.data.length)+" BLOCK"+(this.props.blocks.isError||0===this.props.blocks.data.length||this.props.blocks.data.length>1?"S":""):"Loading")),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("all-visitors")}},o.createElement(je,{src:Ue.visitors,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"VISITOR(S)")),o.createElement(Se,{className:"fl pointer",style:Object(y.a)({},mt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("payment")}},o.createElement(je,{src:Ue.money,style:mt.img}),o.createElement(Se,{className:"pointer",style:mt.txt},"PAYMENT")))))}}]),t}(o.Component),ht={content:{flex:1,width:"100%"}},ft=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{style:gt.container},o.createElement("input",{type:"radio",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),z(this.props.text)&&o.createElement("label",{style:gt.text},this.props.text))}}]),t}(o.Component);ft.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var gt={container:{marginRight:10},circle:{height:24,width:24,borderRadius:12,borderWidth:2,borderColor:F,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,borderRadius:6,backgroundColor:F},text:{marginLeft:5}},yt={container:{},head:{flexDirection:"row",alignContent:"flex-start",backgroundColor:F,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},title:{flex:15,alignSelf:"flex-start",width:"auto","font-weight":"bold",fontSize:20,color:K},close:{flex:1,alignSelf:"flex-end",marginBottom:5},row:{marginTop:3,marginBottom:3,paddingTop:5,paddingBottom:5},ele:{flex:1,width:"100%"},radio:{borderColor:G,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioText:{},radioActive:{backgroundColor:F,borderColor:F,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioActiveText:{color:K},saveBtn:{marginTop:5,marginBottom:3,paddingTop:5,paddingBottom:5}},Et=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onImageSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=$();o+="."+a[a.length-1],n.setState({fileName:o});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){e||_e.fail(t||"Failed to upload file.")})}}},n.onSave=function(){var e=n.state.name;if(z(e)?e+=" ("+n.state.type+")":e=n.state.type,!1===n.state.showHomes&&n.state.homeId.length>0&&z(e)&&z(n.state.fileName)){var t={_id:"",name:e,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",image:n.state.fileName};n.props.onSave(n.state.homeId,t,n.props.user,n.props.appUser,function(t){!0===t||_e.fail("Failed to save visitor "+e+".")}),n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""}),_e.info("Visitor will be saved and notified to the home.")}else _e.warn("Please fill Home and Image before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""})},n.state={homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onClear=n.onClear.bind(Object(ue.a)(n)),n.onImageSelect=n.onImageSelect.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Se,{style:bt.container},o.createElement(Se,{style:yt.row},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("all-visitors")},style:Object(y.a)({},bt.ele,{color:B,fontWeight:"bold",textAlign:"right"})},"View all Active Visitors"))),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},yt.ele,bt.ele,{flexDirection:"row",padding:12,borderWidth:1,borderColor:G,borderRadius:5}),value:this.state.homeSearchText,onChange:function(t){return e.setState({showHomes:!0,homeSearchText:t.target.value})}})),this.state.showHomes&&z(this.state.homeSearchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(we,{style:Object(y.a)({},yt.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.homeSearchText.toLowerCase())>=0}).map(function(t,n){return o.createElement(Ne,{className:"pointer",key:"ho"+n,style:Object(y.a)({},bt.ele,{flexDirection:"column",margin:3,padding:6,backgroundColor:V}),onClick:function(){e.setState({homeSearchText:t.number,homeId:t._id,showHomes:!1})}},t.number)})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"VISITOR"===this.state.type,text:"Visitor",onPress:function(){return e.setState({type:"VISITOR"})}}),o.createElement(ft,{isActive:"FOOD"===this.state.type,text:"Food",onPress:function(){return e.setState({type:"FOOD"})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},bt.ele,De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},bt.ele,De,yt.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},bt.ele,De,yt.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:this.onImageSelect}),z(this.state.fileName)&&o.createElement(Ne,{style:Object(y.a)({},bt.ele,{marginLeft:15})},this.state.fileName)),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{title:"SAVE",onPress:this.onSave,style:Object(y.a)({},bt.ele,{marginRight:10})}),o.createElement(Ae,{title:"CLEAR",onPress:this.onClear,style:bt.ele})))}}]),t}(o.Component),bt={container:{width:"100%",paddingLeft:15,paddingRight:15},ele:{fontSize:17}},vt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Ot.content},o.createElement(Et,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.props.onSaveVisitor,onUpload:this.props.onUpload}),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Ot={content:{flex:1,width:"100%"}},St=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.appUser.role===Z.USER?this.props.appUser.homeIndex>=0&&z(this.props.user.homes)?o.createElement(ut,{history:this.props.history,user:this.props.user,home:this.props.user.homes[this.props.appUser.homeIndex],onPaymentUpload:function(t,n,a){return e.props.onPaymentUpload(t,n,e.props.user,a)},onPaymentUpdate:function(t,n,a){return e.props.onPaymentUpdate(t,n,e.props.appUser.homeIndex,e.props.user,a)}}):o.createElement(Ne,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."):this.props.appUser.role===Z.ADMIN||this.props.appUser.role===Z.MANAGER?o.createElement(pt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,ads:this.props.ads,users:this.props.users,homes:this.props.homes,tickets:this.props.tickets,blocks:this.props.blocks}):this.props.appUser.role===Z.GATEKEEPER?o.createElement(vt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSaveVisitor:this.props.onSaveVisitor,onUpload:this.props.onUpload}):o.createElement(Ne,{style:{margin:20}},"No role assigned to you. Please contact administrator/manager.")}}]),t}(o.Component),wt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks}},function(e){return{onPaymentUpload:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new ee).post("paymentupload",function(e,o){J(e)&&J(e.data)&&e.data.approvalid>0?(t($e(n)),a(!0)):a(!1)},e)}}(t,0,a,o))},onPaymentUpdate:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new ee).post("payment/transaction/"+e,function(r,i){if(J(r)&&J(r.data)&&r.data.length>0){t._id=r.data;var l=a.homes[n].payments.findIndex(function(t){return t._id===e});a.homes[n].payments[l].transactions||(a.homes[n].payments[l].transactions=[]),a.homes[n].payments[l].transactions.push(t),s($e(a)),o(!0)}else o(!1)},t)}}(t,n,a,o,s))},onSaveVisitor:function(t,n,a,o,s){return e(et(t,n,0,0,s))},onUpload:function(t,n){return e(tt(t,n))}}})(St),jt=function(e,t,n,a){return function(o){e&&e._id&&e._id.length>0?(new ee).put("member/"+e._id,function(s,r){if(J(s)&&J(s.data)&&s.data.length>0){var i=t.homes[n].members,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,i[l].type=e.type,t.homes[n].members=i,o(kt(t)),a(!0,"")}else a(!1,r)},e):(new ee).post("member/"+t.homes[n]._id,function(s,r){if(J(s)&&J(s.data)&&s.data.length>0){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].members;i.push(e),t.homes[n].members=i,o(kt(t)),a(!0,"")}else a(!1,r)},e)}},kt=function(e){return{type:a.LOAD_USER,payload:e}},xt=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},It={content:{backgroundColor:H},row:{alignItems:"flex-start",borderBottomColor:G,borderBottomWidth:1,"border-bottom-style":"solid",marginTop:5},ele:{alignItems:"flex-start",marginTop:1,marginBottom:3,padding:2}},Nt={addIcon:{width:20,height:20,cursor:"pointer"},editIcon:{width:20,height:20,cursor:"pointer"},deleteIcon:{width:18,height:20,cursor:"pointer"},closeIcon:{width:17,height:17,cursor:"pointer"},datePicker:{width:20,height:23,cursor:"pointer"}},Ct=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)&&z(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),_e.success("Member saved successfully.")):_e.fail(z(t)?t:"Failed to save member.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Member removed successfully."):_e.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("new-member")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),z(this.props.user.homes[this.props.homeIndex].members)?this.props.user.homes[this.props.homeIndex].members.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},De,yt.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:It.ele},o.createElement(ft,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ft,{isActive:"OWNER"===e.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(ft,{isActive:"TENANT"===e.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.name)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.age+", "+("M"===t.gender?"Male":"Female"))),z(t.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.mobileNo)),z(t.emailId)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.emailId)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.type)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No Member found!!!"),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),At=Object(p.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(jt(t,n,a,o))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new ee).delete("member/"+e,function(r,i){J(r)&&J(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(kt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&z(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(xt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(Ct),Tt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)&&z(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),_e.success("Member saved successfully.")):_e.fail(z(t)?t:"Failed to save member.")})}else _e.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},De,yt.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(ft,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Ut=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(jt(t,n,a,o))}}})(Tt),Lt=function(e,t,n,a){return function(o){e&&z(e._id)?(new ee).put("vehicle/"+e._id,function(s,r){if(J(s)&&z(s.data)){var i=t.homes[n].vehicles,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].type=e.type,t.homes[n].vehicles=i,o(Dt(t)),a(!0)}else a(!1)},e):(new ee).post("vehicle/"+t.homes[n]._id,function(s,r){if(J(s)&&z(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].vehicles;i.push(e),t.homes[n].vehicles=i,o(Dt(t)),a(!0)}else a(!1)},e)}},Dt=function(e){return{type:a.LOAD_USER,payload:e}},Rt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.number)&&z(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",type:""}),_e.success("Vehicle saved successfully.")):_e.fail("Failed to save vehicle.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Vehicle removed successfully."):_e.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("new-vehicle")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),z(this.props.user.homes[this.props.homeIndex].vehicles)?this.props.user.homes[this.props.homeIndex].vehicles.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(ft,{isActive:"TWO WHEELER"===e.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(ft,{isActive:"FOUR WHEELER"===e.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",type:""})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.type)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.number)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,type:t.type})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No Vehicle found!!!"),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),_t=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Lt(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).delete("vehicle/"+e,function(s,r){J(s)&&J(s.data)&&!0===s.data?(t.homes[n].vehicles=t.homes[n].vehicles.filter(function(t,n){return t._id!==e}),o(Dt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Rt),Mt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.number)&&z(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",type:""}),_e.success("Vehicle saved successfully.")):_e.fail("Failed to save vehicle.")})}else _e.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"TWO WHEELER"===this.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(ft,{isActive:"FOUR WHEELER"===this.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Pt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Lt(t,n,a,o))}}})(Mt),Ft=function(e,t,n,a){return function(o){e&&z(e._id)?(new ee).put("servent/"+e._id,function(s,r){if(J(s)&&z(s.data)){var i=t.homes[n].servents,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,t.homes[n].servents=i,o(Bt(t)),a(!0)}else a(!1)},e):(new ee).post("servent/"+t.homes[n]._id,function(s,r){if(J(s)&&z(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].servents;i.push(e),t.homes[n].servents=i,o(Bt(t)),a(!0)}else a(!1)},e)}},Bt=function(e){return{type:a.LOAD_USER,payload:e}},Ht=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),_e.success("Servent saved successfully.")):_e.fail("Failed to save servent.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Servent removed successfully."):_e.fail("Failed to remove servent.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("new-servent")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),z(this.props.user.homes[this.props.homeIndex].servents)?this.props.user.homes[this.props.homeIndex].servents.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},De,yt.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:It.ele},o.createElement(ft,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.name)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.age+", "+("M"===t.gender?"Male":"Female"))),z(t.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.mobileNo)),z(t.emailId)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.emailId)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No Servent found!!!"),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Wt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Ft(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).delete("servent/"+e,function(s,r){J(s)&&J(s.data)&&!0===s.data?(t.homes[n].servents=t.homes[n].servents.filter(function(t,n){return t._id!==e}),o(Bt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Ht),Vt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),_e.success("Servent saved successfully.")):_e.fail("Failed to save servent.")})}else _e.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},De,yt.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Gt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Ft(t,n,a,o))}}})(Vt),Yt=function(e,t,n,a,o){return function(s){e&&e._id&&e._id.length>0?(new ee).put("ticket/"+e._id,function(n,r){if(J(n)&&z(n.data)){var i=[];if(z(a.data)){var l=(i=a.data).findIndex(function(e){return e._id===n.data});i[l]._id=n.data,i[l].title=e.title,i[l].description=e.description,i[l].status=e.status,i[l].updatedBy=t.name,s(Zt(i,!0,!1,""))}o(!0)}else o(!1)},e):(new ee).post("ticket/"+t.homes[n]._id,function(r,i){if(J(r)&&z(r.data)){var l=[];z(a.data)&&((l=a.data).unshift({_id:r.data,_homeId:t.homes[n].number,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),s(Zt(l,!0,!1,""))),o(!0)}else o(!1)},e)}},Kt=function(e){return{type:a.LOAD_USER,payload:e}},Zt=function(e,t,n,o){return{type:a.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},qt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.title)&&z(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}),_e.success("Ticket saved successfully.")):_e.fail("Failed to save ticket.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?_e.success("Ticket removed successfully."):_e.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})},n.onResolve=function(e){Object(We.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onResolve(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?_e.success("Ticket resolved successfully."):_e.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})},n.onStart=function(e){Object(We.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onStart(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?_e.success("Ticket started successfully."):_e.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})},n.onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[],comment:""}):n.setState({viewId:e,comments:t,comment:""})},n.onAddComment=function(e){z(n.state.comment)?(n.setState({isLoading:!0}),n.props.onAddComment(e,{_id:"",comment:n.state.comment,createdBy:n.props.user.name,createdAt:new Date},n.props.appUser,n.props.user,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({comment:""}),_e.success("Comment added successfully.")):_e.fail("Failed to add comment.")})):_e.warn("Please fill comment before Add.")},n.state={isLoading:!1,data:[],isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n.onResolve=n.onResolve.bind(Object(ue.a)(n)),n.onStart=n.onStart.bind(Object(ue.a)(n)),n.onView=n.onView.bind(Object(ue.a)(n)),n.onAddComment=n.onAddComment.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.appUser.role===Z.ADMIN||this.props.appUser.role===Z.MANAGER?"":this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||_e.fail("Failed to load Tickets.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},this.props.appUser.role===Z.USER&&o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ticket")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),J(this.props.tickets)&&this.props.tickets.isUpToDate&&!this.props.tickets.isError&&z(this.props.tickets.data)?this.props.tickets.data.map(function(t,n){return o.createElement(Se,{key:"tkt"+n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.createdBy+" from "+t._homeId+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}}):o.createElement(Ne,null,t.title)),o.createElement(Se,{style:It.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}}):o.createElement(Ne,null,t.description)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.status)),e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon}))):o.createElement(Se,{style:It.ele},e.props.appUser.role===Z.USER&&o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),e.props.appUser.role===Z.USER&&o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon})),e.props.appUser.role===Z.USER&&o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.onResolve(t._id)}},o.createElement(Ne,{className:"pointer",style:{color:B}},"RESOLVE")),(e.props.appUser.role===Z.ADMIN||e.props.appUser.role===Z.MANAGER)&&"INIT"===t.status&&o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.onStart(t._id)}},o.createElement(Ne,{className:"pointer",style:{color:B}},"START")),o.createElement(Ce,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Ne,{className:"pointer",style:{color:B}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Se,{style:zt.cmntsCnr},o.createElement(Se,{style:zt.cmntsHdr},o.createElement(Ne,{style:zt.cmntsHdrTxt},"Comments")),o.createElement(Se,{style:zt.cmntsCnt},z(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(Se,{key:"tktcmt"+t,style:0===t?zt.cmntCnrFst:zt.cmntCnr},o.createElement(Se,{style:zt.cmntHdr},o.createElement(Ne,null,e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:zt.cmntCnt},o.createElement(Ne,null,e.comment)))}):o.createElement(Ne,{style:{padding:20}},"No Comments found!!!"),o.createElement(Se,{style:zt.addCmntCnt},o.createElement(xe,{placeholder:"Comment Text",className:"form-control",style:Object(y.a)({},De,zt.newCmnt),value:e.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),o.createElement(Se,{style:zt.saveBtn},o.createElement(Ae,{title:"ADD COMMENT",onPress:function(){return e.onAddComment(t._id)}}))))))}):o.createElement(Ne,{style:{padding:20}},this.props.tickets.isUpToDate?this.props.tickets.isError?this.props.tickets.errorMessage:"No Ticket found!!!":"Loading..."),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),zt={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:G,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:G},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{},addCmntCnt:{marginTop:5,marginBottom:5},newCmnt:{width:"100%",borderWidth:1,borderColor:G},saveBtn:{marginTop:5}},Jt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(e){e(Zt([],!1,!1,"")),(new ee).get("tickets"+(z(t)?"/"+t:""),function(t,a){J(t)?(e(Zt(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onSave:function(t,n,a,o,s){return e(Yt(t,n,a,o,s))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new ee).delete("ticket/"+e,function(r,i){J(r)&&J(r.data)&&!0===r.data?(((","+t.role+",").indexOf(","+Z.ADMIN+",")>=0||(","+t.role+",").indexOf(","+Z.MANAGER+",")>=0)&&J(a)&&a.isUpToDate&&!a.isError&&z(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(Zt(a.data,!0,!1,""))),(","+t.role+",").indexOf(","+Z.USER+",")>=0&&(t.homes[n].tickets=t.homes[n].tickets.filter(function(t,n){return t._id!==e}),s(Kt(t))),o(!0)):o(!1)})}}(t,n,a,o,s))},onResolve:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new ee).delete("ticket/resolve/"+e,function(n,s){J(n)&&J(n.data)&&!0===n.data?(z(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(Zt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onStart:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new ee).put("ticket/start/"+e,function(n,s){if(J(n)&&J(n.data)&&!0===n.data){if(z(a.data)){var r=[],i=(r=a.data).findIndex(function(t){return t._id===e});r[i].status="IN-PROGRESS",t(Zt(r,!0,!1,""))}o(!0)}else o(!1)},{status:"IN-PROGRESS"})}}(t,0,0,o,s))},onAddComment:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){z(t._id)?(new ee).put("ticket/comment/"+t._id,function(a,r){if(J(a)&&z(a.data)){t.createdAt=new Date;var i=[];if(z(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e}),c=i[l].comments.findIndex(function(e){return e._id===t._id});i[l].comments[c]=t,n(Zt(i,!0,!1,""))}s(!0)}else s(!1)},t):(new ee).post("ticket/comment/"+e,function(a,r){if(J(a)&&z(a.data)){t._id=a.data,t.createdAt=new Date;var i=[];if(z(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e});i[l].comments.unshift(t),n(Zt(i,!0,!1,""))}s(!0)}else s(!1)},t)}}(t,n,0,0,s,r))}}})(qt),Xt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.title)&&z(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:"",status:"INIT"}),_e.success("Ticket saved successfully.")):_e.fail("Failed to save ticket.")})}else _e.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",title:"",description:"",status:"INIT"},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},this.props.appUser.role===Z.USER?o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))):o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings->My Role and try again."))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),$t=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,n,a,o,s){return e(Yt(t,n,a,o,s))}}})(Xt),Qt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",image:"img.jpg"};n.props.onSave(n.props.user.homes[n.props.appUser.homeIndex]._id,e,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""}),_e.success("Visitor saved successfully.")):_e.fail("Failed to save visitor.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Visitor removed successfully."):_e.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1,isZoomImage:!1,zoomImage:"",isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),_e.fail(t)})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},z(this.state.data)?this.state.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:yt.ele},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},De,yt.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:It.ele},o.createElement(ft,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:""})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),z(t.name)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"["+t._homeId+"] "+t.name)),(t.age>0||z(t.gender))&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.age+", "+("M"===t.gender?"Male":"Female"))),z(t.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.mobileNo)),z(t.image)&&o.createElement(Se,{style:It.ele},o.createElement(Ce,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(je,{src:P+t.image,style:{height:100}}))))}):o.createElement(Ne,{style:{padding:20}},"No Visitor found!!!"),o.createElement(He.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(Se,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(je,{src:P+this.state.zoomImage,style:{height:"40%"}}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),en=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onLoad:function(t,n,a,o){return e(Qe(0,n,a,o))},onSave:function(t,n,a,o,s){return e(et(t,n,0,0,s))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new ee).delete("visitor/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,0,0,o))}}})(Qt),tn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).passwordPolicyCheck=function(e){var t=/[A-Z]/,n=/[a-z]/,a=/[0-9]/,o=/[!|@|#|$|%|^|&|*|(|)|-|_]/,s="";if(e.length<6)return s="New Password not long enough!";for(var r=0,i=0,l=0,c=0,m=0;m<e.length;m++)t.test(e[m])?r++:n.test(e[m])?i++:a.test(e[m])?l++:o.test(e[m])&&c++;return r<1||i<1||l<1||c<1?s="New Password dose not match with password policy!":s},n.onUpdate=function(){if(z(n.state.password)&&z(n.state.newPassword)&&z(n.state.confirmNewPassword))if(n.state.newPassword===n.state.confirmNewPassword){var e=n.passwordPolicyCheck(n.state.newPassword);e.length<1?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.password,n.state.newPassword,function(e,t){n.setState({isLoading:!1}),!0===e?(_e.success("Password updated successfully. Please login with your new password."),n.props.onLogout(function(e){})):_e.fail(t)})):_e.warn(e)}else _e.warn("New Password and Confirm New Password not matchs.");else _e.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,password:"",newPassword:"",confirmNewPassword:""},n.passwordPolicyCheck=n.passwordPolicyCheck.bind(Object(ue.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"password",placeholder:"Password",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"password",placeholder:"New Password",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"password",placeholder:"Confirm New Password",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"UPDATE",onPress:this.onUpdate})),o.createElement(Se,{style:{marginTop:7}},o.createElement(Ne,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),nn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).post("account/changepassword/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0,""):a(!1,t)},{password:t,newPassword:n})}}(t,n,a,o))},onLogout:function(t){return e(te(t))}}})(tn),an=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){z(n.state.name)&&z(n.state.mobileNo)&&z(n.state.emailId)?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.name,n.state.mobileNo,n.state.emailId?n.state.emailId.toLowerCase():"",n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?_e.success("Profile updated successfully."):_e.fail(t)})):_e.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,name:"",mobileNo:"",emailId:""},n.onUpdate=n.onUpdate.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.user.name,mobileNo:this.props.user.mobileNo,emailId:this.props.user.emailId})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),on=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(r){(new ee).put("account/profile/"+e,function(e,i){J(e)&&J(e.data)&&!0===e.data?(o.name=t,o.mobileNo=n,o.emailId=a,r(se(o)),s(!0,"")):s(!1,i)},{name:t,mobileNo:n,emailId:a})}}(t,n,a,o,s,r))}}})(an),sn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){z(n.state.role)?(n.setState({isLoading:!0}),n.props.onUpdate(n.state.role,function(e,t){n.setState({isLoading:!1}),!0===e?_e.success("Role updated successfully."):_e.fail(t)})):_e.warn("Please select role before Update.")},n.state={isLoading:!1,role:""},n.onUpdate=n.onUpdate.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({role:this.props.appUser.role})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(Ie,{className:"form-control",value:this.state.role,style:yt.ele,onChange:function(t){return e.setState({role:t.target.value})}},this.props.user.role.split(",").map(function(e,t){return o.createElement("option",{key:"role"+t,value:e},e)}))),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),rn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,n){return e(function(e,t){return function(n){n(ae(e)),t(!0,"")}}(t,n))}}})(sn),ln=function(e,t){return function(n){n(mn([],!1,!1,"")),(new ee).get("ads/"+e,function(e,a){J(e)&&J(e.data)?(n(mn(e.data,!0,!1,"")),t(!0)):t(!1)})}},cn=function(e,t,n,a,o){return function(s){t&&z(t._id)?(new ee).put("ad/"+t._id,function(e,n){if(J(e)&&z(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].title=t.title,a[r].description=t.description,s(mn(a,!0,!1,"")),o(!0)}else o(!1)},t):(new ee).post("ad/"+e,function(e,r){J(e)&&z(e.data)?(a.unshift({_id:e.data,title:t.title,description:t.description,createdBy:n.name,createdAt:new Date}),s(mn(a,!0,!1,"")),o(!0)):o(!1)},t)}},mn=function(e,t,n,o){return{type:a.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},un=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.title)&&z(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:""}),_e.success("Ad saved successfully.")):_e.fail("Failed to save ad.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Ad removed successfully."):_e.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1}),t||_e.fail("Failed to load Ads.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ad")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),this.props.ads.isUpToDate&&!this.props.ads.isError&&z(this.props.ads.data)?this.props.ads.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:""})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.title)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No Ad found!!!":"Loading..."),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),dn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,n){return e(ln(t,n))},onSave:function(t,n,a,o,s){return e(cn(t,n,a,o,s))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).delete("ad/"+e,function(o,s){J(o)&&J(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(mn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(un),pn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.title)&&z(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:""}),_e.success("Ad saved successfully.")):_e.fail("Failed to save ad.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),hn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,n,a,o,s){return e(cn(t,n,a,o,s))}}})(pn),fn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(e){var t="";if(n.props.homes.isUpToDate&&!n.props.homes.isError&&z(n.props.homes.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&z(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.userId===e}).map(function(e,t){return a.push(e.homeId)}),n.props.homes.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.number})}return t},n.onSearch=function(){if(z(n.state.searchText)&&n.props.users.isUpToDate&&!n.props.users.isError&&z(n.props.users.data)){var e=n.state.searchText.toLocaleLowerCase(),t=n.props.homes.data.filter(function(t){return t.number.toLocaleLowerCase()===e});n.setState({searchResult:n.props.users.data.filter(function(n){return(n.name+"").toLocaleLowerCase().indexOf(e)>=0||(n.mobileNo+"").toLocaleLowerCase().indexOf(e)>=0||(n.emailId+"").toLocaleLowerCase().indexOf(e)>=0||(n.number+"").toLocaleLowerCase().indexOf(e)>=0||z(t.filter(function(e){return e.memberIds.indexOf(n._id)>=0}))}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.appUser.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),_e.success("User removed successfully.")):_e.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getHomes=n.getHomes.bind(Object(ue.a)(n)),n.onSearch=n.onSearch.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-user/0")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),o.createElement(Se,{style:Object(y.a)({},yt.row,{marginTop:0,paddingTop:0})},o.createElement(ke,{type:"text",placeholder:"Search User",className:"form-control",style:Object(y.a)({},De,yt.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ce,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(je,{className:"pointer",src:Ue.search,style:{width:30,height:30}}))),z(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Se,{key:"usr"+n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Name: "+(z(t.name)?t.name:""))),t._id!==e.props.user._id&&o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-user/"+t._id)}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No user match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Se,{style:It.row},o.createElement(Se,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ne,{style:{color:B,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),gn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new ee).delete("member/"+e,function(r,i){J(r)&&J(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(kt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&z(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(xt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(fn),yn=function(e,t,n){return function(a){(new ee).get("home/"+e,function(e,a){J(e)&&J(e.data)&&z(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):n(z(e.message)?e.message:"Failed to load Home.")})}},En=function(e){return{type:a.LOAD_USER,payload:e}},bn=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},vn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(e){var t="";if(n.props.users.isUpToDate&&!n.props.users.isError&&z(n.props.users.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&z(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.homeId===e}).map(function(e,t){return a.push(e.userId)}),n.props.users.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.name})}return t},n.onSearch=function(){if(z(n.state.searchText)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&z(n.props.homes.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.homes.data.filter(function(t){return(t.number+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homes,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),_e.success("Home removed successfully.")):_e.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getUsers=n.getUsers.bind(Object(ue.a)(n)),n.onSearch=n.onSearch.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-home/0")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),o.createElement(Se,{style:Object(y.a)({},yt.row,{marginTop:0,paddingTop:0})},o.createElement(ke,{type:"text",placeholder:"Search Home",className:"form-control",style:Object(y.a)({},De,yt.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ce,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(je,{className:"pointer",src:Ue.search,style:{width:30,height:30}}))),z(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Se,{key:"home"+n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Number: "+t.number)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.props.history.push("view-home/"+t._id)}},o.createElement(je,{src:Ue.view,style:Nt.editIcon})),o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-home/"+t._id)}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No home match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Se,{style:It.row},o.createElement(Se,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ne,{style:{color:B,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),On=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).delete("home/"+e,function(s,r){J(s)&&J(s.data)&&!0===s.data?(t.homes=t.homes.filter(function(t,n){return t._id!==e}),n.data=n.data.filter(function(t,n){return t._id!==e}),o(En(t)),o(bn(n.data,!0,!1,"")),a(!0)):a(!1)})}}(t,n,a,o))}}})(vn),Sn=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{style:wn.container},o.createElement("input",{type:"checkbox",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),o.createElement("label",{style:wn.text},this.props.text))}}]),t}(o.Component);Sn.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var wn={container:{marginRight:10},circle:{height:24,width:24,borderWidth:2,borderColor:F,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,backgroundColor:F},text:{marginLeft:5}},jn={mListCnr:{borderColor:B,borderWidth:1,height:"50%"},mListActiveRow:{padding:3,backgroundColor:B,color:K,borderBottomWidth:1,borderBottomColor:G,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"},mListRow:{padding:3,borderBottomWidth:1,borderBottomColor:G,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"}},kn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(){var e="";return z(n.state.homeIds)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&z(n.props.homes.data)&&n.props.homes.data.filter(function(e){return n.state.homeIds.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.number}),e},n.onSave=function(){if(z(n.state.name)&&n.state.age>0&&z(n.state.gender)){var e="";n.state.role.isAdmin&&(e=Z.ADMIN),n.state.role.isManager&&(e+=(e.length>0?",":"")+Z.MANAGER),n.state.role.isGatekeeper&&(e+=(e.length>0?",":"")+Z.GATEKEEPER),n.state.role.isUser&&(e+=(e.length>0?",":"")+Z.USER),n.setState({isLoading:!0});var t={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:e};n.props.onSave(t,n.state.homeIds,n.props.user,n.props.users,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),_e.success("User saved successfully.")):_e.fail(z(t)?t:"Failed to save user.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleHomeModel=function(e){n.setState({isShowHomes:e})},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1},isShowHomes:!1},n.getHomes=n.getHomes.bind(Object(ue.a)(n)),n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t,n){t&&z(t._id)?e.setState({isLoading:!1,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,homeIds:n,role:{isAdmin:(","+t.role+",").indexOf(","+Z.ADMIN+",")>=0,isManager:(","+t.role+",").indexOf(","+Z.MANAGER+",")>=0,isGatekeeper:(","+t.role+",").indexOf(","+Z.GATEKEEPER+",")>=0,isUser:(","+t.role+",").indexOf(","+Z.USER+",")>=0}}):_e.fail("Failed to load User.")},function(e){_e.fail(z(e)?e:"Failed to load User.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},De,yt.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(ft,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(ft,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Role: ")),o.createElement(Se,{style:yt.row},o.createElement(Sn,{isActive:this.state.role.isAdmin,text:Z.ADMIN,onPress:function(){e.state.role.isAdmin=!e.state.role.isAdmin,e.setState({})}}),o.createElement(Sn,{isActive:this.state.role.isManager,text:Z.MANAGER,onPress:function(){e.state.role.isManager=!e.state.role.isManager,e.setState({})}}),o.createElement(Sn,{isActive:this.state.role.isGatekeeper,text:Z.GATEKEEPER,onPress:function(){e.state.role.isGatekeeper=!e.state.role.isGatekeeper,e.setState({})}}),o.createElement(Sn,{isActive:this.state.role.isUser,text:Z.USER,onPress:function(){e.state.role.isUser=!e.state.role.isUser,e.setState({})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Home(s): "+this.getHomes())),o.createElement(Se,{style:yt.row},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isShowHomes:!0})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon}))),this.props.homes.isUpToDate&&!this.props.homes.isError&&z(this.props.homes.data)&&o.createElement(He.a,{open:this.state.isShowHomes,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Se,{style:Ve.container},o.createElement(we,{style:Object(y.a)({},jn.mListCnr,{maxHeight:"50%"})},this.props.homes.data.map(function(t,n){return o.createElement(Ne,{key:"home"+n,style:e.state.homeIds.indexOf(t._id)>=0?jn.mListActiveRow:jn.mListRow,onClick:function(){e.state.homeIds.indexOf(t._id)>=0?e.setState({homeIds:e.state.homeIds.filter(function(e){return e!==t._id})}):(e.state.homeIds.push(t._id),e.setState({}))}},t.number)})))),o.createElement(Se,{style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),xn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("member/"+e,function(e,a){J(e)&&J(e.data)&&J(e.data.member)&&z(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):n(z(e.message)?e.message:"Failed to load Member.")})}}(t,n,a))},onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(e=Object.assign(e,{isAM:!0,homeIds:t}))&&z(e._id)?(new ee).put("member/"+e._id,function(t,s){if(J(t)&&J(t.data)&&t.data.length>0){if(a.isUpToDate&&!a.isError&&z(a.data)){var r=a.data.findIndex(function(e){return e._id===t.data});a.data[r]._id=t.data,a.data[r].name=e.name,n(xt(a.data,!0,!1,""))}o(!0,"")}else o(!1,s)},e):(new ee).post("member/0",function(t,s){J(t)&&J(t.data)&&t.data.length>0?(a.isUpToDate&&!a.isError&&z(a.data)&&(a.data.push({_id:t.data,name:e.name}),n(xt(a.data,!0,!1,""))),o(!0,"")):o(!1,s)},e)}}(t,n,0,o,s))}}})(kn),In=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(){var e="";return z(n.state.members)&&n.props.users.isUpToDate&&!n.props.users.isError&&z(n.props.users.data)&&n.props.users.data.filter(function(e){return n.state.members.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.name+(z(t.number)?"("+t.number+")":"")}),e},n.onSave=function(){if(z(n.state.blockId)&&z(n.state.number)){n.setState({isLoading:!0});var e={_id:n.state.id,_blockId:n.state.blockId,number:n.state.number,address:n.state.address,bedRoom:n.state.bedRoom,parking:n.state.parking,description:n.state.description,memberIds:n.state.members};n.props.onSave(e,n.props.user,n.props.homes,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),_e.success("Home saved successfully.")):_e.fail(z(t)?t:"Failed to save home.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleUserModel=function(e){n.setState({isShowUsers:e})},n.state={isLoading:!1,id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[],isShowUsers:!1},n.getUsers=n.getUsers.bind(Object(ue.a)(n)),n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onToggleUserModel=n.onToggleUserModel.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){t&&z(t._id)?e.setState({isLoading:!1,id:t._id,blockId:t._blockId,number:t.number,address:t.address,bedRoom:t.bedRoom,parking:t.parking,description:t.description,members:t.memberIds}):_e.fail("Failed to load Home.")},function(e){_e.fail(z(e)?e:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(Ie,{className:"form-control",value:this.state.blockId,style:yt.ele,onChange:function(t){return e.setState({blockId:t.target.value})}},o.createElement("option",{key:"block0",value:""},"Select Block"),this.props.blocks&&this.props.blocks.isUpToDate&&!this.props.blocks.isError&&z(this.props.blocks.data)&&this.props.blocks.data.map(function(e,t){return o.createElement("option",{key:"block"+t,value:e._id},e.name)}))),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Address",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"No of bed rooms: ")),o.createElement(Se,{style:yt.row},o.createElement(ft,{isActive:1===this.state.bedRoom,text:"1",onPress:function(){return e.setState({bedRoom:1})}}),o.createElement(ft,{isActive:2===this.state.bedRoom,text:"2",onPress:function(){return e.setState({bedRoom:2})}}),o.createElement(ft,{isActive:3===this.state.bedRoom,text:"3",onPress:function(){return e.setState({bedRoom:3})}}),o.createElement(ft,{isActive:4===this.state.bedRoom,text:"4",onPress:function(){return e.setState({bedRoom:4})}}),o.createElement(ft,{isActive:5===this.state.bedRoom,text:"5",onPress:function(){return e.setState({bedRoom:5})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Parking",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.parking,onChange:function(t){return e.setState({parking:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"User(s): "+this.getUsers())),o.createElement(Se,{style:yt.row},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isShowUsers:!0})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon}))),this.props.users.isUpToDate&&!this.props.users.isError&&z(this.props.users.data)&&o.createElement(He.a,{open:this.state.isShowUsers,onClose:function(){return e.onToggleUserModel(!1)}},o.createElement(Se,{style:Ve.container},o.createElement(we,{style:Object(y.a)({},jn.mListCnr,{maxHeight:"50%"})},this.props.users.data.map(function(t,n){return o.createElement(Ne,{key:"user"+n,style:e.state.members.indexOf(t._id)>=0?jn.mListActiveRow:jn.mListRow,onClick:function(){e.state.members.indexOf(t._id)>=0?e.setState({members:e.state.members.filter(function(e){return e!==t._id})}):(e.state.members.push(t._id),e.setState({}))}},t.name+(t.number?"("+t.number+")":""))})))),o.createElement(Se,{style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Nn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(yn(t,n,a))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(t){e&&z(e._id)?(new ee).put("home/"+e._id,function(o,s){if(J(o)&&J(o.data)&&o.data.length>0){if(n.isUpToDate&&!n.isError&&z(n.data)){var r=n.data.findIndex(function(e){return e._id===o.data});n.data[r]._id=o.data,n.data[r].number=e.number,t(bn(n.data,!0,!1,""))}a(!0,"")}else a(!1,s)},e):(new ee).post("home/0",function(o,s){J(o)&&J(o.data)&&o.data.length>0?(n.isUpToDate&&!n.isError&&z(n.data)&&(n.data.push({_id:o.data,number:e.number}),t(bn(n.data,!0,!1,""))),a(!0,"")):a(!1,s)},e)}}(t,0,a,o))},onCheckNumberAvail:function(t,n,a){return e(function(e,t,n){return function(e){(new ee).get("home/checkno/"+t,function(e,t){J(e)&&J(e.data)&&!0===e.data?n(!0):n(!1)})}}(0,n,a))}}})(In),Cn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.getHomeNumber=function(e){if(n.props.homes&&n.props.homes.data&&n.props.homes.data.length>0){var t=n.props.homes.data.filter(function(t,n){return t._id===e});return t&&t.length>0?t[0].number:""}return""},n.onExit=function(e){Object(We.confirmAlert)({title:"Confirm to Send Out",message:"Are you sure you wish to Send Out?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onExit(e,n.props.user,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),_e.success("Visitor sent out successfully.")):_e.fail("Failed to send out visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1,isZoomImage:!1,zoomImage:""},n.onExit=n.onExit.bind(Object(ue.a)(n)),n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,"",function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),_e.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:It.row},o.createElement(Ne,null,"No of Active Visitors: "+this.state.data.length)),z(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),z(t.name)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"["+t._homeId+"] "+t.name)),(t.age>0||z(t.gender))&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,(t.age>0?t.age:"")+(t.age>0&&z(t.gender)?", ":"")+(z(t.gender)?"M"===t.gender?"Male":"Female":""))),z(t.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.mobileNo)),z(t.image)&&o.createElement(Se,{style:It.ele},o.createElement(Ce,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(je,{src:P+t.image,style:{height:100}}))),e.props.appUser.role===Z.GATEKEEPER&&o.createElement(Se,{style:It.ele},o.createElement(Ae,{title:"Exit",onPress:function(){e.onExit(t._id)}})))}):o.createElement(Ne,{style:{padding:20}},"No Visitor found!!!"),o.createElement(He.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(Se,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(je,{src:P+this.state.zoomImage,style:{height:"40%"}}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),An=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e(Qe(0,n,a,o))},onExit:function(t,n,a){return e(function(e,t,n){return function(t){(new ee).delete("visitor/exit/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,0,a))}}})(Cn),Tn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onPush=function(){z(n.state.title)&&z(n.state.body)?Object(We.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0});var e={title:n.state.title,body:n.state.body};n.props.onPush(n.props.user.client._id,e,n.props.user,function(e){if(n.setState({isLoading:!1}),J(e)){var t=n.state.data;t.unshift(e),n.setState({data:t,title:"",body:""}),_e.success("Notification pushed successfully.")}else _e.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):_e.warn("Please fill all the required fields before Push.")},n.state={isLoading:!1,data:[],title:"",body:""},n.onPush=n.onPush.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),_e.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Body",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})}})),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{style:{marginRight:10},title:"PUSH",onPress:this.onPush}),o.createElement(Ae,{title:"CLEAR",onPress:function(){e.setState({title:"",body:""})}})),z(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.title)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.body)),o.createElement(Se,{style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{title:"Duplicate",onPress:function(){e.setState({title:t.title,body:t.body})}})))}):o.createElement(Ne,{style:{padding:20}},"No Nofification found!!!"),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Un=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("notifications/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Notification.")})}}(t,n,a))},onPush:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).post("notification/"+e,function(e,o){J(e)&&z(e.data)?a({_id:e.data,title:t.title,body:t.body,createdBy:n.name,createdAt:new Date}):a(null)},t)}}(t,n,a,o))}}})(Tn),Ln=function(e,t,n,o){return{type:a.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Dn=n(17),Rn=n.n(Dn),_n=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(J(n.state.fromDate)&&J(n.state.toDate)&&z(n.state.place)&&z(n.state.address)){n.setState({isLoading:!0});var e={_homeId:n.props.user.homes[n.props.appUser.homeIndex].number,fromDate:n.state.fromDate,toDate:n.state.toDate,place:n.state.place,address:n.state.address,isReturned:!1,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(e,n.props.user.homes[n.props.appUser.homeIndex]._id,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date}),_e.success("Outing submitted successfully.")):_e.fail("Failed to submit Outing.")})}else _e.warn("Please fill all the required fields before submit Outing.")},n.state={isLoading:!1,fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(Rn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Se,{style:yt.row},o.createElement(Rn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Place",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.place,onChange:function(t){return e.setState({place:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Address",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(Se,{className:"center",style:yt.saveBtn},o.createElement(Ae,{title:"SUBMIT",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Mn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){e&&z(e._id)?o(!1):(new ee).post("outing/"+t,function(t,r){console.log("result:",t),J(t)&&z(t.data)?(e._id=t.data,e.createdBy=n.name,a.data.unshift(e),s(Ln(a.data,!0,!1,"")),o(!0)):o(!1)},e)}}(t,n,a,o,s))}}})(_n),Pn=function(e,t,n,o){return{type:a.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Fn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onFileSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=$();o+="."+a[a.length-1],n.setState({isLoading:!0});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){n.setState({isLoading:!1}),e?n.setState({fileName:o}):_e.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if(z(n.state.title)&&z(n.state.fileName)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,file:n.state.fileName,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(n.state.homeId,e,n.props.homeIndex,n.props.user,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",homeId:z(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""}),_e.success("Document saved successfully.")):_e.fail("Failed to save document.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({id:"",homeId:z(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""})},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Document removed successfully."):_e.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",homeId:z(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n.onClear=n.onClear.bind(Object(ue.a)(n)),n.onFileSelect=n.onFileSelect.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||_e.fail("Failed to load Documents.")})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),z(this.props.user.homes)&&o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:{marginRight:10}},"Home:"),this.props.user.homes.map(function(t,n){return o.createElement(ft,{isActive:t._id===e.state.homeId,text:t.number,key:"home"+n,onPress:function(){return e.setState({homeId:t._id})}})})),o.createElement(Se,{style:yt.row},o.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:this.onFileSelect}),z(this.state.fileName)&&o.createElement(Ne,{style:{marginLeft:15}},this.state.fileName)),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Ae,{title:"CLEAR",onPress:this.onClear})),this.props.documents.isUpToDate&&!this.props.documents.isError&&z(this.props.documents.data)?this.props.documents.data.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.title)),z(t.description)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),z(e.props.user.homes.filter(function(e){return e._id===t._id}))&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Home: "+e.props.user.homes.filter(function(e){return e._id===t._id})[0].number)),z(t.file)&&o.createElement(Se,{style:It.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:P+t.file},t.file)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},this.props.documents.isUpToDate?"No Documents found!!!":this.props.documents.isError?this.props.documents.errorMessage:"No Documents found!!!"),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Bn=Object(p.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){n(Pn([],!1,!1,"")),(new ee).get("documents/"+e,function(e,a){J(e)&&J(e.data)?(n(Pn(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,n))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){t&&z(t._id)?(new ee).put("document/"+t._id,function(e,a){if(J(e)&&z(e.data)){var r=o.findIndex(function(t){return t._id===e.data._id});o[r]._id=e.data._id,o[r].title=t.title,o[r].description=t.description,o[r].file=t.file,n(Pn(o,!0,!1,"")),s(!0)}else s(!1)},t):(new ee).post("document/"+e,function(e,r){J(e)&&z(e.data)?(o.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:a.name,createdAt:new Date}),n(Pn(o,!0,!1,"")),s(!0)):s(!1)},t)}}(t,n,0,o,s,r))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).delete("document/"+e,function(o,s){J(o)&&J(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Pn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))},onUpload:function(t,n){return e(tt(t,n))}}})(Fn),Hn=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Wn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(z(n.state.searchText)&&n.props.blocks.isUpToDate&&!n.props.blocks.isError&&z(n.props.blocks.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.blocks.data.filter(function(t){return(t.name+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.blocks.data,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),_e.success("Home removed successfully.")):_e.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.onSearch=n.onSearch.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:It.content},o.createElement(Se,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Ne,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-block/0")},style:Object(y.a)({},It.ele,{color:B,textAlign:"right"})},"Add New")),o.createElement(Se,{style:Object(y.a)({},yt.row,{marginTop:0,paddingTop:0})},o.createElement(ke,{type:"text",placeholder:"Search Block",className:"form-control",style:Object(y.a)({},De,yt.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(Ce,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(je,{className:"pointer",src:Ue.search,style:{width:30,height:30}}))),z(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Se,{key:"block"+n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Name: "+t.name)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Description: "+(z(t.description)?t.description:""))),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-block/"+t._id)}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon}))))}):o.createElement(Ne,{style:{padding:20}},"No block match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Se,{style:It.row},o.createElement(Se,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Ne,{style:{color:B,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Vn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).delete("block/"+e,function(o,s){J(o)&&J(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Hn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(Wn),Gn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.name)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.blocks&&n.props.blocks.data?n.props.blocks.data:[],function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",description:""}),_e.success("Block saved successfully.")):_e.fail(z(t)?t:"Failed to save block.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",name:"",description:""},n.onSave=n.onSave.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;if(e.length>0&&"0"!==e&&this.props.blocks&&z(this.props.blocks.data)){var t=this.props.blocks.data.filter(function(t,n){return t._id===e});z(t)&&this.setState({id:t[0]._id,name:t[0].name,description:t[0].description})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},It.content,{flex:1,backgroundColor:H})},o.createElement(Se,{style:yt.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:yt.saveBtn},o.createElement(Ae,{title:"SAVE",onPress:this.onSave}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Yn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&z(t._id)?(new ee).put("block/"+t._id,function(e,n){if(J(e)&&z(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].name=t.name,a[r].description=t.description,s(Hn(a,!0,!1,"")),o(!0,"")}else o(!1,n)},t):(new ee).post("block/"+e,function(e,r){J(e)&&z(e.data)?(a.unshift({_id:e.data,name:t.name,description:t.description,createdBy:n.name}),s(Hn(a,!0,!1,"")),o(!0,"")):o(!1,r)},t)}}(t,n,a,o,s))}}})(Gn),Kn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(n.state.amount>0&&(n.state.isAllHome||n.state.homes.length>0)){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={amount:n.state.amount,description:n.state.description,month:n.state.month,year:n.state.year,isAllHome:n.state.isAllHome,homes:e};n.setState({isLoading:!0}),n.props.onSave(n.props.user.client._id,t,n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]}),_e.success("Payment saved successfully.")):_e.fail(t||"Failed to save payment.")})}else _e.warn("Please fill all required fields before Save.")},n.onClear=function(){n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]})},n.state={isLoading:!1,amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onClear=n.onClear.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Se,{style:Zn.container},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.amount>0?this.state.amount+"":"",onChange:function(t){return e.setState({amount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:{marginTop:15}},"Payment for "+this.state.year+" "),o.createElement(Ie,{className:"form-control",value:this.state.month,style:yt.ele,onChange:function(t){return e.setState({month:t.target.value})}},q.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return o.createElement("option",{key:"month"+t,value:e.value},e.title)}))),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:{marginRight:15}},"Apply to Home(s): "+(this.state.isAllHome?"":this.state.homes.length)),o.createElement(Sn,{isActive:this.state.isAllHome,text:"All Homes",onPress:function(){return e.setState({isAllHome:!e.state.isAllHome})}})),!this.state.isAllHome&&o.createElement(we,{style:Object(y.a)({},yt.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Ne,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:B},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),!this.state.isAllHome&&o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},yt.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:G,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),!this.state.isAllHome&&this.state.showHomes&&z(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(we,{style:Object(y.a)({},yt.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Ne,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Ae,{title:"CLEAR",onPress:this.onClear})),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),Zn={container:{width:"100%",paddingLeft:15,paddingRight:15}},qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(n.state.fromDate&&n.state.toDate){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={fromDate:n.state.fromDate,toDate:n.state.toDate,homes:e};n.setState({isLoading:!0}),n.props.onSearch(n.props.user.client._id,t,n.props.user,function(e){n.setState({isLoading:!1,isShowSearch:!1,data:e})},function(e){n.setState({isLoading:!1}),_e.fail(e||"Failed to load payment.")})}else _e.warn("Please fill all required fields before Search.")},n.onUpdate=function(){if(z(n.state.uPaymentId)&&n.state.uAmount>0){var e={amount:n.state.uAmount,description:n.state.uDescription};n.setState({isLoading:!0}),n.props.onUpdate(n.state.uPaymentId,e,n.props.user,function(e,t){if(n.setState({isLoading:!1}),!0===e){var a=n.state.data,o=a.findIndex(function(e){return e._id===n.state.uPaymentId});a[o].amount=n.state.uAmount,a[o].description=n.state.uDescription,n.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a}),_e.success("Payment updated successfully.")}else _e.fail(t||"Failed to update payment.")})}else _e.warn("Please fill all required fields before update.")},n.state={isLoading:!1,isShowSearch:!0,fromDate:"",toDate:"",datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""},n.onSearch=n.onSearch.bind(Object(ue.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Se,{style:zn.container},this.state.isShowSearch?o.createElement(Se,null,o.createElement(Se,{style:yt.row},o.createElement(Rn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Se,{style:yt.row},o.createElement(Rn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:{marginRight:15}},"Home(s): "+(this.state.homes.length>0?this.state.homes.length:"All"))),o.createElement(we,{style:Object(y.a)({},yt.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Ne,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:B},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},yt.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:G,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),this.state.showHomes&&z(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(we,{style:Object(y.a)({},yt.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Ne,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{title:"SEARCH",onPress:this.onSearch}))):o.createElement(Se,null,o.createElement(Ne,{className:"fr pointer",style:{color:B,fontWeight:"bold",textAlign:"right"},onClick:function(){e.setState({isShowSearch:!0})}},"Show Search")),o.createElement(Se,null,z(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},"Rs."+t.amount+" for "+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(z(t.mode)?" "+t.mode:"")+(z(t.type)?" "+t.type:""))),z(t.description)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),o.createElement(Se,{style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{title:"Update",onPress:function(){e.setState({isShowUpdateModel:!0,uPaymentId:t._id,uAmount:t.amount,uDescription:t.description})}})))}):o.createElement(Ne,{style:{padding:20}},"No Payment found!!!")),o.createElement(He.a,{open:this.state.isShowUpdateModel,onClose:function(){e.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""})}},o.createElement(Se,{style:Ve.container},o.createElement(Se,{style:Ve.content},o.createElement(Se,{style:yt.row},o.createElement(ke,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.uAmount>0?this.state.uAmount+"":"",onChange:function(t){return e.setState({uAmount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Se,{style:yt.row},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.uDescription,onChange:function(t){return e.setState({uDescription:t.target.value})}})),o.createElement(Se,{className:"center",style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{style:{marginRight:10},title:"SAVE",onPress:this.onUpdate}),o.createElement(Ae,{title:"CLEAR",onPress:function(){e.setState({uAmount:0,uDescription:""})}}))))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),zn={container:{width:"100%",paddingLeft:15,paddingRight:15}},Jn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1,history:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Xn.content},o.createElement(Se,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Se,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ce,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Xn.tab,Xn.activeTab):Xn.tab,onClick:function(){return e.setState({activeTab:1})}},"NEW"),o.createElement(Ce,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Xn.tab,Xn.activeTab):Xn.tab,onClick:function(){return e.setState({activeTab:2})}},"HISTORY")),o.createElement(Se,{className:"tab-content",style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?o.createElement(Kn,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSave:this.props.onSave}):o.createElement(qn,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSearch:this.props.onSearch,onUpdate:this.props.onUpdate}))))}}]),t}(o.Component),Xn={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:F,"border-bottom-style":"solid",color:F}},$n=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e(Xe(0,n,a,o))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new ee).post("payment/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to save Payment.")},t)}}(t,n,0,o))},onSearch:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(new ee).post("payments/"+e,function(e,t){J(e)?a(e.data):o(z(t)?t:"Failed to load Payments.")},t)}}(t,n,0,o,s))},onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new ee).put("payment/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to update Payment.")},t)}}(t,n,0,o))}}})(Jn),Qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,homeId:"",data:{}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.blocks,n=e.data,a="";if(n&&z(n._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var s=t.data.filter(function(e,t){return e._id===n._blockId});s&&s.length>0&&(a=s[0].name)}return n&&z(n._id)?o.createElement(Se,null,o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Block: "+a)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Number: "+n.number)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Address: "+n.address)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"No of bed room(s): "+n.bedRoom)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Parking: "+n.parking)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Description: "+n.description))):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),ea=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Members.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return z(e)?o.createElement(Se,null,e.map(function(e,t){return o.createElement(Se,{key:t,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},(z(e.createdBy)?e.createdBy:"")+" on "+rt(e.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.name)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.age+", "+("M"===e.gender?"Male":"Female"))),z(e.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.mobileNo)),z(e.emailId)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.emailId)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.type)))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),ta=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return z(e)?o.createElement(Se,null,e.map(function(e,t){return o.createElement(Se,{key:t,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.type)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.number)))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),na=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Servents.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return z(e)?o.createElement(Se,null,e.map(function(e,t){return o.createElement(Se,{key:t,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.name)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.age+", "+("M"===e.gender?"Male":"Female"))),z(e.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.mobileNo)),z(e.emailId)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.emailId)))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),aa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[]}):n.setState({viewId:e,comments:t})},n.state={data:[],viewId:"",comments:[]},n.onView=n.onView.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return z(t)?o.createElement(Se,null,t.map(function(t,n){return o.createElement(Se,{key:"tkt"+n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.createdBy+" from "+t._homeId+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.title)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.status)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Ne,{className:"pointer",style:{color:B}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Se,{style:oa.cmntsCnr},o.createElement(Se,{style:oa.cmntsHdr},o.createElement(Ne,{style:oa.cmntsHdrTxt},"Comments")),o.createElement(Se,{style:oa.cmntsCnt},z(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(Se,{key:"tktcmt"+t,style:0===t?oa.cmntCnrFst:oa.cmntCnr},o.createElement(Se,{style:oa.cmntHdr},o.createElement(Ne,null,e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:oa.cmntCnt},o.createElement(Ne,null,e.comment)))}):o.createElement(Ne,{style:{padding:20}},"No Comments found!!!"))))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),oa={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:G,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:G},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},sa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.state={data:[],isZoomImage:!1,zoomImage:""},n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Visitors.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return z(t)?o.createElement(Se,null,t.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),z(t.name)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"["+t._homeId+"] "+t.name)),(t.age>0||z(t.gender))&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.age+", "+("M"===t.gender?"Male":"Female"))),z(t.mobileNo)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.mobileNo)),z(t.image)&&o.createElement(Se,{style:It.ele},o.createElement(Ce,{className:"pointer",onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}},o.createElement(je,{src:P+t.image,style:{height:100}}))))}),o.createElement(He.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(Se,{style:{alignSelf:"center",alignContent:"center"}},o.createElement(je,{src:P+this.state.zoomImage,style:{height:"40%"}})))):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),ra=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",transactions:[]}):n.setState({viewId:e,transactions:t})},n.getAmountPaid=function(e){var t=0;return z(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,n){return t+=e.amount}),t},n.state={data:[],viewId:"",transactions:[]},n.onView=n.onView.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Payments.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return z(t)?o.createElement(Se,null,t.map(function(t,n){return o.createElement(Se,{key:n,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Rs. "+t.amount+" for "+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(z(t.mode)?" "+t.mode:"")+(z(t.type)?" "+t.type:""))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Amount Paid Rs. "+e.getAmountPaid(t.transactions))),z(t.description)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{},onClick:function(){e.onView(t._id,t.transactions)}},o.createElement(Ne,{className:"pointer",style:{color:B}},(e.state.viewId===t._id?"Hide":"View")+" Transactions"))),e.state.viewId===t._id&&o.createElement(Se,{style:ia.cmntsCnr},o.createElement(Se,{style:ia.cmntsHdr},o.createElement(Ne,{style:ia.cmntsHdrTxt},"Transactions")),o.createElement(Se,{style:ia.cmntsCnt},z(e.state.transactions)?e.state.transactions.map(function(e,t){return o.createElement(Se,{key:"tktcmt"+t,style:0===t?ia.cmntCnrFst:ia.cmntCnr},o.createElement(Se,{style:ia.cmntHdr},o.createElement(Ne,null,e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:ia.cmntCnt},o.createElement(Ne,null,"Ref Id: "+e.txnRef)),o.createElement(Se,{style:ia.cmntCnt},o.createElement(Ne,null,"Txn Id: "+e.txnId)),o.createElement(Se,{style:ia.cmntCnt},o.createElement(Ne,null,"Amount: "+e.amount)),o.createElement(Se,{style:ia.cmntCnt},o.createElement(Ne,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),z(e.reason)&&o.createElement(Se,{style:ia.cmntCnt},o.createElement(Ne,null,"Reason: "+e.reason)))}):o.createElement(Ne,{style:{padding:20}},"No transactions found!!!"))))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),ia={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:G,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:G},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},la=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return z(e)?o.createElement(Se,null,e.map(function(e,t){return o.createElement(Se,{key:t,style:It.row},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},e.createdBy+" on "+rt(e.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},e.title)),z(e.description)&&o.createElement(Se,{style:It.ele},o.createElement(Ne,null,e.description)),z(e.file)&&o.createElement(Se,{style:It.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:P+e.file},e.file)))})):o.createElement(Ne,null,"No data found!!!")}}]),t}(o.Component),ca=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleLoading=function(e){n.setState({isLoading:e})},n.state={isLoading:!1,homeId:"",activeTab:1,data:{}},n.toggleLoading=n.toggleLoading.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({homeId:t}),t.length>0&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){e.setState({isLoading:!1}),t&&z(t._id)?e.setState({data:t}):_e.fail("Failed to load Home.")},function(t){e.setState({isLoading:!1}),_e.fail(z(t)?t:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return o.createElement("main",{style:ma.content},o.createElement(Se,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Se,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Ce,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:1})}},o.createElement(je,{src:1===t?Ue.infoInv:Ue.info,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:2})}},o.createElement(je,{src:2===t?Ue.membersInv:Ue.members,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:3})}},o.createElement(je,{src:3===t?Ue.vehicleInv:Ue.vehicle,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:4===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:4})}},o.createElement(je,{src:4===t?Ue.serventInv:Ue.servent,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:5===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:5})}},o.createElement(je,{src:5===t?Ue.supportInv:Ue.support,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:6===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:6})}},o.createElement(je,{src:6===t?Ue.visitorsInv:Ue.visitors,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:7===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:7})}},o.createElement(je,{src:7===t?Ue.moneyInv:Ue.money,style:ma.tabImage})),o.createElement(Ce,{className:"tab",style:8===this.state.activeTab?Object(y.a)({},ma.tab,ma.activeTab):ma.tab,onClick:function(){return e.setState({activeTab:8})}},o.createElement(je,{src:8===t?Ue.documentInv:Ue.document,style:ma.tabImage}))),o.createElement(Se,{style:{flex:1,flexDirection:"column",padding:15}},1===t?o.createElement(Qn,{blocks:this.props.blocks,data:this.state.data}):2===t?o.createElement(ea,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadMembers}):3===t?o.createElement(ta,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVehicles}):4===t?o.createElement(na,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadServents}):5===t?o.createElement(aa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadTickets}):6===t?o.createElement(sa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVisitors}):7===t?o.createElement(ra,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadPayments}):o.createElement(la,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadDocuments}))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),ma={content:{width:"100%"},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:F,"border-bottom-style":"solid",color:F},tabImage:{width:20,height:20}},ua=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(yn(t,n,a))},onLoadMembers:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("members/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadVehicles:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("vehicles/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadServents:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("servents/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadTickets:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("tickets/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Tickets.")})}}(t,n,a))},onLoadVisitors:function(t,n,a){return e(Qe(0,t,n,a))},onLoadPayments:function(t,n,a){return e(Xe(0,t,n,a))},onLoadDocuments:function(t,n,a){return e(function(e,t,n){return function(a){(new ee).get("documents/"+e,function(e,a){J(e)&&J(e.data)?t(e.data):n(z(e.message)?e.message:"Failed to load Documents.")})}}(t,n,a))}}})(ca),da=function(e,t,n,o){return{type:a.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}};function pa(e,t){try{return t>0?100*e/t:0}catch(n){return Q(n,"calc.percentage"),0}}var ha=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(z(n.state.topic)&&z(n.state.description)&&J(n.state.fromDate)&&J(n.state.toDate)&&z(n.state.pollOption.filter(function(e){return z(e)}))){n.setState({isLoading:!0});var e={_id:n.state.id,topic:n.state.topic,description:n.state.description,isAllowMultiple:n.state.isAllowMultiple,isOneVotePerFlat:n.state.isOneVotePerFlat,isAnonymous:n.state.isAnonymous,fromDate:n.state.fromDate,toDate:n.state.toDate,options:n.state.pollOption.filter(function(e){return z(e)})};n.props.onSave(n.props.user.client._id,e,n.props.polls.data,n.props.user,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),_e.success("Poll saved successfully.")):_e.fail("Failed to save pol.")})}else _e.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(We.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.polls.data,n.props.user._id,function(e){n.setState({isLoading:!1}),!0===e?_e.success("Poll removed successfully."):_e.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})},n.loadVotes=function(){if(J(n.state.showVotePoll)&&n.state.showVotePoll._id.length>0){var e=[];return n.state.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.state.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),o.createElement(Se,{style:{padding:15}},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},n.state.showVotePoll.topic)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,n.state.showVotePoll.description)),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},"Votes: "+n.state.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return o.createElement(Se,{key:"pvo"+t,style:It.ele},o.createElement(Ne,null,e.votes+" ("+pa(e.votes,n.state.showVotePoll.votes.length)+"%) - "+e.option))}))}return""},n.state={isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ue.a)(n)),n.onRemove=n.onRemove.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Se,null,!1===this.state.isEdit&&o.createElement(Ae,{title:"ADD NEW",onPress:function(){e.setState({isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})}}),!0===this.state.isEdit&&0===this.state.id.length?o.createElement(Se,{key:"p0",style:Object(y.a)({},It.row,{borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid"})},o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Rn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Se,{style:It.ele},o.createElement(Rn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:this.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:this.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:this.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Options: ")),z(this.state.pollOption)?this.state.pollOption.map(function(t,n){return o.createElement(Se,{key:"pop"+n,style:It.ele},o.createElement(ke,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},De,yt.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Ce,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))}):o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"No Option found!!!")),o.createElement(Se,{style:It.ele},o.createElement(Ce,{onClick:function(){if(!z(e.state.pollOption.filter(function(e){return!z(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Ne,null,"Add More +"))),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:this.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):[],J(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&z(this.props.polls.data)?this.props.polls.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Se,{key:"p"+t._id,style:Object(y.a)({},It.row,{borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid"})},o.createElement(Se,{style:It.ele},o.createElement(ke,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(xe,{placeholder:"Description",className:"form-control",style:Object(y.a)({},De,yt.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Se,{style:It.ele},o.createElement(Rn.a,{onChange:function(t){e.setState({fromDate:t})},value:e.state.fromDate})),o.createElement(Se,{style:It.ele},o.createElement(Rn.a,{onChange:function(t){e.setState({toDate:t})},value:e.state.toDate})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:e.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:e.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Se,{style:It.ele},o.createElement(Sn,{isActive:e.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Options: ")),z(e.state.pollOption)?e.state.pollOption.map(function(t,n){return o.createElement(Se,{key:"pop"+n,style:It.ele},o.createElement(ke,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},De,yt.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Ce,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))}):o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"No Option found!!!")),o.createElement(Se,{style:It.ele},o.createElement(Ce,{onClick:function(){if(!z(e.state.pollOption.filter(function(e){return!z(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Ne,null,"Add More +"))),o.createElement(Se,{style:It.ele},o.createElement(Ce,{style:{marginRight:25},onClick:e.onSave},o.createElement(je,{src:Ue.tick,style:Nt.editIcon})),o.createElement(Ce,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(je,{src:Ue.cancel,style:Nt.deleteIcon})))):o.createElement(Se,{key:"p"+t._id,style:Object(y.a)({},It.row,{borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid"})},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,rt(t.fromDate)+" to "+rt(t.toDate))),o.createElement(Se,{style:It.ele},o.createElement(Se,{style:!0===t.isAllowMultiple?yt.radioActive:Object(y.a)({},yt.radio,{marginLeft:5})},o.createElement(Ne,{style:!0===t.isAllowMultiple?Object(y.a)({},yt.radioActiveText):Object(y.a)({},yt.radioText)},"Allow Multiple Votes"))),o.createElement(Se,{style:It.ele},o.createElement(Se,{style:!0===t.isOneVotePerFlat?Object(y.a)({},yt.radioActive):Object(y.a)({},yt.radio,{marginLeft:5})},o.createElement(Ne,{style:!0===t.isOneVotePerFlat?Object(y.a)({},yt.radioActiveText):Object(y.a)({},yt.radioText)},"One Vote per Flat"))),o.createElement(Se,{style:It.ele},o.createElement(Se,{style:!0===t.isAnonymous?Object(y.a)({},yt.radioActive):Object(y.a)({},yt.radio,{marginLeft:5})},o.createElement(Ne,{style:!0===t.isAnonymous?Object(y.a)({},yt.radioActiveText):Object(y.a)({},yt.radioText)},"Anonymous Voting"))),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,"Options: ")),z(t.options)?t.options.map(function(e,t){return o.createElement(Se,{key:"po"+t,style:It.ele},o.createElement(Ne,{key:"pot"+t,style:{width:"100%"}},e))}):o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{padding:10}},"No Option found!!!")),o.createElement(Se,{style:It.ele},t.fromDate>new Date&&o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:z(t.options)?t.options:[]})}},o.createElement(je,{src:Ue.edit,style:Nt.editIcon})),o.createElement(Ce,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(je,{src:Ue.delete,style:Nt.deleteIcon})),o.createElement(Ne,{className:"pointer",style:{color:B},onClick:function(){e.setState({showVotePoll:t})}},"View Votes")))}):o.createElement(Ne,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No poll found!!!":"Loading..."),o.createElement(He.a,{open:J(this.state.showVotePoll)&&this.state.showVotePoll._id.length>0,onClose:function(){return e.setState({showVotePoll:{_id:""}})}},o.createElement(Se,{style:Ve.container},o.createElement(Se,{style:Ve.content},this.loadVotes()))),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),fa=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadVotes=function(e){var t=[];return e.options.map(function(n,a){return t.push({option:n,votes:e.votes.filter(function(e){return e.option===a}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,n){return o.createElement(Se,{key:"pvo"+n,style:It.ele},o.createElement(Ne,null,t.votes+" ("+pa(t.votes,e.votes.length)+"%) - "+t.option))})},n.onSelectOption=function(e,t){if(n.state.votePollId===e._id)if(z(n.state.votes.filter(function(e){return e.option===t})))n.setState({votes:n.state.votes.filter(function(e){return e.option!==t})});else{var a=[];e.isAllowMultiple&&(a=n.state.votes),a.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votes:a})}else{var o=[];o.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votePollId:e._id,votes:o})}},n.onVote=function(e){n.state.votePollId===e&&z(n.state.votes)?(n.setState({isLoading:!0}),n.props.onVote(e,n.state.votes,n.props.polls,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({votePollId:"",votes:[]}),_e.success("Your vote saved successfully.")):_e.fail("Failed to save your vote.")})):_e.warn("Please select any option to vote.")};var a=new Date;return n.state={isLoading:!1,votePollId:"",votes:[],currentDate:new Date(a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear())},n.loadVotes=n.loadVotes.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Se,null,J(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&z(this.props.polls.data.filter(function(t){return z(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}))?this.props.polls.data.filter(function(t){return z(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}).map(function(t,n){return o.createElement(Se,{key:"p"+t._id,style:Object(y.a)({},It.row,{borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid"})},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.description)),(!0!==t.isOneVotePerFlat||!z(t.votes)||!z(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&t.options.map(function(n,a){return o.createElement(Se,{key:"popt"+a,style:It.ele},o.createElement(Sn,{isActive:e.state.votePollId===t._id&&z(e.state.votes.filter(function(e){return e.option===a})),text:n,onPress:function(){return e.onSelectOption(t,a)}}))}),(!0!==t.isOneVotePerFlat||!z(t.votes)||!z(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&o.createElement(Se,{style:{marginTop:5,width:"100%"}},o.createElement(Ae,{title:"Vote",onPress:function(){return e.onVote(t._id)},style:{width:"100%"}})),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},"Your Votes:")),z(t.options)&&e.loadVotes(t))}):o.createElement(Ne,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No active poll found!!!":"Loading..."),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),ga=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onReturnBack=function(e){Object(We.confirmAlert)({title:"Confirm to return back from outing",message:"Are you sure? You return back from this outing?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReturnBack(e,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),J(e)?_e.success("Successfully returned back."):_e.fail("Failed to Return back.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1},n.onReturnBack=n.onReturnBack.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Se,null,this.props.appUser.role===Z.USER&&(!J(this.props.outings)||!z(this.props.outings.data.filter(function(e){return!0!==e.isReturned})))&&o.createElement(Ae,{title:"Go Outing",onPress:function(){e.props.history.push("new-outing")}}),J(this.props.outings)&&this.props.outings.isUpToDate&&!this.props.outings.isError&&z(this.props.outings.data)?this.props.outings.data.map(function(t,n){return o.createElement(Se,{key:"o"+t._id,style:Object(y.a)({},It.row,{borderBottomWidth:1,borderBottomColor:G,borderBottomStyle:"solid"})},o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+rt(t.createdAt))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},rt(t.fromDate)+" to "+rt(t.toDate))),o.createElement(Se,{style:It.ele},o.createElement(Ne,{style:{fontWeight:"bold"}},t.place)),o.createElement(Se,{style:It.ele},o.createElement(Ne,null,t.address)),e.props.appUser.role!==Z.USER&&o.createElement(Se,{style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ne,null,"No one in the home")),e.props.appUser.role===Z.USER&&!0!==t.isReturned&&o.createElement(Se,{style:Object(y.a)({},yt.saveBtn,{flexDirection:"row"})},o.createElement(Ae,{title:"Return to Home",onPress:function(){e.onReturnBack(t._id)}})))}):o.createElement(Ne,{style:{padding:20}},this.props.outings.isUpToDate?this.props.outings.isError?this.props.outings.errorMessage:"No Outings found!!!":"Loading..."),o.createElement(Le,{visible:this.state.isLoading}))}}]),t}(o.Component),ya=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:!J(n.props.user)||n.props.appUser.role!==Z.ADMIN&&n.props.appUser.role!==Z.MANAGER?2:1,isShowPoll:J(n.props.user)&&(n.props.appUser.role===Z.ADMIN||n.props.appUser.role===Z.MANAGER||n.props.appUser.role===Z.USER&&n.props.appUser.homeIndex>=0)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadAds(this.props.user.client._id,function(e){e||_e.fail("Failed to load Ads.")}),this.state.isShowPoll&&this.props.onLoadPoll(this.props.user.client._id,this.props.appUser.role,function(e){e||_e.fail("Failed to load Poll.")}),this.props.onLoadOuting(this.props.user.client._id,this.props.appUser.role===Z.USER?this.props.user.homes[this.props.appUser.homeIndex]._id:"",function(e){e||_e.fail("Failed to load Outing.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Ea.content},o.createElement(Se,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Se,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},this.state.isShowPoll&&o.createElement(Ce,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Ea.tab,Ea.activeTab):Ea.tab,onClick:function(){return e.setState({activeTab:1})}},"POLL"),o.createElement(Ce,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Ea.tab,Ea.activeTab):Ea.tab,onClick:function(){return e.setState({activeTab:2})}},"ADS"),o.createElement(Ce,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Ea.tab,Ea.activeTab):Ea.tab,onClick:function(){return e.setState({activeTab:3})}},"OUTING")),o.createElement(Se,{style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?this.props.appUser.role===Z.ADMIN||this.props.appUser.role===Z.MANAGER?o.createElement(ha,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onSave:this.props.onSavePoll,onRemove:this.props.onRemovePoll}):o.createElement(fa,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onVote:this.props.onVote}):2===this.state.activeTab?o.createElement(ct,{data:this.props.ads.isUpToDate?this.props.ads.data:[],message:this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No data found!!!":"Loading..."}):3===this.state.activeTab?o.createElement(ga,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,outings:this.props.outings,onReturnBack:this.props.onReturnBack}):o.createElement(ct,{data:4===this.state.activeTab?this.props.remainders:this.props.complaints,message:"No data found!!!"}))))}}]),t}(o.Component),Ea={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:F,"border-bottom-style":"solid",color:F}},ba=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,outings:e.Outings,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,n){return e(ln(t,n))},onLoadPoll:function(t,n,a){return e(function(e,t,n){return function(t){t(da([],!1,!1,"")),(new ee).get("polls/"+e,function(e,a){J(e)&&J(e.data)?(t(da(e.data,!0,!1,"")),n(!0)):n(!1)})}}(t,0,a))},onSavePoll:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&z(t._id)?(new ee).put("poll/"+t._id,function(e,a){if(J(e)&&z(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].topic=t.topic,n[r].description=t.description,n[r].isAllowMultiple=t.isAllowMultiple,n[r].isOneVotePerFlat=t.isOneVotePerFlat,n[r].isAnonymous=t.isAnonymous,n[r].fromDate=t.fromDate,n[r].toDate=t.toDate,n[r].options=t.options,s(da(J(n)?n:[],!0,!1,"")),o(!0)}else o(!1)},t):(new ee).post("poll/"+e,function(e,r){J(e)&&z(e.data)?(t._id=e.data,t.createdBy=a.name,n.unshift(t),s(da(J(n)?n:[],!0,!1,"")),o(!0)):o(!1)},t)}}(t,n,a,o,s))},onRemovePoll:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new ee).delete("poll/"+e,function(n,s){J(n)&&J(n.data)&&!0===n.data?(t=t.filter(function(t,n){return t._id!==e}),o(da(J(t)?t:[],!0,!1,"")),a(!0)):a(!1)},{Id:e,UserId:n})}}(t,n,a,o))},onVote:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(a){(new ee).post("poll/vote/"+e,function(t,o){if(J(t)&&z(t.data)){var r=n.data.findIndex(function(t){return t._id===e});if(n.data[r].votes=t.data,a(da(n.data,!0,!1,"")),n.isUpToDate&&!n.isError&&z(n.data)){var i=n.data,l=i.findIndex(function(t){return t._id===e});i[l].votes=t.data,a(da(i,!0,!1,""))}s(!0)}else s(!1)},{votes:t})}}(t,n,a,0,0,r))},onLoadOuting:function(t,n,a){return e(function(e,t,n){return function(e){e(Ln([],!1,!1,"")),(new ee).get("outings"+(z(t)?"/"+t:""),function(t,a){J(t)&&J(t.data)?(e(Ln(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onReturnBack:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new ee).delete("outing/return/"+e,function(o,s){if(J(o)&&J(o.data)&&!0===o.data){var r=n.data.findIndex(function(t){return t._id===e});n.data[r].isReturned=!0,n.data[r].returnedAt=new Date,t(Ln(n.data,!0,!1,"")),a(!0)}else a(!1)})}}(t,0,a,o))}}})(ya),va=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:Oa.content},o.createElement(Se,{style:Object(y.a)({},yt.container,{paddingLeft:10,paddingRight:10})},o.createElement(Se,{className:"center",style:yt.row},o.createElement(Ne,{style:{color:B,fontWeight:"bold",textAlign:"center"}},this.props.user.client.name)),o.createElement(Se,{className:"center",style:yt.row},o.createElement(Ne,{style:{color:B,fontWeight:"bold",textAlign:"center"}},this.props.user.client.description)),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Home users")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Maintenance Admin Payment")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Receive real-time notifications")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Visitor management")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Lodge any complaint related to your apartment and track")),o.createElement(Se,{style:yt.row},o.createElement(Ne,null,"Admin Users")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Create polls and gather the opinion of all Apartment residents")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"All details of your flat, staff who work in your flat, visitors coming to your flat")),o.createElement(Se,{style:yt.row},o.createElement(Ne,{style:Oa.listItem},"Accounts  and much more..."))))}}]),t}(o.Component),Oa={content:{flex:1,width:"100%"},listItem:{marginLeft:15}},Sa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(va),wa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(Se,{style:{flex:1,backgroundColor:H,padding:40}},o.createElement(Ne,null,"Page not found!!!"))}}]),t}(o.Component),ja=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleMenu=function(){n.setState({isMenuExpand:!n.state.isMenuExpand})},n.isUser=function(){return n.props.appUser.role===Z.USER},n.isAdmin=function(){return n.props.appUser.role===Z.ADMIN},n.isManager=function(){return n.props.appUser.role===Z.MANAGER},n.isGateKeeper=function(){return n.props.appUser.role===Z.GATEKEEPER},n.state={isLoading:!1,isMenuExpand:!1},n.onToggleMenu=n.onToggleMenu.bind(Object(ue.a)(n)),n.isUser=n.isUser.bind(Object(ue.a)(n)),n.isAdmin=n.isAdmin.bind(Object(ue.a)(n)),n.isManager=n.isManager.bind(Object(ue.a)(n)),n.isGateKeeper=n.isGateKeeper.bind(Object(ue.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;J(this.props.user)&&z(this.props.user._id)||(this.setState({isLoading:!0}),this.props.getProfile(function(t,n){e.setState({isLoading:!1}),!0!==t&&_e.fail("Failed to load Profile: "+n)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return!this.state.isLoading&&o.createElement(Se,{style:ka.container},o.createElement(Ge,{appUser:this.props.appUser,user:this.props.user,isMenuExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu,onHomeChange:this.props.onHomeChange,onLogout:this.props.onLogout}),o.createElement(Ze,{appUser:this.props.appUser,user:this.props.user,isExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu}),z(this.props.appUser.role)&&!this.isUser()||z(this.props.user.homes)?o.createElement(Be.c,null,o.createElement(Be.a,{path:"/",exact:!0,component:wt}),this.isUser()&&o.createElement(Be.a,{path:"/members",exact:!0,component:At}),this.isUser()&&o.createElement(Be.a,{path:"/new-member",exact:!0,component:Ut}),this.isUser()&&o.createElement(Be.a,{path:"/vehicles",exact:!0,component:_t}),this.isUser()&&o.createElement(Be.a,{path:"/new-vehicle",exact:!0,component:Pt}),this.isUser()&&o.createElement(Be.a,{path:"/servents",exact:!0,component:Wt}),this.isUser()&&o.createElement(Be.a,{path:"/new-servent",exact:!0,component:Gt}),(this.isUser()||this.isAdmin()||this.isManager())&&o.createElement(Be.a,{path:"/tickets",exact:!0,component:Jt}),this.isUser()&&o.createElement(Be.a,{path:"/new-ticket",exact:!0,component:$t}),this.isUser()&&o.createElement(Be.a,{path:"/visitors",exact:!0,component:en}),(this.isAdmin()||this.isManager())&&o.createElement(Be.a,{path:"/ads",exact:!0,component:dn}),(this.isAdmin()||this.isManager())&&o.createElement(Be.a,{path:"/new-ad",exact:!0,component:hn}),(this.isAdmin()||this.isManager())&&o.createElement(Be.a,{path:"/notification",exact:!0,component:Un}),this.isAdmin()&&o.createElement(Be.a,{path:"/users",exact:!0,component:gn}),this.isAdmin()&&o.createElement(Be.a,{path:"/edit-user/:id",exact:!0,component:xn}),this.isAdmin()&&o.createElement(Be.a,{path:"/homes",exact:!0,component:On}),this.isAdmin()&&o.createElement(Be.a,{path:"/view-home/:id",exact:!0,component:ua}),this.isAdmin()&&o.createElement(Be.a,{path:"/edit-home/:id",exact:!0,component:Nn}),this.isAdmin()&&o.createElement(Be.a,{path:"/blocks",exact:!0,component:Vn}),this.isAdmin()&&o.createElement(Be.a,{path:"/edit-block/:id",exact:!0,component:Yn}),(this.isAdmin()||this.isManager())&&o.createElement(Be.a,{path:"/payment",exact:!0,component:$n}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&o.createElement(Be.a,{path:"/all-visitors",exact:!0,component:An}),o.createElement(Be.a,{path:"/notice",exact:!0,component:ba}),this.isUser()&&o.createElement(Be.a,{path:"/new-outing",exact:!0,component:Mn}),o.createElement(Be.a,{path:"/my-profile",exact:!0,component:on}),this.props.user.role.split(",").length>0&&o.createElement(Be.a,{path:"/my-role",exact:!0,component:rn}),o.createElement(Be.a,{path:"/my-documents",exact:!0,component:Bn}),o.createElement(Be.a,{path:"/change-password",exact:!0,component:nn}),o.createElement(Be.a,{path:"/info",exact:!0,component:Sa}),o.createElement(Be.a,{component:wa})):o.createElement(Ne,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."),J(this.props.user)&&z(this.props.user._id)&&o.createElement(ze,null),o.createElement(Le,{visible:this.state.isLoading,text:"Loading..."}))}}]),t}(o.Component),ka={container:{flex:1,backgroundColor:H,alignItems:"flex-start",justifyContent:"flex-start"}},xa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new ee).get("account/profile",function(n,a){if(J(n)&&J(n.data)&&z(n.data._id)){t(se(n.data)),t(oe(z(n.data.homes)?0:-1));var o=n.data.role.split(",");z(o)&&t(ae(o[0])),(o.indexOf(Z.ADMIN)>=0||o.indexOf(Z.MANAGER)>=0)&&((new ee).get("members",function(e,n){J(e)&&z(e.data)&&t(re(e.data,!0,!1,""))}),(new ee).get("blocks/"+n.data.client._id,function(e,n){J(e)&&z(e.data)&&t(le(e.data,!0,!1,""))})),(o.indexOf(Z.ADMIN)>=0||o.indexOf(Z.MANAGER)>=0||o.indexOf(Z.GATEKEEPER)>=0)&&(new ee).get("homes/"+n.data.client._id,function(e,n){J(e)&&z(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(ie(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,a)})}}(t))},onHomeChange:function(t,n){return e(function(e,t){return function(n){n(oe(e)),t(!0)}}(t,n))},onLogout:function(t){return e(te(t))}}})(ja),Ia=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){z(sessionStorage.getItem("auth_token"))&&this.props.setLogin(!0)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.appUser.isLoggedIn?o.createElement(me.a,null,o.createElement(xa,null)):o.createElement(Fe,null)}}]),t}(o.Component),Na=Object(p.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(ne(e))}}(t))}}})(Ia),Ca=(n(119),n(120),n(121),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(p.a,{store:U},s.a.createElement(Na,null),s.a.createElement(h.ToastsContainer,{store:h.ToastsStore,position:h.ToastsContainerPosition.TOP_RIGHT}))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Ca,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,n){e.exports=n(122)}},[[71,1,2]]]);
//# sourceMappingURL=main.2dd85c89.chunk.js.map