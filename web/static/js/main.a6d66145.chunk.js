(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(19),s=a.n(l),o=a(5),i=a(20),m=a(26),u=a(74),d=a(2);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(n||(n={}));var p=function(e,t){return Object(d.a)({},e,{isLoggedIn:t})},f=function(e,t){return Object(d.a)({},e,{role:t})},E=function(e,t){return Object(d.a)({},e,{homeIndex:t})},h=function(e,t){return Object(d.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,relationship:t.relationship,otherRelationship:t.otherRelationship,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},b=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},g=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},v=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},y=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},O=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return t},B=Object(m.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_LOGIN_STATUS:return p(e,t.payload);case n.SET_ROLE:return f(e,t.payload);case n.SET_HOME_INDEX:return E(e,t.payload);case n.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",relationship:"",otherRelationship:"",isApproved:null,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[],memberRelationships:[]}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USER:return h(e,t.payload);case n.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",relationship:"",otherRelationship:"",isApproved:null,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[],memberRelationships:[]}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_ADS:return b(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_POLLS:return N(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_OUTINGS:return g(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_DOCUMENTS:return v(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERS:return y(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_HOMES:return T(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERHOMES:return w(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_TICKETS:return O(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_BLOCKS:return k(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_GATE_NO:return j(e,t.payload)}return e}}),C=Object(m.e)(B,Object(m.d)(Object(m.a)(u.a))),A=a(21),S=a.n(A),U=a(38),I=a(37),_="http://localhost:3001/image/",x="http://localhost:3001/file/",D="DD/MMM/YYYY",R="DD/MMM/YYYY hh:mm A",P="USER",L="ADMIN",M="GATEKEEPER",F="MANAGER",V="MAINTENANCE SUPERVISOR",H="SECURITY SUPERVISOR",Y="MAINTENANCE MANAGER",G="SECURITY MANAGER",K="A",W="Q",q=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function z(e){return J(e)&&e.length>0}function J(e){return null!==e&&void 0!==e}function X(e){try{return J(e)?JSON.stringify(e):""}catch(t){return Q(t,"JSON2String"),""}}function Z(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}function Q(e,t){console.log("Error:"+t+":"+e)}function $(e,t){13===(e.keyCode?e.keyCode:e.which)&&"function"===typeof t&&t()}var ee=function e(){var t=this;Object(I.a)(this,e),this.url="http://localhost:3001/api/",this.get=function(e,a){t.fetch(e,"GET",a)},this.post=function(e,a,n){t.fetch(e,"POST",a,n)},this.delete=function(e,a,n){t.fetch(e,"DELETE",a,n)},this.patch=function(e,a,n){t.fetch(e,"PATCH",a,n)},this.put=function(e,a,n){t.fetch(e,"PUT",a,n)},this.upload=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r){var c,l,s,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return c=e.sent,e.next=5,t.getAS("client_id");case 5:return l=e.sent,e.next=8,t.getAS("user_id");case 8:s=e.sent,(o=new FormData).append("file",r.file,r.name),o.append("name",r.name),fetch(t.url+a,{method:"POST",headers:{Accept:"application/json","x-access-token":z(c)?"Bearer "+c:"","client-id":z(l)?""+l:"","user-id":z(s)?""+s:""},body:o}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){J(e)?J(e.data)?t.callback(n,e,"Some problem occurs. Please contact administrator."):t.callback(n,null,e.message):t.callback(n,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(n,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(U.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r,c){var l,s,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return l=e.sent,e.next=5,t.getAS("client_id");case 5:return s=e.sent,e.next=8,t.getAS("user_id");case 8:o=e.sent,fetch(t.url+a,{method:n,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":z(l)?"Bearer "+l:"","client-id":z(s)?""+s:"","user-id":z(o)?""+o:""},body:J(c)?X(c):null}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){J(e)?J(e.data)?t.callback(r,e,"Some problem occurs. Please contact administrator."):t.callback(r,null,e.message):t.callback(r,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(r,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.callback=function(e,t,a){J(e)&&"function"==typeof e&&e(t,a)}},te=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(ne(!1)),t(ce(-1)),t(me()),e(!0)}catch(a){e(!1)}}},ae=function(e){return{type:n.SET_GATE_NO,payload:e}},ne=function(e){return{type:n.SET_LOGIN_STATUS,payload:e}},re=function(e){return{type:n.SET_ROLE,payload:e}},ce=function(e){return{type:n.SET_HOME_INDEX,payload:e}},le=function(e){return{type:n.LOAD_USER,payload:e}},se=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},oe=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ie=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},me=function(){return{type:n.RESET}},ue=a(8),de=a(1),pe=a(29),fe=a(30);function Ee(){var e=Object(pe.a)(["\n"]);return Ee=function(){return e},e}function he(){var e=Object(pe.a)(["\n"]);return he=function(){return e},e}function be(){var e=Object(pe.a)(["\n"]);return be=function(){return e},e}function Ne(){var e=Object(pe.a)(["\n"]);return Ne=function(){return e},e}function ge(){var e=Object(pe.a)(["\n"]);return ge=function(){return e},e}function ve(){var e=Object(pe.a)(["\noverflow: auto;\n"]);return ve=function(){return e},e}function ye(){var e=Object(pe.a)(["\n"]);return ye=function(){return e},e}var Te=fe.a.div(ye()),we=fe.a.div(ve()),Oe=fe.a.img(ge()),ke=fe.a.input(Ne()),je=fe.a.textarea(be()),Be=fe.a.select(he()),Ce=fe.a.label(Ee()),Ae=function(e){var t=e.title,a=e.onPress,n=e.type,c=e.className,l=e.style;return r.createElement("input",{type:"button",className:"btn "+(n||"btn-primary")+(c?" "+c:""),value:t,onClick:function(){return a()},style:Object(d.a)({},l)})},Se=function(e){return e.visible?r.createElement(Te,{id:"loader"},r.createElement(Te,{className:"bg"}),r.createElement(Te,{className:"spinner"})):null},Ue=function e(){Object(I.a)(this,e)};Ue.logo=_+"logo.png",Ue.workInProgress=_+"work-in-progress.png",Ue.username=_+"username.png",Ue.password=_+"password.png",Ue.mobile=_+"mobile.png",Ue.email=_+"email.png",Ue.loading=_+"loading.gif",Ue.avatarMale=_+"avatar-male.png",Ue.avatarFemale=_+"avatar-female.gif";var Ie=function e(){Object(I.a)(this,e)};Ie.success=function(e){i.ToastsStore.success(e)},Ie.fail=function(e){i.ToastsStore.error(e)},Ie.warn=function(e){i.ToastsStore.warning(e)},Ie.info=function(e){i.ToastsStore.info(e)},Ie.show=function(e,t,a){i.ToastsStore.info(e)};var _e=Ie,xe=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,l=e.className,s=Z();return r.createElement("span",{className:"mR-10 "+(l||"")},r.createElement("input",{type:"radio",id:s,key:c,checked:t,onClick:n||function(){}}),z(a)&&r.createElement("label",{htmlFor:s,className:"mL-5 va-m"},a))},De=function(e){var t=Object(r.useState)(""),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(0),v=Object(de.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(de.a)(w,2),k=O[0],j=O[1],B=Object(r.useState)(""),C=Object(de.a)(B,2),A=C[0],S=C[1],U=Object(r.useState)(""),I=Object(de.a)(U,2),_=I[0],x=I[1],D=Object(r.useState)("TENANT"),R=Object(de.a)(D,2),P=R[0],L=R[1],M=Object(r.useState)("USER"),F=Object(de.a)(M,2),V=F[0],H=F[1];return c.a.createElement(Te,null,c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",className:"form-control",placeholder:"App Code",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",className:"form-control",placeholder:"User Id / Number",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",className:"form-control",placeholder:"Name",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"number",className:"form-control",placeholder:"Age",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"M"===k,text:"Male",onPress:function(){return j("M")}}),c.a.createElement(xe,{isActive:"F"===k,text:"Female",onPress:function(){return j("F")}}),c.a.createElement(xe,{isActive:"O"===k,text:"Other",onPress:function(){return j("O")}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",className:"form-control",placeholder:"Mobile Number",value:A,onChange:function(e){return S(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",className:"form-control",placeholder:"Email ID",value:_,onChange:function(e){return x(e.target.value)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SUBMIT",onPress:function(){if(z(i)&&z(p)&&z(b)&&y>0&&z(k)&&z(A)&&z(_)){var t={_id:n,number:p,name:b,age:y,gender:k,mobileNo:A,emailId:_?_.toLowerCase():"",type:P,role:V};e.onSignUp(t,i,function(e){!0===e&&(l(""),m(""),f(""),N(""),T(0),j(""),S(""),x(""),L("TENANT"),H("USER"))})}else _e.warn("Please fill all the required fields before Submit.")}})))},Re={txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11}},Pe=Object(o.b)(function(e,t){return{}},function(e){return{onLogin:function(t,a,n){return e(function(e,t,a){return function(n){var r=localStorage.getItem("fcm_token");(new ee).post("account/login",function(e,t){if(J(e)&&J(e.data)&&z(e.data.token)&&z(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(r){}n(ne(!0)),a(!0,"")}else a(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:r,os:"web",osVersion:"web"})}}(t,a,n))},onForgetPassword:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).post("account/resetpassword",function(e,t){J(e)&&J(e.data)&&J(e.data.data)?!0===e.data.data?a(!0,""):a(!1,e.data.message):a(!1,t)},{mobileNo:e,emailId:t})}}(t,a,n))},onSignUp:function(t,a,n){return e(function(e,t,a){return function(n){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new ee).post("account/signup",function(e,t){J(e)&&J(e.data)&&e.data.length>0?a(!0,""):a(!1,t)},e)}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(!1),v=Object(de.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(!1),O=Object(de.a)(w,2),k=O[0],j=O[1],B=Object(r.useState)(""),C=Object(de.a)(B,2),A=C[0],S=C[1],U=Object(r.useState)(""),I=Object(de.a)(U,2),_=I[0],x=I[1],D=function(){z(i)&&z(p)?(N(""),l(!0),e.onLogin(i,p,function(e,t){l(!1),N(!0===e?"":t)})):_e.warn("Enter Mobile Number and Password to continue.")},R=function(){z(A)&&z(_)?(N(""),l(!0),e.onForgetPassword(A,_.toLowerCase(),function(e,t){l(!1),!0===e?(_e.success("Password reset success. Login with New password sent to your Email. Change password after login."),N(""),T(!1),j(!1),m(""),f("")):N(t)})):_e.warn("Enter Mobile Number and Email to continue.")};return c.a.createElement(Te,{className:"container",style:{maxWidth:"270px"}},c.a.createElement(Te,{className:"ta-c ai-c jc-c mB-30 mT-5"},c.a.createElement(Oe,{src:Ue.logo,style:{width:100,height:100}})),y&&c.a.createElement(Te,{className:"ai-c jc-c"},c.a.createElement(Te,{className:"col-12 mB-25"},c.a.createElement(Oe,{className:"pos-a",src:Ue.mobile,style:Re.txtIcon}),c.a.createElement(ke,{type:"text",className:"form-control pL-25",placeholder:"Registered Mobile Number",value:A,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){$(e,R)}})),c.a.createElement(Te,{className:"col-12 mB-25"},c.a.createElement(Oe,{className:"pos-a",src:Ue.email,style:Re.txtIcon}),c.a.createElement(ke,{type:"text",className:"form-control pL-25",placeholder:"Registered Email",value:_,onChange:function(e){return x(e.target.value)},onKeyPress:function(e){$(e,R)}})),c.a.createElement(Te,{className:"ta-c"},c.a.createElement(Ae,{title:!1===n?"Reset my password":"Loading...",onPress:R}),c.a.createElement(Ce,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},b)),c.a.createElement(Te,{className:"mT-5 ta-c"},c.a.createElement(Ce,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),j(!1),S(""),x(""),N("")}},"Go back to Login."))),k&&c.a.createElement(c.a.Fragment,null,c.a.createElement(De,{onSignUp:function(t,a,n){N(""),l(!0),e.onSignUp(t,a,function(e,t){l(!1),!0===e?(T(!1),j(!1),N(""),_e.success("Sign Up success. Please wait till Manager approves then you can access your account."),n(!0)):(_e.fail(z(t)?t:"Failed to Sign Up."),n(!1))})}}),c.a.createElement(Te,{className:"mT-15 ta-c"},c.a.createElement(Ce,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),j(!1),S(""),x(""),N("")}},"Go back to Login."))),!y&&!k&&c.a.createElement(Te,{className:"ai-c jc-c"},c.a.createElement(Te,{className:"col-12 mB-25"},c.a.createElement(Oe,{className:"pos-a",src:Ue.username,style:Re.txtIcon}),c.a.createElement(ke,{type:"text",className:"form-control pL-25",placeholder:"Mobile Number",value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){$(e,D)}})),c.a.createElement(Te,{className:"col-12 mB-15"},c.a.createElement(Oe,{className:"pos-a",src:Ue.password,style:Re.txtIcon}),c.a.createElement(ke,{type:"password",className:"form-control pL-25",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){$(e,D)}})),c.a.createElement(Te,{className:"ta-c"},c.a.createElement(Ce,{className:"col-12 cur-p mB-15 ta-r c-blue-500",onClick:function(){T(!0),j(!1),S(""),x(""),N("")}},"Forgot Password?"),c.a.createElement(Ae,{title:!1===n?"LOGIN":"Loading...",onPress:D}),c.a.createElement(Ce,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},b)),c.a.createElement(Te,{className:"col-12 mT-5 ai-c jc-c"},c.a.createElement(Ce,{className:"col-12 mB-5 ta-c"},"Dont have an account?"),c.a.createElement(Te,{className:"col ai-c jc-c cur-p bd p-0 bdc-blue-500 c-blue-500",style:{borderRadius:"15px"}},c.a.createElement(Ce,{className:"ta-c m-0 p-15 cur-p",onClick:function(){T(!1),j(!0),S(""),x(""),N("")}},"CREATE / JOIN YOUR FLAT")))),c.a.createElement(Se,{visible:n,text:""}))}),Le=a(27),Me=a(6),Fe=function(e){return r.createElement("div",{className:"header navbar"},r.createElement("div",{className:"header-container"},r.createElement("ul",{className:"nav-left"},r.createElement("li",null,r.createElement("a",{id:"sidebar-toggle",className:"sidebar-toggle",href:"javascript:void(0);"},r.createElement("i",{className:"ti-menu"}))),r.createElement("li",{className:"search-box"},r.createElement("a",{className:"search-toggle no-pdd-right",href:"javascript:void(0);"},r.createElement("i",{className:"search-icon ti-search pdd-right-10"}),r.createElement("i",{className:"search-icon-close ti-close pdd-right-10"}))),r.createElement("li",{className:"search-input"},r.createElement("input",{className:"form-control",type:"text",placeholder:"Search..."}))),r.createElement("ul",{className:"nav-right"},e.appUser.role===P&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.homes.length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"fa fa-home"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"fa fa-home pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"House(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.homes.map(function(t,a){return r.createElement("li",{key:"h"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed",onClick:function(){return t=a,void e.onHomeChange(t,function(e){});var t}},r.createElement("span",null,r.createElement("span",{className:e.appUser.homeIndex===a?"fw-500":"c-grey-600"},""+t.number)))))}))))),e.user.role.indexOf(",")>0&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.role.split(",").length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-user"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-user pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Role(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.role.split(",").map(function(t,a){return r.createElement("li",{key:"r"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"tt-c "+(e.appUser.role===t?"fw-500":"c-grey-600")},""+t.toLowerCase())))))}))),r.createElement("li",{className:"pX-20 pY-15 ta-c bdT"},r.createElement("span",null,r.createElement(ue.b,{className:"c-grey-600 cH-blue fsz-sm td-n",to:"my-role"},"Change Role ",r.createElement("i",{className:"ti-angle-right fsz-xs mL-10"})))))),r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},"0"),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-bell"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-bell pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Notification(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},r.createElement("li",null,r.createElement("a",{href:"",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"c-grey-600"},"No notification found."))))))))),r.createElement("li",{className:"dropdown"},r.createElement("a",{href:"",className:"dropdown-toggle no-after peers fxw-nw ai-c lh-1","data-toggle":"dropdown"},r.createElement("div",{className:"peer mR-10"},r.createElement(Oe,{className:"w-2r bdrs-50p",src:z(e.user.image)?x+e.user.image:"F"===e.user.gender.toLocaleUpperCase()?Ue.avatarFemale:Ue.avatarMale,alt:""})),r.createElement("div",{className:"peer"},r.createElement("span",{className:"fsz-sm c-grey-900"},e.user.name))),r.createElement("ul",{className:"dropdown-menu fsz-sm"},r.createElement("li",null,r.createElement(ue.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-profile"},r.createElement("i",{className:"fa fa-user mR-10"}),r.createElement("span",null,"Profile"))),r.createElement("li",null,r.createElement(ue.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-documents"},r.createElement("i",{className:"fa fa-file-text mR-10"}),r.createElement("span",null,"Documents"))),e.user.role.indexOf(",")>0&&r.createElement("li",null,r.createElement(ue.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-role"},r.createElement("i",{className:"ti-user mR-10"}),r.createElement("span",null,"Role"))),r.createElement("li",null,r.createElement(ue.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/change-password"},r.createElement("i",{className:"fa fa-key mR-10"}),r.createElement("span",null,"Password"))),r.createElement("li",{role:"separator",className:"divider"}),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",onClick:function(){Object(Me.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){e.onLogout(function(e){!0===e?_e.success("Logout Success!"):_e.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})}},r.createElement("i",{className:"ti-power-off mR-10"}),r.createElement("span",null,"Logout"))))))))},Ve=[{title:"Dashboard",icon:"c-blue-500 ti-home",path:"/"},{title:"Blocks",icon:"c-brown-500 fa fa-building",path:"/blocks",roles:[L]},{title:"Houses",icon:"c-blue-700 fa fa-home",path:"/homes",roles:[L]},{title:"Users",icon:"c-deep-purple-500 fa fa-users",path:"/users",roles:[L]},{title:"Members",icon:"c-brown-500 fa fa-users",path:"/members",roles:[P]},{title:"Servants",icon:"c-deep-purple-500 fa fa-female",path:"/servants",roles:[P]},{title:"Vehicles",icon:"c-blue-700 fa fa-car",path:"/vehicles",roles:[P]},{title:"Tickets",icon:"c-orange-500 ti-headphone-alt",path:"/tickets",roles:[P,L,F,V,Y]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/visitors",roles:[P]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/all-visitors",roles:[L,F,M,H,G]},{title:"Servants",icon:"c-deep-purple-500 fa fa-female",path:"/all-servants",roles:[L,F,M,H,G]},{title:"Door Locks",icon:"c-indigo-800 ti-lock",path:"/outings",roles:[P,L,F,M,H,G]},{title:"Takeaways ",icon:"c-yellow-600 fa fa-share",path:"/all-takeways",roles:[L,F,M,H,G]},{title:"Notification",icon:"c-red-500 ti-bell",path:"/notification",roles:[L,F]},{title:"Ads",icon:"c-teal-500 fa fa-bullhorn",path:"/ads",roles:[L,F]},{title:"Payment",icon:"c-indigo-500 fa fa-credit-card",path:"/payment",hasPayment:!0,roles:[L,F]},{title:"Notice",icon:"c-blue-a400 ti-notepad",path:"/notice"},{title:"Settings",icon:"c-deep-orange-500 ti-settings",child:[{title:"My Profile",path:"/my-profile"},{title:"My Role",path:"/my-role",hasMRole:!0},{title:"My Documents",path:"/my-documents"},{title:"Change Password",path:"/change-password"}]},{title:"Info",icon:"c-deep-purple-a700 ti-info-alt",path:"/info"}],He=function(e){return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar-inner"},c.a.createElement("div",{className:"sidebar-logo"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement(ue.b,{className:"sidebar-link td-n",to:"/"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"logo"},c.a.createElement(Oe,{src:Ue.logo,className:"",style:{width:70,height:65,padding:"13px 15px"},alt:""}))),c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement("h5",{className:"lh-1 mB-0 logo-text"},"Nest"))))),c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"mobile-toggle sidebar-toggle"},c.a.createElement("a",{href:"",className:"td-n"},c.a.createElement("i",{className:"ti-arrow-circle-left"})))))),Ve&&Ve.length>0&&c.a.createElement("ul",{className:"sidebar-menu scrollable pos-r"},Ve.map(function(t,a){if((z(t.path)||z(t.child))&&(!z(t.roles)||t.roles.indexOf(e.appUser.role)>=0)&&(!t.hasMRole||e.user.role.indexOf(",")>0)&&(!t.hasPayment||e.user.client.config.hasPayment))return c.a.createElement("li",{key:"nav-item-"+a,className:"nav-item"+(z(t.child)?" dropdown":"")+(0===a?" mT-30":"")},c.a.createElement(ue.b,{className:z(t.child)?"dropdown-toggle":"sidebar-link",to:z(t.path)?t.path:"#"},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:t.icon})),c.a.createElement("span",{className:"title"},t.title),z(t.child)&&c.a.createElement("span",{className:"arrow"},c.a.createElement("i",{className:"ti-angle-right"}))),z(t.child)&&c.a.createElement("ul",{className:"dropdown-menu"},t.child.map(function(e,t){return c.a.createElement("li",{key:"sub-nav-item-"+t},c.a.createElement(ue.b,{className:"sidebar-link",to:z(e.path)?e.path:"#"},e.title))})))}))))},Ye=function(){return r.createElement("footer",{className:"bdT ta-c p-30 lh-0 fsz-sm c-grey-600 bgc-white"},r.createElement("span",null,"Copyright \xa9 Nest. All rights reserved."))},Ge=function(e,t,a,n){return function(e){(new ee).get("payments"+(z(t)?"/"+t:""),function(e,t){J(e)&&J(e.data)?a(e.data):n(z(t)?t:"Failed to load Payments.")})}},Ke=function(e){return{type:n.LOAD_USER,payload:e}},We=function(e,t){return function(a){a(ze([],!1,!1,"")),(new ee).get("ads/"+e,function(e,n){J(e)&&J(e.data)?(a(ze(e.data,!0,!1,"")),t(!0)):t(!1)})}},qe=function(e,t,a,n,r){return function(c){t&&z(t._id)?(new ee).put("ad/"+t._id,function(e,a){if(J(e)&&z(e.data)){var l=n.findIndex(function(t){return t._id===e.data});n[l]._id=e.data,n[l].title=t.title,n[l].description=t.description,c(ze(n,!0,!1,"")),r(!0)}else r(!1)},t):(new ee).post("ad/"+e,function(e,l){J(e)&&z(e.data)?(n.unshift({_id:e.data,title:t.title,description:t.description,createdBy:a.name,createdAt:new Date}),c(ze(n,!0,!1,"")),r(!0)):r(!1)},t)}},ze=function(e,t,a,r){return{type:n.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Je=function(e,t,a){return function(e){e(Ze([],!1,!1,"")),(new ee).get("tickets"+(z(t)?"/"+t:""),function(t,n){J(t)?(e(Ze(t.data,!0,!1,"")),a(!0)):a(!1)})}},Xe=function(e,t,a,n,r){return function(c){e&&e._id&&e._id.length>0?(new ee).put("ticket/"+e._id,function(a,l){if(J(a)&&z(a.data)){if(z(n.data)){var s=[],o=(s=n.data).findIndex(function(e){return e._id===a.data});s[o]._id=a.data,s[o].category=e.category,s[o].title=e.title,s[o].description=e.description,s[o].status=e.status,s[o].updatedBy=t.name,c(Ze(s,!0,!1,""))}r(!0)}else r(!1)},e):(new ee).post("ticket/"+t.homes[a]._id,function(l,s){if(J(l)&&z(l.data)){var o=[];z(n.data)&&((o=n.data).unshift({_id:l.data,_homeId:t.homes[a].number,category:e.category,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),c(Ze(o,!0,!1,""))),r(!0)}else r(!1)},e)}},Ze=function(e,t,a,r){return{type:n.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Qe=function(e,t,a,n,r){return function(e){(new ee).get("visitors"+(z(t)?"/"+t:"")+"/"+a,function(e,t){J(e)&&J(e.data)?n(e.data):r(e&&z(e.message)?e.message:"Failed to load Visitors.")})}},$e=function(e,t,a,n,r,c){return function(a){t&&z(t._id)?(new ee).put("visitor/"+t._id,function(e,t){J(e)&&J(e.data)&&e.data._id.length>0?r(e.data):c(e&&z(e.message)?e.message:"Failed to load Visitors.")},t):(new ee).post("visitor/"+e,function(e,t){J(e)&&J(e.data)&&e.data._id.length>0?r(e.data):c(e&&z(e.message)?e.message:"Failed to load Visitors.")},t)}},et=function(e,t,a){return function(n){(new ee).get("visitor/search/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Visitors.")})}},tt=function(e,t,a){return function(n){(new ee).upload("upload",function(r,c){J(r)&&J(r.data)&&!0===r.data?(e&&e.isProfile&&1==e.isProfile&&a&&(a.image=e.name,n(at(a))),t(!0,"")):t(!1,c)},e)}},at=function(e){return{type:n.LOAD_USER,payload:e}},nt=function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=(a[1],Object(r.useState)({paymentId:"",amount:0,transactionRef:""})),s=Object(de.a)(l,2),o=(s[0],s[1]);return c.a.createElement(Te,null,c.a.createElement(Te,{className:"m-5"},c.a.createElement(Ce,{className:"mT-2 fw-600"},"Total Due Amount: Rs "+function(){var t=0;return e.home.payments.map(function(e,a){var n=0;return e.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),t+=e.amount-n,1}),t}())),c.a.createElement(we,null,z(e.home.payments)?e.home.payments.filter(function(e,t){var a=0;return z(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<e.amount}).map(function(t,a){var n=0;return z(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<t.amount?c.a.createElement(Te,{key:"my-due"+a,className:"m-7"+(0===a?"":" pL-15 bdL")},c.a.createElement(Te,{className:"mT-4"},c.a.createElement(Ce,null,"Due for: "+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(Te,{className:"mT-4 mB-3"},c.a.createElement(Ce,null,"Rs "+(t.amount-n))),c.a.createElement(Te,null,c.a.createElement(Ce,null,"Due Date: 15/"+q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(Te,{className:"mT-4"},c.a.createElement(Ae,{title:"PAY NOW",onPress:function(){return function(t,a){if(t&&t.length>0&&a&&a>0)if(z(e.user.client.upi.id)&&z(e.user.client.upi.name)){var n=Z();o({paymentId:t,amount:a,transactionRef:n}),_e.warn("Payment is in progress. Please contact administrator.")}else _e.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else _e.warn("Amount should be more then 0 to proceed payment.")}(t._id,t.amount-n)}}))):null}):c.a.createElement(Ce,{className:"p-20"},"No due found.")),c.a.createElement(Se,{visible:n}))},rt=a(35),ct=a.n(rt);function lt(e,t){try{return J(e)?("string"!=typeof e&&e.toString(),z(t)||(t=D),ct()(e).format(t)):""}catch(a){return Q(a,"convert.toDateString"),""}}function st(e,t){try{return lt(e,R)}catch(a){return Q(a,"convert.toDateTimeString"),""}}var ot=function(e){return r.createElement(we,null,z(e.home.payments.filter(function(e,t){return z(e.transactions)&&z(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?e.home.payments.filter(function(e,t){return z(e.transactions)&&z(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var a=0,n=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount,0===t&&(n=e.createdAt),1}),r.createElement(Te,{key:"my-his"+t,className:"m-7"+(0===t?"":" pL-15 bdL")},r.createElement(Te,{className:"mT-4"},r.createElement(Ce,null,"Paid for: "+q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),r.createElement(Te,{className:"mT-4 mB-3"},r.createElement(Ce,null,"Rs "+a)),r.createElement(Te,null,r.createElement(Ce,null,"Paid On: "+lt(n))))}):r.createElement(Ce,null,"No history found!"))},it=function(e){var t=e.data,a=e.message;return z(t)?t.map(function(e,t){return r.createElement(Te,{className:"bdB pB-3"},r.createElement(Te,null,r.createElement(Ce,{key:t,className:"fw-600"},e.title)),r.createElement(Te,null,r.createElement(Ce,{key:t},e.description)))}):z(a)?r.createElement(Ce,null,a):null},mt=function(e){return r.createElement(Te,{className:"col-md-3"},r.createElement(Te,{className:"layers bd p-20 cur-p c-white bg"+e.color,onClick:e.onClick},r.createElement(Te,{className:"layer w-100 mB-10"},r.createElement("h6",{className:"lh-1"},e.title)),r.createElement(Te,{className:"layer w-100"},r.createElement(Te,{className:"peers ai-sb fxw-nw"},r.createElement(Te,{className:"peer peer-greed"},r.createElement("span",{className:"icon-holder"},r.createElement("i",{className:e.icon+" fa-2x"}))),r.createElement(Te,{className:"peer"},e.hasCount?r.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 "+e.color+" "+e.bgColor},e.count):r.createElement("span",{className:"d-ib lh-0 va-m"},"View all"))))))},ut=function(e){return e.visible?r.createElement(Te,{className:"spinner"}):null},dt=function(e){return r.createElement(Te,{className:"masonry-item col-md-6"},r.createElement(Te,{className:"bd bgc-white p-20"},r.createElement(Te,{className:"layers"},r.createElement(Te,{className:"layer w-100 mB-10"},r.createElement("h6",{className:"lh-1"},"Advertisement")),r.createElement(Te,{className:"layer w-100"},r.createElement("ul",{className:"list-task list-group","data-role":"tasklist"},e.data.isUpToDate?!e.data.isError&&z(e.data.data)?e.data.data.map(function(e,t){return r.createElement("li",{className:"list-group-item bdw-0","data-role":"task"},r.createElement(Te,{className:"peers ai-c"},r.createElement("label",{className:" peers peer-greed js-sb ai-c"},e.title&&r.createElement("span",{className:"peer peer-greed fw-600"},e.title),e.description&&r.createElement("span",{className:"peer peer-greed"},e.description))))}):r.createElement("li",{className:"list-group-item bdw-0","data-role":"task"},r.createElement(Te,{className:"peers ai-c"},r.createElement("label",{className:" peers peer-greed js-sb ai-c"},r.createElement("span",{className:"peer peer-greed"},"No advertisement found !!!")))):r.createElement(ut,{visible:!0}))))))},pt=function(e){var t=function(e,t){var a=new Date;switch(t=new Date(t),e.toUpperCase()){case"INIT":return t.getFullYear()<a.getFullYear()||t.getMonth()!==a.getMonth()||a.getDate()-t.getDate()>2?"badge-danger":"badge-warning";case"IN-PROGRESS":return"badge-info";case"RESOLVED":return"badge-success";default:return""}};return r.createElement(Te,{className:"masonry-item col-md-6"},r.createElement(Te,{className:"bd bgc-white p-20"},r.createElement(Te,{className:"layers"},r.createElement(Te,{className:"layer w-100 mB-10"},r.createElement("h6",{className:"lh-1"},"Tickets")),r.createElement(Te,{className:"layer w-100"},r.createElement("ul",{className:"list-task list-group","data-role":"tasklist"},e.data.isUpToDate?!e.data.isError&&z(e.data.data)?e.data.data.map(function(a,n){return r.createElement("li",{className:"list-group-item bdw-0","data-role":"task"},r.createElement(Te,{className:"peers ai-c"},r.createElement("label",{className:" peers peer-greed js-sb ai-c"},r.createElement("span",{className:"peer peer-greed"},(e.role!==P?a._homeId+": ":"")+a.title),r.createElement("span",{className:"peer"},r.createElement("span",{className:"badge badge-pill fl-r lh-0 p-10 "+t(a.status,a.createdAt)},a.status)))))}):r.createElement("li",{className:"list-group-item bdw-0","data-role":"task"},r.createElement(Te,{className:"peers ai-c"},r.createElement("label",{className:" peers peer-greed js-sb ai-c"},r.createElement("span",{className:"peer peer-greed"},"No ticket found !!!")))):r.createElement(ut,{visible:!0}))))))},ft=function(e){var t=Object(r.useState)(!0),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1];return Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,e.appUser.role===P?e.user.homes[e.appUser.homeIndex]._id:"",!0,function(e){l(!1),m(e&&e.length>0?e:[])},function(e){l(!1)})},[]),c.a.createElement(Te,{className:"masonry-item col-md-6"},c.a.createElement(Te,{className:"bd bgc-white"},c.a.createElement(Te,{className:"layers"},c.a.createElement(Te,{className:"layer w-100 p-20"},c.a.createElement("h6",{className:"lh-1"},"Active Visitors")),n?c.a.createElement(ut,{visible:!0}):c.a.createElement(Te,{className:"layer w-100"},c.a.createElement(Te,{className:"bgc-light-blue-500 c-white p-20"},c.a.createElement(Te,{className:"peers ai-c jc-sb gap-40"},c.a.createElement(Te,{className:"peer peer-greed"},c.a.createElement("h5",null,"Active Visitors"),c.a.createElement("p",{className:"mB-0"},e.user.homes[e.appUser.homeIndex].number)),c.a.createElement(Te,{className:"peer"},c.a.createElement("h3",{className:"text-right"},i.length)))),c.a.createElement(Te,{className:"table-responsive p-20"},z(i)?c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:" bdwT-0"},"Photo"),c.a.createElement("th",{className:" bdwT-0"},"Name"),c.a.createElement("th",{className:" bdwT-0"},"Type"),c.a.createElement("th",{className:" bdwT-0"},"Status"))),c.a.createElement("tbody",null,i.map(function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{className:"va-m"},c.a.createElement(Oe,{src:x+e.image,className:"m-0",style:{height:"7vh",borderRadius:"50%"}})),c.a.createElement("td",{className:"fw-600 va-m"},e.name),c.a.createElement("td",{className:"va-m"},e.type),c.a.createElement("td",{className:"va-m"},!e.isApproved&&!e.isRejected&&!e.isEntered&&c.a.createElement("span",{className:"badge bgc-blue-50 c-blue-500 p-10 lh-0 tt-c badge-pill"},"WAITING FOR APPROVAL"),(e.isApproved||e.isRejected)&&c.a.createElement("span",{className:"badge p-10 lh-0 tt-c badge-pill"+(e.isApproved?"bgc-green-50 c-green-600":"bgc-red-50 c-red-600")},e.isApproved?"APPROVED":"REJECTED"),e.isEntered&&c.a.createElement("span",{className:"badge bgc-deep-purple-50 c-deep-purple-700 p-10 lh-0 tt-c badge-pill"},"ENTERED"),e.isApproved&&!e.isEntered&&c.a.createElement("span",{className:"badge bgc-red-50 c-red-600 p-10 lh-0 tt-c badge-pill"},"NOT ENTERED"),!e.isRejected&&e.isExit&&c.a.createElement("span",{className:"badge bgc-orange-50 c-orange-700 p-10 lh-0 tt-c badge-pill"},"EXIT"),e.isEntered&&!e.isExit&&c.a.createElement("span",{className:"badge bgc-red-50 c-red-700 p-10 lh-0 tt-c badge-pill"},"STAYING IN")))}))):c.a.createElement(Te,{className:"peers ai-c"},c.a.createElement("label",{className:" peers peer-greed js-sb ai-c"},c.a.createElement("span",{className:"peer peer-greed"},"No visitors found !!!")))))),z(i)&&c.a.createElement(Te,{className:"ta-c bdT w-100 p-20"},c.a.createElement(ue.b,{to:e.appUser.role===P?"/visitors":"/all-visitors"},"View all visitors"))))},Et=function(e){var t=Object(r.useState)(1),a=Object(de.a)(t,2),n=a[0],l=a[1];return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item w-100"},c.a.createElement(Te,{className:"row gap-20"},c.a.createElement(mt,{title:"Member(s)",icon:"fa fa-users",color:"c-brown-400",bgColor:"bgc-brown-50",hasCount:!0,count:e.home.members?e.home.members.length+"":"0",onClick:function(){return e.history.push("members")}}),c.a.createElement(mt,{title:"Servant(s)",icon:"fa fa-female",color:"c-deep-purple-400",onClick:function(){return e.history.push("servants")}}),c.a.createElement(mt,{title:"Vehicle(s)",icon:"fa fa-car",color:"c-blue-600",bgColor:"bgc-blue-50",hasCount:!0,count:e.home.vehicles?e.home.vehicles.length+"":"0",onClick:function(){return e.history.push("vehicles")}}),c.a.createElement(mt,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",bgColor:"bgc-orange-50",hasCount:!0,count:e.tickets.isUpToDate?e.tickets.isError?"0":e.tickets.data.length+"":"Loading",onClick:function(){return e.history.push("tickets")}})),c.a.createElement(Te,{className:"row gap-20"},c.a.createElement(mt,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("visitors")}}),c.a.createElement(mt,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}}))),e.user.client.config.hasPayment&&c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(Te,{className:"tab-bar bgc-white p-20"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return l(1)}},"MY DUES"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return l(2)}},"ADVANCE"),c.a.createElement("span",{className:"tab"+(3===n?" active":""),onClick:function(){return l(3)}},"HISTORY")),c.a.createElement(Te,{className:"bgc-white p-20"},1===n?c.a.createElement(nt,{history:e.history,user:e.user,home:e.home,onPaymentUpload:e.onPaymentUpload,onPaymentUpdate:e.onPaymentUpdate}):2===n?c.a.createElement(it,{data:[],message:"No advance found!"}):3===n?c.a.createElement(ot,{history:e.history,home:e.home}):4===n?c.a.createElement(it,{data:[],message:"Work in progress"}):[])),c.a.createElement(pt,{data:e.tickets,role:e.appUser.role}),c.a.createElement(dt,{data:e.ads}),c.a.createElement(ft,{appUser:e.appUser,user:e.user,onLoad:e.onLoadVisitors})))},ht=function(e){return r.createElement(Te,{id:"mainContent"},r.createElement(Te,{className:"row gap-20 masonry pos-r"},(e.appUser.role===L||e.appUser.role===F)&&r.createElement(Te,{className:"masonry-item w-100"},r.createElement(Te,{className:"row gap-20"},r.createElement(mt,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",bgColor:"bgc-orange-50",hasCount:!0,count:e.tickets.isUpToDate?e.tickets.isError?"0":e.tickets.data.length+"":"Loading",onClick:function(){return e.history.push("tickets")}}),r.createElement(mt,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("all-visitors")}}),r.createElement(mt,{title:"ads",icon:"fa fa-bullhorn",color:"c-teal-400",bgColor:"bgc-teal-50",hasCount:!0,count:e.ads.isUpToDate?e.ads.isError?"0":e.ads.data.length+"":"Loading",onClick:function(){return e.history.push("ads")}}),r.createElement(mt,{title:"Notification",icon:"ti-bell",color:"c-red-400",onClick:function(){return e.history.push("notification")}})),r.createElement(Te,{className:"row gap-20"},r.createElement(mt,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}}),e.appUser.role===L&&r.createElement(r.Fragment,null,r.createElement(mt,{title:"Block(s)",icon:"fa fa-building",color:"c-brown-400",bgColor:"bgc-brown-50",hasCount:!0,count:e.blocks.isUpToDate?e.blocks.isError?"0":e.blocks.data.length+"":"Loading",onClick:function(){return e.history.push("blocks")}}),r.createElement(mt,{title:"House(s)",icon:"fa fa-home",color:"c-blue-600",bgColor:"bgc-blue-50",hasCount:!0,count:e.homes.isUpToDate?e.homes.isError?"0":e.homes.data.length+"":"Loading",onClick:function(){return e.history.push("homes")}}),r.createElement(mt,{title:"User(s)",icon:"fa fa-users",color:"c-deep-purple-400",bgColor:"bgc-deep-purple-50",hasCount:!0,count:e.users.isUpToDate?e.users.isError?"0":e.users.data.length+"":"Loading",onClick:function(){return e.history.push("users")}})),e.appUser.role!==L&&e.user.client.config.hasPayment&&r.createElement(mt,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-400",onClick:function(){return e.history.push("payment")}})),e.appUser.role===L&&e.user.client.config.hasPayment&&r.createElement(Te,{className:"row gap-20"},r.createElement(mt,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-400",onClick:function(){return e.history.push("payment")}}))),(e.appUser.role===V||e.appUser.role===Y)&&r.createElement(Te,{className:"masonry-item w-100"},r.createElement(Te,{className:"row gap-20"},r.createElement(mt,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",onClick:function(){return e.history.push("tickets")}}))),(e.appUser.role===H||e.appUser.role===G)&&r.createElement(Te,{className:"masonry-item w-100"},r.createElement(Te,{className:"row gap-20"},r.createElement(mt,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("all-visitors")}}),r.createElement(mt,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}}))),(e.appUser.role===L||e.appUser.role===F||e.appUser.role===V||e.appUser.role===Y)&&r.createElement(pt,{data:e.tickets,role:e.appUser.role}),r.createElement(dt,{data:e.ads}),(e.appUser.role===L||e.appUser.role===F||e.appUser.role===H||e.appUser.role===G)&&r.createElement(ft,{appUser:e.appUser,user:e.user,onLoad:e.onLoadVisitors})))},bt=a(13),Nt=a(16),gt=a.n(Nt),vt=a(79),yt=a.n(vt),Tt=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,l=e.className,s=Z();return r.createElement("span",{className:"mR-10 "+(l||"")},r.createElement("input",{type:"checkbox",id:s,key:c||s,checked:t,className:"va-m",onClick:n||function(){}}),r.createElement("label",{htmlFor:s,className:"mL-5 va-m mB-0"},a))},wt=function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=z(p)?p.toLowerCase():p,h=z(E)&&z(e.data)?e.data.filter(function(e,t){return e.homeNumber.toLowerCase().indexOf(E)>=0||e.passCode.toLowerCase().indexOf(E)>=0||e.name.toLowerCase().indexOf(E)>=0}):e.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Te,{className:"bdB mT-5"},c.a.createElement(Ce,null,"No of "+(e.isActive?"Active":"")+" Visitors: "+e.data.length),!e.isSearch&&e.appUser.role!==M&&c.a.createElement(Tt,{isActive:e.isActive,text:"Only Active Visitors",onPress:e.onActiveChange,className:"fl-r"})),z(e.data)&&c.a.createElement(Te,{className:"mT-10 mB-5"},c.a.createElement(ke,{type:"text",placeholder:"Enter passcode to search",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"p-10 mB-10"},z(h)?h.map(function(t,a){return c.a.createElement(Te,{key:a,className:"card m-1 d-ib"},z(t.image)&&c.a.createElement(Te,{className:"ta-c mB-5"},c.a.createElement(Oe,{src:x+t.image,className:"cur-p m-0",style:{height:"25vh",borderRadius:"50%"},onClick:function(){l(!0),m(t.image)}})),c.a.createElement(Te,{className:"container"},z(t.passCode)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.passCode)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.name+" ["+t.type+"]")),(t.age>0||z(t.gender))&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.age>0?t.age:"")+(t.age>0&&z(t.gender)?", ":"")+(z(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},"To ",c.a.createElement(Ce,{className:"fw-600"},t.homeNumber)," on ",c.a.createElement(Ce,{className:"fw-600"},st(t.createdAt))),!t.isEntered&&!t.isExit&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),t.personCount>0&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.personCount+" Person"+(t.personCount>1?"s":"")+("WALK"===t.vehicleType?" by WALK":" in "+t.vehicleType+(z(t.vehicleNo)?" "+t.vehicleNo:"")))),!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"c-blue-500"},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:t.isApproved?"c-green-600":"c-red-600"},t.isApproved?"APPROVED":"REJECTED"),c.a.createElement(Te,null,"By "+t.approvedBy),c.a.createElement(Te,null,"On "+st(t.approvedAt))),t.isEntered&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),c.a.createElement(Te,null,"On "+st(t.enteredAt))),t.isApproved&&!t.isEntered&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"c-red-600"},"NOT ENTERED")),!t.isRejected&&t.isExit&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),c.a.createElement(Te,null,"On "+st(t.exitAt))),t.isEntered&&!t.isExit&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"c-red-600"},"STAYING IN")),!t.isEntered&&t.passCode&&t.arriveAt&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600 c-red-600"},"Expected Arrival "+st(t.arriveAt))),!e.isSearch&&e.appUser.role===M&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2 ta-c"},!t.isEntered&&!t.isRejected&&(!t.arriveAt||new Date(t.arriveAt).getDate()===ct()().toDate().getDate())&&c.a.createElement(Ae,{title:"Enter",onPress:function(){e.onEnter&&e.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&c.a.createElement(Ae,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.onExit&&e.onExit(t._id)}})),!e.isSearch&&e.appUser.role===P&&!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Ae,{title:"Approve",className:"mR-10",onPress:function(){e.onApprove&&e.onApprove(t._id)}}),c.a.createElement(Ae,{title:"Reject",onPress:function(){e.onReject&&e.onReject(t._id)}})),!e.isSearch&&e.appUser.role===P&&z(t.passCode)&&!t.isEntered&&!t.isRejected&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Ae,{title:"Remove",onPress:function(){e.onRemove&&e.onRemove(t._id)}})),e.isSearch&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Ae,{title:"Select",onPress:function(){e.onSelect&&e.onSelect(t)}}))))}):c.a.createElement(Ce,{className:"p-20"},"No visitor found.")),c.a.createElement(bt.a,{open:n,onClose:function(){l(!1)}},c.a.createElement(Te,{className:"ta-c"},c.a.createElement(Oe,{src:x+i,style:{height:"50%",width:"50%"}}))))},Ot=function(e){var t=Object(r.useState)(""),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)({id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""}),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(!1),p=Object(de.a)(u,2),f=p[0],E=p[1],h=Object(r.useState)(""),b=Object(de.a)(h,2),N=b[0],g=b[1],v=Object(r.useState)([]),y=Object(de.a)(v,2),T=y[0],w=y[1],O=Object(r.useState)(!1),k=Object(de.a)(O,2),j=k[0],B=k[1];Object(r.useEffect)(function(){e.appUser.role===P&&l(e.user.homes[e.appUser.homeIndex]._id)},[]);var C=function(){l(e.appUser.role===P?n:""),m(Object(d.a)({},i,{id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""})),E(!1),g(""),w([]),B(!1)},A=function(){i.mobileNo.length>2&&(e.onToggleLoading(!0),e.onSearch(i.mobileNo,function(t){e.onToggleLoading(!1),B(!0),w(t)},function(t){e.onToggleLoading(!1),_e.fail(t),B(!1),w([])}))};return c.a.createElement(Te,null,e.appUser.role===M&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Enter House Number",className:"form-control",value:N,onChange:function(e){E(!0),g(e.target.value)}})),e.appUser.role===M&&f&&z(N)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(N.toLowerCase())>=0}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p m-3 p-5 bgc-blue-50",key:"ho"+t,onClick:function(){g(e.number),l(e._id),E(!1)}},e.number)})),e.appUser.role===M&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"VISITOR"===i.type,text:"Visitor",onPress:function(){return m(Object(d.a)({},i,{type:"VISITOR"}))}}),c.a.createElement(xe,{isActive:"DELIVERY"===i.type,text:"Delivery",onPress:function(){return m(Object(d.a)({},i,{type:"DELIVERY"}))}}),c.a.createElement(xe,{isActive:"SERVICE"===i.type,text:"Service",onPress:function(){return m(Object(d.a)({},i,{type:"SERVICE"}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))},onKeyPress:function(e){$(e,A)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:A},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),e.appUser.role===P&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"Arrival At \xa0"),c.a.createElement(gt.a,{minDate:ct()().toDate(),maxDate:ct()().add(2,"d").toDate(),onChange:function(e){m(Object(d.a)({},i,{arriveAt:e}))},value:i.arriveAt}),c.a.createElement(Ce,null,"\xa0"),c.a.createElement(yt.a,{value:i.arriveAtTime,onChange:function(e){m(Object(d.a)({},i,{arriveAtTime:e}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"number",placeholder:"Age",className:"form-control w-a d-ib mR-10",maxLength:3,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(Te,{className:"d-ib w-a"},c.a.createElement(xe,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(xe,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}}))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"number",placeholder:"People Count",className:"form-control w-a d-ib mR-10",value:i.personCount>0?i.personCount+"":"",onChange:function(e){return m(Object(d.a)({},i,{personCount:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(Be,{className:"form-control w-a d-ib mR-10",value:i.vehicleType,onChange:function(e){return m(Object(d.a)({},i,{vehicleType:e.target.value}))}},c.a.createElement("option",{value:"WALK"},"WALK"),c.a.createElement("option",{value:"CYCLE"},"CYCLE"),c.a.createElement("option",{value:"BIKE"},"BIKE"),c.a.createElement("option",{value:"CAR"},"CAR"),c.a.createElement("option",{value:"VAN"},"VAN"),c.a.createElement("option",{value:"JEEP"},"JEEP"),c.a.createElement("option",{value:"TEMPO"},"TEMPO"),c.a.createElement("option",{value:"BUS"},"BUS"),c.a.createElement("option",{value:"TRUCK"},"TRUCK")),c.a.createElement(ke,{type:"text",placeholder:"Vehicle No",className:"form-control w-a d-ib",value:i.vehicleNo,onChange:function(e){return m(Object(d.a)({},i,{vehicleNo:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",accept:"image/*",name:"image",placeholder:"SELECT IMAGE",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Z();r+="."+n[n.length-1],m(Object(d.a)({},i,{fileName:r}));var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){e||_e.fail(t||"Failed to upload file.")})}}}}),z(i.fileName)&&c.a.createElement(Ce,{className:"mL-15"},i.fileName)),c.a.createElement(Te,{className:"ta-c mT-5 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:function(){if((e.appUser.role===P||z(e.gateNo))&&(e.appUser.role!==P||J(i.arriveAt))&&!1===f&&n.length>0&&z(i.name)&&i.personCount>0&&z(i.fileName)){var t=i.arriveAt;if(J(t)){var a=[];J(i.arriveAt)&&z(i.arriveAtTime)&&(a=i.arriveAtTime.split(":")),z(a)&&a.length>1?t.setHours(parseInt(a[0]),parseInt(a[1]),0,0):t.setHours(0,0,0,0)}var r={_id:"",type:i.type,name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:"",arriveAt:t,personCount:i.personCount,vehicleType:i.vehicleType,vehicleNo:i.vehicleNo,image:i.fileName,passCode:"",gateNo:e.gateNo};r=Object.assign(r,{isUser:e.appUser.role===P}),e.onToggleLoading(!0),e.onSave(n,r,e.user,e.appUser,function(t){C(),e.onToggleLoading(!1),e.appUser.role===P?_e.success("Visitor Request created successfully. Please share the passcode("+t.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."):_e.success("Visitor created successfully. Notification sent to the house members for approval. If this visitor got approved from house member then allow him/her inside.")},function(t){e.onToggleLoading(!1),_e.fail("Failed to save visitor "+r.name+".")})}else _e.warn("Please fill Gate Number, House, Name, People count and Image before "+(i.id.length>0?"Update":"Save")+".")},className:"mR-10"}),c.a.createElement(Ae,{title:"CLEAR",onPress:C})),j&&c.a.createElement(bt.a,{open:j,onClose:function(){return B(!1)}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(wt,{user:e.user,appUser:e.appUser,data:T,isActive:!1,isSearch:!0,onSelect:function(e){B(!1),w([]),m(Object(d.a)({},i,{name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,vehicleType:e.vehicleType,vehicleNo:e.vehicleNo,fileName:e.image}))}}))))},kt=function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(function(){m(e.gateNo)},[e.gateNo]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:""},c.a.createElement(ke,{type:"text",placeholder:"Gate Number",className:"form-control w-a",value:i,onChange:function(e){return m(e.target.value)},onBlur:function(){return e.onGateNoChanged(i)}}),c.a.createElement(Ce,{className:"fl-r c-blue-700 fw-600 cur-p",onClick:function(){z(i)?e.history.push("all-takeways"):_e.warn("Please enter Gate Number to view this page.")}},"View all Active Takeaways"),c.a.createElement(Ce,{className:"fl-r c-blue-700 fw-600 cur-p mR-20",onClick:function(){z(i)?e.history.push("all-visitors"):_e.warn("Please enter Gate Number to view this page.")}},"View all Active Visitors")),c.a.createElement(Ot,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:i,onToggleLoading:function(e){return l(e)},onSave:e.onSaveVisitor,onUpload:e.onUpload,onSearch:e.onSearchVisitor}),c.a.createElement(Se,{visible:n})))))},jt=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t(ae(e))}}(t))},onPaymentUpload:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new ee).post("paymentupload",function(e,r){J(e)&&J(e.data)&&e.data.approvalid>0?(t(Ke(a)),n(!0)):n(!1)},e)}}(t,0,n,r))},onPaymentUpdate:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new ee).post("payment/transaction/"+e,function(l,s){if(J(l)&&J(l.data)&&l.data.length>0){t._id=l.data;var o=n.homes[a].payments.findIndex(function(t){return t._id===e});n.homes[a].payments[o].transactions||(n.homes[a].payments[o].transactions=[]),n.homes[a].payments[o].transactions.push(t),c(Ke(n)),r(!0)}else r(!1)},t)}}(t,a,n,r,c))},onSaveVisitor:function(t,a,n,r,c,l){return e($e(t,a,0,0,c,l))},onUpload:function(t,a){return e(tt(t,a))},onSearchVisitor:function(t,a,n){return e(et(t,a,n))},onLoadAds:function(t,a){return e(We(t,a))},onLoadTickets:function(t,a,n){return e(Je(0,a,n))},onLoadVisitors:function(t,a,n,r,c){return e(Qe(0,a,n,r,c))}}})(function(e){return Object(r.useEffect)(function(){e.ads.isUpToDate||e.onLoadAds(e.user.client._id,function(e){}),e.ads.isUpToDate||e.onLoadTickets(e.user.client._id,e.appUser.role===L||e.appUser.role===F?"":e.user.homes[e.appUser.homeIndex]._id,function(e){})},[]),e.appUser.role===P?e.appUser.homeIndex>=0&&z(e.user.homes)?c.a.createElement(Et,{history:e.history,appUser:e.appUser,user:e.user,home:e.user.homes[e.appUser.homeIndex],onPaymentUpload:function(t,a,n){return e.onPaymentUpload(t,a,e.user,n)},onPaymentUpdate:function(t,a,n){return e.onPaymentUpdate(t,a,e.appUser.homeIndex,e.user,n)},ads:e.ads,tickets:e.tickets,onLoadVisitors:e.onLoadVisitors}):c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Ce,{className:"m-20"},"No house assigned to you. Please contact administrator/manager.")):e.appUser.role===L||e.appUser.role===F||e.appUser.role===V||e.appUser.role===Y||e.appUser.role===H||e.appUser.role===G?c.a.createElement(ht,{history:e.history,appUser:e.appUser,user:e.user,users:e.users,homes:e.homes,blocks:e.blocks,ads:e.ads,tickets:e.tickets,onLoadVisitors:e.onLoadVisitors}):e.appUser.role===M?c.a.createElement(kt,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onGateNoChanged:e.onGateNoChanged,onSaveVisitor:e.onSaveVisitor,onUpload:e.onUpload,onSearchVisitor:e.onSearchVisitor}):c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Ce,{className:"m-20"},"No role assigned to you. Please contact administrator/manager."))}),Bt=function(e,t,a,n){return function(r){e&&e._id&&e._id.length>0?(new ee).put("member/"+e._id,function(c,l){if(J(c)&&J(c.data)&&c.data.length>0){var s=t.homes[a].members,o=s.findIndex(function(e){return e._id===c.data});s[o]._id=c.data,s[o].number=e.number,s[o].name=e.name,s[o].age=e.age,s[o].gender=e.gender,s[o].mobileNo=e.mobileNo,s[o].emailId=e.emailId,s[o].type=e.type,s[o].relationship=e.relationship,s[o].otherRelationship=e.otherRelationship,t.homes[a].members=s,r(Ct(t)),n(!0,"")}else n(!1,l)},e):(e=Object.assign(e,{password:e.mobileNo}),(new ee).post("member/"+t.homes[a]._id,function(c,l){if(J(c)&&J(c.data)&&c.data.length>0){e._id=c.data,e.createdBy=t.name,e.isApproved=!0;var s=t.homes[a].members;s.push(e),t.homes[a].members=s,r(Ct(t)),n(!0,"")}else n(!1,l)},e))}},Ct=function(e){return{type:n.LOAD_USER,payload:e}},At=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},St=function(e){return r.createElement("div",{className:"mB-10"},r.createElement(ue.b,{to:""},"Dashboard"),e.data.map(function(t,a){return r.createElement(r.Fragment,null,r.createElement("span",{key:"bd"+a,className:"mL-10 mR-10"},"/"),a===e.data.length-1?r.createElement("span",{key:"bc"+a},t.title):r.createElement(ue.b,{key:"bc"+a,to:"/"+t.link},t.title))}))},Ut=Object(o.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(Bt(t,a,n,r))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new ee).delete("member/"+e,function(l,s){J(l)&&J(l.data)&&!0===l.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(Ct(a)),n&&!0===n.isUpToDate&&!1===n.isError&&z(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(At(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),p=Object(de.a)(u,2),f=p[0],E=p[1],h=function(){if(z(f.name)&&f.age>0&&z(f.gender)&&z(f.type)){l(!0);var t={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",relationship:f.relationship,otherRelationship:f.otherRelationship,type:f.type,role:f.role};e.onSave(t,e.user,e.homeIndex,function(e,t){l(!1),!0===e?(m(!1),E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),_e.success("Member saved successfully.")):_e.fail(z(t)?t:"Failed to save member.")})}else _e.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Members",link:"members"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-member")}},"Add New")),z(e.user.homes[e.homeIndex].members)?e.user.homes[e.homeIndex].members.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(Te,{key:a,className:"bdB mT-5"},e.user.client.config.appType==W&&z(t.number)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(xe,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(xe,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{className:"form-control",value:f.relationship,onChange:function(e){return E(Object(d.a)({},f,{relationship:e.target.value}))}},c.a.createElement("option",{key:"memrel-1",value:""},"Select Relationship"),z(e.user.client.config.memberRelationships)?e.user.client.config.memberRelationships.map(function(e,t){return c.a.createElement("option",{key:"memrel"+t,value:e},e)}):c.a.createElement("option",{key:"memrel0",value:"Other"},"Other"))),"Other"===f.relationship&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Other Relationship",className:"form-control",value:f.otherRelationship,onChange:function(e){return E(Object(d.a)({},f,{otherRelationship:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Te,{key:a,className:"bdB mT-5"},e.user.client.config.appType==W&&z(t.number)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),(z(t.relationship)||z(t.otherRelationship))&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,z(t.relationship)&&"Other"!=t.relationship?t.relationship:z(t.otherRelationship)?t.otherRelationship:"Other")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,relationship:t.relationship,otherRelationship:t.otherRelationship,type:t.type,role:t.role}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.homeIndex,e.user,e.users,function(e){l(!1),!0===e?_e.success("Member removed successfully."):_e.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No member found."),c.a.createElement(Se,{visible:n})))))}),It=Object(o.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(Bt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),o=Object(de.a)(s,2),i=o[0],m=o[1];return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(xe,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",value:i.emailId,onChange:function(e){return m(Object(d.a)({},i,{emailId:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"form-control",value:i.relationship,onChange:function(e){return m(Object(d.a)({},i,{relationship:e.target.value}))}},c.a.createElement("option",{key:"memrel-1",value:""},"Select Relationship"),z(e.user.client.config.memberRelationships)?e.user.client.config.memberRelationships.map(function(e,t){return c.a.createElement("option",{key:"memrel"+t,value:e},e)}):c.a.createElement("option",{key:"memrel0",value:"Other"},"Other"))),"Other"===i.relationship&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Other Relationship",className:"form-control",value:i.otherRelationship,onChange:function(e){return m(Object(d.a)({},i,{otherRelationship:e.target.value}))}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:function(){if(z(i.name)&&i.age>0&&z(i.gender)&&z(i.type)){l(!0);var t={_id:i.id,number:"",name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:i.emailId?i.emailId.toLowerCase():"",relationship:i.relationship,otherRelationship:i.otherRelationship,type:i.type,role:i.role};e.onSave(t,e.user,e.homeIndex,function(e,t){l(!1),!0===e?(m({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),_e.success("Member saved successfully.")):_e.fail(z(t)?t:"Failed to save member.")})}else _e.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(Se,{visible:n}))))}),_t=function(e,t,a,n){return function(r){e&&z(e._id)?(new ee).put("vehicle/"+e._id,function(c,l){if(J(c)&&z(c.data)){var s=t.homes[a].vehicles,o=s.findIndex(function(e){return e._id===c.data});s[o]._id=c.data,s[o].number=e.number,s[o].type=e.type,t.homes[a].vehicles=s,r(xt(t)),n(!0)}else n(!1)},e):(new ee).post("vehicle/"+t.homes[a]._id,function(c,l){if(J(c)&&z(c.data)){e._id=c.data,e.createdBy=t.name;var s=t.homes[a].vehicles;s.push(e),t.homes[a].vehicles=s,r(xt(t)),n(!0)}else n(!1)},e)}},xt=function(e){return{type:n.LOAD_USER,payload:e}},Dt=Object(o.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(_t(t,a,n,r))},onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).delete("vehicle/"+e,function(c,l){J(c)&&J(c.data)&&!0===c.data?(t.homes[a].vehicles=t.homes[a].vehicles.filter(function(t,a){return t._id!==e}),r(xt(t)),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(de.a)(g,2),y=v[0],T=v[1],w=function(){if(z(b)&&z(y)){l(!0);var t={_id:p,number:b,type:y};e.onSave(t,e.user,e.homeIndex,function(e){l(!1),!0===e?(m(!1),f(""),N(""),T(""),_e.success("Vehicle saved successfully.")):_e.fail("Failed to save vehicle.")})}else _e.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Vehicles",link:"vehicles"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-vehicle")}},"Add New")),z(e.user.homes[e.homeIndex].vehicles)?e.user.homes[e.homeIndex].vehicles.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(xe,{isActive:"TWO WHEELER"===y,text:"Two Wheeler",onPress:function(){return T("TWO WHEELER")}}),c.a.createElement(xe,{isActive:"FOUR WHEELER"===y,text:"Four Wheeler",onPress:function(){return T("FOUR WHEELER")}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:w},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.type)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.number)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.number),T(t.type)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.user,e.homeIndex,function(e){l(!1),!0===e?_e.success("Vehicle removed successfully."):_e.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No vehicle found."),c.a.createElement(Se,{visible:n})))))}),Rt=Object(o.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(_t(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1];return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"TWO WHEELER"===b,text:"Two Wheeler",onPress:function(){return N("TWO WHEELER")}}),c.a.createElement(xe,{isActive:"FOUR WHEELER"===b,text:"Four Wheeler",onPress:function(){return N("FOUR WHEELER")}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:function(){if(z(p)&&z(b)){l(!0);var t={_id:i,number:p,type:b};e.onSave(t,e.user,e.homeIndex,function(e){l(!1),!0===e?(m(""),f(""),N(""),_e.success("Vehicle saved successfully.")):_e.fail("Failed to save vehicle.")})}else _e.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(Se,{visible:n}))))}),Pt=function(e,t,a){return function(n){(new ee).get("servants/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Servants.")})}},Lt=function(e,t,a){return function(n){t&&z(t._id)?(new ee).put("servant/"+t._id,function(e,t){J(e)&&z(e.data)?a(!0):a(!1)},t):(new ee).post("servant/"+e,function(e,t){J(e)&&z(e.data)?a(!0):a(!1)},t)}},Mt=function(e,t,a,n){return function(r){(new ee).get("servant/clockings/"+e+"/"+t+"/"+a,function(e,t){J(e)&&z(e.data)?n(e.data):n([])})}},Ft=a(25),Vt=Object(o.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onLoad:function(t,a,n){return e(Pt(t,a,n))},onSave:function(t,a,n){return e(Lt(t,a,n))},onRemove:function(t,a){return e(function(e,t){return function(a){(new ee).delete("servant/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onCreateTakeaway:function(t,a,n,r){return e(function(e,t,a,n){return function(r){z(t._id)?(new ee).put("servant/takeaway/"+t._id,function(e,t){J(e)&&z(e.data)?a(e.data):n(e&&z(e.message)?e.message:"Failed to update takeaway.")},t):(new ee).post("servant/takeaway/"+e,function(e,t){J(e)&&z(e.data)?a(e.data):n(e&&z(e.message)?e.message:"Failed to create Takeaway.")},t)}}(t,a,n,r))},onRemoveTakeaway:function(t,a){return e(function(e,t){return function(a){(new ee).delete("servant/takeaway/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onLoadClockings:function(t,a,n,r){return e(Mt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)({data:[],id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1,clockingRC:10}),p=Object(de.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){l(!1),E(Object(d.a)({},f,{data:e}))},function(e){l(!1),_e.fail(e)})},[]);var h=function(){if(z(f.name)&&f.age>0&&z(f.gender)){l(!0);var t={_id:f.id,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){if(l(!1),!0===e){var t=f.data,a=t.findIndex(function(e){return e._id===f.id});t[a].name=f.name,t[a].age=f.age,t[a].gender=f.gender,t[a].mobileNo=f.mobileNo,t[a].emailId=f.emailId,m(!1),E(Object(d.a)({},f,{data:t,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),_e.success("Servant saved successfully.")}else _e.fail("Failed to save servant.")})}else _e.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Servants",link:"servants"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-servant")}},"Add New")),z(f.data)?f.data.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(xe,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(xe,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),t.lastClocking&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},"IN"===t.lastClocking.status?c.a.createElement(Ce,{className:"c-red-600"},"Entered At: "+st(t.lastClocking.at)):c.a.createElement(Ce,null,"Exit At: "+st(t.lastClocking.at))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},t.lastClocking&&"IN"===t.lastClocking.status?c.a.createElement(Ce,{className:"c-red-600"},"Staying IN"):c.a.createElement(Ce,null,"Staying OUT")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,function(e){l(!1),!0===e?(E(Object(d.a)({},f,{data:f.data.filter(function(e,t){return e._id!==a}),viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),_e.success("Servant removed successfully.")):_e.fail("Failed to remove servant.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement("span",{className:"mR-15",onClick:function(){var e,a;e=t._id,a=t.takeaways,f.viewId===e?E(Object(d.a)({},f,{viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1})):E(Object(d.a)({},f,{viewId:e,takeaways:a,takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Takeaways")),c.a.createElement("span",{onClick:function(){var a;a=t._id,f.viewClockingId===a?E(Object(d.a)({},f,{viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:"",clockings:[],clockingPN:1})):(l(!0),e.onLoadClockings(a,f.clockingPN,f.clockingRC,function(e){l(!1),E(Object(d.a)({},f,{viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewClockingId:a,clockings:e}))}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(f.viewClockingId===t._id?"Hide":"View")+" Clocking"))),f.viewId===t._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Te,{className:"p-15"},c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(ke,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.takeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{takeawayTitle:e.target.value}))}}),c.a.createElement(je,{placeholder:"Takeaway Description",className:"form-control bd",value:f.takeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{takeawayDesc:e.target.value}))}}),c.a.createElement(Te,{className:"mT-5"},c.a.createElement(Ae,{title:"ADD NEW TAKEAWAY",onPress:function(){return a=t._id,void(z(f.takeawayTitle)&&z(f.takeawayDesc)?(l(!0),e.onCreateTakeaway(a,{_id:"",title:f.takeawayTitle,description:f.takeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){l(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a});n[r].takeaways.unshift({_id:t,title:f.takeawayTitle,description:f.takeawayDesc,createdAt:new Date,createdBy:e.user.name,updatedBy:e.user._id,updatedAt:new Date}),E(Object(d.a)({},f,{data:n,takeawayTitle:"",takeawayDesc:""})),_e.success("Takeayway added successfully.")},function(e){l(!1),_e.fail("Failed to add takeaway.")})):_e.warn("Please fill Takeaway title & description before Add."));var a}}))),z(f.takeaways)?f.takeaways.map(function(a,n){return c.a.createElement(Te,{key:"tkycmt"+n,className:"pL-3 pR-3 pT-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},a.createdBy+" on "+st(a.updatedAt))),c.a.createElement(Te,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(Ce,null,a.title):c.a.createElement(ke,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.editTakeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayTitle:e.target.value}))}})),c.a.createElement(Te,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(Ce,null,a.description):c.a.createElement(je,{placeholder:"Takeaway Description",className:"form-control bd",value:f.editTakeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayDesc:e.target.value}))}})),a.isExit?c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-green-600"},"Exit by "+a.exitBy+" in Gate "+a.exitGateNo+" on "+st(a.exitAt))):c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-red-600"},"Still not exit.")),!a.isExit&&c.a.createElement(c.a.Fragment,null,f.editTakeawayId===a._id?c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(z(f.editTakeawayTitle)&&z(f.editTakeawayDesc)?(l(!0),e.onCreateTakeaway(a,{_id:f.editTakeawayId,title:f.editTakeawayTitle,description:f.editTakeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){l(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a}),c=n[r].takeaways.findIndex(function(e){return e._id===f.editTakeawayId});n[r].takeaways[c].title=f.editTakeawayTitle,n[r].takeaways[c].description=f.editTakeawayDesc,n[r].takeaways[c].updatedBy=e.user.name,n[r].takeaways[c].updatedAt=new Date,E(Object(d.a)({},f,{data:n,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),_e.success("Takeayway updated successfully.")},function(e){l(!1),_e.fail("Failed to update takeaway.")})):_e.warn("Please fill Takeaway title & description before Add."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:a._id,editTakeawayTitle:a.title,editTakeawayDesc:a.description}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this takeaway?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemoveTakeaway(n,function(e){l(!1);var t=f.data,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e,t){return e._id!==n}),!0===e?(E(Object(d.a)({},f,{data:t,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewId:""})),_e.success("Takeaway removed successfully.")):_e.fail("Failed to remove takeaway.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))),f.viewClockingId===t._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Clockings")),c.a.createElement(Te,{className:"p-15"},z(f.clockings)?f.clockings.map(function(e,t){return c.a.createElement(Te,{key:"clkcmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"mR-15 fw-600"},e.status),c.a.createElement(Ce,null,st(e.createdAt))))}):c.a.createElement(Ce,{className:"p-20"},"No clocking found."),z(f.clockings)&&f.clockings.length%10===0&&c.a.createElement("span",{onClick:function(){var a;a=t._id,l(!0),e.onLoadClockings(a,f.clockingPN+1,f.clockingRC,function(e){l(!1);var t=f.clockings;t.push.apply(t,Object(Ft.a)(e)),E(Object(d.a)({},f,{clockings:t,clockingPN:f.clockingPN+1}))})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"View More")))))}):c.a.createElement(Ce,{className:"p-20"},"No servant found."),c.a.createElement(Se,{visible:n})))))}),Ht=Object(o.b)(function(e,t){return{appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){(new ee).get("servants/",function(a,n){J(a)&&J(a.data)?e(a.data):t(a&&z(a.message)?a.message:"Failed to load Servants.")})}}(t,a))},onClocking:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).get("servant/clocking/"+e+"/"+t+"/"+(a||0),function(e,t){J(e)&&z(e.data)?n(e.data):n("")})}}(t,a,n,r))},onLoadClockings:function(t,a,n,r){return e(Mt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),p=Object(de.a)(u,2),f=p[0],E=p[1],h=Object(r.useState)(""),b=Object(de.a)(h,2),N=b[0],g=b[1],v=Object(r.useState)([]),y=Object(de.a)(v,2),T=y[0],w=y[1],O=Object(r.useState)({viewId:"",clockings:[],clockingPN:1,clockingRC:10}),k=Object(de.a)(O,2),j=k[0],B=k[1];Object(r.useEffect)(function(){l(!0),e.onLoad(function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})},[]);var C=function(t,a){Object(Me.confirmAlert)({title:"IN"===a?"Confirm to Allow Servant Entry":"Confirm to Exit Servant",message:"Are you sure you wish to "+("IN"===a?"Allow the servant to Enter?":"exit servant?"),buttons:[{label:"Yes",onClick:function(){l(!0),e.onClocking(t,a,e.gateNo,function(e){if(z(e)){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].lastClocking={_id:t,at:new Date,status:a},m(n),l(!1),_e.success("IN"===a?"servant entered successfully.":"Servant exit successfully.")}else l(!1),_e.fail("IN"===a?"Failed to allow the entry of servant.":"Failed to exit servant.")})}},{label:"No",onClick:function(){}}]})},A=i;return z(f)&&(A=i.filter(function(e){return e.name.toLowerCase().indexOf(f.toLowerCase())>=0})),c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Servants",link:"all-servants"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-10 mB-5"},c.a.createElement(ke,{type:"text",placeholder:"Enter search text",className:"form-control",value:f,onChange:function(e){return E(e.target.value)}})),c.a.createElement(Te,{className:"p-10 mB-10"},z(i)?A.map(function(t,a){return c.a.createElement(Te,{key:a,className:"card m-1 d-ib"},z(t.image)&&c.a.createElement(Te,{className:"ta-c mB-5"},c.a.createElement(Oe,{src:x+t.image,className:"cur-p m-0",style:{height:"25vh",borderRadius:"50%"},onClick:function(){}})),c.a.createElement(Te,{className:"container"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t._homeId)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),t.lastClocking&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},"IN"===t.lastClocking.status?c.a.createElement(Ce,{className:"c-red-600"},"Entered At: "+st(t.lastClocking.at)):c.a.createElement(Ce,null,"Exit At: "+st(t.lastClocking.at))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},t.lastClocking&&"IN"===t.lastClocking.status?c.a.createElement(Ce,{className:"c-red-600"},"Staying IN"):c.a.createElement(Ce,null,"Staying OUT")),e.appUser.role===M?c.a.createElement(Te,{className:"mT-1 mB-3 p-2 ta-c"},t.lastClocking&&"IN"===t.lastClocking.status?c.a.createElement(Ae,{title:"OUT",onPress:function(){C(t._id,"OUT")}}):c.a.createElement(Ae,{title:"IN",className:"mR-10",onPress:function(){C(t._id,"IN")}})):c.a.createElement(c.a.Fragment,null,c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"mR-15",onClick:function(){var e,a;e=t._id,a=t.takeaways,N===e?(g(""),w([]),B(Object(d.a)({},j,{viewId:"",clockings:[],clockingPN:1}))):(g(e),w(a),B(Object(d.a)({},j,{viewId:"",clockings:[],clockingPN:1})))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(N===t._id?"Hide":"View")+" Takeaways")),c.a.createElement("span",{onClick:function(){var a;a=t._id,j.viewId===a?(g(""),w([]),B(Object(d.a)({},j,{viewId:"",clockings:[],clockingPN:1}))):(l(!0),e.onLoadClockings(a,j.clockingPN,j.clockingRC,function(e){l(!1),g(""),w([]),B(Object(d.a)({},j,{viewId:a,clockings:e}))}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(j.viewId===t._id?"Hide":"View")+" Clocking"))),N===t._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Te,{className:"p-15"},z(T)?T.map(function(e,t){return c.a.createElement(Te,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+st(e.updatedAt))),c.a.createElement(Te,null,c.a.createElement(Ce,null,e.title)),c.a.createElement(Te,null,c.a.createElement(Ce,null,e.description)),e.isExit?c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-green-600"},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+st(e.exitAt))):c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-red-600"},"Still not exit.")))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))),j.viewId===t._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Clockings")),c.a.createElement(Te,{className:"p-15"},z(j.clockings)?j.clockings.map(function(e,t){return c.a.createElement(Te,{key:"clkcmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"mR-15 fw-600"},e.status),c.a.createElement(Ce,null,st(e.createdAt))))}):c.a.createElement(Ce,{className:"p-20"},"No clocking found."),z(j.clockings)&&j.clockings.length%10===0&&c.a.createElement("span",{onClick:function(){var a;a=t._id,l(!0),e.onLoadClockings(a,j.clockingPN+1,j.clockingRC,function(e){l(!1);var t=j.clockings;t.push.apply(t,Object(Ft.a)(e)),B(Object(d.a)({},j,{clockings:t,clockingPN:j.clockingPN+1}))})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"View More")))))))}):c.a.createElement(Ce,{className:"p-20"},"No servants found.")),c.a.createElement(Se,{visible:n})))))}),Yt=Object(o.b)(function(e,t){return{user:e.User,appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("servant/takeaways/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Takeaways.")})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).post("servant/exittakeaway/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)},{gateNo:t})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Takeaways",link:"all-takeaways"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},z(i)&&z(i.filter(function(e){return e.takeaways&&e.takeaways.length>0}))?i.filter(function(e){return e.takeaways&&e.takeaways.length>0}).map(function(t,a){return c.a.createElement(Te,{key:a,className:"mT-5 bdB"},c.a.createElement(Te,{className:"mB-3"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+st(t.createdAt))),c.a.createElement(Te,{className:"mB-3"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mB-3"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mB-3"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mB-3"},c.a.createElement(Ce,null,t.emailId)),c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Te,{className:"pL-15 pR-15 pB-15 pT-3"},z(t.takeaways)?t.takeaways.map(function(a,n){return c.a.createElement(Te,{key:"tkycmt"+n,className:"pT-5 pB-5 pR-3 pL-3"+(0===n?"":" bdB")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},a.createdBy+" on "+st(a.updatedAt))),c.a.createElement(Te,null,c.a.createElement(Ce,null,a.title)),c.a.createElement(Te,null,c.a.createElement(Ce,null,a.description)),e.appUser.role===M&&c.a.createElement(Te,{className:"mT-10"},!a.isExit&&c.a.createElement(Ae,{title:"Exit",onPress:function(){var n,r;n=a._id,r=t._id,Object(Me.confirmAlert)({title:"Confirm to Exit Servant with Takeaway",message:"Are you sure you wish to exit the servant with this takeaway things?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onExit(n,e.gateNo,function(e){if(!0===e){var t=i,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e){return e._id!==n}),m(t),l(!1),_e.success("Servant exit with takeaway successfully.")}else l(!1),_e.fail("Failed to exit servant with takeaway.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(Ce,null,"No data found."),c.a.createElement(Se,{visible:n})))))}),Gt=Object(o.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n){return e(Lt(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(0),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(de.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(de.a)(w,2),k=O[0],j=O[1],B=Object(r.useState)(""),C=Object(de.a)(B,2),A=C[0],S=C[1],U=function(){if(z(p)&&b>0&&z(y)){l(!0);var t={_id:i,name:p,age:b,gender:y,mobileNo:k,emailId:A?A.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){l(!1),!0===e?(m(""),f(""),N(0),T(""),j(""),S(""),_e.success("Servant saved successfully.")):_e.fail("Failed to save servant.")})}else _e.warn("Please fill all the required fields before Save.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Servants",link:"servants"},{title:"New Servant",link:"new-servant"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,value:b>0?b+"":"",onChange:function(e){return N(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"M"===y,text:"Male",onPress:function(){return T("M")}}),c.a.createElement(xe,{isActive:"F"===y,text:"Female",onPress:function(){return T("F")}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===y,text:"Other",onPress:function(){return T("O")}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:k,onChange:function(e){return j(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",value:A,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){$(e,U)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:U}))),c.a.createElement(Se,{visible:n}))))}),Kt=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,a,n){return e(Je(0,a,n))},onSave:function(t,a,n,r,c){return e(Xe(t,a,n,r,c))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new ee).delete("ticket/"+e,function(a,c){J(a)&&J(a.data)&&!0===a.data?(z(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(Ze(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onResolve:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new ee).delete("ticket/resolve/"+e,function(a,c){J(a)&&J(a.data)&&!0===a.data?(z(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(Ze(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onStart:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new ee).put("ticket/start/"+e,function(a,c){if(J(a)&&J(a.data)&&!0===a.data){if(z(n.data)){var l=[],s=(l=n.data).findIndex(function(t){return t._id===e});l[s].status="IN-PROGRESS",t(Ze(l,!0,!1,""))}r(!0)}else r(!1)},{status:"IN-PROGRESS"})}}(t,0,0,r,c))},onAddComment:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(a){z(t._id)?(new ee).put("ticket/comment/"+t._id,function(n,l){if(J(n)&&z(n.data)){t.createdAt=new Date;var s=[];if(z(r.data)){var o=(s=r.data).findIndex(function(t){return t._id===e}),i=s[o].comments.findIndex(function(e){return e._id===t._id});s[o].comments[i].comment=t.comment,s[o].comments[i].updatedBy=t.updatedBy,s[o].comments[i].updatedAt=t.updatedAt,a(Ze(s,!0,!1,""))}c(!0)}else c(!1)},t):(new ee).post("ticket/comment/"+e,function(n,l){if(J(n)&&z(n.data)){t._id=n.data,t.createdAt=new Date;var s=[];if(z(r.data)){var o=(s=r.data).findIndex(function(t){return t._id===e});s[o].comments.unshift(t),a(Ze(s,!0,!1,""))}c(!0)}else c(!1)},t)}}(t,a,0,0,c,l))},onRemoveComment:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(a){(new ee).delete("ticket/comment/"+e,function(n,l){if(J(n)&&J(n.data)&&!0===n.data){if(z(r.data)){var s=r.data.findIndex(function(e){return e._id===t});r.data[s].comments=r.data[s].comments.filter(function(t,a){return t._id!==e}),a(Ze(r.data,!0,!1,""))}c(!0)}else c(!1)})}}(t,a,0,0,c,l))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)({data:[],id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),p=Object(de.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,e.appUser.role===L||e.appUser.role===F?"":e.user.homes[e.appUser.homeIndex]._id,function(e){l(!1),e||_e.fail("Failed to load Tickets.")})},[]);var h=function(){if(z(f.category)&&z(f.title)&&z(f.description)){l(!0);var t={_id:f.id,category:f.category,title:f.title,description:f.description,status:f.status};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),!0===e?(m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),_e.success("Ticket saved successfully.")):_e.fail("Failed to save ticket.")})}else _e.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Tickets",link:"tickets"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},e.appUser.role===P&&c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-ticket")}},"Add New")),J(e.tickets)&&e.tickets.isUpToDate&&!e.tickets.isError&&z(e.tickets.data)?e.tickets.data.map(function(t,a){return c.a.createElement(Te,{key:"tkt"+a,className:"bdB mT-5"},c.a.createElement(Te,{className:"fw-600 mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" from "+t._homeId+" on "+st(t.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(Be,{className:"form-control",value:f.category,onChange:function(e){return E(Object(d.a)({},f,{category:e.target.value}))}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),z(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance")):c.a.createElement(Ce,{className:"fw-600"},t.category)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:f.title,onChange:function(e){return E(Object(d.a)({},f,{title:e.target.value}))}}):c.a.createElement(Ce,null,t.title)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(je,{placeholder:"Description",className:"form-control",value:f.description,onChange:function(e){return E(Object(d.a)({},f,{description:e.target.value}))}}):c.a.createElement(Ce,null,t.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.status)),i&&f.id===t._id?c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},e.appUser.role===P&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,category:t.category,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),e.appUser.role===P&&c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?_e.success("Ticket removed successfully."):_e.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),e.appUser.role===P&&c.a.createElement("span",{className:"m-25",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onResolve(a,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?_e.success("Ticket resolved successfully."):_e.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"RESOLVE")),(e.appUser.role===L||e.appUser.role===F)&&"INIT"===t.status&&c.a.createElement("span",{className:"mR-25",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onStart(a,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?_e.success("Ticket started successfully."):_e.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"START")),c.a.createElement("span",{onClick:function(){var e,a;e=t._id,a=t.comments,f.viewId===e?E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})):E(Object(d.a)({},f,{viewId:e,comments:a,comment:"",editCommentId:"",editComment:""}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Comments"))),f.viewId===t._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Comments")),c.a.createElement(Te,{className:"p-15"},c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(je,{placeholder:"Comment Text",className:"form-control bd",value:f.comment,onChange:function(e){return E(Object(d.a)({},f,{comment:e.target.value}))}}),c.a.createElement(Te,{className:"mT-5"},c.a.createElement(Ae,{title:"ADD COMMENT",onPress:function(){return a=t._id,void(z(f.comment)?(l(!0),e.onAddComment(a,{_id:"",comment:f.comment,createdBy:e.user._id,createdByName:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){l(!1),!0===e?(E(Object(d.a)({},f,{comment:""})),_e.success("Comment added successfully.")):_e.fail("Failed to add comment.")})):_e.warn("Please fill comment before Add."));var a}}))),z(f.comments)?f.comments.map(function(a,n){return c.a.createElement(Te,{key:"tktcmt"+n,className:"pL-3 pR-3 pt-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},a.createdByName+" on "+st(a.updatedAt))),c.a.createElement(Te,null,f.editCommentId===a._id?c.a.createElement(je,{placeholder:"Comment Text",className:"form-control bd",value:f.editComment,onChange:function(e){return E(Object(d.a)({},f,{editComment:e.target.value}))}}):c.a.createElement(Ce,null,a.comment)),a.createdBy===e.user._id&&c.a.createElement(c.a.Fragment,null,f.editCommentId===a._id?c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(z(f.editCommentId)&&z(f.editComment)?(l(!0),e.onAddComment(a,{_id:f.editCommentId,comment:f.editComment,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){l(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:""})),_e.success("Comment updated successfully.")):_e.fail("Failed to update comment.")})):_e.warn("Please fill comment before update."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:"",editComment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:a._id,editComment:a.comment}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this comment?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemoveComment(n,r,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:"",viewId:""})),_e.success("Comment removed successfully.")):_e.fail("Failed to remove comment.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(Ce,{className:"p-20"},"No comment found."))))}):c.a.createElement(Ce,{className:"p-20"},e.tickets.isUpToDate?e.tickets.isError?e.tickets.errorMessage:"No ticket found.":"Loading..."),c.a.createElement(Se,{visible:n})))))}),Wt=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,a,n,r,c){return e(Xe(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(de.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)("INIT"),O=Object(de.a)(w,2),k=O[0],j=O[1],B=function(){if(z(p)&&z(b)&&z(y)){l(!0);var t={_id:i,category:p,title:b,description:y,status:k};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){l(!1),!0===e?(m(""),f(""),N(""),T(""),j("INIT"),_e.success("Ticket saved successfully.")):_e.fail("Failed to save ticket.")})}else _e.warn("Please fill all the required fields before Save.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),e.appUser.role===P?c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"form-control",value:p,onChange:function(e){return f(e.target.value)}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),z(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance"))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)},onKeyPress:function(e){$(e,B)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:B}))):c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings -> My Role and try again."))),c.a.createElement(Se,{visible:n}))))}),qt=Object(o.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(Qe(0,a,n,r,c))},onApprove:function(t,a){return e(function(e,t){return function(a){(new ee).get("visitor/approve/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new ee).get("visitor/reject/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onRemove:function(t,a){return e(function(e,t){return function(a){(new ee).delete("visitor/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,l){return e($e(t,a,0,0,c,l))},onUpload:function(t,a){return e(tt(t,a))},onSearch:function(t,a,n){return e(et(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(!0),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(!1),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(de.a)(g,2),y=v[0],T=v[1],w=function(){l(!0),e.onLoad(e.user.client._id,e.user.homes[e.appUser.homeIndex]._id,p,function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})};Object(r.useEffect)(function(){w()},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Visitors",link:"visitors"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},e.appUser.role===P&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-r"},c.a.createElement(Ce,{className:"cur-p c-blue-500 fw-600 ta-r",onClick:function(){return N(!b)}},b?"< Back to Visitors":"Request for a New Visitor")),!b&&c.a.createElement(wt,{data:i,isActive:p,user:e.user,appUser:e.appUser,onActiveChange:function(){f(!p),w()},onApprove:function(t){Object(Me.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onApprove(t,function(a){if(l(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isApproved=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),_e.success("Visitor approved successfully.")}else _e.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onReject:function(t){Object(Me.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onReject(t,function(a){if(l(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isRejected=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),_e.success("Visitor rejected successfully.")}else _e.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},onRemove:function(t){Object(Me.confirmAlert)({title:"Confirm to Remove Visitor",message:"Are you sure you wish to remove visitor?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(t,function(e){l(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),_e.success("Visitor removed successfully.")):_e.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})}}),b&&c.a.createElement(Ot,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onToggleLoading:function(e){return l(e)},onSave:function(t,a,n,r,c,l){e.onSave(t,a,n,r,function(e){c(e),m([e].concat(Object(Ft.a)(i))),T(e.passCode),N(!1)},function(e){l(e)})},onUpload:e.onUpload,onSearch:e.onSearch}),z(y)&&c.a.createElement(bt.a,{open:z(y),onClose:function(){return T("")}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},"Visitor Request created successfully. Please share the passcode("+y+") to yor visitor and ask him/her to show it to the security in the gate while entering."),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-c fw-600 c-blue-600",style:{fontSize:30}},y))),c.a.createElement(Se,{visible:n})))))}),zt=Object(o.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).post("account/changepassword/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?n(!0,""):n(!1,e&&e.message?e.message:t)},{password:t,newPassword:a})}}(t,a,n,r))},onLogout:function(t){return e(te(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=function(){if(z(i)&&z(p)&&z(b))if(p===b){var t=function(e){var t=/[A-Z]/,a=/[a-z]/,n=/[0-9]/,r=/[!|@|#|$|%|^|&|*|(|)|-|_]/,c="";if(e.length<6)return c="New Password not long enough!";for(var l=0,s=0,o=0,i=0,m=0;m<e.length;m++)t.test(e[m])?l++:a.test(e[m])?s++:n.test(e[m])?o++:r.test(e[m])&&i++;return l<1||s<1||o<1||i<1?c="New Password dose not match with password policy!":c}(p);t.length<1?(l(!0),e.onUpdate(e.user._id,i,p,function(t,a){l(!1),!0===t?(_e.success("Password updated successfully. Please login with your new password."),e.onLogout(function(e){})):_e.fail(a)})):_e.warn(t)}else _e.warn("New Password and Confirm New Password not matchs.");else _e.warn("Please fill all the fields before Update.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Change Password",link:"change-password"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"password",placeholder:"Password",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"password",placeholder:"New Password",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"password",placeholder:"Confirm New Password",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){$(e,g)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"UPDATE",onPress:g})),c.a.createElement(Te,{className:"mT-7"},c.a.createElement(Ce,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),c.a.createElement(Se,{visible:n}))))}),Jt=Object(o.b)(function(e,t){return{user:e.User}},function(e){return{onUpload:function(t,a,n){return e(tt(t,a,n))},onUpdate:function(t,a,n,r,c,l,s){return e(function(e,t,a,n,r,c,l){return function(s){(new ee).put("account/profile/"+e,function(e,r){J(e)&&J(e.data)&&!0===e.data?(c.name=t,c.mobileNo=a,c.emailId=n,s(le(c)),l(!0,"")):l(!1,r)},{name:t,mobileNo:a,emailId:n,image:r})}}(t,a,n,r,c,l,s))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){m(e.user.name),f(e.user.mobileNo),N(e.user.emailId)},[]);var g=function(){z(i)&&z(p)&&z(b)?(l(!0),e.onUpdate(e.user._id,i,p,b?b.toLowerCase():"",e.user&&e.user.image?e.user.image:"",e.user,function(e,t){l(!1),!0===e?_e.success("Profile updated successfully."):_e.fail(t)})):_e.warn("Please fill all the fields before Update.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"My Profile",link:"my-profile"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Oe,{src:z(e.user.image)?x+e.user.image:"F"===e.user.gender.toLocaleUpperCase()?Ue.avatarFemale:Ue.avatarMale,className:"m-0",style:{height:"25vh",borderRadius:"50%"}}),c.a.createElement("input",{type:"file",accept:"image/*",name:"profile-image",placeholder:"SELECT IMAGE",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Z();r+="."+n[n.length-1];var c={file:a,type:a.type,name:r,isProfile:!0};e.onUpload(c,function(e,t){e?g():_e.fail(t||"Failed to upload profile image.")},e.user)}}}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Email Id",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){$(e,g)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"UPDATE",onPress:g}))),c.a.createElement(Se,{visible:n}))))}),Xt=Object(o.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,a){return e(function(e,t){return function(a){a(re(e)),t(!0,"")}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(function(){m(e.appUser.role)},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"My Role",link:"my-role"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"form-control",value:i,onChange:function(e){return m(e.target.value)}},e.user.role.split(",").map(function(e,t){return c.a.createElement("option",{key:"role"+t,value:e},e)}))),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"UPDATE",onPress:function(){z(i)?(l(!0),e.onUpdate(i,function(t,a){l(!1),!0===t?(_e.success("Role updated successfully."),e.history.push("/")):_e.fail(a)})):_e.warn("Please select role before Update.")}}))),c.a.createElement(Se,{visible:n}))))}),Zt=Object(o.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,a){return e(We(t,a))},onSave:function(t,a,n,r,c){return e(qe(t,a,n,r,c))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).delete("ad/"+e,function(r,c){J(r)&&J(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(ze(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(de.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,function(e){l(!1),e||_e.fail("Failed to load Ads.")})},[]);var w=function(){if(z(b)&&z(y)){l(!0);var t={_id:p,title:b,description:y};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){l(!1),!0===e?(m(!1),f(""),N(""),T(""),_e.success("Ad saved successfully.")):_e.fail("Failed to save ad.")})}else _e.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Ads",link:"ads"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p mB-3 c-blue-500",onClick:function(){return e.history.push("new-ad")}},"Add New")),e.ads.isUpToDate&&!e.ads.isError&&z(e.ads.data)?e.ads.data.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+lt(t.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:w},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+lt(t.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.title)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.title),T(t.description)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.ads.data,function(e){l(!1),!0===e?_e.success("Ad removed successfully."):_e.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No ad found.":"Loading..."),c.a.createElement(Se,{visible:n})))))}),Qt=Object(o.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,a,n,r,c){return e(qe(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=function(){if(z(p)&&z(b)){l(!0);var t={_id:i,title:p,description:b};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){l(!1),!0===e?(m(""),f(""),N(""),_e.success("Ad saved successfully.")):_e.fail("Failed to save ad.")})}else _e.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){$(e,g)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SAVE",onPress:g}))),c.a.createElement(Se,{visible:n}))))}),$t=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new ee).delete("member/"+e,function(l,s){J(l)&&J(l.data)&&!0===l.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(Ct(a)),n&&!0===n.isUpToDate&&!1===n.isError&&z(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(At(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(de.a)(E,2),b=h[0],N=h[1],g=function(){if(z(i)&&e.users.isUpToDate&&!e.users.isError&&z(e.users.data)){var t=i.toLowerCase(),a=e.homes.data.filter(function(e){return e.number.toLowerCase()===t});f(e.users.data.filter(function(e){return(e.name+"").toLowerCase().indexOf(t)>=0||(e.mobileNo+"").toLowerCase().indexOf(t)>=0||(e.emailId+"").toLowerCase().indexOf(t)>=0||(e.number+"").toLowerCase().indexOf(t)>=0||z(a.filter(function(t){return t.memberIds.indexOf(e._id)>=0}))})),N(10)}else f([]),N(10)};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Users",link:"users"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-user/0/false")}},"Add New"),c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500 mR-15",onClick:function(){return e.history.push("approve-users")}},"View Users Waiting for Approval")),c.a.createElement(Te,{className:"mB-3 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Search User",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){$(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),z(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Te,{key:"usr"+a,className:"bdB mT-5"},e.user.client.config.appType==W&&z(t.number)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Name: "+(z(t.name)?t.name:""))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Mobile No: "+t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Email: "+t.emailId)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-user/"+t._id+"/false")}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),t._id!==e.user._id&&c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.appUser.homeIndex,e.user,e.users,function(e){l(!1),!0===e?(g(),_e.success("User removed successfully.")):_e.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No user match with your search."),p.length>b&&c.a.createElement(Te,{className:"bdB mT-5"},c.a.createElement(Te,{className:"p-10"},c.a.createElement(Ce,{className:"c-blue-500 fw-600",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Se,{visible:n})))))}),ea=function(e,t,a){return function(n){(new ee).get("home/"+e,function(e,n){J(e)&&J(e.data)&&z(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):a(e&&z(e.message)?e.message:"Failed to load Home.")})}},ta=function(e){return{type:n.LOAD_USER,payload:e}},aa=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},na=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).delete("home/"+e,function(c,l){J(c)&&J(c.data)&&!0===c.data?(t.homes=t.homes.filter(function(t,a){return t._id!==e}),a.data=a.data.filter(function(t,a){return t._id!==e}),r(ta(t)),r(aa(a.data,!0,!1,"")),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(de.a)(E,2),b=h[0],N=h[1],g=function(){z(i)&&e.homes.isUpToDate&&!e.homes.isError&&z(e.homes.data)?(f(e.homes.data.filter(function(e){return(e.number+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Houses",link:"homes"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-home/0")}},"Add New")),c.a.createElement(Te,{className:"mB-3 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Search House",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){$(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),z(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Te,{key:"home"+a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("view-home/"+t._id)}},c.a.createElement("i",{className:"c-orange-500 fa fa-eye"})),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-home/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.user,e.homes,function(e){l(!1),!0===e?(g(),_e.success("House removed successfully.")):_e.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No house match with your search."),p.length>b&&c.a.createElement(Te,{className:"bdB mT-5"},c.a.createElement(Te,{className:"p-10"},c.a.createElement(Ce,{className:"fw-600 c-blue-500",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Se,{visible:n})))))}),ra=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("member/"+e,function(e,n){J(e)&&J(e.data)&&J(e.data.member)&&z(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):a(e&&z(e.message)?e.message:"Failed to load Member.")})}}(t,a,n))},onSave:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(a){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:r}))&&z(e._id)?(new ee).put("member/"+e._id,function(t,r){if(J(t)&&J(t.data)&&t.data.length>0){if(n.isUpToDate&&!n.isError&&z(n.data)){var l=n.data.findIndex(function(e){return e._id===t.data});l>=0?(n.data[l]._id=t.data,n.data[l].name=e.name):n.data.push({_id:t.data,name:e.name}),a(At(n.data,!0,!1,""))}c(!0,"")}else c(!1,r)},e):(new ee).post("member/0",function(t,r){J(t)&&J(t.data)&&t.data.length>0?(n.isUpToDate&&!n.isError&&z(n.data)&&(n.data.push({_id:t.data,name:e.name}),a(At(n.data,!0,!1,""))),c(!0,"")):c(!1,r)},e)}}(t,a,0,r,c,l))},onAllowOwnAccess:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).put("member/allow/"+e+"/"+t,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",isApproved:!1,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1,isMaintenanceSupervisor:!1,isSecuritySupervisor:!1,isMaintenanceManager:!1,isSecurityManager:!1}}),p=Object(de.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(l(!0),e.onLoad(t,function(e,t){l(!1),e&&z(e._id)?E({id:e._id,number:e.number,name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,emailId:e.emailId,relationship:e.relationship,otherRelationship:e.otherRelationship,isApproved:e.isApproved||!1,isPrimary:e.isPrimary,hasOwnAccess:e.hasOwnAccess,isOwnAccessRequested:e.isOwnAccessRequested,type:e.type,homeIds:t,role:{isAdmin:(","+e.role+",").indexOf(","+L+",")>=0,isManager:(","+e.role+",").indexOf(","+F+",")>=0,isGatekeeper:(","+e.role+",").indexOf(","+M+",")>=0,isUser:(","+e.role+",").indexOf(","+P+",")>=0,isMaintenanceSupervisor:(","+e.role+",").indexOf(","+V+",")>=0,isSecuritySupervisor:(","+e.role+",").indexOf(","+H+",")>=0,isMaintenanceManager:(","+e.role+",").indexOf(","+Y+",")>=0,isSecurityManager:(","+e.role+",").indexOf(","+G+",")>=0}}):_e.fail("Failed to load User.")},function(e){l(!1),_e.fail(z(e)?e:"Failed to load User.")}))},[]);var h=function(t){l(!0),e.onAllowOwnAccess(f.id,t,function(e){l(!1),!0===e?(E(Object(d.a)({},f,{hasOwnAccess:t})),_e.success("User "+(t?"allowed to login":"login access revoked")+" successfully.")):_e.fail("Failed to "+(t?"allow":"revoke")+".")})};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},e.user.client.config.appType==W&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"User Id / Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(xe,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(xe,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),(z(f.relationship)||z(f.otherRelationship))&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,z(f.relationship)&&"Other"!=f.relationship?f.relationship:z(f.otherRelationship)?f.otherRelationship:"Other")),e.user.client.config.appType==K&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:"OWNER"===f.type,text:"Owner",onPress:function(){return E(Object(d.a)({},f,{type:"OWNER"}))}}),c.a.createElement(xe,{isActive:"TENANT"===f.type,text:"Tenant",onPress:function(){return E(Object(d.a)({},f,{type:"TENANT"}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-10"},"Role: "),c.a.createElement(Tt,{isActive:f.role.isAdmin,text:L,onPress:function(){var e=f.role;e.isAdmin=!f.role.isAdmin,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isManager,text:F,onPress:function(){var e=f.role;e.isManager=!f.role.isManager,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isGatekeeper,text:M,onPress:function(){var e=f.role;e.isGatekeeper=!f.role.isGatekeeper,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isUser,text:P,onPress:function(){var e=f.role;e.isUser=!f.role.isUser,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isMaintenanceSupervisor,text:V,onPress:function(){var e=f.role;e.isMaintenanceSupervisor=!f.role.isMaintenanceSupervisor,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isSecuritySupervisor,text:H,onPress:function(){var e=f.role;e.isSecuritySupervisor=!f.role.isSecuritySupervisor,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isMaintenanceManager,text:Y,onPress:function(){var e=f.role;e.isMaintenanceManager=!f.role.isMaintenanceManager,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(Tt,{isActive:f.role.isSecurityManager,text:G,onPress:function(){var e=f.role;e.isSecurityManager=!f.role.isSecurityManager,E(Object(d.a)({},f,{role:e}))}})),z(f.id)&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"Access to Login:"),c.a.createElement("span",{className:"d-ib bd bdc-blue-500"},f.hasOwnAccess?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{className:"p-5 m-0 bgc-blue-500 c-white"},"Allowed"),c.a.createElement(Ce,{className:"p-5 m-0 c-blue-500 cur-p",onClick:function(){return h(!1)}},"Revoke")):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{className:"p-5 m-0 c-blue-500 cur-p",onClick:function(){return h(!0)}},"Allow"),c.a.createElement(Ce,{className:"p-5 m-0 bgc-blue-500 c-white"},"Revoked")))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"House(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(Ce,null,function(){var t="";return z(f.homeIds)&&e.homes.isUpToDate&&!e.homes.isError&&z(e.homes.data)&&e.homes.data.filter(function(e){return f.homeIds.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.number}),t}())),e.homes.isUpToDate&&!e.homes.isError&&z(e.homes.data)&&i&&c.a.createElement(bt.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(we,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.homes.data.map(function(e,t){return c.a.createElement(Ce,{key:"home"+t,className:"cur-p bdB p-3 mB-1"+(f.homeIds.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.homeIds.indexOf(e._id)>=0)E(Object(d.a)({},f,{homeIds:f.homeIds.filter(function(t){return t!==e._id})}));else{var t=f.homeIds;t.push(e._id),E(Object(d.a)({},f,{homeIds:t}))}}},e.number)})))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Ae,{title:"true"===e.match.params.isApprove?"Approve":"SAVE",onPress:function(){if((e.user.client.config.appType!==W||z(f.number))&&z(f.name)&&f.age>0&&z(f.gender)){var t="";f.role.isAdmin&&(t=L),f.role.isManager&&(t+=(t.length>0?",":"")+F),f.role.isGatekeeper&&(t+=(t.length>0?",":"")+M),f.role.isUser&&(t+=(t.length>0?",":"")+P),f.role.isMaintenanceSupervisor&&(t+=(t.length>0?",":"")+V),f.role.isSecuritySupervisor&&(t+=(t.length>0?",":"")+H),f.role.isMaintenanceManager&&(t+=(t.length>0?",":"")+Y),f.role.isSecurityManager&&(t+=(t.length>0?",":"")+G),l(!0);var a={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",relationship:f.relationship,otherRelationship:f.otherRelationship,type:f.type,role:t};e.onSave(a,f.homeIds,e.user,e.users,"true"===e.match.params.isApprove,function(e,t){l(!1),!0===e?(E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",isApproved:!1,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,type:"TENANT",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1,isMaintenanceSupervisor:!1,isSecuritySupervisor:!1,isMaintenanceManager:!1,isSecurityManager:!1}}),_e.success("User saved successfully.")):_e.fail(z(t)?t:"Failed to save user.")})}else _e.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(Se,{visible:n}))))}),ca=Object(o.b)(function(e,t){return{}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){(new ee).get("account/wfausers",function(a,n){J(a)&&J(a.data)?e(a.data):t(J(a)&&z(a.message)?a.message:"Failed to load Members.")})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new ee).delete("account/rejectuser/"+e,function(e,a){J(e)&&J(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(function(){l(!0),e.onLoad(function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},z(i)?i.map(function(t,a){return c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.name)),(t.age>0||z(t.gender))&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.age>0?t.age:"")+(t.age>0&&z(t.gender)?", ":"")+(z(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},"On ",c.a.createElement(Ce,{className:"fw-600"},st(t.createdAt))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ae,{title:"Approve",className:"mR-10",onPress:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){e.history.push("edit-user/"+a+"/true")}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(Ae,{title:"Reject",onPress:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onReject(a,function(e){l(!1),!0===e?(m(i.filter(function(e){return e._id!==a})),_e.success("User rejected successfully.")):_e.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},"No user found."),c.a.createElement(Se,{visible:n})))))}),la=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(ea(t,a,n))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(t){e&&z(e._id)?(new ee).put("home/"+e._id,function(r,c){if(J(r)&&J(r.data)&&r.data.length>0){if(a.isUpToDate&&!a.isError&&z(a.data)){var l=a.data.findIndex(function(e){return e._id===r.data});a.data[l]._id=r.data,a.data[l].number=e.number,t(aa(a.data,!0,!1,""))}n(!0,"")}else n(!1,c)},e):(new ee).post("home/0",function(r,c){J(r)&&J(r.data)&&r.data.length>0?(a.isUpToDate&&!a.isError&&z(a.data)&&(a.data.push({_id:r.data,number:e.number}),t(aa(a.data,!0,!1,""))),n(!0,"")):n(!1,c)},e)}}(t,0,n,r))},onCheckNumberAvail:function(t,a,n){return e(function(e,t,a){return function(e){(new ee).get("home/checkno/"+t,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)})}}(0,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),p=Object(de.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(l(!0),e.onLoad(t,function(e){l(!1),e&&z(e._id)?E(Object(d.a)({},f,{id:e._id,blockId:e._blockId,number:e.number,address:e.address,bedRoom:e.bedRoom,parking:e.parking,description:e.description,members:e.memberIds})):_e.fail("Failed to load house.")},function(e){l(!1),_e.fail(z(e)?e:"Failed to load house.")}))},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Houses",link:"homes"},{title:"Edit House",link:"edit-home/0"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"form-control",value:f.blockId,onChange:function(e){return E(Object(d.a)({},f,{blockId:e.target.value}))}},c.a.createElement("option",{key:"block0",value:""},"Select Block"),e.blocks&&e.blocks.isUpToDate&&!e.blocks.isError&&z(e.blocks.data)&&e.blocks.data.map(function(e,t){return c.a.createElement("option",{key:"block"+t,value:e._id},e.name)}))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"No of bed rooms: ")),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(xe,{isActive:1===f.bedRoom,text:"1",onPress:function(){return E(Object(d.a)({},f,{bedRoom:1}))}}),c.a.createElement(xe,{isActive:2===f.bedRoom,text:"2",onPress:function(){return E(Object(d.a)({},f,{bedRoom:2}))}}),c.a.createElement(xe,{isActive:3===f.bedRoom,text:"3",onPress:function(){return E(Object(d.a)({},f,{bedRoom:3}))}}),c.a.createElement(xe,{isActive:4===f.bedRoom,text:"4",onPress:function(){return E(Object(d.a)({},f,{bedRoom:4}))}}),c.a.createElement(xe,{isActive:5===f.bedRoom,text:"5",onPress:function(){return E(Object(d.a)({},f,{bedRoom:5}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Parking",className:"form-control",value:f.parking,onChange:function(e){return E(Object(d.a)({},f,{parking:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"User(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(Ce,null,function(){var t="";return z(f.members)&&e.users.isUpToDate&&!e.users.isError&&z(e.users.data)&&e.users.data.filter(function(e){return f.members.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.name+(z(e.number)?"("+e.number+")":"")}),t}())),e.users.isUpToDate&&!e.users.isError&&z(e.users.data)&&c.a.createElement(bt.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(we,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.users.data.map(function(e,t){return c.a.createElement(Ce,{key:"user"+t,className:"cur-p bdB p-3 mB-1"+(f.members.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.members.indexOf(e._id)>=0)E(Object(d.a)({},f,{members:f.members.filter(function(t){return t!==e._id})}));else{var t=f.members;t.push(e._id),E(Object(d.a)({},f,{members:t}))}}},e.name+(e.number?"("+e.number+")":""))})))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Ae,{title:"SAVE",onPress:function(){if(z(f.blockId)&&z(f.number)){l(!0);var t={_id:f.id,_blockId:f.blockId,number:f.number,address:f.address,bedRoom:f.bedRoom,parking:f.parking,description:f.description,memberIds:f.members};e.onSave(t,e.user,e.homes,function(e,t){l(!1),!0===e?(E({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),_e.success("House saved successfully.")):_e.fail(z(t)?t:"Failed to save house.")})}else _e.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(Se,{visible:n})))))}),sa=Object(o.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(Qe(0,a,n,r,c))},onEnter:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("visitor/enter/"+e+"/"+t,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("visitor/exit/"+e+"/"+t,function(e,t){J(e)&&J(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(!0),d=Object(de.a)(u,2),p=d[0],f=d[1],E=function(){l(!0),e.onLoad(e.user.client._id,"",p,function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})};Object(r.useEffect)(function(){E()},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Visitors",link:"all-visitors"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(wt,{user:e.user,appUser:e.appUser,data:i,isActive:p,onActiveChange:function(){f(!p),E()},onEnter:function(t){Object(Me.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onEnter(t,e.gateNo,function(a){if(l(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isEntered=!0,n[r].enteredBy=e.user.name,n[r].enteredAt=new Date,m(n),_e.success("Visitor entered successfully.")}else _e.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onExit:function(t){Object(Me.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onExit(t,e.gateNo,function(e){l(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),_e.success("Visitor exit successfully.")):_e.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(Se,{visible:n})))))}),oa=Object(o.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("notifications/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Notification.")})}}(t,a,n))},onPush:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).post("notification/"+e,function(e,r){J(e)&&z(e.data)?n({_id:e.data,title:t.title,body:t.body,createdBy:a.name,createdAt:new Date}):n(null)},t)}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)([]),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,function(e){l(!1),m(e)},function(e){l(!1),_e.fail(e)})},[]);var g=function(){z(p)&&z(b)?Object(Me.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){l(!0);var t={title:p,body:b};e.onPush(e.user.client._id,t,e.user,function(e){l(!1),J(e)?(m([e].concat(Object(Ft.a)(i))),f(""),N(""),_e.success("Notification pushed successfully.")):_e.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):_e.warn("Please fill all the required fields before Push.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Notification",link:"notification"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},z(e.user.client.config.notificationTypes)&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},e.user.client.config.notificationTypes.map(function(e,t){return c.a.createElement(xe,{isActive:e===p,text:e,onPress:function(){return f(e)}})}),c.a.createElement(xe,{isActive:!z(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),text:"Other",onPress:function(){return f("")}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:p,disabled:z(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Body",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){$(e,g)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"mR-10",title:"PUSH",onPress:g}),c.a.createElement(Ae,{title:"CLEAR",onPress:function(){f(""),N("")}})),z(i)?i.map(function(e,t){return c.a.createElement(Te,{key:t,className:"mT-5"+(0===t?"":" bdT")},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.title)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.body)),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"Duplicate",onPress:function(){f(e.title),N(e.body)}})))}):c.a.createElement(Ce,{className:"p-20"},"No notification found."),c.a.createElement(Se,{visible:n})))))}),ia=function(e,t,a,r){return{type:n.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ma=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,data:e.Outings}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(ia([],!1,!1,"")),(new ee).get("outings"+(z(t)?"/"+t:""),function(t,n){J(t)&&J(t.data)?(e(ia(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onReturnBack:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new ee).delete("outing/return/"+e,function(r,c){if(J(r)&&J(r.data)&&!0===r.data){var l=a.data.findIndex(function(t){return t._id===e});a.data[l].isReturned=!0,a.data[l].returnedAt=new Date,t(ia(a.data,!0,!1,"")),n(!0)}else n(!1)})}}(t,0,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.client._id,e.appUser.role===P?e.user.homes[e.appUser.homeIndex]._id:"",function(e){l(!1),e||_e.fail("Failed to load Door Locks.")})},[]);return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Door Locks",link:"outings"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},e.appUser.role===P&&(!J(e.data)||!z(e.data.data.filter(function(e){return!0!==e.isReturned})))&&c.a.createElement(Te,{className:"ta-r"},c.a.createElement(Ae,{title:"Lock The Door",onPress:function(){e.history.push("new-outing")}})),J(e.data)&&e.data.isUpToDate&&!e.data.isError&&z(e.data.data)?e.data.data.map(function(t,a){return c.a.createElement(Te,{key:"o"+t._id,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t._homeId+" by "+t.createdBy+" on "+st(t.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},st(t.fromDate)+" to "+st(t.toDate))),z(t.place)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.place)),z(t.address)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.address)),t.isReturned&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Returned on "+st(t.returnedAt))),e.appUser.role!==P&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"No one in the house. Please take care.")),e.appUser.role===P&&!0!==t.isReturned&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"Open The Door",onPress:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to open the door",message:"Are you sure? You want to open the door?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onReturnBack(a,e.user,e.data,function(e){l(!1),e?_e.success("Successfully opened the door."):_e.fail("Failed to open the door.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},e.data.isUpToDate?e.data.isError?e.data.errorMessage:"No door lock found.":"Loading..."),c.a.createElement(Se,{visible:n})))))}),ua=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){e&&z(e._id)?r(!1):(new ee).post("outing/"+t,function(t,l){console.log("result:",t),J(t)&&z(t.data)?(e._id=t.data,e.createdBy=a.name,n.data.unshift(e),c(ia(n.data,!0,!1,"")),r(!0)):r(!1)},e)}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),o=Object(de.a)(s,2),i=o[0],m=o[1],u=function(){if(J(i.fromDate)&&J(i.toDate)){l(!0);var t={_homeId:e.user.homes[e.appUser.homeIndex].number,fromDate:i.fromDate,toDate:i.toDate,place:i.place,address:i.address,isReturned:!1,createdBy:e.user.name,createdAt:new Date};e.onSave(t,e.user.homes[e.appUser.homeIndex]._id,e.user,e.outings,function(e){l(!1),!0===e?(m({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),_e.success("Outing submitted successfully.")):_e.fail("Failed to submit Outing.")})}else _e.warn("Please fill all the required fields before submit Outing.")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Door Locks",link:"outings"},{title:"New Door Lock",link:"new-outing"}]}),c.a.createElement(Te,{className:"bgc-white p-20",style:{minHeight:450}},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"w-100"},"From Date: "),c.a.createElement(gt.a,{onChange:function(e){m(Object(d.a)({},i,{fromDate:e}))},value:i.fromDate})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"w-100"},"To Date: "),c.a.createElement(gt.a,{onChange:function(e){m(Object(d.a)({},i,{toDate:e}))},value:i.toDate})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:i.place,onChange:function(e){return m(Object(d.a)({},i,{place:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:i.address,onChange:function(e){return m(Object(d.a)({},i,{address:e.target.value}))},onKeyPress:function(e){$(e,u)}})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SUBMIT",onPress:u}))),c.a.createElement(Se,{visible:n}))))}),da=function(e,t,a,r){return{type:n.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},pa=Object(o.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){a(da([],!1,!1,"")),(new ee).get("documents/"+e,function(e,n){J(e)&&J(e.data)?(a(da(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(a){t&&z(t._id)?(new ee).put("document/"+t._id,function(e,n){if(J(e)&&z(e.data)){var l=r.findIndex(function(t){return t._id===e.data._id});r[l]._id=e.data._id,r[l].title=t.title,r[l].description=t.description,r[l].file=t.file,a(da(r,!0,!1,"")),c(!0)}else c(!1)},t):(new ee).post("document/"+e,function(e,l){J(e)&&z(e.data)?(r.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:n.name,createdAt:new Date}),a(da(r,!0,!1,"")),c(!0)):c(!1)},t)}}(t,a,0,r,c,l))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).delete("document/"+e,function(r,c){J(r)&&J(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(da(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))},onUpload:function(t,a){return e(tt(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(de.a)(s,2),i=(o[0],o[1]),m=Object(r.useState)({id:"",homeId:z(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}),u=Object(de.a)(m,2),p=u[0],f=u[1];Object(r.useEffect)(function(){l(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){l(!1),e||_e.fail("Failed to load Documents.")})},[]);var E=function(){f(Object(d.a)({},p,{id:"",homeId:z(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}))};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"My Documents",link:"my-documents"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Title",className:"form-control",value:p.title,onChange:function(e){return f(Object(d.a)({},p,{title:e.target.value}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:p.description,onChange:function(e){return f(Object(d.a)({},p,{description:e.target.value}))}})),z(e.user.homes)&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-10"},"House:"),e.user.homes.map(function(e,t){return c.a.createElement(xe,{isActive:e._id===p.homeId,text:e.number,key:"home"+t,onPress:function(){return f(Object(d.a)({},p,{homeId:e._id}))}})})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Z();r+="."+n[n.length-1],l(!0);var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){l(!1),e?f(Object(d.a)({},p,{fileName:r})):_e.fail(t||"Failed to upload file.")})}}}}),z(p.fileName)&&c.a.createElement(Ce,{className:"mL-15"},p.fileName)),c.a.createElement(Te,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"mR-10",title:"SAVE",onPress:function(){if(z(p.title)&&z(p.fileName)){l(!0);var t={_id:p.id,title:p.title,description:p.description,file:p.fileName,createdBy:e.user.name,createdAt:new Date};e.onSave(p.homeId,t,e.homeIndex,e.user,e.documents.data,function(e){l(!1),!0===e?(i(!1),E(),_e.success("Document saved successfully.")):_e.fail("Failed to save document.")})}else _e.warn("Please fill all the required fields before "+(p.id.length>0?"Update":"Save")+".")}}),c.a.createElement(Ae,{title:"CLEAR",onPress:E})),e.documents.isUpToDate&&!e.documents.isError&&z(e.documents.data)?e.documents.data.map(function(t,a){return c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+lt(t.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.title)),z(t.description)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),z(e.user.homes.filter(function(e){return e._id===t._id}))&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"House: "+e.user.homes.filter(function(e){return e._id===t._id})[0].number)),z(t.file)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:x+t.file},t.file)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(!0),e.onRemove(a,e.documents.data,function(e){l(!1),!0===e?_e.success("Document removed successfully."):_e.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},e.documents.isUpToDate?"No document found.":e.documents.isError?e.documents.errorMessage:"No document found."),c.a.createElement(Se,{visible:n})))))}),fa=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Ea=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ha=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).delete("block/"+e,function(r,c){J(r)&&J(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(fa(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(de.a)(E,2),b=h[0],N=h[1],g=function(){z(i)&&e.blocks.isUpToDate&&!e.blocks.isError&&z(e.blocks.data)?(f(e.blocks.data.filter(function(e){return(e.name+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Blocks",link:"blocks"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-block/0")}},"Add New")),c.a.createElement(Te,{className:"mB-3 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Search Block",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){$(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),z(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Te,{key:"block"+a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Name: "+t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Description: "+(z(t.description)?t.description:""))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"mR-10"},"Houses: "),z(e.homes.data)&&z(e.homes.data.filter(function(e){return e._blockId===t._id}))?e.homes.data.filter(function(e){return e._blockId===t._id}).map(function(e,t){return c.a.createElement(ue.b,{to:"edit-home/"+e._id,className:"mR-10"},e.number)}):c.a.createElement(Ce,null,"No house assigned under this block.")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-block/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){var t=z(e.homes.data)?e.homes.data.filter(function(e){return e._blockId===a}):[];if(z(t)){var n="";t.map(function(e){n+=(n.length>0?", ":"")+e.number}),n=t.length>1?"Houses "+n+" are assigned under this block. Please move these houses to other block and try to delete":"House "+n+" is assigned under this block. Please move this house to other block and try to delete.",_e.fail(n)}else l(!0),e.onRemove(a,e.blocks.data,function(e){l(!1),!0===e?(g(),_e.success("House removed successfully.")):_e.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No block match with your search."),p.length>b&&c.a.createElement(Te,{className:"bdB mT-5"},c.a.createElement(Te,{className:"p-10"},c.a.createElement(Ce,{className:"fw-600 c-blue-500",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Se,{visible:n})))))}),ba=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onSave:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(l){t&&z(t._id)?(new ee).put("block/"+t._id,function(e,a){if(J(e)&&z(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].name=t.name,n[r].description=t.description,l(fa(n,!0,!1,"")),c(!0,"")}else c(!1,a)},t):(new ee).post("block/"+e,function(e,s){J(e)&&J(e.data)&&z(e.data.blockId)?(n.unshift({_id:e.data.blockId,name:t.name,description:t.description,createdBy:a.name}),l(fa(n,!0,!1,"")),z(e.data.homes)&&(e.data.homes.forEach(function(e){e.memberIds=e.members,delete e.members}),r=r.concat(e.data.homes),l(Ea(r,!0,!1,""))),c(!0,"")):c(!1,s)},t)}}(t,a,n,r,c,l))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(0),v=Object(de.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){var t=e.match.params.id;if(t.length>0&&"0"!==t&&e.blocks&&z(e.blocks.data)){var a=e.blocks.data.filter(function(e,a){return e._id===t});z(a)&&(m(a[0]._id),f(a[0].name),N(a[0].description))}},[]);var w=function(){if(z(p)&&(z(i)||y>0))if(z(e.blocks.data)&&z(e.blocks.data.filter(function(e){return e.name===p})))_e.fail("Block with same name already exists. Please give different name.");else{l(!0);var t={_id:i,name:p,description:b};t=Object.assign(t,{homeCount:y}),e.onSave(e.user.client._id,t,e.user,e.blocks&&e.blocks.data?e.blocks.data:[],e.homes&&e.homes.data?e.homes.data:[],function(e,t){l(!1),!0===e?(m(""),f(""),N(""),T(0),_e.success(z(i)?"Block saved successfully.":"Block saved and house(s) created successfully.")):_e.fail(z(t)?t:"Failed to save block.")})}else _e.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Description",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){$(e,w)}})),!z(i)&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"number",placeholder:"Number of houses in this block",className:"form-control",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Ae,{title:"SAVE",onPress:w}))),c.a.createElement(Se,{visible:n}))))}),Na=function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(0),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(""),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)((new Date).getMonth()),h=Object(de.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)((new Date).getFullYear()),v=Object(de.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(de.a)(w,2),k=O[0],j=O[1],B=Object(r.useState)(!1),C=Object(de.a)(B,2),A=C[0],S=C[1],U=Object(r.useState)(!1),I=Object(de.a)(U,2),_=I[0],x=I[1],D=Object(r.useState)([]),R=Object(de.a)(D,2),P=R[0],L=R[1],M=function(){m(0),f(""),N((new Date).getMonth()),T((new Date).getFullYear()),j(""),S(!1),x(!1),L([])};return c.a.createElement(Te,{className:"pL-15 pR-15"},c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Amount",className:"form-control",value:i>0?i+"":"",onChange:function(e){return m(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mT-15"},"Payment for "+y+" "),c.a.createElement(Be,{className:"form-control",value:b,onChange:function(e){return N(e.target.value)}},q.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return c.a.createElement("option",{key:"month"+t,value:e.value},e.title)}))),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-15"},"Apply to House(s): "+(_?"":P.length)),c.a.createElement(Tt,{isActive:_,text:"All Homes",onPress:function(){return x(!_)}})),!_&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},P.map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){L(P.filter(function(t,a){return t._id!==e._id}))}},e.number)})),!_&&c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:k,onChange:function(e){S(!0),j(e.target.value)}})),!_&&A&&z(k)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(k.toLowerCase())>=0&&P.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=P;t.push(e),L(t)}},e.number)})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"mR-10",title:"SAVE",onPress:function(){if(i>0&&(_||P.length>0)){var t=[];P.map(function(e,a){return t.push(e._id)});var a={amount:i,description:p,month:b,year:y,isAllHome:_,homes:t};l(!0),e.onSave(e.user.client._id,a,e.user,function(e,t){l(!1),!0===e?(M(),_e.success("Payment saved successfully.")):_e.fail(t||"Failed to save payment.")})}else _e.warn("Please fill all required fields before Save.")}}),c.a.createElement(Ae,{title:"CLEAR",onPress:M})),c.a.createElement(Se,{visible:n}))},ga=function(e){var t=Object(r.useState)({isLoading:!1,isShowSearch:!0,fromDate:new Date,toDate:new Date,datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}),a=Object(de.a)(t,2),n=a[0],l=a[1];return c.a.createElement(Te,{className:"pL-15 pR-15"},n.isShowSearch?c.a.createElement(Te,null,c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-15"},"House(s): "+(n.homes.length>0?n.homes.length:"All"))),c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},n.homes.map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){l(Object(d.a)({},n,{homes:n.homes.filter(function(t,a){return t._id!==e._id})}))}},e.number)})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:n.searchText,onChange:function(e){return l(Object(d.a)({},n,{showHomes:!0,searchText:e.target.value}))}})),n.showHomes&&z(n.searchText)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(n.searchText.toLowerCase())>=0&&n.homes.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=n.homes;t.push(e),l(Object(d.a)({},n,{homes:t}))}},e.number)})),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"SEARCH",onPress:function(){if(n.fromDate&&n.toDate){var t=[];n.homes.map(function(e,a){return t.push(e._id)});var a={fromDate:n.fromDate,toDate:n.toDate,homes:t};l(Object(d.a)({},n,{isLoading:!0})),e.onSearch(e.user.client._id,a,e.user,function(e){l(Object(d.a)({},n,{isLoading:!1,isShowSearch:!1,data:e}))},function(e){l(Object(d.a)({},n,{isLoading:!1})),_e.fail(e||"Failed to load payment.")})}else _e.warn("Please fill all required fields before Search.")}}))):c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500 fw-600 ta-c",onClick:function(){l(Object(d.a)({},n,{isShowSearch:!0}))}},"Show Search")),c.a.createElement(Te,null,z(n.data)?n.data.map(function(e,t){return c.a.createElement(Te,{key:t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e._homeId+" by "+e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Rs."+e.amount+" for "+q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(z(e.mode)?" "+e.mode:"")+(z(e.type)?" "+e.type:""))),z(e.description)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{title:"Update",onPress:function(){l(Object(d.a)({},n,{isShowUpdateModel:!0,uPaymentId:e._id,uAmount:e.amount,uDescription:e.description}))}})))}):c.a.createElement(Ce,{className:"p-20"},"No payment found.")),c.a.createElement(bt.a,{open:n.isShowUpdateModel,onClose:function(){l(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}))}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15"},c.a.createElement(Te,null,c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{type:"text",placeholder:"Amount",className:"form-control",value:n.uAmount>0?n.uAmount+"":"",onChange:function(e){return l(Object(d.a)({},n,{uAmount:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.uDescription,onChange:function(e){return l(Object(d.a)({},n,{uDescription:e.target.value}))}})),c.a.createElement(Te,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"mR-10",title:"SAVE",onPress:function(){if(z(n.uPaymentId)&&n.uAmount>0){var t={amount:n.uAmount,description:n.uDescription};l(Object(d.a)({},n,{isLoading:!0})),e.onUpdate(n.uPaymentId,t,e.user,function(e,t){if(l(Object(d.a)({},n,{isLoading:!1})),!0===e){var a=n.data,r=a.findIndex(function(e){return e._id===n.uPaymentId});a[r].amount=n.uAmount,a[r].description=n.uDescription,l(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a})),_e.success("Payment updated successfully.")}else _e.fail(t||"Failed to update payment.")})}else _e.warn("Please fill all required fields before update.")}}),c.a.createElement(Ae,{title:"CLEAR",onPress:function(){l(Object(d.a)({},n,{uAmount:0,uDescription:""}))}}))))),c.a.createElement(Se,{visible:n.isLoading}))},va=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,a,n,r){return e(Ge(0,a,n,r))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new ee).post("payment/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to save Payment.")},t)}}(t,a,0,r))},onSearch:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(a){(new ee).post("payments/"+e,function(e,t){J(e)?n(e.data):r(z(t)?t:"Failed to load Payments.")},t)}}(t,a,0,r,c))},onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new ee).put("payment/"+e,function(e,t){J(e)&&J(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to update Payment.")},t)}}(t,a,0,r))}}})(function(e){var t=Object(r.useState)(1),a=Object(de.a)(t,2),n=a[0],l=a[1];return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Payment",link:"payment"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return l(1)}},"NEW"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return l(2)}},"HISTORY")),c.a.createElement(Te,{className:"tab-content p-15"},1===n?c.a.createElement(Na,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSave:e.onSave}):c.a.createElement(ga,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSearch:e.onSearch,onUpdate:e.onUpdate}))))))}),ya=function(e){var t=e.blocks,a=e.data,n="";if(a&&z(a._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var c=t.data.filter(function(e,t){return e._id===a._blockId});c&&c.length>0&&(n=c[0].name)}return a&&z(a._id)?r.createElement(Te,null,r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Block: "+n)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Number: "+a.number)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Address: "+a.address)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"No of bed room(s): "+a.bedRoom)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Parking: "+a.parking)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Description: "+a.description))):r.createElement(Ce,null,"No data found.")},Ta=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Members.")}))},[]),c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Members")),z(n)?n.map(function(t,a){return c.a.createElement(Te,{key:a,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},(z(t.createdBy)?t.createdBy:"")+" on "+lt(t.createdAt))),e.user.client.config.appType==W&&z(t.number)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),z(t.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),z(t.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),(z(t.relationship)||z(t.otherRelationship))&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,z(t.relationship)&&"Other"!=t.relationship?t.relationship:z(t.otherRelationship)?t.otherRelationship:"Other")),e.user.client.config.appType==K&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.type)))}):c.a.createElement(Ce,null,"No data found."))},wa=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Vehicles")),z(n)?n.map(function(e,t){return c.a.createElement(Te,{key:t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.type)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.number)))}):c.a.createElement(Ce,null,"No data found."))},Oa=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Servants.")}))},[]);return c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Servants")),z(n)?n.map(function(e,t){return c.a.createElement(Te,{key:t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+st(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.name)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.age+", "+("M"===e.gender?"Male":"F"===e.gender?"Female":"Other"))),z(e.mobileNo)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.mobileNo)),z(e.emailId)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.emailId)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.takeaways,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Takeaways"))),i===e._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Te,{className:"p-15"},z(p)?p.map(function(e,t){return c.a.createElement(Te,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+st(e.updatedAt))),c.a.createElement(Te,null,c.a.createElement(Ce,null,e.title)),c.a.createElement(Te,null,c.a.createElement(Ce,null,e.description)),e.isExit?c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-green-600"},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+st(e.exitAt))):c.a.createElement(Te,null,c.a.createElement(Ce,{className:"c-red-600"},"Still not exit.")))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(Ce,null,"No data found."))},ka=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))},[]);return c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Tickets")),z(n)?n.map(function(e,t){return c.a.createElement(Te,{key:"tkt"+t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" from "+e._homeId+" on "+st(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.title)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.status)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.comments,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Comments"))),i===e._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},"Comments")),c.a.createElement(Te,{className:"p-15"},z(p)?p.map(function(e,t){return c.a.createElement(Te,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,null,c.a.createElement(Ce,{className:"fw-600"},e.createdByName+" on "+st(e.updatedAt))),c.a.createElement(Te,null,c.a.createElement(Ce,null,e.comment)))}):c.a.createElement(Ce,{className:"p-20"},"No comment found."))))}):c.a.createElement(Ce,null,"No data found."))},ja=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!0),o=Object(de.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(function(){u()},[]);var u=function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,i,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Visitors.")}))};return c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Visitors")),c.a.createElement(wt,{data:n,isActive:i,user:e.user,appUser:e.appUser,onActiveChange:function(){m(!i),u()}}))},Ba=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)([]),d=Object(de.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Payments.")}))},[]);return c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Payments")),z(n)?n.map(function(e,t){return c.a.createElement(Te,{key:t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Rs. "+e.amount+" for "+q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(z(e.mode)?" "+e.mode:"")+(z(e.type)?" "+e.type:""))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Amount Paid Rs. "+function(e){var t=0;return z(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,a){return t+=e.amount}),t}(e.transactions))),z(e.description)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.transactions,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Transactions"))),i===e._id&&c.a.createElement(Te,{className:"mT-5 mB-5"},c.a.createElement(Te,{className:"bdB"},c.a.createElement(Ce,{className:"fw-600"},"Transactions")),c.a.createElement(Te,{className:"mT-3"},z(p)?p.map(function(e,t){return c.a.createElement(Te,{key:"tktcmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Te,{className:"fw-600"},c.a.createElement(Ce,null,e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,null,c.a.createElement(Ce,null,"Ref Id: "+e.txnRef)),c.a.createElement(Te,null,c.a.createElement(Ce,null,"Txn Id: "+e.txnId)),c.a.createElement(Te,null,c.a.createElement(Ce,null,"Amount: "+e.amount)),c.a.createElement(Te,null,c.a.createElement(Ce,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),z(e.reason)&&c.a.createElement(Te,null,c.a.createElement(Ce,null,"Reason: "+e.reason)))}):c.a.createElement(Ce,{className:"p-20"},"No transaction found."))))}):c.a.createElement(Ce,null,"No data found."))},Ca=function(e){var t=Object(r.useState)([]),a=Object(de.a)(t,2),n=a[0],l=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),l(t)},function(t){e.onToggleLoading(!1),_e.fail(z(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(Te,null,c.a.createElement(Te,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Documents")),z(n)?n.map(function(e,t){return c.a.createElement(Te,{key:t,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+lt(e.createdAt))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.title)),z(e.description)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),z(e.file)&&c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:x+e.file},e.file)))}):c.a.createElement(Ce,null,"No data found."))},Aa=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(ea(t,a,n))},onLoadMembers:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("members/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadVehicles:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("vehicles/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadServants:function(t,a,n){return e(Pt(t,a,n))},onLoadTickets:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("tickets/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Tickets.")})}}(t,a,n))},onLoadVisitors:function(t,a,n,r){return e(Qe(0,t,a,n,r))},onLoadPayments:function(t,a,n){return e(Ge(0,t,a,n))},onLoadDocuments:function(t,a,n){return e(function(e,t,a){return function(n){(new ee).get("documents/"+e,function(e,n){J(e)&&J(e.data)?t(e.data):a(e&&z(e.message)?e.message:"Failed to load Documents.")})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object(de.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(1),d=Object(de.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)({}),h=Object(de.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){var t=e.match.params.id;m(t),t.length>0&&(l(!0),e.onLoad(t,function(e){l(!1),e&&z(e._id)?N(e):_e.fail("Failed to load house.")},function(e){l(!1),_e.fail(z(e)?e:"Failed to load house.")}))},[]);var g=function(e){l(e)};return c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Houses",link:"homes"},{title:"View House",link:"view-home"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===p?" active":""),onClick:function(){return f(1)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-a700 ti-info-alt"}))),c.a.createElement("span",{className:"tab"+(2===p?" active":""),onClick:function(){return f(2)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-brown-500 fa fa-users"}))),c.a.createElement("span",{className:"tab"+(3===p?" active":""),onClick:function(){return f(3)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-car"}))),c.a.createElement("span",{className:"tab"+(4===p?" active":""),onClick:function(){return f(4)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-500 fa fa-female"}))),c.a.createElement("span",{className:"tab"+(5===p?" active":""),onClick:function(){return f(5)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-orange-500 ti-headphone-alt"}))),c.a.createElement("span",{className:"tab"+(6===p?" active":""),onClick:function(){return f(6)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-pink-500 fa fa-id-card-o"}))),e.user.client.config.hasPayment&&c.a.createElement("span",{className:"tab"+(7===p?" active":""),onClick:function(){return f(7)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-credit-card"}))),c.a.createElement("span",{className:"tab"+(8===p?" active":""),onClick:function(){return f(8)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-blue-500 fa fa-file-text"})))),c.a.createElement(Te,{className:"p-15"},1===p?c.a.createElement(ya,{blocks:e.blocks,data:b}):2===p?c.a.createElement(Ta,{user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadMembers}):3===p?c.a.createElement(wa,{homeId:i,onToggleLoading:g,onLoad:e.onLoadVehicles}):4===p?c.a.createElement(Oa,{homeId:i,onToggleLoading:g,onLoad:e.onLoadServants}):5===p?c.a.createElement(ka,{homeId:i,onToggleLoading:g,onLoad:e.onLoadTickets}):6===p?c.a.createElement(ja,{appUser:e.appUser,user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadVisitors}):7===p?c.a.createElement(Ba,{homeId:i,onToggleLoading:g,onLoad:e.onLoadPayments}):c.a.createElement(Ca,{homeId:i,onToggleLoading:g,onLoad:e.onLoadDocuments}))),c.a.createElement(Se,{visible:n}))))}),Sa=function(e,t,a,r){return{type:n.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}};function Ua(e,t){try{return t>0?100*e/t:0}catch(a){return Q(a,"calc.percentage"),0}}var Ia=function(e){var t=Object(r.useState)({isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),a=Object(de.a)(t,2),n=a[0],l=a[1],s=function(){if(z(n.topic)&&z(n.description)&&J(n.fromDate)&&J(n.toDate)&&z(n.pollOption.filter(function(e){return z(e)}))){l(Object(d.a)({},n,{isLoading:!0}));var t={_id:n.id,topic:n.topic,description:n.description,isAllowMultiple:n.isAllowMultiple,isOneVotePerFlat:n.isOneVotePerFlat,isAnonymous:n.isAnonymous,fromDate:n.fromDate,toDate:n.toDate,options:n.pollOption.filter(function(e){return z(e)})};e.onSave(e.user.client._id,t,e.polls.data,e.user,function(e){l(Object(d.a)({},n,{isLoading:!1})),!0===e?(l(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})),_e.success("Poll saved successfully.")):_e.fail("Failed to save pol.")})}else _e.warn("Please fill all the required fields before "+(n.id.length>0?"Update":"Save")+".")};return c.a.createElement(Te,null,!1===n.isEdit&&c.a.createElement(Te,{className:"bdB mT-5 pB-5"},c.a.createElement(Ae,{title:"ADD NEW",onPress:function(){l(Object(d.a)({},n,{isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}))}})),!0===n.isEdit&&0===n.id.length?c.a.createElement(Te,{key:"p0",className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return l(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return l(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return l(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return l(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return l(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),z(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(Te,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,l(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],l(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"No option found.")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!z(n.pollOption.filter(function(e){return!z(e)}))){var e=n.pollOption;e.push(""),l(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(Ce,null,"Add More +"))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:s},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){l(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):[],J(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&z(e.polls.data)?e.polls.data.map(function(t,a){return!0===n.isEdit&&n.id===t._id?c.a.createElement(Te,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return l(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return l(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(gt.a,{onChange:function(e){l(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return l(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return l(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return l(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),z(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(Te,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,l(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],l(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"No option found.")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!z(n.pollOption.filter(function(e){return!z(e)}))){var e=n.pollOption;e.push(""),l(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(Ce,null,"Add More +"))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:s},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){l(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Te,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.topic)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,lt(t.fromDate)+" to "+lt(t.toDate))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAllowMultiple?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isAllowMultiple?"c-white":""},"Allow Multiple Votes"))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isOneVotePerFlat?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isOneVotePerFlat?"c-white":""},"One Vote per Flat"))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAnonymous?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isAnonymous?"c-white":""},"Anonymous Voting"))),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),z(t.options)?t.options.map(function(e,t){return c.a.createElement(Te,{key:"po"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{key:"pot"+t},e))}):c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"p-10"},"No option found.")),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},t.fromDate>new Date&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){l(Object(d.a)({},n,{isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:z(t.options)?t.options:[]}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Me.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){l(Object(d.a)({},n,{isLoading:!0})),e.onRemove(a,e.polls.data,e.user._id,function(e){l(Object(d.a)({},n,{isLoading:!1})),!0===e?_e.success("Poll removed successfully."):_e.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement(Ce,{className:"cur-p c-blue-500",onClick:function(){l(Object(d.a)({},n,{showVotePoll:t}))}},"View Votes")))}):c.a.createElement(Ce,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No poll found.":"Loading..."),c.a.createElement(bt.a,{open:J(n.showVotePoll)&&n.showVotePoll._id.length>0,onClose:function(){return l(Object(d.a)({},n,{showVotePoll:{_id:""}}))}},c.a.createElement(Te,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(Te,null,function(){if(J(n.showVotePoll)&&n.showVotePoll._id.length>0){var e=[];return n.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),c.a.createElement(Te,{className:"p-15"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},n.showVotePoll.topic)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,n.showVotePoll.description)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Votes: "+n.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return c.a.createElement(Te,{key:"pvo"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.votes+" ("+Ua(e.votes,n.showVotePoll.votes.length)+"%) - "+e.option))}))}return""}()))),c.a.createElement(Se,{visible:n.isLoading}))},_a=function(e){var t=new Date,a=Object(r.useState)(!1),n=Object(de.a)(a,2),l=n[0],s=n[1],o=Object(r.useState)(""),i=Object(de.a)(o,2),m=i[0],u=i[1],d=Object(r.useState)([]),p=Object(de.a)(d,2),f=p[0],E=p[1],h=Object(r.useState)(new Date(t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear())),b=Object(de.a)(h,2),N=b[0];b[1];return c.a.createElement(Te,null,J(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&z(e.polls.data.filter(function(e){return z(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}))?e.polls.data.filter(function(e){return z(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}).map(function(t,a){return c.a.createElement(Te,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.topic)),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),(!0!==t.isOneVotePerFlat||!z(t.votes)||!z(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&t.options.map(function(a,n){return c.a.createElement(Te,{key:"popt"+n,className:"mT-1 mB-3 p-2"},c.a.createElement(Tt,{isActive:m===t._id&&z(f.filter(function(e){return e.option===n})),text:a,onPress:function(){return function(t,a){if(m===t._id)if(z(f.filter(function(e){return e.option===a})))E(f.filter(function(e){return e.option!==a}));else{var n=[];t.isAllowMultiple&&(n=f),n.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),E(n)}else{var r=[];r.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),u(t._id),E(r)}}(t,n)}}))}),(!0!==t.isOneVotePerFlat||!z(t.votes)||!z(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&c.a.createElement(Te,{className:"mT-5"},c.a.createElement(Ae,{title:"Vote",onPress:function(){return a=t._id,void(m===a&&z(f)?(s(!0),e.onVote(a,f,e.polls,e.user,e.appUser,function(e){s(!1),!0===e?(u(""),E([]),_e.success("Your vote saved successfully.")):_e.fail("Failed to save your vote.")})):_e.warn("Please select any option to vote."));var a}})),c.a.createElement(Te,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Your Votes:")),z(t.options)&&function(e){var t=[];return e.options.map(function(a,n){return t.push({option:a,votes:e.votes.filter(function(e){return e.option===n}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,a){return c.a.createElement(Te,{key:"pvo"+a,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.votes+" ("+Ua(t.votes,e.votes.length)+"%) - "+t.option))})}(t))}):c.a.createElement(Ce,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No active poll found.":"Loading..."),c.a.createElement(Se,{visible:l}))},xa=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,a){return e(We(t,a))},onLoadPoll:function(t,a,n){return e(function(e,t,a){return function(t){t(Sa([],!1,!1,"")),(new ee).get("polls/"+e,function(e,n){J(e)&&J(e.data)?(t(Sa(e.data,!0,!1,"")),a(!0)):a(!1)})}}(t,0,n))},onSavePoll:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){t&&z(t._id)?(new ee).put("poll/"+t._id,function(e,n){if(J(e)&&z(e.data)){var l=a.findIndex(function(t){return t._id===e.data});a[l]._id=e.data,a[l].topic=t.topic,a[l].description=t.description,a[l].isAllowMultiple=t.isAllowMultiple,a[l].isOneVotePerFlat=t.isOneVotePerFlat,a[l].isAnonymous=t.isAnonymous,a[l].fromDate=t.fromDate,a[l].toDate=t.toDate,a[l].options=t.options,c(Sa(J(a)?a:[],!0,!1,"")),r(!0)}else r(!1)},t):(new ee).post("poll/"+e,function(e,l){J(e)&&z(e.data)?(t._id=e.data,t.createdBy=n.name,a.unshift(t),c(Sa(J(a)?a:[],!0,!1,"")),r(!0)):r(!1)},t)}}(t,a,n,r,c))},onRemovePoll:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new ee).delete("poll/"+e,function(a,c){J(a)&&J(a.data)&&!0===a.data?(t=t.filter(function(t,a){return t._id!==e}),r(Sa(J(t)?t:[],!0,!1,"")),n(!0)):n(!1)},{Id:e,UserId:a})}}(t,a,n,r))},onVote:function(t,a,n,r,c,l){return e(function(e,t,a,n,r,c){return function(n){(new ee).post("poll/vote/"+e,function(t,r){if(J(t)&&z(t.data)){var l=a.data.findIndex(function(t){return t._id===e});if(a.data[l].votes=t.data,n(Sa(a.data,!0,!1,"")),a.isUpToDate&&!a.isError&&z(a.data)){var s=a.data,o=s.findIndex(function(t){return t._id===e});s[o].votes=t.data,n(Sa(s,!0,!1,""))}c(!0)}else c(!1)},{votes:t})}}(t,a,n,0,0,l))}}})(function(e){var t=Object(r.useState)(!J(e.user)||e.appUser.role!==L&&e.appUser.role!==F?2:1),a=Object(de.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(J(e.user)&&(e.appUser.role===L||e.appUser.role===F||e.appUser.role===P&&e.appUser.homeIndex>=0)),o=Object(de.a)(s,2),i=o[0];o[1];return Object(r.useEffect)(function(){e.onLoadAds(e.user.client._id,function(e){e||_e.fail("Failed to load Ads.")}),i&&e.onLoadPoll(e.user.client._id,e.appUser.role,function(e){e||_e.fail("Failed to load Poll.")})},[]),c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Te,{className:"row gap-20 masonry pos-r"},c.a.createElement(Te,{className:"masonry-item col-12"},c.a.createElement(St,{data:[{title:"Notice",link:"notice"}]}),c.a.createElement(Te,{className:"bgc-white p-20"},c.a.createElement(Te,{className:"tab-bar"},i&&c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return l(1)}},"POLL"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return l(2)}},"ADS")),c.a.createElement(Te,{className:"p-15"},1===n?e.appUser.role===L||e.appUser.role===F?c.a.createElement(Ia,{appUser:e.appUser,user:e.user,polls:e.polls,onSave:e.onSavePoll,onRemove:e.onRemovePoll}):c.a.createElement(_a,{appUser:e.appUser,user:e.user,polls:e.polls,onVote:e.onVote}):2===n?c.a.createElement(it,{data:e.ads.isUpToDate?e.ads.data:[],message:e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No data found.":"Loading..."}):c.a.createElement(it,{data:3===n?e.remainders:e.complaints,message:"No data found."}))))))}),Da=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(function(e){return r.createElement(Te,{id:"mainContent"},r.createElement(Te,{className:"row gap-20 masonry pos-r"},r.createElement(Te,{className:"masonry-item col-12"},r.createElement(St,{data:[{title:"Info",link:"info"}]}),r.createElement(Te,{className:"bgc-white p-20"},r.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"c-blue-500 fw-600 ta-c"},e.user.client.name)),r.createElement(Te,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"c-blue-500 fw-600 ta-c"},e.user.client.description)),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"House users")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Maintenance Admin Payment")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Receive real-time notifications")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Visitor management")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Lodge any complaint related to your apartment and track")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Admin Users")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Create polls and gather the opinion of all Apartment residents")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"All details of your flat, staff who work in your flat, visitors coming to your flat")),r.createElement(Te,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Accounts  and much more..."))))))}),Ra=function(){return r.createElement(Te,{id:"mainContent"},r.createElement(Te,{className:"row gap-20 masonry pos-r"},r.createElement(Te,{className:"masonry-item col-12"},r.createElement(Te,{className:"bgc-white p-20"},r.createElement(Ce,null,"Page not found.")))))},Pa=a(10),La=function(){Pa(".sidebar .sidebar-menu li a").on("click",function(){var e=Pa(this);e.parent().hasClass("open")?e.parent().children(".dropdown-menu").slideUp(200,function(){e.parent().removeClass("open")}):(e.parent().parent().children("li.open").children(".dropdown-menu").slideUp(200),e.parent().parent().children("li.open").children("a").removeClass("open"),e.parent().parent().children("li.open").removeClass("open"),e.parent().children(".dropdown-menu").slideDown(200,function(){e.parent().addClass("open")}))}),Pa(".sidebar").find(".sidebar-link").each(function(e,t){Pa(t).removeClass("active")}).filter(function(){var e=Pa(this).attr("href");return("/"===e[0]?e.substr(1):e)===window.location.pathname.substr(1)}).addClass("active"),Pa(".sidebar-toggle").on("click",function(e){Pa(".app").toggleClass("is-collapsed"),e.preventDefault()}),Pa("#sidebar-toggle").click(function(e){e.preventDefault(),setTimeout(function(){window.dispatchEvent(window.EVENT)},300)})},Ma=a(80),Fa=function(){var e=Pa(".scrollable");e.length>0&&e.each(function(e,t){new Ma.a(t)})},Va=(a(153),function(){Pa('[data-toggle="popover"]').popover(),Pa('[data-toggle="tooltip"]').tooltip()}),Ha=Object(o.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new ee).get("account/profile",function(a,n){if(J(a)&&J(a.data)&&z(a.data._id)){t(le(a.data)),t(ce(z(a.data.homes)?0:-1));var r=a.data.role.split(",");z(r)&&t(re(r[0])),(r.indexOf(L)>=0||r.indexOf(F)>=0)&&((new ee).get("members",function(e,a){J(e)&&z(e.data)&&t(se(e.data,!0,!1,""))}),(new ee).get("blocks/"+a.data.client._id,function(e,a){J(e)&&z(e.data)&&t(ie(e.data,!0,!1,""))})),(r.indexOf(L)>=0||r.indexOf(F)>=0||r.indexOf(M)>=0)&&(new ee).get("homes/"+a.data.client._id,function(e,a){J(e)&&z(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(oe(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,n)})}}(t))},onHomeChange:function(t,a){return e(function(e,t){return function(a){a(ce(e)),t(!0)}}(t,a))},onLogout:function(t){return e(te(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],l=a[1];Object(r.useEffect)(function(){J(e.user)&&z(e.user._id)||(l(!0),e.getProfile(function(e,t){l(!1),!0!==e&&_e.fail("Failed to load Profile: "+t)}))},[]),Object(r.useEffect)(function(){La(),Fa(),Va()});var s=function(){return e.appUser.role===P},o=function(){return e.appUser.role===L},i=function(){return e.appUser.role===F},m=function(){return e.appUser.role===M},u=function(){return e.appUser.role===H},d=function(){return e.appUser.role===G};return n?c.a.createElement(Se,{visible:n,text:"Loading..."}):c.a.createElement(Te,null,c.a.createElement(He,{appUser:e.appUser,user:e.user}),c.a.createElement(Te,{className:"page-container"},c.a.createElement(Fe,{appUser:e.appUser,user:e.user,onHomeChange:e.onHomeChange,onLogout:e.onLogout}),c.a.createElement("main",{className:"main-content bgc-grey-100"},z(e.appUser.role)&&!s()||z(e.user.homes)?c.a.createElement(Le.c,null,c.a.createElement(Le.a,{path:"/",exact:!0,component:jt}),s()&&c.a.createElement(Le.a,{path:"/members",exact:!0,component:Ut}),s()&&c.a.createElement(Le.a,{path:"/new-member",exact:!0,component:It}),s()&&c.a.createElement(Le.a,{path:"/vehicles",exact:!0,component:Dt}),s()&&c.a.createElement(Le.a,{path:"/new-vehicle",exact:!0,component:Rt}),s()&&c.a.createElement(Le.a,{path:"/servants",exact:!0,component:Vt}),(o()||i()||m()||u()||d())&&c.a.createElement(Le.a,{path:"/all-servants",exact:!0,component:Ht}),s()&&c.a.createElement(Le.a,{path:"/new-servant",exact:!0,component:Gt}),(s()||o()||i()||e.appUser.role===V||e.appUser.role===Y)&&c.a.createElement(Le.a,{path:"/tickets",exact:!0,component:Kt}),s()&&c.a.createElement(Le.a,{path:"/new-ticket",exact:!0,component:Wt}),s()&&c.a.createElement(Le.a,{path:"/visitors",exact:!0,component:qt}),(s()||o()||i()||m()||u()||d())&&c.a.createElement(Le.a,{path:"/outings",exact:!0,component:ma}),s()&&c.a.createElement(Le.a,{path:"/new-outing",exact:!0,component:ua}),(o()||i())&&c.a.createElement(Le.a,{path:"/ads",exact:!0,component:Zt}),(o()||i())&&c.a.createElement(Le.a,{path:"/new-ad",exact:!0,component:Qt}),(o()||i())&&c.a.createElement(Le.a,{path:"/notification",exact:!0,component:oa}),o()&&c.a.createElement(Le.a,{path:"/users",exact:!0,component:$t}),o()&&c.a.createElement(Le.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:ra}),o()&&c.a.createElement(Le.a,{path:"/approve-users",exact:!0,component:ca}),o()&&c.a.createElement(Le.a,{path:"/homes",exact:!0,component:na}),o()&&c.a.createElement(Le.a,{path:"/view-home/:id",exact:!0,component:Aa}),o()&&c.a.createElement(Le.a,{path:"/edit-home/:id",exact:!0,component:la}),o()&&c.a.createElement(Le.a,{path:"/blocks",exact:!0,component:ha}),o()&&c.a.createElement(Le.a,{path:"/edit-block/:id",exact:!0,component:ba}),(o()||i()&&e.user.client.config.hasPayment)&&c.a.createElement(Le.a,{path:"/payment",exact:!0,component:va}),(o()||i()||m()||u()||d())&&c.a.createElement(Le.a,{path:"/all-visitors",exact:!0,component:sa}),(o()||i()||m()||u()||d())&&c.a.createElement(Le.a,{path:"/all-takeways",exact:!0,component:Yt}),c.a.createElement(Le.a,{path:"/notice",exact:!0,component:xa}),c.a.createElement(Le.a,{path:"/my-profile",exact:!0,component:Jt}),e.user.role.indexOf(",")>0&&c.a.createElement(Le.a,{path:"/my-role",exact:!0,component:Xt}),c.a.createElement(Le.a,{path:"/my-documents",exact:!0,component:pa}),c.a.createElement(Le.a,{path:"/change-password",exact:!0,component:zt}),c.a.createElement(Le.a,{path:"/info",exact:!0,component:Da}),c.a.createElement(Le.a,{component:Ra})):c.a.createElement(Te,{id:"mainContent"},c.a.createElement(Ce,{className:"m-20"},"You are not authorized to view this content. Please contact administrator/manager."))),c.a.createElement(Ye,null)))}),Ya=Object(o.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(ne(e))}}(t))}}})(function(e){return Object(r.useEffect)(function(){z(sessionStorage.getItem("auth_token"))&&e.setLogin(!0)},[]),e.appUser.isLoggedIn?c.a.createElement(ue.a,null,c.a.createElement(Ha,null)):c.a.createElement(Pe,null)}),Ga=a(81);a(158),a(156),function(){var e=document.createEvent("UIEvents");window.EVENT=e,e.initUIEvent("resize",!0,!1,window,0),window.addEventListener("load",function(){window.dispatchEvent(e)}),Pa("a").filter('[href^="http"], [href^="//"]').not('[href*="'.concat(window.location.host,'"]')).attr("rel","noopener noreferrer").attr("target","_blank"),document.addEventListener("click",function(){window.dispatchEvent(window.EVENT)})}(),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),s.a.render(c.a.createElement(function(){return Object(r.useEffect)(function(){!function(){try{var e=Ga.initializeApp({apiKey:"AIzaSyCrGumtbn2McvNXzZdhShhLaW0QsIFZxOk",authDomain:"nest-df0a7.firebaseapp.com",databaseURL:"https://nest-df0a7.firebaseio.com",projectId:"nest-df0a7",storageBucket:"nest-df0a7.appspot.com",messagingSenderId:"422026408390",appId:"1:422026408390:web:cf0e6a945e7f1ec0d602c7"}).messaging();e.usePublicVapidKey("BExnmgKfYLBd44lIqI5xRAD55I5Qhsaa7sI_wJ19zcIuq05y2Z1AtuaNBChU--UhjFxpA2XLR2lI02otUje4Rkk"),e.requestPermission().then(Object(U.a)(S.a.mark(function t(){var a;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:a=t.sent,localStorage.setItem("fcm_token",a);case 4:case"end":return t.stop()}},t)}))).catch(function(e){console.log("Unable to get permission to notify.",e)})}catch(t){console.log("FCM ERROR: ",t)}}()},[]),c.a.createElement(o.a,{store:C},c.a.createElement(Ya,null),c.a.createElement(i.ToastsContainer,{store:i.ToastsStore,position:i.ToastsContainerPosition.TOP_RIGHT}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(157)}},[[85,1,2]]]);
//# sourceMappingURL=main.a6d66145.chunk.js.map