(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),r=n(19),i=n.n(r),l=n(2),c=n(4),u=n(6),m=n(5),d=n(7),p=n(9),h=n(21),f=n(25),g=n(60),y=n(1);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(a||(a={}));var E=function(e,t){return Object(y.a)({},e,{isLoggedIn:t})},b=function(e,t){return Object(y.a)({},e,{role:t})},v=function(e,t){return Object(y.a)({},e,{homeIndex:t})},O=function(e,t){return Object(y.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},S=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},A=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},x=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},C=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},I=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},U=function(e,t){return t},T=Object(f.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_LOGIN_STATUS:return E(e,t.payload);case a.SET_ROLE:return b(e,t.payload);case a.SET_HOME_INDEX:return v(e,t.payload);case a.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USER:return O(e,t.payload);case a.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_ADS:return S(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_POLLS:return w(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_OUTINGS:return j(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_DOCUMENTS:return k(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERS:return A(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_HOMES:return N(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERHOMES:return x(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_TICKETS:return C(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_BLOCKS:return I(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_GATE_NO:return U(e,t.payload)}return e}}),L=Object(f.e)(T,Object(f.d)(Object(f.a)(g.a))),D=n(29),R=n.n(D),_=n(39),P="https://nestadmin.herokuapp.com/",M="DD/MMM/YYYY",B="DD/MMM/YYYY hh:mm A",F=P+"image/",H=P+"file/",W="#0078d7",V="#0067b9",G="#FFFFFF",Y="#FF0000",K="#008000",q="#cce1f1",z="#e1e1e1",Z="#000000",J="#FFFFFF",X={USER:"USER",ADMIN:"ADMIN",GATEKEEPER:"GATEKEEPER",MANAGER:"MANAGER"},$=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function Q(e){return ee(e)&&e.length>0}function ee(e){return null!==e&&void 0!==e}function te(e){try{return ee(e)?JSON.stringify(e):""}catch(t){return ae(t,"JSON2String"),""}}function ne(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function ae(e,t){console.log("Error:"+t+":"+e)}var oe=function e(){var t=this;Object(l.a)(this,e),this.url="https://nestadmin.herokuapp.com/",this.get=function(e,n){t.fetch(e,"GET",n)},this.post=function(e,n,a){t.fetch(e,"POST",n,a)},this.delete=function(e,n,a){t.fetch(e,"DELETE",n,a)},this.patch=function(e,n,a){t.fetch(e,"PATCH",n,a)},this.put=function(e,n,a){t.fetch(e,"PUT",n,a)},this.upload=function(){var e=Object(_.a)(R.a.mark(function e(n,a,o){var s,r,i,l;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return s=e.sent,e.next=5,t.getAS("client_id");case 5:return r=e.sent,e.next=8,t.getAS("user_id");case 8:i=e.sent,(l=new FormData).append("file",o.file,o.name),l.append("name",o.name),fetch(t.url+n,{method:"POST",headers:{Accept:"application/json","x-access-token":Q(s)?"Bearer "+s:"","client-id":Q(r)?""+r:"","user-id":Q(i)?""+i:""},body:l}).then(function(e){return e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(a,e,"Some problem occurs. Please contact administrator."):t.callback(a,null,e.message):t.callback(a,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(a,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(_.a)(R.a.mark(function e(t){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(_.a)(R.a.mark(function e(n,a,o,s){var r,i,l;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return r=e.sent,e.next=5,t.getAS("client_id");case 5:return i=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,fetch(t.url+n,{method:a,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":Q(r)?"Bearer "+r:"","client-id":Q(i)?""+i:"","user-id":Q(l)?""+l:""},body:ee(s)?te(s):null}).then(function(e){return e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(o,e,"Some problem occurs. Please contact administrator."):t.callback(o,null,e.message):t.callback(o,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(o,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,n,a,o){return e.apply(this,arguments)}}(),this.callback=function(e,t,n){ee(e)&&"function"==typeof e&&e(t,n)}},se=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(ie(!1)),t(ce(-1)),t(he()),e(!0)}catch(n){e(!1)}}},re=function(e){return{type:a.SET_GATE_NO,payload:e}},ie=function(e){return{type:a.SET_LOGIN_STATUS,payload:e}},le=function(e){return{type:a.SET_ROLE,payload:e}},ce=function(e){return{type:a.SET_HOME_INDEX,payload:e}},ue=function(e){return{type:a.LOAD_USER,payload:e}},me=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},de=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},pe=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},he=function(){return{type:a.RESET}},fe=n(20),ge=n(3),ye=n(23),Ee=n(24);function be(){var e=Object(ye.a)(["\n"]);return be=function(){return e},e}function ve(){var e=Object(ye.a)(["\n"]);return ve=function(){return e},e}function Oe(){var e=Object(ye.a)(["\n"]);return Oe=function(){return e},e}function Se(){var e=Object(ye.a)(["\n"]);return Se=function(){return e},e}function we(){var e=Object(ye.a)(["\n"]);return we=function(){return e},e}function je(){var e=Object(ye.a)(["\n"]);return je=function(){return e},e}function ke(){var e=Object(ye.a)(["\noverflow: auto;\n"]);return ke=function(){return e},e}function Ae(){var e=Object(ye.a)(["\n"]);return Ae=function(){return e},e}var Ne=Ee.a.div(Ae()),xe=Ee.a.div(ke()),Ce=Ee.a.img(je()),Ie=Ee.a.input(we()),Ue=Ee.a.textarea(Se()),Te=Ee.a.select(Oe()),Le=Ee.a.label(ve()),De=Ee.a.span(be()),Re=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("input",{type:"button",className:"btn",value:this.props.title,onClick:function(){return e.props.onPress()},style:Object(y.a)({},_e.btn,this.props.style)})}}]),t}(o.Component);Re.defaultProps={title:"",onPress:function(){},style:{}};var _e={btn:{backgroundColor:W,borderColor:W,color:J,cursor:"pointer"}},Pe=function e(){Object(l.a)(this,e)};Pe.logo=F+"logo.png",Pe.logoInv=F+"logo-inv.png",Pe.icon=F+"icon.png",Pe.logout=F+"logout.png",Pe.homeIcon=F+"home-icon.png",Pe.homeIconInv=F+"home-icon-inv.png",Pe.notification=F+"notification.png",Pe.notificationInv=F+"notification-inv.png",Pe.setting=F+"setting.png",Pe.settingInv=F+"setting-inv.png",Pe.info=F+"info.png",Pe.infoInv=F+"info-inv.png",Pe.workInProgress=F+"work-in-progress.png",Pe.members=F+"members.png",Pe.membersInv=F+"members-inv.png",Pe.vehicle=F+"vehicle.png",Pe.vehicleInv=F+"vehicle-inv.png",Pe.username=F+"username.png",Pe.password=F+"password.png",Pe.support=F+"support.png",Pe.supportInv=F+"support-inv.png",Pe.visitors=F+"visitors.png",Pe.visitorsInv=F+"visitors-inv.png",Pe.servent=F+"servent.png",Pe.serventInv=F+"servent-inv.png",Pe.add=F+"add.png",Pe.edit=F+"edit.png",Pe.delete=F+"delete.png",Pe.close=F+"close.png",Pe.tick=F+"tick.png",Pe.cancel=F+"cancel.png",Pe.mobile=F+"mobile.png",Pe.email=F+"email.png",Pe.addvertise=F+"addvertise.png",Pe.reminder=F+"reminder.png",Pe.users=F+"users.png",Pe.homes=F+"homes.png",Pe.blocks=F+"blocks.png",Pe.search=F+"search.png",Pe.datePicker=F+"date-picker.png",Pe.money=F+"money.png",Pe.moneyInv=F+"money-inv.png",Pe.view=F+"view.png",Pe.document=F+"document.png",Pe.documentInv=F+"document-inv.png",Pe.menu=F+"menu.png",Pe.loading=F+"loading.gif";var Me=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.visible&&o.createElement(Ne,null,o.createElement(Ne,{className:"loader-overlay"}),o.createElement(Ne,{className:"loader"},o.createElement(Ce,{className:"",src:Pe.loading,style:{width:"50px",height:"50px"}}),o.createElement(Ne,{style:{color:V,fontWeight:"bold",marginTop:5}},this.props.text)))}}]),t}(o.Component);Me.defaultProps={visible:!1,text:"Loading..."};var Be={},Fe=function e(){Object(l.a)(this,e)};Fe.success=function(e){h.ToastsStore.success(e)},Fe.fail=function(e){h.ToastsStore.error(e)},Fe.warn=function(e){h.ToastsStore.warning(e)},Fe.info=function(e){h.ToastsStore.info(e)},Fe.show=function(e,t,n){h.ToastsStore.info(e)};var He=Fe,We=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{style:Ve.container},o.createElement("input",{type:"radio",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),Q(this.props.text)&&o.createElement("label",{style:Ve.text},this.props.text))}}]),t}(o.Component);We.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var Ve={container:{marginRight:10},circle:{height:24,width:24,borderRadius:12,borderWidth:2,borderColor:W,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,borderRadius:6,backgroundColor:W},text:{marginLeft:5}},Ge={container:{},head:{flexDirection:"row",alignContent:"flex-start",backgroundColor:W,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},title:{flex:15,alignSelf:"flex-start",width:"auto","font-weight":"bold",fontSize:20,color:J},close:{flex:1,alignSelf:"flex-end",marginBottom:5},row:{marginTop:3,marginBottom:3,paddingTop:5,paddingBottom:5},ele:{flex:1,width:"100%"},radio:{borderColor:z,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioText:{},radioActive:{backgroundColor:W,borderColor:W,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioActiveText:{color:J},saveBtn:{marginTop:5,marginBottom:3,paddingTop:5,paddingBottom:5}},Ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.clientCode)&&Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)&&Q(n.state.mobileNo)&&Q(n.state.emailId)){var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSignUp(e,n.state.clientCode,function(e){!0===e&&n.setState({id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})})}else He.warn("Please fill all the required fields before Submit.")},n.state={id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,{style:{flex:1}},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"App Code",style:Object(y.a)({},Be,Ge.ele),value:this.state.clientCode,onChange:function(t){return e.setState({clientCode:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Name",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"number",className:"form-control",placeholder:"Age",style:Object(y.a)({},Be,Ge.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Email ID",style:Object(y.a)({},Be,Ge.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(We,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave})))}}]),t}(o.Component),Ke=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onLogin=function(){Q(n.state.userName)&&Q(n.state.password)?(n.setState({message:"",isLoading:!0}),n.props.onLogin(n.state.userName,n.state.password,function(e,t){!0===e?n.setState({isLoading:!1,message:""}):n.setState({message:t,isLoading:!1})})):He.warn("Enter Mobile Number and Password to continue.")},n.onForgetPassword=function(){n.setState({isForgetPass:!0,isSignUp:!1,mobileNumber:"",email:"",message:""})},n.onForgetPassSubmit=function(){Q(n.state.mobileNumber)&&Q(n.state.email)?(n.setState({message:"",isLoading:!0}),n.props.onForgetPassword(n.state.mobileNumber,n.state.email.toLowerCase(),function(e,t){!0===e?(He.success("Password reset success. Login with New password sent to your Email. Change password after login."),n.setState({isLoading:!1,message:"",isForgetPass:!1,isSignUp:!1,userName:"",password:""})):n.setState({message:t,isLoading:!1})})):He.warn("Enter Mobile Number and Email to continue.")},n.onCreateAccount=function(){n.setState({isForgetPass:!1,isSignUp:!0,mobileNumber:"",email:"",message:""})},n.onSignUp=function(e,t,a){n.setState({message:"",isLoading:!0}),n.props.onSignUp(e,t,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isForgetPass:!1,isSignUp:!1,message:""}),He.success("Sign Up success. Please wait till Manager approves then you can access your account."),a(!0)):(He.fail(Q(t)?t:"Failed to Sign Up."),a(!1))})},n.state={userName:"",password:"",message:"",isLoading:!1,isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:""},n.onLogin=n.onLogin.bind(Object(ge.a)(n)),n.onForgetPassword=n.onForgetPassword.bind(Object(ge.a)(n)),n.onForgetPassSubmit=n.onForgetPassSubmit.bind(Object(ge.a)(n)),n.onCreateAccount=n.onCreateAccount.bind(Object(ge.a)(n)),n.onSignUp=n.onSignUp.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,{className:"container",style:{backgroundColor:G,maxWidth:"270px"}},o.createElement(Ne,{className:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30,marginTop:5}},o.createElement(Ce,{src:Pe.logo,style:{width:150,height:150}})),this.state.isForgetPass&&o.createElement(Ne,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Ne,{className:"col-12",style:qe.row},o.createElement(Ce,{className:"absolute",src:Pe.mobile,style:qe.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Registered Mobile Number",value:this.state.mobileNumber,style:Object(y.a)({},Be,qe.txt),onChange:function(t){return e.setState({mobileNumber:t.target.value})},onKeyPress:function(t){13==(t.keyCode?t.keyCode:t.which)&&e.onForgetPassSubmit()}})),o.createElement(Ne,{className:"col-12",style:Object(y.a)({},qe.row,{marginBottom:40})},o.createElement(Ce,{className:"absolute",src:Pe.email,style:qe.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Registered Email",value:this.state.email,style:Object(y.a)({},Be,qe.txt),onChange:function(t){return e.setState({email:t.target.value})},onKeyPress:function(t){13==(t.keyCode?t.keyCode:t.which)&&e.onForgetPassSubmit()}})),o.createElement(Re,{title:!1===this.state.isLoading?"Reset my password":"Loading...",onPress:this.onForgetPassSubmit}),o.createElement(Le,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Z:Y}},this.state.message),o.createElement(Ne,{style:{marginTop:15}},o.createElement(Le,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:V}},"Go back to Login."))),this.state.isSignUp&&o.createElement(o.Fragment,null,o.createElement(Ye,{onSignUp:this.onSignUp}),o.createElement(Ne,{style:{marginTop:15,textAlign:"center"}},o.createElement(Le,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:V}},"Go back to Login."))),!this.state.isForgetPass&&!this.state.isSignUp&&o.createElement(Ne,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Ne,{className:"col-12",style:qe.row},o.createElement(Ce,{className:"absolute",src:Pe.username,style:qe.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},Be,qe.txt),value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})},onKeyPress:function(t){13==(t.keyCode?t.keyCode:t.which)&&e.onLogin()}})),o.createElement(Ne,{className:"col-12",style:Object(y.a)({},qe.row,{marginBottom:15})},o.createElement(Ce,{className:"absolute",src:Pe.password,style:qe.txtIcon}),o.createElement(Ie,{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,style:Object(y.a)({},Be,qe.txt),onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:function(t){13==(t.keyCode?t.keyCode:t.which)&&e.onLogin()}})),o.createElement(Le,{className:"col-12 pointer",onClick:this.onForgetPassword,style:{marginBottom:15,textAlign:"right",color:V}},"Forgot Password?"),o.createElement(Re,{title:!1===this.state.isLoading?"LOGIN":"Loading...",onPress:this.onLogin}),o.createElement(Le,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Z:Y}},this.state.message),o.createElement(Ne,{className:"col-12",style:{marginTop:15,alignItems:"center",justifyContent:"center"}},o.createElement(Le,{className:"col-12",style:{marginBottom:5,textAlign:"center"}},"Dont have an account?"),o.createElement(Ne,{className:"col",style:{float:"left",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#000000",borderStyle:"solid",borderRadius:10}},o.createElement(Le,{style:{textAlign:"center",margin:"7px",cursor:"pointer"},onClick:this.onCreateAccount},"CREATE / JOIN YOUR FLAT")))),o.createElement(Me,{visible:this.state.isLoading,text:""}))}}]),t}(o.Component),qe={row:{marginBottom:25},txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11},txt:{flex:1,paddingLeft:25}},ze=Object(p.b)(function(e,t){return{}},function(e){return{onLogin:function(t,n,a){return e(function(e,t,n){return function(a){var o=sessionStorage.getItem("fcm_token");(new oe).post("account/login",function(e,t){if(ee(e)&&ee(e.data)&&Q(e.data.token)&&Q(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(o){}a(ie(!0)),n(!0,"")}else n(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:o,os:"web",osVersion:"web"})}}(t,n,a))},onForgetPassword:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).post("account/resetpassword",function(e,t){ee(e)&&ee(e.data)&&ee(e.data.data)?!0===e.data.data?n(!0,""):n(!1,e.data.message):n(!1,t)},{mobileNo:e,emailId:t})}}(t,n,a))},onSignUp:function(t,n,a){return e(function(e,t,n){return function(a){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new oe).post("account/signup",function(e,t){ee(e)&&ee(e.data)&&e.data.length>0?n(!0,""):n(!1,t)},e)}}(t,n,a))}}})(Ke),Ze=n(26),Je=n(15),Xe=n(10),$e={container:{height:"80%",marginTop:30,marginBottom:25,marginLeft:15,marginRight:15},head:{alignContent:"center"},title:{flex:1,alignContent:"center",color:Z},close:{width:20,flex:1,justifyContent:"flex-end",alignContent:"flex-end",alignSelf:"flex-end"},content:{}},Qe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onToggleHomeModel=function(e){n.setState({isShowHomeModel:e})},n.onHomeChange=function(e){n.props.onHomeChange(e,function(e){!0===e&&n.onToggleHomeModel(!1)})},n.logout=function(){Object(Xe.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){n.props.onLogout(function(e){!0===e?He.success("Logout Success!"):He.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})},n.state={isShowHomeModel:!1},n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ge.a)(n)),n.onHomeChange=n.onHomeChange.bind(Object(ge.a)(n)),n.logout=n.logout.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("header",{className:"center",style:et.titleBar},o.createElement(fe.b,{className:"fl",to:""},o.createElement(Ce,{src:Pe.logoInv,className:"",style:{width:22,height:22},onClick:function(){e.props.isMenuExpand&&e.props.onToggleMenu()}})),o.createElement(Ce,{src:this.props.isMenuExpand?Pe.close:Pe.menu,className:"fl pointer",style:this.props.isMenuExpand?{width:17,height:17,marginLeft:15,marginTop:6}:{width:22,height:22,marginLeft:15,marginTop:4},onClick:this.props.onToggleMenu}),this.props.appUser.role===X.USER?o.createElement(Le,{className:"pointer",style:et.titleText,onClick:function(){return e.onToggleHomeModel(!0)}},Q(this.props.user.homes)&&this.props.appUser.homeIndex>=0?this.props.user.homes[this.props.appUser.homeIndex].number:""):o.createElement(Le,{style:et.titleText},this.props.appUser.role===X.ADMIN?"Admin":this.props.appUser.role===X.MANAGER?"Manager":this.props.appUser.role===X.GATEKEEPER?"Gate Keeper":this.props.appUser.role),o.createElement("span",{className:"fr pointer",onClick:this.logout,style:{flex:1}},o.createElement(Ce,{src:Pe.logout,style:{width:20,height:20}})),Q(this.props.user.homes)&&o.createElement(Je.a,{open:this.state.isShowHomeModel,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Ne,{style:$e.container},this.props.user.homes.map(function(t,n){return o.createElement(Le,{className:"col-12 pointer",key:"h"+n,onClick:function(){return e.onHomeChange(n)},style:e.props.appUser.homeIndex===n?Object(y.a)({},et.homeList,et.activeHome):Object(y.a)({},et.homeList,et.inActiveHome)},""+t.number)}))))}}]),t}(o.Component),et={titleBar:{backgroundColor:W,width:"100%",padding:7},titleText:{flex:15,color:J,fontSize:15},homeList:{padding:15,borderBottomWidth:1,borderBottomColor:W,"border-bottom-style":"solid"},inActiveHome:{color:Z},activeHome:{color:W,fontSize:20}},tt=[{title:"Home",path:"/"},{title:"Manage",roles:[X.USER,X.ADMIN,X.MANAGER],child:[{title:"Members",path:"members",roles:[X.USER]},{title:"Vehicles",path:"vehicles",roles:[X.USER]},{title:"Servents",path:"servents",roles:[X.USER]},{title:"Tickets",path:"tickets",roles:[X.USER,X.ADMIN,X.MANAGER]},{title:"Visitors",path:"visitors",roles:[X.USER]},{title:"Ads",path:"ads",roles:[X.ADMIN,X.MANAGER]},{title:"Notification",path:"notification",roles:[X.ADMIN,X.MANAGER]},{title:"Users",path:"users",roles:[X.ADMIN]},{title:"Homes",path:"homes",roles:[X.ADMIN]},{title:"Blocks",path:"blocks",roles:[X.ADMIN]},{title:"Visitors",path:"all-visitors",roles:[X.ADMIN,X.MANAGER,X.GATEKEEPER]},{title:"Payment",path:"payment",roles:[X.ADMIN,X.MANAGER]}]},{title:"Notice",path:"notice"},{title:"Settings",child:[{title:"My Profile",path:"my-profile"},{title:"My Role",path:"my-role",isMRole:!0},{title:"My Documents",path:"my-documents"},{title:"Change Password",path:"change-password"}]},{title:"Info",path:"info"}],nt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).loadNav=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(ge.a)(n);return o.createElement("ul",{className:"navbar-nav"+(a||n.state.activeTopMenu===t?"":" hide"),style:a?{}:at.inner},e.map(function(e,t){return(Q(e.path)||Q(e.child))&&(!Q(e.roles)||e.roles.indexOf(n.props.appUser.role)>=0)&&(!e.isMRole||n.props.user.role.split(",").length>0)?o.createElement("li",{className:"nav-item"},o.createElement(fe.b,{className:"nav-link",to:Q(e.path)?e.path:"#",onClick:function(){n.state.activeTopMenu===e.title?n.setState({activeTopMenu:""}):a&&n.setState({activeTopMenu:e.title}),n.setState({activeMenu:e.title}),Q(e.path)&&n.props.onToggleMenu()}},e.title),Q(e.child)&&s.loadNav(e.child,e.title)):null}))},n.state={activeMenu:"",activeTopMenu:""},n.loadNav=n.loadNav.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("nav",{className:this.props.isExpand?"":"collapse",style:at.nav},this.loadNav(tt,"",!0))}}]),t}(o.Component),at={nav:{backgroundColor:V,color:G},inner:{backgroundColor:W,paddingLeft:10}},ot=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("footer",{style:st.tabBar},o.createElement(Ne,{className:"center"},"\xa9 Nest"))}}]),t}(o.Component),st={tabBar:{flex:1,borderTopColor:z,borderTopWidth:1,"border-top-style":"solid",width:"100%",marginTop:25,paddingTop:15,paddingBottom:15},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},tabImage:{width:20,height:20},activeTab:{backgroundColor:G}},rt=function(e,t,n,a){return function(e){(new oe).get("payments"+(Q(t)?"/"+t:""),function(e,t){ee(e)&&ee(e.data)?n(e.data):a(Q(t)?t:"Failed to load Payments.")})}},it=function(e){return{type:a.LOAD_USER,payload:e}},lt=function(e,t,n,a,o){return function(e){(new oe).get("visitors"+(Q(t)?"/"+t:"")+"/"+n,function(e,t){ee(e)&&ee(e.data)?a(e.data):o(e&&Q(e.message)?e.message:"Failed to load Visitors.")})}},ct=function(e,t){return function(n){(new oe).upload("upload",function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0,""):t(!1,n)},e)}},ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getTotalDue=function(){var e=0;return n.props.home.payments.map(function(t,n){var a=0;return t.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),e+=t.amount-a,1}),e},n.payNow=function(e,t){if(e&&e.length>0&&t&&t>0)if(Q(n.props.user.client.upi.id)&&Q(n.props.user.client.upi.name)){var a=ne();n.setState({payment:{paymentId:e,amount:t,transactionRef:a}}),He.warn("Payment is in progress. Please contact administrator.")}else He.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else He.warn("Amount should be more then 0 to proceed payment.")},n.successCallback=function(e){if(console.log("Payment Success...",e),e&&e.Status)if("SUCCESS"===e.Status&&e.responseCode&&"00"===e.responseCode){n.setState({isLoading:!0});var t={txnRef:e.txnRef,txnId:e.txnId,amount:n.state.payment.amount,status:"PAID",isSuccess:!0,reason:""};n.props.onPaymentUpdate(n.state.payment.paymentId,t,function(e){n.setState({isLoading:!1}),n.clearTxn(),!0===e?He.success("Payment success."):He.fail("Payment failed.")})}else n.txnFailure(e);else n.txnFailure(e)},n.failureCallback=function(e){n.txnFailure(e)},n.txnFailure=function(e){console.log("Payment Failure...",e);var t="";t=e&&e.Status?"FAILURE"===e.Status&&e.responseCode&&"ZM"===e.responseCode?"Payment failed because of wrong pin.":"FAILURE"===e.Status&&e.message&&e.message.length>0?"Payment failed because "+e.message:"Payment failed.":"Payment failed.",He.fail(t),n.setState({isLoading:!0});var a={txnRef:n.state.payment.transactionRef,txnId:"",amount:n.state.payment.amount,status:"FAIL",isSuccess:!1,reason:t};n.props.onPaymentUpdate(n.state.payment.paymentId,a,function(e){n.setState({isLoading:!1}),n.clearTxn()})},n.clearTxn=function(){n.setState({payment:{paymentId:"",amount:0,transactionRef:""}})},n.state={isLoading:!1,payment:{paymentId:"",amount:0,transactionRef:""}},n.getTotalDue=n.getTotalDue.bind(Object(ge.a)(n)),n.payNow=n.payNow.bind(Object(ge.a)(n)),n.clearTxn=n.clearTxn.bind(Object(ge.a)(n)),n.txnFailure=n.txnFailure.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,null,o.createElement(Ne,{style:{margin:5}},o.createElement(Le,{style:{marginTop:2,fontWeight:"bold",fontSize:17}},"Total Due Amount: Rs "+this.getTotalDue())),o.createElement(xe,null,Q(this.props.home.payments)?this.props.home.payments.filter(function(e,t){var n=0;return Q(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<e.amount}).map(function(t,n){var a=0;return Q(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<t.amount?o.createElement(Ne,{key:"my-due"+n,style:0===n?mt.myDueFirst:mt.myDue},o.createElement(Ne,{style:{marginTop:4}},o.createElement(Le,null,"Due for: "+$.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Ne,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Le,{style:{fontSize:17}},"Rs "+(t.amount-a))),o.createElement(Ne,{style:{width:"100%"}},o.createElement(Le,null,"Due Date: 15/"+$.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Ne,{style:{marginTop:4}},o.createElement(Re,{title:"PAY NOW",onPress:function(){return e.payNow(t._id,t.amount-a)}}))):null}):o.createElement(Le,{style:{padding:20}},"No Dues found!!!")),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),mt={myDue:{margin:7,paddingLeft:15,borderLeftColor:z,borderLeftWidth:1},myDueFirst:{margin:7}},dt=n(67),pt=n.n(dt);function ht(e,t){try{return ee(e)?("string"!=typeof e&&e.toString(),Q(t)||(t=M),pt()(e).format(t)):""}catch(n){return ae(n,"convert.toDateString"),""}}function ft(e,t){try{return ht(e,B)}catch(n){return ae(n,"convert.toDateTimeString"),""}}var gt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(xe,{style:{}},Q(this.props.home.payments.filter(function(e,t){return Q(e.transactions)&&Q(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?this.props.home.payments.filter(function(e,t){return Q(e.transactions)&&Q(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var n=0,a=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount,0===t&&(a=e.createdAt),1}),o.createElement(Ne,{key:"my-his"+t,style:0===t?yt.myDueFirst:yt.myDue},o.createElement(Ne,{style:{marginTop:4}},o.createElement(Le,{style:{}},"Paid for: "+$.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),o.createElement(Ne,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(Le,{style:{fontSize:17}},"Rs "+n)),o.createElement(Ne,{style:{width:"100%"}},o.createElement(Le,null,"Paid On: "+ht(a))))}):o.createElement(Le,{style:{padding:20}},"No History found"))}}]),t}(o.Component),yt={myDue:{margin:7,paddingLeft:15,borderLeftColor:z,borderLeftWidth:1},myDueFirst:{margin:7}},Et=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return Q(this.props.data)?this.props.data.map(function(e,t){return o.createElement(Ne,{style:{flex:1,borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid",paddingBottom:3}},o.createElement(Ne,null,o.createElement(Le,{key:t,style:{flex:1,fontWeight:"bold"}},e.title)),o.createElement(Ne,null,o.createElement(Le,{key:t,style:{flex:1}},e.description)))}):o.createElement(Le,null,this.props.message)}}]),t}(o.Component),bt={container:{flex:1,width:"100%",padding:10,marginBottom:10,borderBottomColor:z,borderBottomWidth:1,"border-bottom-style":"solid"},row:{flex:1},card:{flex:1,justifyContent:"center",alignItems:"center",borderRadius:10,padding:5,margin:7},inner:{margin:5,padding:"0px 10px"},txt:{flex:1,paddingTop:7,paddingBottom:5,fontSize:14},img:{width:"10vw",height:"10vw",maxWidth:"75px",maxHeight:"75px",margin:5}},vt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Ot.content},o.createElement(Ne,{className:"fl",style:bt.container},o.createElement(Ne,{style:bt.row},o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("members")}},o.createElement(Ce,{src:Pe.members,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},(this.props.home.members?this.props.home.members.length+"":"")+" MEMBER"+(0===this.props.home.members.length||this.props.home.members.length>1?"S":""))),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("vehicles")}},o.createElement(Ce,{src:Pe.vehicle,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},(this.props.home.vehicles?this.props.home.vehicles.length+"":"")+" VEHICLE"+(0===this.props.home.vehicles.length||this.props.home.vehicles.length>1?"S":""))),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("servents")}},o.createElement(Ce,{src:Pe.servent,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},(this.props.home.servents?this.props.home.servents.length+"":"")+" SERVANT"+(0===this.props.home.servents.length||this.props.home.servents.length>1?"S":""))),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(Ce,{src:Pe.support,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"TICKET(S)")),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("visitors")}},o.createElement(Ce,{src:Pe.visitors,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"VISITOR(S)")))),o.createElement(Ne,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ne,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(De,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Ot.tab,Ot.activeTab):Ot.tab,onClick:function(){return e.setState({activeTab:1})}},"MY DUES"),o.createElement(De,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Ot.tab,Ot.activeTab):Ot.tab,onClick:function(){return e.setState({activeTab:2})}},"ADVANCE"),o.createElement(De,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Ot.tab,Ot.activeTab):Ot.tab,onClick:function(){return e.setState({activeTab:3})}},"HISTORY")),o.createElement(Ne,{style:{flex:1,flexDirection:"row",padding:10}},1===this.state.activeTab?o.createElement(ut,{history:this.props.history,user:this.props.user,home:this.props.home,onPaymentUpload:this.props.onPaymentUpload,onPaymentUpdate:this.props.onPaymentUpdate}):2===this.state.activeTab?o.createElement(Et,{data:[],message:"No advance found!"}):3===this.state.activeTab?o.createElement(gt,{history:this.props.history,home:this.props.home}):4===this.state.activeTab?o.createElement(Et,{data:[],message:"Work in progress"}):[])))}}]),t}(o.Component),Ot={content:{flex:1,width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:W,"border-bottom-style":"solid",color:W}},St=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:wt.content},o.createElement(Ne,{className:"fl",style:bt.container},o.createElement(Ne,{style:bt.row},o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(Ce,{src:Pe.support,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"TICKET")),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("ads")}},o.createElement(Ce,{src:Pe.addvertise,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"ADS")),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("notification")}},o.createElement(Ce,{src:Pe.reminder,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"NOTIFICATION")),this.props.appUser.role===X.ADMIN&&o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("users")}},o.createElement(Ce,{src:Pe.users,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},this.props.users.isUpToDate?(this.props.users.isError?0:this.props.users.data.length)+" USER"+(this.props.users.isError||0===this.props.users.data.length||this.props.users.data.length>1?"S":""):"Loading")),this.props.appUser.role===X.ADMIN&&o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("homes")}},o.createElement(Ce,{src:Pe.homes,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},this.props.homes.isUpToDate?(this.props.homes.isError?0:this.props.homes.data.length)+" HOME"+(this.props.homes.isError||0===this.props.homes.data.length||this.props.homes.data.length>1?"S":""):"Loading")),this.props.appUser.role===X.ADMIN&&o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("blocks")}},o.createElement(Ce,{src:Pe.blocks,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},this.props.blocks.isUpToDate?(this.props.blocks.isError?0:this.props.blocks.data.length)+" BLOCK"+(this.props.blocks.isError||0===this.props.blocks.data.length||this.props.blocks.data.length>1?"S":""):"Loading")),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("all-visitors")}},o.createElement(Ce,{src:Pe.visitors,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"VISITOR(S)")),o.createElement(Ne,{className:"fl pointer",style:Object(y.a)({},bt.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("payment")}},o.createElement(Ce,{src:Pe.money,style:bt.img}),o.createElement(Ne,{className:"pointer",style:bt.txt},"PAYMENT")))))}}]),t}(o.Component),wt={content:{flex:1,width:"100%"}},jt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onImageSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=ne();o+="."+a[a.length-1],n.setState({fileName:o});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){e||He.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if(Q(n.props.gateNo)&&!1===n.state.showHomes&&n.state.homeId.length>0&&Q(n.state.name)&&Q(n.state.fileName)){var e={_id:"",type:n.state.type,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",image:n.state.fileName,passCode:"",gateNo:n.props.gateNo};n.props.onSave(n.state.homeId,e,n.props.user,n.props.appUser,function(e){!0===e||He.fail("Failed to save visitor "+n.state.name+".")}),n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""}),He.info("Visitor will be saved and notified to the home.")}else He.warn("Please fill Gate Number, Home and Image before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""})},n.viewAll=function(){Q(n.props.gateNo)?n.props.history.push("all-visitors"):He.warn("Please enter Gate Number to view this page.")},n.state={homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",fileName:"",showHomes:!1,homeSearchText:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onClear=n.onClear.bind(Object(ge.a)(n)),n.onImageSelect=n.onImageSelect.bind(Object(ge.a)(n)),n.viewAll=n.viewAll.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Ne,{style:kt.container},o.createElement(Ne,{style:Ge.row},o.createElement(Le,{className:"fr pointer",onClick:this.viewAll,style:Object(y.a)({},kt.ele,{color:V,fontWeight:"bold",textAlign:"right"})},"View all Active Visitors")),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ge.ele,kt.ele,{flexDirection:"row",padding:12,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.homeSearchText,onChange:function(t){return e.setState({showHomes:!0,homeSearchText:t.target.value})}})),this.state.showHomes&&Q(this.state.homeSearchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ge.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.homeSearchText.toLowerCase())>=0}).map(function(t,n){return o.createElement(Le,{className:"pointer",key:"ho"+n,style:Object(y.a)({},kt.ele,{flexDirection:"column",margin:3,padding:6,backgroundColor:q}),onClick:function(){e.setState({homeSearchText:t.number,homeId:t._id,showHomes:!1})}},t.number)})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"VISITOR"===this.state.type,text:"Visitor",onPress:function(){return e.setState({type:"VISITOR"})}}),o.createElement(We,{isActive:"DELIVERY"===this.state.type,text:"Delivery",onPress:function(){return e.setState({type:"DELIVERY"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},kt.ele,Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},kt.ele,Be,Ge.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},kt.ele,Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:this.onImageSelect}),Q(this.state.fileName)&&o.createElement(Le,{style:Object(y.a)({},kt.ele,{marginLeft:15})},this.state.fileName)),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{title:"SAVE",onPress:this.onSave,style:Object(y.a)({},kt.ele,{marginRight:10})}),o.createElement(Re,{title:"CLEAR",onPress:this.onClear,style:kt.ele})))}}]),t}(o.Component),kt={container:{width:"100%",paddingLeft:15,paddingRight:15},ele:{fontSize:17}},At=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={gateNo:"",isLoading:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({gateNo:this.props.gateNo})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Nt.content},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Gate Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele,{width:"auto"}),value:this.state.gateNo,onChange:function(t){return e.setState({gateNo:t.target.value})},onBlur:function(){return e.props.onGateNoChanged(e.state.gateNo)}})),o.createElement(jt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.state.gateNo,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.props.onSaveVisitor,onUpload:this.props.onUpload}),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Nt={content:{flex:1,width:"100%"}},xt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.appUser.role===X.USER?this.props.appUser.homeIndex>=0&&Q(this.props.user.homes)?o.createElement(vt,{history:this.props.history,user:this.props.user,home:this.props.user.homes[this.props.appUser.homeIndex],onPaymentUpload:function(t,n,a){return e.props.onPaymentUpload(t,n,e.props.user,a)},onPaymentUpdate:function(t,n,a){return e.props.onPaymentUpdate(t,n,e.props.appUser.homeIndex,e.props.user,a)}}):o.createElement(Le,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."):this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?o.createElement(St,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,ads:this.props.ads,users:this.props.users,homes:this.props.homes,tickets:this.props.tickets,blocks:this.props.blocks}):this.props.appUser.role===X.GATEKEEPER?o.createElement(At,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.props.gateNo,onGateNoChanged:this.props.onGateNoChanged,onSaveVisitor:this.props.onSaveVisitor,onUpload:this.props.onUpload}):o.createElement(Le,{style:{margin:20}},"No role assigned to you. Please contact administrator/manager.")}}]),t}(o.Component),Ct=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t(re(e))}}(t))},onPaymentUpload:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new oe).post("paymentupload",function(e,o){ee(e)&&ee(e.data)&&e.data.approvalid>0?(t(it(n)),a(!0)):a(!1)},e)}}(t,0,a,o))},onPaymentUpdate:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new oe).post("payment/transaction/"+e,function(r,i){if(ee(r)&&ee(r.data)&&r.data.length>0){t._id=r.data;var l=a.homes[n].payments.findIndex(function(t){return t._id===e});a.homes[n].payments[l].transactions||(a.homes[n].payments[l].transactions=[]),a.homes[n].payments[l].transactions.push(t),s(it(a)),o(!0)}else o(!1)},t)}}(t,n,a,o,s))},onSaveVisitor:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){t&&Q(t._id)?(new oe).put("visitor/"+t._id,function(e,t){ee(e)&&ee(e.data)&&e.data.length>0?o(!0):o(!1)},t):(new oe).post("visitor/"+e,function(e,t){ee(e)&&ee(e.data)&&e.data.length>0?o(!0):o(!1)},t)}}(t,n,0,0,s))},onUpload:function(t,n){return e(ct(t,n))}}})(xt),It=function(e,t,n,a){return function(o){e&&e._id&&e._id.length>0?(new oe).put("member/"+e._id,function(s,r){if(ee(s)&&ee(s.data)&&s.data.length>0){var i=t.homes[n].members,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,i[l].type=e.type,t.homes[n].members=i,o(Ut(t)),a(!0,"")}else a(!1,r)},e):(e=Object.assign(e,{password:e.mobileNo}),(new oe).post("member/"+t.homes[n]._id,function(s,r){if(ee(s)&&ee(s.data)&&s.data.length>0){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].members;i.push(e),t.homes[n].members=i,o(Ut(t)),a(!0,"")}else a(!1,r)},e))}},Ut=function(e){return{type:a.LOAD_USER,payload:e}},Tt=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Lt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{style:Dt.cnr},o.createElement(fe.b,{to:"",style:Dt.link},"Home"),this.props.data.map(function(t,n){return o.createElement(o.Fragment,null,o.createElement("span",{key:"bd"+n,style:Dt.sep},"/"),n===e.props.data.length-1?o.createElement("span",{key:"bc"+n,style:Dt.link},t.title):o.createElement(fe.b,{key:"bc"+n,to:"/"+t.link},t.title))}))}}]),t}(o.Component);Lt.defaultProps={data:[]};var Dt={cnr:{width:"100%",MarginTop:10,marginBottom:10},sep:{marginRight:10,marginLeft:10},link:{}},Rt={content:{backgroundColor:G},row:{alignItems:"flex-start",borderBottomColor:z,borderBottomWidth:1,"border-bottom-style":"solid",marginTop:5},ele:{alignItems:"flex-start",marginTop:1,marginBottom:3,padding:2}},_t={addIcon:{width:20,height:20,cursor:"pointer"},editIcon:{width:20,height:20,cursor:"pointer"},deleteIcon:{width:18,height:20,cursor:"pointer"},closeIcon:{width:17,height:17,cursor:"pointer"},datePicker:{width:20,height:23,cursor:"pointer"}},Pt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)&&Q(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),He.success("Member saved successfully.")):He.fail(Q(t)?t:"Failed to save member.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?He.success("Member removed successfully."):He.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Members",link:"members"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-member")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),Q(this.props.user.homes[this.props.homeIndex].members)?this.props.user.homes[this.props.homeIndex].members.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Be,Ge.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(We,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(We,{isActive:"OWNER"===e.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(We,{isActive:"TENANT"===e.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.name)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"Female"))),Q(t.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.mobileNo)),Q(t.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.emailId)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.type)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No Member found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Mt=Object(p.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(It(t,n,a,o))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new oe).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(Ut(n)),a&&!0===a.isUpToDate&&!1===a.isError&&Q(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(Tt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(Pt),Bt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)&&Q(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),He.success("Member saved successfully.")):He.fail(Q(t)?t:"Failed to save member.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Be,Ge.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(We,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Ft=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(It(t,n,a,o))}}})(Bt),Ht=function(e,t,n,a){return function(o){e&&Q(e._id)?(new oe).put("vehicle/"+e._id,function(s,r){if(ee(s)&&Q(s.data)){var i=t.homes[n].vehicles,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].type=e.type,t.homes[n].vehicles=i,o(Wt(t)),a(!0)}else a(!1)},e):(new oe).post("vehicle/"+t.homes[n]._id,function(s,r){if(ee(s)&&Q(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].vehicles;i.push(e),t.homes[n].vehicles=i,o(Wt(t)),a(!0)}else a(!1)},e)}},Wt=function(e){return{type:a.LOAD_USER,payload:e}},Vt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.number)&&Q(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",type:""}),He.success("Vehicle saved successfully.")):He.fail("Failed to save vehicle.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?He.success("Vehicle removed successfully."):He.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Vehicles",link:"vehicles"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-vehicle")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),Q(this.props.user.homes[this.props.homeIndex].vehicles)?this.props.user.homes[this.props.homeIndex].vehicles.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(We,{isActive:"TWO WHEELER"===e.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(We,{isActive:"FOUR WHEELER"===e.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",type:""})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.type)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.number)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,type:t.type})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No Vehicle found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Gt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Ht(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).delete("vehicle/"+e,function(s,r){ee(s)&&ee(s.data)&&!0===s.data?(t.homes[n].vehicles=t.homes[n].vehicles.filter(function(t,n){return t._id!==e}),o(Wt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Vt),Yt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.number)&&Q(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",type:""}),He.success("Vehicle saved successfully.")):He.fail("Failed to save vehicle.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"TWO WHEELER"===this.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(We,{isActive:"FOUR WHEELER"===this.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Kt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Ht(t,n,a,o))}}})(Yt),qt=function(e,t,n,a){return function(o){e&&Q(e._id)?(new oe).put("servent/"+e._id,function(s,r){if(ee(s)&&Q(s.data)){var i=t.homes[n].servents,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,t.homes[n].servents=i,o(zt(t)),a(!0)}else a(!1)},e):(new oe).post("servent/"+t.homes[n]._id,function(s,r){if(ee(s)&&Q(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].servents;i.push(e),t.homes[n].servents=i,o(zt(t)),a(!0)}else a(!1)},e)}},zt=function(e){return{type:a.LOAD_USER,payload:e}},Zt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),He.success("Servent saved successfully.")):He.fail("Failed to save servent.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?He.success("Servent removed successfully."):He.fail("Failed to remove servent.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Servents",link:"servents"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-servent")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),Q(this.props.user.homes[this.props.homeIndex].servents)?this.props.user.homes[this.props.homeIndex].servents.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Be,Ge.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(We,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.name)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"Female"))),Q(t.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.mobileNo)),Q(t.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.emailId)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No Servent found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Jt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(qt(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).delete("servent/"+e,function(s,r){ee(s)&&ee(s.data)&&!0===s.data?(t.homes[n].servents=t.homes[n].servents.filter(function(t,n){return t._id!==e}),o(zt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Zt),Xt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),He.success("Servent saved successfully.")):He.fail("Failed to save servent.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Servents",link:"servents"},{title:"New Servent",link:"new-servent"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},Be,Ge.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),$t=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(qt(t,n,a,o))}}})(Xt),Qt=function(e,t,n,a,o){return function(s){e&&e._id&&e._id.length>0?(new oe).put("ticket/"+e._id,function(n,r){if(ee(n)&&Q(n.data)){var i=[];if(Q(a.data)){var l=(i=a.data).findIndex(function(e){return e._id===n.data});i[l]._id=n.data,i[l].title=e.title,i[l].description=e.description,i[l].status=e.status,i[l].updatedBy=t.name,s(en(i,!0,!1,""))}o(!0)}else o(!1)},e):(new oe).post("ticket/"+t.homes[n]._id,function(r,i){if(ee(r)&&Q(r.data)){var l=[];Q(a.data)&&((l=a.data).unshift({_id:r.data,_homeId:t.homes[n].number,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),s(en(l,!0,!1,""))),o(!0)}else o(!1)},e)}},en=function(e,t,n,o){return{type:a.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},tn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.title)&&Q(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}),He.success("Ticket saved successfully.")):He.fail("Failed to save ticket.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?He.success("Ticket removed successfully."):He.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})},n.onResolve=function(e){Object(Xe.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onResolve(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?He.success("Ticket resolved successfully."):He.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})},n.onStart=function(e){Object(Xe.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onStart(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:""}),!0===e?He.success("Ticket started successfully."):He.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})},n.onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[],comment:""}):n.setState({viewId:e,comments:t,comment:""})},n.onAddComment=function(e){Q(n.state.comment)?(n.setState({isLoading:!0}),n.props.onAddComment(e,{_id:"",comment:n.state.comment,createdBy:n.props.user.name,createdAt:new Date},n.props.appUser,n.props.user,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({comment:""}),He.success("Comment added successfully.")):He.fail("Failed to add comment.")})):He.warn("Please fill comment before Add.")},n.state={isLoading:!1,data:[],isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n.onResolve=n.onResolve.bind(Object(ge.a)(n)),n.onStart=n.onStart.bind(Object(ge.a)(n)),n.onView=n.onView.bind(Object(ge.a)(n)),n.onAddComment=n.onAddComment.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?"":this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Tickets.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Tickets",link:"tickets"}]}),this.props.appUser.role===X.USER&&o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ticket")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),ee(this.props.tickets)&&this.props.tickets.isUpToDate&&!this.props.tickets.isError&&Q(this.props.tickets.data)?this.props.tickets.data.map(function(t,n){return o.createElement(Ne,{key:"tkt"+n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.createdBy+" from "+t._homeId+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}}):o.createElement(Le,null,t.title)),o.createElement(Ne,{style:Rt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}}):o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.status)),e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon}))):o.createElement(Ne,{style:Rt.ele},e.props.appUser.role===X.USER&&o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),e.props.appUser.role===X.USER&&o.createElement(De,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon})),e.props.appUser.role===X.USER&&o.createElement(De,{style:{marginRight:25},onClick:function(){e.onResolve(t._id)}},o.createElement(Le,{className:"pointer",style:{color:V}},"RESOLVE")),(e.props.appUser.role===X.ADMIN||e.props.appUser.role===X.MANAGER)&&"INIT"===t.status&&o.createElement(De,{style:{marginRight:25},onClick:function(){e.onStart(t._id)}},o.createElement(Le,{className:"pointer",style:{color:V}},"START")),o.createElement(De,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Le,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Ne,{style:nn.cmntsCnr},o.createElement(Ne,{style:nn.cmntsHdr},o.createElement(Le,{style:nn.cmntsHdrTxt},"Comments")),o.createElement(Ne,{style:nn.cmntsCnt},Q(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(Ne,{key:"tktcmt"+t,style:0===t?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ne,{style:nn.cmntHdr},o.createElement(Le,null,e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:nn.cmntCnt},o.createElement(Le,null,e.comment)))}):o.createElement(Le,{style:{padding:20}},"No Comments found!!!"),o.createElement(Ne,{style:nn.addCmntCnt},o.createElement(Ue,{placeholder:"Comment Text",className:"form-control",style:Object(y.a)({},Be,nn.newCmnt),value:e.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),o.createElement(Ne,{style:nn.saveBtn},o.createElement(Re,{title:"ADD COMMENT",onPress:function(){return e.onAddComment(t._id)}}))))))}):o.createElement(Le,{style:{padding:20}},this.props.tickets.isUpToDate?this.props.tickets.isError?this.props.tickets.errorMessage:"No Ticket found!!!":"Loading..."),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),nn={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:z},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{},addCmntCnt:{marginTop:5,marginBottom:5},newCmnt:{width:"100%",borderWidth:1,borderColor:z},saveBtn:{marginTop:5}},an=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(e){e(en([],!1,!1,"")),(new oe).get("tickets"+(Q(t)?"/"+t:""),function(t,a){ee(t)?(e(en(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onSave:function(t,n,a,o,s){return e(Qt(t,n,a,o,s))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new oe).delete("ticket/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?(Q(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(en(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onResolve:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new oe).delete("ticket/resolve/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?(Q(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(en(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onStart:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new oe).put("ticket/start/"+e,function(n,s){if(ee(n)&&ee(n.data)&&!0===n.data){if(Q(a.data)){var r=[],i=(r=a.data).findIndex(function(t){return t._id===e});r[i].status="IN-PROGRESS",t(en(r,!0,!1,""))}o(!0)}else o(!1)},{status:"IN-PROGRESS"})}}(t,0,0,o,s))},onAddComment:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){Q(t._id)?(new oe).put("ticket/comment/"+t._id,function(a,r){if(ee(a)&&Q(a.data)){t.createdAt=new Date;var i=[];if(Q(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e}),c=i[l].comments.findIndex(function(e){return e._id===t._id});i[l].comments[c]=t,n(en(i,!0,!1,""))}s(!0)}else s(!1)},t):(new oe).post("ticket/comment/"+e,function(a,r){if(ee(a)&&Q(a.data)){t._id=a.data,t.createdAt=new Date;var i=[];if(Q(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e});i[l].comments.unshift(t),n(en(i,!0,!1,""))}s(!0)}else s(!1)},t)}}(t,n,0,0,s,r))}}})(tn),on=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.title)&&Q(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:"",status:"INIT"}),He.success("Ticket saved successfully.")):He.fail("Failed to save ticket.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",title:"",description:"",status:"INIT"},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),this.props.appUser.role===X.USER?o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))):o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings->My Role and try again."))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),sn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,n,a,o,s){return e(Qt(t,n,a,o,s))}}})(on),rn=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.createElement("span",{className:this.props.className,style:ln.container},o.createElement("input",{type:"checkbox",key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),o.createElement("label",{style:ln.text},this.props.text))}}]),t}(o.Component);rn.defaultProps={isActive:!1,text:"",key:"",className:"",onPress:function(){}};var ln={container:{marginRight:10},circle:{height:24,width:24,borderWidth:2,borderColor:W,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,backgroundColor:W},text:{marginLeft:5}},cn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.state={isZoomImage:!1,zoomImage:""},n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(Ne,{style:Rt.row},o.createElement(Le,null,"No of "+(this.props.isActive?"Active":"")+" Visitors: "+this.props.data.length),this.props.appUser.role!==X.GATEKEEPER&&o.createElement(rn,{isActive:this.props.isActive,text:"Only Active Visitors",onPress:this.props.onActiveChange,className:"fr"})),o.createElement(Ne,{className:"fl",style:un.cardContainer},Q(this.props.data)?this.props.data.map(function(t,n){return o.createElement(Ne,{key:n,className:"fl",style:un.card},Q(t.image)&&o.createElement(Ne,{className:"center"},o.createElement(Ce,{src:H+t.image,className:"pointer",style:un.img,onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}})),o.createElement(Ne,{style:un.content},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{className:"bold"},t.name+" ["+t.type+"]")),(t.age>0||Q(t.gender))&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,(t.age>0?t.age:"")+(t.age>0&&Q(t.gender)?", ":"")+(Q(t.gender)?"M"===t.gender?"Male":"Female":""))),o.createElement(Ne,{style:Rt.ele},"To ",o.createElement(Le,{className:"bold"},t.homeNumber)," on ",o.createElement(Le,{className:"bold"},ft(t.createdAt))),!t.isEntered&&!t.isExit&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),Q(t.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.mobileNo)),Q(t.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.emailId)),!t.isApproved&&!t.isRejected&&!t.isEntered&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:{color:W}},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:{color:t.isApproved?K:Y}},t.isApproved?"APPROVED":"REJECTED"),o.createElement(Ne,null,"By "+t.approvedBy),o.createElement(Ne,null,"On "+ft(t.approvedAt))),t.isEntered&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),o.createElement(Ne,null,"On "+ft(t.enteredAt))),t.isApproved&&!t.isEntered&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:{color:Y}},"NOT ENTERED")),!t.isRejected&&t.isExit&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),o.createElement(Ne,null,"On "+ft(t.exitAt))),t.isEntered&&!t.isExit&&o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:{color:Y}},"STAYING IN")),e.props.appUser.role===X.GATEKEEPER&&o.createElement(Ne,{style:Rt.ele,className:"center"},!t.isEntered&&!t.isRejected&&o.createElement(Re,{title:"Enter",onPress:function(){e.props.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&o.createElement(Re,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.props.onExit(t._id)}})),e.props.appUser.role===X.USER&&!t.isApproved&&!t.isRejected&&!t.isEntered&&o.createElement(Ne,{style:Rt.ele,className:"center"},o.createElement(Re,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.props.onApprove(t._id)}}),o.createElement(Re,{title:"Reject",onPress:function(){e.props.onReject(t._id)}}))))}):o.createElement(Le,{style:{padding:20}},"No Visitor found!!!")),o.createElement(Je.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(Ne,{className:"center"},o.createElement(Ce,{src:H+this.state.zoomImage,style:{height:"50%",width:"50%"}}))))}}]),t}(o.Component);cn.defaultProps={onEnter:function(){},onExit:function(){},onApprove:function(){},onReject:function(){}};var un={cardContainer:{flex:1,width:"100%",padding:10,marginBottom:10},card:{flex:1,margin:15},img:{height:"25vh",margin:0,borderRadius:"50%",marginBottom:"-25px"},content:{flex:1,padding:10,paddingTop:"25px",borderColor:z,borderWidth:1,"border-style":"solid",borderRadius:10}},mn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).loadData=function(){n.setState({isLoading:!0}),n.props.onLoad(n.props.user.client._id,n.props.user.homes[n.props.appUser.homeIndex]._id,n.state.isActive,function(e){n.setState({isLoading:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e)})},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.onApprove=function(e){Object(Xe.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onApprove(e,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isApproved=!0,n.state.data[a].approvedBy=n.props.user.name,n.state.data[a].approvedAt=new Date,n.setState({}),He.success("Visitor approved successfully.")}else He.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},n.onReject=function(e){Object(Xe.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReject(e,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isRejected=!0,n.state.data[a].approvedBy=n.props.user.name,n.state.data[a].approvedAt=new Date,n.setState({}),He.success("Visitor rejected successfully.")}else He.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isActive:!0,isLoading:!1},n.loadData=n.loadData.bind(Object(ge.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ge.a)(n)),n.onApprove=n.onApprove.bind(Object(ge.a)(n)),n.onReject=n.onReject.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Visitors",link:"visitors"}]}),o.createElement(cn,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange,onApprove:this.onApprove,onReject:this.onReject}),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),dn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onLoad:function(t,n,a,o,s){return e(lt(0,n,a,o,s))},onApprove:function(t,n){return e(function(e,t){return function(n){(new oe).get("visitor/approve/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))},onReject:function(t,n){return e(function(e,t){return function(n){(new oe).get("visitor/reject/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))}}})(mn),pn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).passwordPolicyCheck=function(e){var t=/[A-Z]/,n=/[a-z]/,a=/[0-9]/,o=/[!|@|#|$|%|^|&|*|(|)|-|_]/,s="";if(e.length<6)return s="New Password not long enough!";for(var r=0,i=0,l=0,c=0,u=0;u<e.length;u++)t.test(e[u])?r++:n.test(e[u])?i++:a.test(e[u])?l++:o.test(e[u])&&c++;return r<1||i<1||l<1||c<1?s="New Password dose not match with password policy!":s},n.onUpdate=function(){if(Q(n.state.password)&&Q(n.state.newPassword)&&Q(n.state.confirmNewPassword))if(n.state.newPassword===n.state.confirmNewPassword){var e=n.passwordPolicyCheck(n.state.newPassword);e.length<1?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.password,n.state.newPassword,function(e,t){n.setState({isLoading:!1}),!0===e?(He.success("Password updated successfully. Please login with your new password."),n.props.onLogout(function(e){})):He.fail(t)})):He.warn(e)}else He.warn("New Password and Confirm New Password not matchs.");else He.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,password:"",newPassword:"",confirmNewPassword:""},n.passwordPolicyCheck=n.passwordPolicyCheck.bind(Object(ge.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1})},o.createElement(Lt,{data:[{title:"Change Password",link:"change-password"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"password",placeholder:"Password",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"password",placeholder:"New Password",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"password",placeholder:"Confirm New Password",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"UPDATE",onPress:this.onUpdate})),o.createElement(Ne,{style:{marginTop:7}},o.createElement(Le,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),hn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).post("account/changepassword/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t)},{password:t,newPassword:n})}}(t,n,a,o))},onLogout:function(t){return e(se(t))}}})(pn),fn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onUpdate=function(){Q(n.state.name)&&Q(n.state.mobileNo)&&Q(n.state.emailId)?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.name,n.state.mobileNo,n.state.emailId?n.state.emailId.toLowerCase():"",n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?He.success("Profile updated successfully."):He.fail(t)})):He.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,name:"",mobileNo:"",emailId:""},n.onUpdate=n.onUpdate.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.user.name,mobileNo:this.props.user.mobileNo,emailId:this.props.user.emailId})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1})},o.createElement(Lt,{data:[{title:"My Profile",link:"my-profile"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),gn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(r){(new oe).put("account/profile/"+e,function(e,i){ee(e)&&ee(e.data)&&!0===e.data?(o.name=t,o.mobileNo=n,o.emailId=a,r(ue(o)),s(!0,"")):s(!1,i)},{name:t,mobileNo:n,emailId:a})}}(t,n,a,o,s,r))}}})(fn),yn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onUpdate=function(){Q(n.state.role)?(n.setState({isLoading:!0}),n.props.onUpdate(n.state.role,function(e,t){n.setState({isLoading:!1}),!0===e?He.success("Role updated successfully."):He.fail(t)})):He.warn("Please select role before Update.")},n.state={isLoading:!1,role:""},n.onUpdate=n.onUpdate.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({role:this.props.appUser.role})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1})},o.createElement(Lt,{data:[{title:"My Role",link:"my-role"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Te,{className:"form-control",value:this.state.role,style:Ge.ele,onChange:function(t){return e.setState({role:t.target.value})}},this.props.user.role.split(",").map(function(e,t){return o.createElement("option",{key:"role"+t,value:e},e)}))),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),En=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,n){return e(function(e,t){return function(n){n(le(e)),t(!0,"")}}(t,n))}}})(yn),bn=function(e,t){return function(n){n(On([],!1,!1,"")),(new oe).get("ads/"+e,function(e,a){ee(e)&&ee(e.data)?(n(On(e.data,!0,!1,"")),t(!0)):t(!1)})}},vn=function(e,t,n,a,o){return function(s){t&&Q(t._id)?(new oe).put("ad/"+t._id,function(e,n){if(ee(e)&&Q(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].title=t.title,a[r].description=t.description,s(On(a,!0,!1,"")),o(!0)}else o(!1)},t):(new oe).post("ad/"+e,function(e,r){ee(e)&&Q(e.data)?(a.unshift({_id:e.data,title:t.title,description:t.description,createdBy:n.name,createdAt:new Date}),s(On(a,!0,!1,"")),o(!0)):o(!1)},t)}},On=function(e,t,n,o){return{type:a.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Sn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.title)&&Q(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:""}),He.success("Ad saved successfully.")):He.fail("Failed to save ad.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?He.success("Ad removed successfully."):He.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Ads.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Ads",link:"ads"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ad")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),this.props.ads.isUpToDate&&!this.props.ads.isError&&Q(this.props.ads.data)?this.props.ads.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:""})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.title)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No Ad found!!!":"Loading..."),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),wn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,n){return e(bn(t,n))},onSave:function(t,n,a,o,s){return e(vn(t,n,a,o,s))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).delete("ad/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(On(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(Sn),jn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.title)&&Q(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:""}),He.success("Ad saved successfully.")):He.fail("Failed to save ad.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),kn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,n,a,o,s){return e(vn(t,n,a,o,s))}}})(jn),An=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getHomes=function(e){var t="";if(n.props.homes.isUpToDate&&!n.props.homes.isError&&Q(n.props.homes.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&Q(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.userId===e}).map(function(e,t){return a.push(e.homeId)}),n.props.homes.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.number})}return t},n.onSearch=function(){if(Q(n.state.searchText)&&n.props.users.isUpToDate&&!n.props.users.isError&&Q(n.props.users.data)){var e=n.state.searchText.toLocaleLowerCase(),t=n.props.homes.data.filter(function(t){return t.number.toLocaleLowerCase()===e});n.setState({searchResult:n.props.users.data.filter(function(n){return(n.name+"").toLocaleLowerCase().indexOf(e)>=0||(n.mobileNo+"").toLocaleLowerCase().indexOf(e)>=0||(n.emailId+"").toLocaleLowerCase().indexOf(e)>=0||(n.number+"").toLocaleLowerCase().indexOf(e)>=0||Q(t.filter(function(e){return e.memberIds.indexOf(n._id)>=0}))}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.appUser.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("User removed successfully.")):He.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getHomes=n.getHomes.bind(Object(ge.a)(n)),n.onSearch=n.onSearch.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Users",link:"users"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-user/0/false")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New"),o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("approve-users")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right",marginRight:15})},"View Users Waiting for Approval")),o.createElement(Ne,{style:Object(y.a)({},Ge.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search User",className:"form-control",style:Object(y.a)({},Be,Ge.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(De,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Ce,{className:"pointer",src:Pe.search,style:{width:30,height:30}}))),Q(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ne,{key:"usr"+n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Name: "+(Q(t.name)?t.name:""))),t._id!==e.props.user._id&&o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-user/"+t._id+"/false")}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No user match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ne,{style:Rt.row},o.createElement(Ne,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Le,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Nn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new oe).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(Ut(n)),a&&!0===a.isUpToDate&&!1===a.isError&&Q(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(Tt(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(An),xn=function(e,t,n){return function(a){(new oe).get("home/"+e,function(e,a){ee(e)&&ee(e.data)&&Q(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):n(Q(e.message)?e.message:"Failed to load Home.")})}},Cn=function(e){return{type:a.LOAD_USER,payload:e}},In=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Un=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getUsers=function(e){var t="";if(n.props.users.isUpToDate&&!n.props.users.isError&&Q(n.props.users.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&Q(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.homeId===e}).map(function(e,t){return a.push(e.userId)}),n.props.users.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.name})}return t},n.onSearch=function(){if(Q(n.state.searchText)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&Q(n.props.homes.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.homes.data.filter(function(t){return(t.number+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homes,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("Home removed successfully.")):He.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getUsers=n.getUsers.bind(Object(ge.a)(n)),n.onSearch=n.onSearch.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Homes",link:"homes"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-home/0")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),o.createElement(Ne,{style:Object(y.a)({},Ge.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search Home",className:"form-control",style:Object(y.a)({},Be,Ge.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(De,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Ce,{className:"pointer",src:Pe.search,style:{width:30,height:30}}))),Q(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ne,{key:"home"+n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Number: "+t.number)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.props.history.push("view-home/"+t._id)}},o.createElement(Ce,{src:Pe.view,style:_t.editIcon})),o.createElement(De,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-home/"+t._id)}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No home match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ne,{style:Rt.row},o.createElement(Ne,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Le,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Tn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).delete("home/"+e,function(s,r){ee(s)&&ee(s.data)&&!0===s.data?(t.homes=t.homes.filter(function(t,n){return t._id!==e}),n.data=n.data.filter(function(t,n){return t._id!==e}),o(Cn(t)),o(In(n.data,!0,!1,"")),a(!0)):a(!1)})}}(t,n,a,o))}}})(Un),Ln={mListCnr:{borderColor:V,borderWidth:1,height:"50%"},mListActiveRow:{padding:3,backgroundColor:V,color:J,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"},mListRow:{padding:3,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"}},Dn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getHomes=function(){var e="";return Q(n.state.homeIds)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&Q(n.props.homes.data)&&n.props.homes.data.filter(function(e){return n.state.homeIds.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.number}),e},n.onSave=function(){if(Q(n.state.name)&&n.state.age>0&&Q(n.state.gender)){var e="";n.state.role.isAdmin&&(e=X.ADMIN),n.state.role.isManager&&(e+=(e.length>0?",":"")+X.MANAGER),n.state.role.isGatekeeper&&(e+=(e.length>0?",":"")+X.GATEKEEPER),n.state.role.isUser&&(e+=(e.length>0?",":"")+X.USER),n.setState({isLoading:!0});var t={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:e};n.props.onSave(t,n.state.homeIds,n.props.user,n.props.users,"true"===n.props.match.params.isApprove,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),He.success("User saved successfully.")):He.fail(Q(t)?t:"Failed to save user.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleHomeModel=function(e){n.setState({isShowHomes:e})},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1},isShowHomes:!1},n.getHomes=n.getHomes.bind(Object(ge.a)(n)),n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t,n){t&&Q(t._id)?e.setState({isLoading:!1,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,homeIds:n,role:{isAdmin:(","+t.role+",").indexOf(","+X.ADMIN+",")>=0,isManager:(","+t.role+",").indexOf(","+X.MANAGER+",")>=0,isGatekeeper:(","+t.role+",").indexOf(","+X.GATEKEEPER+",")>=0,isUser:(","+t.role+",").indexOf(","+X.USER+",")>=0}}):He.fail("Failed to load User.")},function(e){He.fail(Q(e)?e:"Failed to load User.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Be,Ge.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(We,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(We,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Role: ")),o.createElement(Ne,{style:Ge.row},o.createElement(rn,{isActive:this.state.role.isAdmin,text:X.ADMIN,onPress:function(){e.state.role.isAdmin=!e.state.role.isAdmin,e.setState({})}}),o.createElement(rn,{isActive:this.state.role.isManager,text:X.MANAGER,onPress:function(){e.state.role.isManager=!e.state.role.isManager,e.setState({})}}),o.createElement(rn,{isActive:this.state.role.isGatekeeper,text:X.GATEKEEPER,onPress:function(){e.state.role.isGatekeeper=!e.state.role.isGatekeeper,e.setState({})}}),o.createElement(rn,{isActive:this.state.role.isUser,text:X.USER,onPress:function(){e.state.role.isUser=!e.state.role.isUser,e.setState({})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Home(s): "+this.getHomes())),o.createElement(Ne,{style:Ge.row},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isShowHomes:!0})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon}))),this.props.homes.isUpToDate&&!this.props.homes.isError&&Q(this.props.homes.data)&&o.createElement(Je.a,{open:this.state.isShowHomes,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Ne,{style:$e.container},o.createElement(xe,{style:Object(y.a)({},Ln.mListCnr,{maxHeight:"50%"})},this.props.homes.data.map(function(t,n){return o.createElement(Le,{key:"home"+n,style:e.state.homeIds.indexOf(t._id)>=0?Ln.mListActiveRow:Ln.mListRow,onClick:function(){e.state.homeIds.indexOf(t._id)>=0?e.setState({homeIds:e.state.homeIds.filter(function(e){return e!==t._id})}):(e.state.homeIds.push(t._id),e.setState({}))}},t.number)})))),o.createElement(Ne,{style:Ge.saveBtn},o.createElement(Re,{title:"true"===this.props.match.params.isApprove?"Approve":"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Rn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("member/"+e,function(e,a){ee(e)&&ee(e.data)&&ee(e.data.member)&&Q(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):n(Q(e.message)?e.message:"Failed to load Member.")})}}(t,n,a))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:o}))&&Q(e._id)?(new oe).put("member/"+e._id,function(t,o){if(ee(t)&&ee(t.data)&&t.data.length>0){if(a.isUpToDate&&!a.isError&&Q(a.data)){var r=a.data.findIndex(function(e){return e._id===t.data});r>=0?(a.data[r]._id=t.data,a.data[r].name=e.name):a.data.push({_id:t.data,name:e.name}),n(Tt(a.data,!0,!1,""))}s(!0,"")}else s(!1,o)},e):(new oe).post("member/0",function(t,o){ee(t)&&ee(t.data)&&t.data.length>0?(a.isUpToDate&&!a.isError&&Q(a.data)&&(a.data.push({_id:t.data,name:e.name}),n(Tt(a.data,!0,!1,""))),s(!0,"")):s(!1,o)},e)}}(t,n,0,o,s,r))}}})(Dn),_n=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onApprove=function(e){Object(Xe.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){n.props.history.push("edit-user/"+e+"/true")}},{label:"No",onClick:function(){}}]})},n.onReject=function(e){Object(Xe.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReject(e,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),He.success("User rejected successfully.")):He.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1},n.onApprove=n.onApprove.bind(Object(ge.a)(n)),n.onReject=n.onReject.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),Q(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.name)),(t.age>0||Q(t.gender))&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,(t.age>0?t.age:"")+(t.age>0&&Q(t.gender)?", ":"")+(Q(t.gender)?"M"===t.gender?"Male":"Female":""))),o.createElement(Ne,{style:Rt.ele},"On ",o.createElement(Le,{style:{fontWeight:"bold"}},ft(t.createdAt))),Q(t.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.mobileNo)),Q(t.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.emailId)),o.createElement(Ne,{style:Rt.ele},o.createElement(Re,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.onApprove(t._id)}}),o.createElement(Re,{title:"Reject",onPress:function(){e.onReject(t._id)}})))}):o.createElement(Le,{style:{padding:20}},"No users found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Pn=Object(p.b)(function(e,t){return{}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){(new oe).get("account/wfausers",function(n,a){ee(n)&&ee(n.data)?e(n.data):t(ee(n)&&Q(n.message)?n.message:"Failed to load Members.")})}}(t,n))},onReject:function(t,n){return e(function(e,t){return function(n){(new oe).delete("account/rejectuser/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))}}})(_n),Mn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getUsers=function(){var e="";return Q(n.state.members)&&n.props.users.isUpToDate&&!n.props.users.isError&&Q(n.props.users.data)&&n.props.users.data.filter(function(e){return n.state.members.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.name+(Q(t.number)?"("+t.number+")":"")}),e},n.onSave=function(){if(Q(n.state.blockId)&&Q(n.state.number)){n.setState({isLoading:!0});var e={_id:n.state.id,_blockId:n.state.blockId,number:n.state.number,address:n.state.address,bedRoom:n.state.bedRoom,parking:n.state.parking,description:n.state.description,memberIds:n.state.members};n.props.onSave(e,n.props.user,n.props.homes,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),He.success("Home saved successfully.")):He.fail(Q(t)?t:"Failed to save home.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleUserModel=function(e){n.setState({isShowUsers:e})},n.state={isLoading:!1,id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[],isShowUsers:!1},n.getUsers=n.getUsers.bind(Object(ge.a)(n)),n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onToggleUserModel=n.onToggleUserModel.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){t&&Q(t._id)?e.setState({isLoading:!1,id:t._id,blockId:t._blockId,number:t.number,address:t.address,bedRoom:t.bedRoom,parking:t.parking,description:t.description,members:t.memberIds}):He.fail("Failed to load Home.")},function(e){He.fail(Q(e)?e:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Homes",link:"homes"},{title:"Edit Home",link:"edit-home/0"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Te,{className:"form-control",value:this.state.blockId,style:Ge.ele,onChange:function(t){return e.setState({blockId:t.target.value})}},o.createElement("option",{key:"block0",value:""},"Select Block"),this.props.blocks&&this.props.blocks.isUpToDate&&!this.props.blocks.isError&&Q(this.props.blocks.data)&&this.props.blocks.data.map(function(e,t){return o.createElement("option",{key:"block"+t,value:e._id},e.name)}))),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Address",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"No of bed rooms: ")),o.createElement(Ne,{style:Ge.row},o.createElement(We,{isActive:1===this.state.bedRoom,text:"1",onPress:function(){return e.setState({bedRoom:1})}}),o.createElement(We,{isActive:2===this.state.bedRoom,text:"2",onPress:function(){return e.setState({bedRoom:2})}}),o.createElement(We,{isActive:3===this.state.bedRoom,text:"3",onPress:function(){return e.setState({bedRoom:3})}}),o.createElement(We,{isActive:4===this.state.bedRoom,text:"4",onPress:function(){return e.setState({bedRoom:4})}}),o.createElement(We,{isActive:5===this.state.bedRoom,text:"5",onPress:function(){return e.setState({bedRoom:5})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Parking",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.parking,onChange:function(t){return e.setState({parking:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"User(s): "+this.getUsers())),o.createElement(Ne,{style:Ge.row},o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isShowUsers:!0})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon}))),this.props.users.isUpToDate&&!this.props.users.isError&&Q(this.props.users.data)&&o.createElement(Je.a,{open:this.state.isShowUsers,onClose:function(){return e.onToggleUserModel(!1)}},o.createElement(Ne,{style:$e.container},o.createElement(xe,{style:Object(y.a)({},Ln.mListCnr,{maxHeight:"50%"})},this.props.users.data.map(function(t,n){return o.createElement(Le,{key:"user"+n,style:e.state.members.indexOf(t._id)>=0?Ln.mListActiveRow:Ln.mListRow,onClick:function(){e.state.members.indexOf(t._id)>=0?e.setState({members:e.state.members.filter(function(e){return e!==t._id})}):(e.state.members.push(t._id),e.setState({}))}},t.name+(t.number?"("+t.number+")":""))})))),o.createElement(Ne,{style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Bn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(xn(t,n,a))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(t){e&&Q(e._id)?(new oe).put("home/"+e._id,function(o,s){if(ee(o)&&ee(o.data)&&o.data.length>0){if(n.isUpToDate&&!n.isError&&Q(n.data)){var r=n.data.findIndex(function(e){return e._id===o.data});n.data[r]._id=o.data,n.data[r].number=e.number,t(In(n.data,!0,!1,""))}a(!0,"")}else a(!1,s)},e):(new oe).post("home/0",function(o,s){ee(o)&&ee(o.data)&&o.data.length>0?(n.isUpToDate&&!n.isError&&Q(n.data)&&(n.data.push({_id:o.data,number:e.number}),t(In(n.data,!0,!1,""))),a(!0,"")):a(!1,s)},e)}}(t,0,a,o))},onCheckNumberAvail:function(t,n,a){return e(function(e,t,n){return function(e){(new oe).get("home/checkno/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(0,n,a))}}})(Mn),Fn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).loadData=function(){n.setState({isLoading:!0}),n.props.onLoad(n.props.user.client._id,"",n.state.isActive,function(e){n.setState({isLoading:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e)})},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.onEnter=function(e){Object(Xe.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onEnter(e,n.props.gateNo,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isEntered=!0,n.state.data[a].enteredBy=n.props.user.name,n.state.data[a].enteredAt=new Date,n.setState({}),He.success("Visitor entered successfully.")}else He.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},n.onExit=function(e){Object(Xe.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onExit(e,n.props.gateNo,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),He.success("Visitor exit successfully.")):He.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isActive:!0,isLoading:!1},n.loadData=n.loadData.bind(Object(ge.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ge.a)(n)),n.onEnter=n.onEnter.bind(Object(ge.a)(n)),n.onExit=n.onExit.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Visitors",link:"all-visitors"}]}),o.createElement(cn,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange,onEnter:this.onEnter,onExit:this.onExit}),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Hn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,n,a,o,s){return e(lt(0,n,a,o,s))},onEnter:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("visitor/enter/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,n,a))},onExit:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("visitor/exit/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,n,a))}}})(Fn),Wn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onPush=function(){Q(n.state.title)&&Q(n.state.body)?Object(Xe.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0});var e={title:n.state.title,body:n.state.body};n.props.onPush(n.props.user.client._id,e,n.props.user,function(e){if(n.setState({isLoading:!1}),ee(e)){var t=n.state.data;t.unshift(e),n.setState({data:t,title:"",body:""}),He.success("Notification pushed successfully.")}else He.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):He.warn("Please fill all the required fields before Push.")},n.state={isLoading:!1,data:[],title:"",body:""},n.onPush=n.onPush.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Notification",link:"notification"}]}),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Body",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})}})),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{style:{marginRight:10},title:"PUSH",onPress:this.onPush}),o.createElement(Re,{title:"CLEAR",onPress:function(){e.setState({title:"",body:""})}})),Q(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.title)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.body)),o.createElement(Ne,{style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{title:"Duplicate",onPress:function(){e.setState({title:t.title,body:t.body})}})))}):o.createElement(Le,{style:{padding:20}},"No Nofification found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Vn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("notifications/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Notification.")})}}(t,n,a))},onPush:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).post("notification/"+e,function(e,o){ee(e)&&Q(e.data)?a({_id:e.data,title:t.title,body:t.body,createdBy:n.name,createdAt:new Date}):a(null)},t)}}(t,n,a,o))}}})(Wn),Gn=function(e,t,n,o){return{type:a.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Yn=n(17),Kn=n.n(Yn),qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(ee(n.state.fromDate)&&ee(n.state.toDate)&&Q(n.state.place)&&Q(n.state.address)){n.setState({isLoading:!0});var e={_homeId:n.props.user.homes[n.props.appUser.homeIndex].number,fromDate:n.state.fromDate,toDate:n.state.toDate,place:n.state.place,address:n.state.address,isReturned:!1,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(e,n.props.user.homes[n.props.appUser.homeIndex]._id,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date}),He.success("Outing submitted successfully.")):He.fail("Failed to submit Outing.")})}else He.warn("Please fill all the required fields before submit Outing.")},n.state={isLoading:!1,fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Notice",link:"notice"},{title:"New Outing",link:"new-outing"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Kn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ne,{style:Ge.row},o.createElement(Kn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Place",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.place,onChange:function(t){return e.setState({place:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Address",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(Ne,{className:"center",style:Ge.saveBtn},o.createElement(Re,{title:"SUBMIT",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),zn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){e&&Q(e._id)?o(!1):(new oe).post("outing/"+t,function(t,r){console.log("result:",t),ee(t)&&Q(t.data)?(e._id=t.data,e.createdBy=n.name,a.data.unshift(e),s(Gn(a.data,!0,!1,"")),o(!0)):o(!1)},e)}}(t,n,a,o,s))}}})(qn),Zn=function(e,t,n,o){return{type:a.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Jn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onFileSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=ne();o+="."+a[a.length-1],n.setState({isLoading:!0});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){n.setState({isLoading:!1}),e?n.setState({fileName:o}):He.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if(Q(n.state.title)&&Q(n.state.fileName)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,file:n.state.fileName,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(n.state.homeId,e,n.props.homeIndex,n.props.user,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",homeId:Q(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""}),He.success("Document saved successfully.")):He.fail("Failed to save document.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({id:"",homeId:Q(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""})},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?He.success("Document removed successfully."):He.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",homeId:Q(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n.onClear=n.onClear.bind(Object(ge.a)(n)),n.onFileSelect=n.onFileSelect.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Documents.")})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"My Documents",link:"my-documents"}]}),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),Q(this.props.user.homes)&&o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:{marginRight:10}},"Home:"),this.props.user.homes.map(function(t,n){return o.createElement(We,{isActive:t._id===e.state.homeId,text:t.number,key:"home"+n,onPress:function(){return e.setState({homeId:t._id})}})})),o.createElement(Ne,{style:Ge.row},o.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:this.onFileSelect}),Q(this.state.fileName)&&o.createElement(Le,{style:{marginLeft:15}},this.state.fileName)),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Re,{title:"CLEAR",onPress:this.onClear})),this.props.documents.isUpToDate&&!this.props.documents.isError&&Q(this.props.documents.data)?this.props.documents.data.map(function(t,n){return o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.title)),Q(t.description)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),Q(e.props.user.homes.filter(function(e){return e._id===t._id}))&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Home: "+e.props.user.homes.filter(function(e){return e._id===t._id})[0].number)),Q(t.file)&&o.createElement(Ne,{style:Rt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:H+t.file},t.file)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},this.props.documents.isUpToDate?"No Documents found!!!":this.props.documents.isError?this.props.documents.errorMessage:"No Documents found!!!"),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Xn=Object(p.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){n(Zn([],!1,!1,"")),(new oe).get("documents/"+e,function(e,a){ee(e)&&ee(e.data)?(n(Zn(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,n))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){t&&Q(t._id)?(new oe).put("document/"+t._id,function(e,a){if(ee(e)&&Q(e.data)){var r=o.findIndex(function(t){return t._id===e.data._id});o[r]._id=e.data._id,o[r].title=t.title,o[r].description=t.description,o[r].file=t.file,n(Zn(o,!0,!1,"")),s(!0)}else s(!1)},t):(new oe).post("document/"+e,function(e,r){ee(e)&&Q(e.data)?(o.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:a.name,createdAt:new Date}),n(Zn(o,!0,!1,"")),s(!0)):s(!1)},t)}}(t,n,0,o,s,r))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).delete("document/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Zn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))},onUpload:function(t,n){return e(ct(t,n))}}})(Jn),$n=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSearch=function(){if(Q(n.state.searchText)&&n.props.blocks.isUpToDate&&!n.props.blocks.isError&&Q(n.props.blocks.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.blocks.data.filter(function(t){return(t.name+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.blocks.data,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("Home removed successfully.")):He.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.onSearch=n.onSearch.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Lt,{data:[{title:"Blocks",link:"blocks"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-block/0")},style:Object(y.a)({},Rt.ele,{color:V,textAlign:"right"})},"Add New")),o.createElement(Ne,{style:Object(y.a)({},Ge.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search Block",className:"form-control",style:Object(y.a)({},Be,Ge.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),o.createElement(De,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Ce,{className:"pointer",src:Pe.search,style:{width:30,height:30}}))),Q(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ne,{key:"block"+n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Name: "+t.name)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Description: "+(Q(t.description)?t.description:""))),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-block/"+t._id)}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon}))))}):o.createElement(Le,{style:{padding:20}},"No block match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ne,{style:Rt.row},o.createElement(Ne,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(Le,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),ea=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).delete("block/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a($n(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(Qn),ta=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.name)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.blocks&&n.props.blocks.data?n.props.blocks.data:[],function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",description:""}),He.success("Block saved successfully.")):He.fail(Q(t)?t:"Failed to save block.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",name:"",description:""},n.onSave=n.onSave.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;if(e.length>0&&"0"!==e&&this.props.blocks&&Q(this.props.blocks.data)){var t=this.props.blocks.data.filter(function(t,n){return t._id===e});Q(t)&&this.setState({id:t[0]._id,name:t[0].name,description:t[0].description})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},Rt.content,{flex:1,backgroundColor:G})},o.createElement(Lt,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),o.createElement(Ne,{style:Ge.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Ge.saveBtn},o.createElement(Re,{title:"SAVE",onPress:this.onSave}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),na=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&Q(t._id)?(new oe).put("block/"+t._id,function(e,n){if(ee(e)&&Q(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].name=t.name,a[r].description=t.description,s($n(a,!0,!1,"")),o(!0,"")}else o(!1,n)},t):(new oe).post("block/"+e,function(e,r){ee(e)&&Q(e.data)?(a.unshift({_id:e.data,name:t.name,description:t.description,createdBy:n.name}),s($n(a,!0,!1,"")),o(!0,"")):o(!1,r)},t)}}(t,n,a,o,s))}}})(ta),aa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(n.state.amount>0&&(n.state.isAllHome||n.state.homes.length>0)){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={amount:n.state.amount,description:n.state.description,month:n.state.month,year:n.state.year,isAllHome:n.state.isAllHome,homes:e};n.setState({isLoading:!0}),n.props.onSave(n.props.user.client._id,t,n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]}),He.success("Payment saved successfully.")):He.fail(t||"Failed to save payment.")})}else He.warn("Please fill all required fields before Save.")},n.onClear=function(){n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]})},n.state={isLoading:!1,amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onClear=n.onClear.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Ne,{style:oa.container},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.amount>0?this.state.amount+"":"",onChange:function(t){return e.setState({amount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:{marginTop:15}},"Payment for "+this.state.year+" "),o.createElement(Te,{className:"form-control",value:this.state.month,style:Ge.ele,onChange:function(t){return e.setState({month:t.target.value})}},$.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return o.createElement("option",{key:"month"+t,value:e.value},e.title)}))),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:{marginRight:15}},"Apply to Home(s): "+(this.state.isAllHome?"":this.state.homes.length)),o.createElement(rn,{isActive:this.state.isAllHome,text:"All Homes",onPress:function(){return e.setState({isAllHome:!e.state.isAllHome})}})),!this.state.isAllHome&&o.createElement(xe,{style:Object(y.a)({},Ge.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Le,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:V},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),!this.state.isAllHome&&o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ge.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),!this.state.isAllHome&&this.state.showHomes&&Q(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ge.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Le,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(Re,{title:"CLEAR",onPress:this.onClear})),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),oa={container:{width:"100%",paddingLeft:15,paddingRight:15}},sa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSearch=function(){if(n.state.fromDate&&n.state.toDate){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={fromDate:n.state.fromDate,toDate:n.state.toDate,homes:e};n.setState({isLoading:!0}),n.props.onSearch(n.props.user.client._id,t,n.props.user,function(e){n.setState({isLoading:!1,isShowSearch:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e||"Failed to load payment.")})}else He.warn("Please fill all required fields before Search.")},n.onUpdate=function(){if(Q(n.state.uPaymentId)&&n.state.uAmount>0){var e={amount:n.state.uAmount,description:n.state.uDescription};n.setState({isLoading:!0}),n.props.onUpdate(n.state.uPaymentId,e,n.props.user,function(e,t){if(n.setState({isLoading:!1}),!0===e){var a=n.state.data,o=a.findIndex(function(e){return e._id===n.state.uPaymentId});a[o].amount=n.state.uAmount,a[o].description=n.state.uDescription,n.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a}),He.success("Payment updated successfully.")}else He.fail(t||"Failed to update payment.")})}else He.warn("Please fill all required fields before update.")},n.state={isLoading:!1,isShowSearch:!0,fromDate:"",toDate:"",datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""},n.onSearch=n.onSearch.bind(Object(ge.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Ne,{style:ra.container},this.state.isShowSearch?o.createElement(Ne,null,o.createElement(Ne,{style:Ge.row},o.createElement(Kn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ne,{style:Ge.row},o.createElement(Kn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:{marginRight:15}},"Home(s): "+(this.state.homes.length>0?this.state.homes.length:"All"))),o.createElement(xe,{style:Object(y.a)({},Ge.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(Le,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:V},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ge.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),this.state.showHomes&&Q(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ge.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(Le,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{title:"SEARCH",onPress:this.onSearch}))):o.createElement(Ne,null,o.createElement(Le,{className:"fr pointer",style:{color:V,fontWeight:"bold",textAlign:"right"},onClick:function(){e.setState({isShowSearch:!0})}},"Show Search")),o.createElement(Ne,null,Q(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},"Rs."+t.amount+" for "+$.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(Q(t.mode)?" "+t.mode:"")+(Q(t.type)?" "+t.type:""))),Q(t.description)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{title:"Update",onPress:function(){e.setState({isShowUpdateModel:!0,uPaymentId:t._id,uAmount:t.amount,uDescription:t.description})}})))}):o.createElement(Le,{style:{padding:20}},"No Payment found!!!")),o.createElement(Je.a,{open:this.state.isShowUpdateModel,onClose:function(){e.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""})}},o.createElement(Ne,{style:$e.container},o.createElement(Ne,{style:$e.content},o.createElement(Ne,{style:Ge.row},o.createElement(Ie,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.uAmount>0?this.state.uAmount+"":"",onChange:function(t){return e.setState({uAmount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ne,{style:Ge.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.uDescription,onChange:function(t){return e.setState({uDescription:t.target.value})}})),o.createElement(Ne,{className:"center",style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onUpdate}),o.createElement(Re,{title:"CLEAR",onPress:function(){e.setState({uAmount:0,uDescription:""})}}))))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),ra={container:{width:"100%",paddingLeft:15,paddingRight:15}},ia=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:1,history:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:la.content},o.createElement(Lt,{data:[{title:"Payment",link:"payment"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ne,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(De,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},la.tab,la.activeTab):la.tab,onClick:function(){return e.setState({activeTab:1})}},"NEW"),o.createElement(De,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},la.tab,la.activeTab):la.tab,onClick:function(){return e.setState({activeTab:2})}},"HISTORY")),o.createElement(Ne,{className:"tab-content",style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?o.createElement(aa,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSave:this.props.onSave}):o.createElement(sa,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSearch:this.props.onSearch,onUpdate:this.props.onUpdate}))))}}]),t}(o.Component),la={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:W,"border-bottom-style":"solid",color:W}},ca=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e(rt(0,n,a,o))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new oe).post("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to save Payment.")},t)}}(t,n,0,o))},onSearch:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(new oe).post("payments/"+e,function(e,t){ee(e)?a(e.data):o(Q(t)?t:"Failed to load Payments.")},t)}}(t,n,0,o,s))},onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new oe).put("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to update Payment.")},t)}}(t,n,0,o))}}})(ia),ua=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,homeId:"",data:{}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.blocks,n=e.data,a="";if(n&&Q(n._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var s=t.data.filter(function(e,t){return e._id===n._blockId});s&&s.length>0&&(a=s[0].name)}return n&&Q(n._id)?o.createElement(Ne,null,o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Block: "+a)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Number: "+n.number)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Address: "+n.address)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"No of bed room(s): "+n.bedRoom)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Parking: "+n.parking)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Description: "+n.description))):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),ma=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Members.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return Q(e)?o.createElement(Ne,null,e.map(function(e,t){return o.createElement(Ne,{key:t,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},(Q(e.createdBy)?e.createdBy:"")+" on "+ht(e.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.name)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.age+", "+("M"===e.gender?"Male":"Female"))),Q(e.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.mobileNo)),Q(e.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.emailId)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.type)))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),da=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return Q(e)?o.createElement(Ne,null,e.map(function(e,t){return o.createElement(Ne,{key:t,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.type)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.number)))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),pa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Servents.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return Q(e)?o.createElement(Ne,null,e.map(function(e,t){return o.createElement(Ne,{key:t,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.name)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.age+", "+("M"===e.gender?"Male":"Female"))),Q(e.mobileNo)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.mobileNo)),Q(e.emailId)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.emailId)))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),ha=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[]}):n.setState({viewId:e,comments:t})},n.state={data:[],viewId:"",comments:[]},n.onView=n.onView.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return Q(t)?o.createElement(Ne,null,t.map(function(t,n){return o.createElement(Ne,{key:"tkt"+n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.createdBy+" from "+t._homeId+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.title)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.status)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(Le,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Ne,{style:fa.cmntsCnr},o.createElement(Ne,{style:fa.cmntsHdr},o.createElement(Le,{style:fa.cmntsHdrTxt},"Comments")),o.createElement(Ne,{style:fa.cmntsCnt},Q(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(Ne,{key:"tktcmt"+t,style:0===t?fa.cmntCnrFst:fa.cmntCnr},o.createElement(Ne,{style:fa.cmntHdr},o.createElement(Le,null,e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:fa.cmntCnt},o.createElement(Le,null,e.comment)))}):o.createElement(Le,{style:{padding:20}},"No Comments found!!!"))))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),fa={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:z},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},ga=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).loadData=function(){n.props.homeId.length>0&&(n.props.onToggleLoading(!0),n.props.onLoad(n.props.homeId,n.state.isActive,function(e){n.props.onToggleLoading(!1),n.setState({data:e})},function(e){n.props.onToggleLoading(!1),He.fail(Q(e)?e:"Failed to load Visitors.")}))},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.state={data:[],isActive:!0},n.loadData=n.loadData.bind(Object(ge.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(cn,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange})}}]),t}(o.Component),ya=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",transactions:[]}):n.setState({viewId:e,transactions:t})},n.getAmountPaid=function(e){var t=0;return Q(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,n){return t+=e.amount}),t},n.state={data:[],viewId:"",transactions:[]},n.onView=n.onView.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Payments.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return Q(t)?o.createElement(Ne,null,t.map(function(t,n){return o.createElement(Ne,{key:n,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ht(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Rs. "+t.amount+" for "+$.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+(Q(t.mode)?" "+t.mode:"")+(Q(t.type)?" "+t.type:""))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Amount Paid Rs. "+e.getAmountPaid(t.transactions))),Q(t.description)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{},onClick:function(){e.onView(t._id,t.transactions)}},o.createElement(Le,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Transactions"))),e.state.viewId===t._id&&o.createElement(Ne,{style:Ea.cmntsCnr},o.createElement(Ne,{style:Ea.cmntsHdr},o.createElement(Le,{style:Ea.cmntsHdrTxt},"Transactions")),o.createElement(Ne,{style:Ea.cmntsCnt},Q(e.state.transactions)?e.state.transactions.map(function(e,t){return o.createElement(Ne,{key:"tktcmt"+t,style:0===t?Ea.cmntCnrFst:Ea.cmntCnr},o.createElement(Ne,{style:Ea.cmntHdr},o.createElement(Le,null,e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:Ea.cmntCnt},o.createElement(Le,null,"Ref Id: "+e.txnRef)),o.createElement(Ne,{style:Ea.cmntCnt},o.createElement(Le,null,"Txn Id: "+e.txnId)),o.createElement(Ne,{style:Ea.cmntCnt},o.createElement(Le,null,"Amount: "+e.amount)),o.createElement(Ne,{style:Ea.cmntCnt},o.createElement(Le,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),Q(e.reason)&&o.createElement(Ne,{style:Ea.cmntCnt},o.createElement(Le,null,"Reason: "+e.reason)))}):o.createElement(Le,{style:{padding:20}},"No transactions found!!!"))))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),Ea={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:z},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},ba=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail(Q(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return Q(e)?o.createElement(Ne,null,e.map(function(e,t){return o.createElement(Ne,{key:t,style:Rt.row},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},e.createdBy+" on "+ht(e.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},e.title)),Q(e.description)&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,e.description)),Q(e.file)&&o.createElement(Ne,{style:Rt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:H+e.file},e.file)))})):o.createElement(Le,null,"No data found!!!")}}]),t}(o.Component),va=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).toggleLoading=function(e){n.setState({isLoading:e})},n.state={isLoading:!1,homeId:"",activeTab:1,data:{}},n.toggleLoading=n.toggleLoading.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({homeId:t}),t.length>0&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){e.setState({isLoading:!1}),t&&Q(t._id)?e.setState({data:t}):He.fail("Failed to load Home.")},function(t){e.setState({isLoading:!1}),He.fail(Q(t)?t:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return o.createElement("main",{style:Oa.content},o.createElement(Lt,{data:[{title:"Homes",link:"homes"},{title:"View Home",link:"view-home"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ne,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(De,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:1})}},o.createElement(Ce,{src:1===t?Pe.infoInv:Pe.info,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:2})}},o.createElement(Ce,{src:2===t?Pe.membersInv:Pe.members,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:3})}},o.createElement(Ce,{src:3===t?Pe.vehicleInv:Pe.vehicle,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:4===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:4})}},o.createElement(Ce,{src:4===t?Pe.serventInv:Pe.servent,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:5===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:5})}},o.createElement(Ce,{src:5===t?Pe.supportInv:Pe.support,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:6===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:6})}},o.createElement(Ce,{src:6===t?Pe.visitorsInv:Pe.visitors,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:7===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:7})}},o.createElement(Ce,{src:7===t?Pe.moneyInv:Pe.money,style:Oa.tabImage})),o.createElement(De,{className:"tab",style:8===this.state.activeTab?Object(y.a)({},Oa.tab,Oa.activeTab):Oa.tab,onClick:function(){return e.setState({activeTab:8})}},o.createElement(Ce,{src:8===t?Pe.documentInv:Pe.document,style:Oa.tabImage}))),o.createElement(Ne,{style:{flex:1,flexDirection:"column",padding:15}},1===t?o.createElement(ua,{blocks:this.props.blocks,data:this.state.data}):2===t?o.createElement(ma,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadMembers}):3===t?o.createElement(da,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVehicles}):4===t?o.createElement(pa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadServents}):5===t?o.createElement(ha,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadTickets}):6===t?o.createElement(ga,{appUser:this.props.appUser,user:this.props.user,homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVisitors}):7===t?o.createElement(ya,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadPayments}):o.createElement(ba,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadDocuments}))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Oa={content:{width:"100%"},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:W,"border-bottom-style":"solid",color:W},tabImage:{width:20,height:20}},Sa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(xn(t,n,a))},onLoadMembers:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("members/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadVehicles:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("vehicles/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadServents:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("servents/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadTickets:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("tickets/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Tickets.")})}}(t,n,a))},onLoadVisitors:function(t,n,a,o){return e(lt(0,t,n,a,o))},onLoadPayments:function(t,n,a){return e(rt(0,t,n,a))},onLoadDocuments:function(t,n,a){return e(function(e,t,n){return function(a){(new oe).get("documents/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(Q(e.message)?e.message:"Failed to load Documents.")})}}(t,n,a))}}})(va),wa=function(e,t,n,o){return{type:a.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}};function ja(e,t){try{return t>0?100*e/t:0}catch(n){return ae(n,"calc.percentage"),0}}var ka=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSave=function(){if(Q(n.state.topic)&&Q(n.state.description)&&ee(n.state.fromDate)&&ee(n.state.toDate)&&Q(n.state.pollOption.filter(function(e){return Q(e)}))){n.setState({isLoading:!0});var e={_id:n.state.id,topic:n.state.topic,description:n.state.description,isAllowMultiple:n.state.isAllowMultiple,isOneVotePerFlat:n.state.isOneVotePerFlat,isAnonymous:n.state.isAnonymous,fromDate:n.state.fromDate,toDate:n.state.toDate,options:n.state.pollOption.filter(function(e){return Q(e)})};n.props.onSave(n.props.user.client._id,e,n.props.polls.data,n.props.user,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),He.success("Poll saved successfully.")):He.fail("Failed to save pol.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Xe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.polls.data,n.props.user._id,function(e){n.setState({isLoading:!1}),!0===e?He.success("Poll removed successfully."):He.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})},n.loadVotes=function(){if(ee(n.state.showVotePoll)&&n.state.showVotePoll._id.length>0){var e=[];return n.state.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.state.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),o.createElement(Ne,{style:{padding:15}},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},n.state.showVotePoll.topic)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,n.state.showVotePoll.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},"Votes: "+n.state.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return o.createElement(Ne,{key:"pvo"+t,style:Rt.ele},o.createElement(Le,null,e.votes+" ("+ja(e.votes,n.state.showVotePoll.votes.length)+"%) - "+e.option))}))}return""},n.state={isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ge.a)(n)),n.onRemove=n.onRemove.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,null,!1===this.state.isEdit&&o.createElement(Re,{title:"ADD NEW",onPress:function(){e.setState({isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})}}),!0===this.state.isEdit&&0===this.state.id.length?o.createElement(Ne,{key:"p0",style:Object(y.a)({},Rt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Kn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ne,{style:Rt.ele},o.createElement(Kn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:this.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:this.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:this.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Options: ")),Q(this.state.pollOption)?this.state.pollOption.map(function(t,n){return o.createElement(Ne,{key:"pop"+n,style:Rt.ele},o.createElement(Ie,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(De,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))}):o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"No Option found!!!")),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{onClick:function(){if(!Q(e.state.pollOption.filter(function(e){return!Q(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Le,null,"Add More +"))),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:this.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):[],ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&Q(this.props.polls.data)?this.props.polls.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ne,{key:"p"+t._id,style:Object(y.a)({},Rt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ne,{style:Rt.ele},o.createElement(Ie,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Kn.a,{onChange:function(t){e.setState({fromDate:t})},value:e.state.fromDate})),o.createElement(Ne,{style:Rt.ele},o.createElement(Kn.a,{onChange:function(t){e.setState({toDate:t})},value:e.state.toDate})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:e.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:e.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(rn,{isActive:e.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Options: ")),Q(e.state.pollOption)?e.state.pollOption.map(function(t,n){return o.createElement(Ne,{key:"pop"+n,style:Rt.ele},o.createElement(Ie,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Be,Ge.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(De,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))}):o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"No Option found!!!")),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{onClick:function(){if(!Q(e.state.pollOption.filter(function(e){return!Q(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(Le,null,"Add More +"))),o.createElement(Ne,{style:Rt.ele},o.createElement(De,{style:{marginRight:25},onClick:e.onSave},o.createElement(Ce,{src:Pe.tick,style:_t.editIcon})),o.createElement(De,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(Ce,{src:Pe.cancel,style:_t.deleteIcon})))):o.createElement(Ne,{key:"p"+t._id,style:Object(y.a)({},Rt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,ht(t.fromDate)+" to "+ht(t.toDate))),o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:!0===t.isAllowMultiple?Ge.radioActive:Object(y.a)({},Ge.radio,{marginLeft:5})},o.createElement(Le,{style:!0===t.isAllowMultiple?Object(y.a)({},Ge.radioActiveText):Object(y.a)({},Ge.radioText)},"Allow Multiple Votes"))),o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Ge.radioActive):Object(y.a)({},Ge.radio,{marginLeft:5})},o.createElement(Le,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Ge.radioActiveText):Object(y.a)({},Ge.radioText)},"One Vote per Flat"))),o.createElement(Ne,{style:Rt.ele},o.createElement(Ne,{style:!0===t.isAnonymous?Object(y.a)({},Ge.radioActive):Object(y.a)({},Ge.radio,{marginLeft:5})},o.createElement(Le,{style:!0===t.isAnonymous?Object(y.a)({},Ge.radioActiveText):Object(y.a)({},Ge.radioText)},"Anonymous Voting"))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Options: ")),Q(t.options)?t.options.map(function(e,t){return o.createElement(Ne,{key:"po"+t,style:Rt.ele},o.createElement(Le,{key:"pot"+t,style:{width:"100%"}},e))}):o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{padding:10}},"No Option found!!!")),o.createElement(Ne,{style:Rt.ele},t.fromDate>new Date&&o.createElement(De,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:Q(t.options)?t.options:[]})}},o.createElement(Ce,{src:Pe.edit,style:_t.editIcon})),o.createElement(De,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(Ce,{src:Pe.delete,style:_t.deleteIcon})),o.createElement(Le,{className:"pointer",style:{color:V},onClick:function(){e.setState({showVotePoll:t})}},"View Votes")))}):o.createElement(Le,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No poll found!!!":"Loading..."),o.createElement(Je.a,{open:ee(this.state.showVotePoll)&&this.state.showVotePoll._id.length>0,onClose:function(){return e.setState({showVotePoll:{_id:""}})}},o.createElement(Ne,{style:$e.container},o.createElement(Ne,{style:$e.content},this.loadVotes()))),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Aa=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).loadVotes=function(e){var t=[];return e.options.map(function(n,a){return t.push({option:n,votes:e.votes.filter(function(e){return e.option===a}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,n){return o.createElement(Ne,{key:"pvo"+n,style:Rt.ele},o.createElement(Le,null,t.votes+" ("+ja(t.votes,e.votes.length)+"%) - "+t.option))})},n.onSelectOption=function(e,t){if(n.state.votePollId===e._id)if(Q(n.state.votes.filter(function(e){return e.option===t})))n.setState({votes:n.state.votes.filter(function(e){return e.option!==t})});else{var a=[];e.isAllowMultiple&&(a=n.state.votes),a.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votes:a})}else{var o=[];o.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votePollId:e._id,votes:o})}},n.onVote=function(e){n.state.votePollId===e&&Q(n.state.votes)?(n.setState({isLoading:!0}),n.props.onVote(e,n.state.votes,n.props.polls,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({votePollId:"",votes:[]}),He.success("Your vote saved successfully.")):He.fail("Failed to save your vote.")})):He.warn("Please select any option to vote.")};var a=new Date;return n.state={isLoading:!1,votePollId:"",votes:[],currentDate:new Date(a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear())},n.loadVotes=n.loadVotes.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,null,ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&Q(this.props.polls.data.filter(function(t){return Q(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}))?this.props.polls.data.filter(function(t){return Q(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}).map(function(t,n){return o.createElement(Ne,{key:"p"+t._id,style:Object(y.a)({},Rt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.description)),(!0!==t.isOneVotePerFlat||!Q(t.votes)||!Q(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&t.options.map(function(n,a){return o.createElement(Ne,{key:"popt"+a,style:Rt.ele},o.createElement(rn,{isActive:e.state.votePollId===t._id&&Q(e.state.votes.filter(function(e){return e.option===a})),text:n,onPress:function(){return e.onSelectOption(t,a)}}))}),(!0!==t.isOneVotePerFlat||!Q(t.votes)||!Q(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&o.createElement(Ne,{style:{marginTop:5,width:"100%"}},o.createElement(Re,{title:"Vote",onPress:function(){return e.onVote(t._id)},style:{width:"100%"}})),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},"Your Votes:")),Q(t.options)&&e.loadVotes(t))}):o.createElement(Le,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No active poll found!!!":"Loading..."),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),Na=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onReturnBack=function(e){Object(Xe.confirmAlert)({title:"Confirm to return back from outing",message:"Are you sure? You return back from this outing?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReturnBack(e,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),e?He.success("Successfully returned back."):He.fail("Failed to Return back.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1},n.onReturnBack=n.onReturnBack.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ne,null,this.props.appUser.role===X.USER&&(!ee(this.props.outings)||!Q(this.props.outings.data.filter(function(e){return!0!==e.isReturned})))&&o.createElement(Re,{title:"Go Outing",onPress:function(){e.props.history.push("new-outing")}}),ee(this.props.outings)&&this.props.outings.isUpToDate&&!this.props.outings.isError&&Q(this.props.outings.data)?this.props.outings.data.map(function(t,n){return o.createElement(Ne,{key:"o"+t._id,style:Object(y.a)({},Rt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+ft(t.createdAt))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},ft(t.fromDate)+" to "+ft(t.toDate))),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,{style:{fontWeight:"bold"}},t.place)),o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,t.address)),t.isReturned&&o.createElement(Ne,{style:Rt.ele},o.createElement(Le,null,"Returned on "+ft(t.returnedAt))),e.props.appUser.role!==X.USER&&o.createElement(Ne,{style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Le,null,"No one in the home")),e.props.appUser.role===X.USER&&!0!==t.isReturned&&o.createElement(Ne,{style:Object(y.a)({},Ge.saveBtn,{flexDirection:"row"})},o.createElement(Re,{title:"Return to Home",onPress:function(){e.onReturnBack(t._id)}})))}):o.createElement(Le,{style:{padding:20}},this.props.outings.isUpToDate?this.props.outings.isError?this.props.outings.errorMessage:"No Outings found!!!":"Loading..."),o.createElement(Me,{visible:this.state.isLoading}))}}]),t}(o.Component),xa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:!ee(n.props.user)||n.props.appUser.role!==X.ADMIN&&n.props.appUser.role!==X.MANAGER?2:1,isShowPoll:ee(n.props.user)&&(n.props.appUser.role===X.ADMIN||n.props.appUser.role===X.MANAGER||n.props.appUser.role===X.USER&&n.props.appUser.homeIndex>=0)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadAds(this.props.user.client._id,function(e){e||He.fail("Failed to load Ads.")}),this.state.isShowPoll&&this.props.onLoadPoll(this.props.user.client._id,this.props.appUser.role,function(e){e||He.fail("Failed to load Poll.")}),this.props.onLoadOuting(this.props.user.client._id,this.props.appUser.role===X.USER?this.props.user.homes[this.props.appUser.homeIndex]._id:"",function(e){e||He.fail("Failed to load Outing.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Ca.content},o.createElement(Lt,{data:[{title:"Notice",link:"notice"}]}),o.createElement(Ne,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ne,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},this.state.isShowPoll&&o.createElement(De,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:1})}},"POLL"),o.createElement(De,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:2})}},"ADS"),o.createElement(De,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:3})}},"OUTING")),o.createElement(Ne,{style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?o.createElement(ka,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onSave:this.props.onSavePoll,onRemove:this.props.onRemovePoll}):o.createElement(Aa,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onVote:this.props.onVote}):2===this.state.activeTab?o.createElement(Et,{data:this.props.ads.isUpToDate?this.props.ads.data:[],message:this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No data found!!!":"Loading..."}):3===this.state.activeTab?o.createElement(Na,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,outings:this.props.outings,onReturnBack:this.props.onReturnBack}):o.createElement(Et,{data:4===this.state.activeTab?this.props.remainders:this.props.complaints,message:"No data found!!!"}))))}}]),t}(o.Component),Ca={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:W,"border-bottom-style":"solid",color:W}},Ia=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,outings:e.Outings,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,n){return e(bn(t,n))},onLoadPoll:function(t,n,a){return e(function(e,t,n){return function(t){t(wa([],!1,!1,"")),(new oe).get("polls/"+e,function(e,a){ee(e)&&ee(e.data)?(t(wa(e.data,!0,!1,"")),n(!0)):n(!1)})}}(t,0,a))},onSavePoll:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&Q(t._id)?(new oe).put("poll/"+t._id,function(e,a){if(ee(e)&&Q(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].topic=t.topic,n[r].description=t.description,n[r].isAllowMultiple=t.isAllowMultiple,n[r].isOneVotePerFlat=t.isOneVotePerFlat,n[r].isAnonymous=t.isAnonymous,n[r].fromDate=t.fromDate,n[r].toDate=t.toDate,n[r].options=t.options,s(wa(ee(n)?n:[],!0,!1,"")),o(!0)}else o(!1)},t):(new oe).post("poll/"+e,function(e,r){ee(e)&&Q(e.data)?(t._id=e.data,t.createdBy=a.name,n.unshift(t),s(wa(ee(n)?n:[],!0,!1,"")),o(!0)):o(!1)},t)}}(t,n,a,o,s))},onRemovePoll:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new oe).delete("poll/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?(t=t.filter(function(t,n){return t._id!==e}),o(wa(ee(t)?t:[],!0,!1,"")),a(!0)):a(!1)},{Id:e,UserId:n})}}(t,n,a,o))},onVote:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(a){(new oe).post("poll/vote/"+e,function(t,o){if(ee(t)&&Q(t.data)){var r=n.data.findIndex(function(t){return t._id===e});if(n.data[r].votes=t.data,a(wa(n.data,!0,!1,"")),n.isUpToDate&&!n.isError&&Q(n.data)){var i=n.data,l=i.findIndex(function(t){return t._id===e});i[l].votes=t.data,a(wa(i,!0,!1,""))}s(!0)}else s(!1)},{votes:t})}}(t,n,a,0,0,r))},onLoadOuting:function(t,n,a){return e(function(e,t,n){return function(e){e(Gn([],!1,!1,"")),(new oe).get("outings"+(Q(t)?"/"+t:""),function(t,a){ee(t)&&ee(t.data)?(e(Gn(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onReturnBack:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new oe).delete("outing/return/"+e,function(o,s){if(ee(o)&&ee(o.data)&&!0===o.data){var r=n.data.findIndex(function(t){return t._id===e});n.data[r].isReturned=!0,n.data[r].returnedAt=new Date,t(Gn(n.data,!0,!1,"")),a(!0)}else a(!1)})}}(t,0,a,o))}}})(xa),Ua=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:Ta.content},o.createElement(Lt,{data:[{title:"Info",link:"info"}]}),o.createElement(Ne,{style:Object(y.a)({},Ge.container,{paddingLeft:10,paddingRight:10})},o.createElement(Ne,{className:"center",style:Ge.row},o.createElement(Le,{style:{color:V,fontWeight:"bold",textAlign:"center"}},this.props.user.client.name)),o.createElement(Ne,{className:"center",style:Ge.row},o.createElement(Le,{style:{color:V,fontWeight:"bold",textAlign:"center"}},this.props.user.client.description)),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Home users")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Maintenance Admin Payment")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Receive real-time notifications")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Visitor management")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Lodge any complaint related to your apartment and track")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,null,"Admin Users")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Create polls and gather the opinion of all Apartment residents")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"All details of your flat, staff who work in your flat, visitors coming to your flat")),o.createElement(Ne,{style:Ge.row},o.createElement(Le,{style:Ta.listItem},"Accounts  and much more..."))))}}]),t}(o.Component),Ta={content:{flex:1,width:"100%"},listItem:{marginLeft:15}},La=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(Ua),Da=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(Ne,{style:{flex:1,backgroundColor:G,padding:40}},o.createElement(Le,null,"Page not found!!!"))}}]),t}(o.Component),Ra=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).onToggleMenu=function(){n.setState({isMenuExpand:!n.state.isMenuExpand})},n.isUser=function(){return n.props.appUser.role===X.USER},n.isAdmin=function(){return n.props.appUser.role===X.ADMIN},n.isManager=function(){return n.props.appUser.role===X.MANAGER},n.isGateKeeper=function(){return n.props.appUser.role===X.GATEKEEPER},n.state={isLoading:!1,isMenuExpand:!1},n.onToggleMenu=n.onToggleMenu.bind(Object(ge.a)(n)),n.isUser=n.isUser.bind(Object(ge.a)(n)),n.isAdmin=n.isAdmin.bind(Object(ge.a)(n)),n.isManager=n.isManager.bind(Object(ge.a)(n)),n.isGateKeeper=n.isGateKeeper.bind(Object(ge.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ee(this.props.user)&&Q(this.props.user._id)||(this.setState({isLoading:!0}),this.props.getProfile(function(t,n){e.setState({isLoading:!1}),!0!==t&&He.fail("Failed to load Profile: "+n)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return!this.state.isLoading&&o.createElement(Ne,{style:_a.container},o.createElement(Qe,{appUser:this.props.appUser,user:this.props.user,isMenuExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu,onHomeChange:this.props.onHomeChange,onLogout:this.props.onLogout}),o.createElement(nt,{appUser:this.props.appUser,user:this.props.user,isExpand:this.state.isMenuExpand,onToggleMenu:this.onToggleMenu}),Q(this.props.appUser.role)&&!this.isUser()||Q(this.props.user.homes)?o.createElement(Ze.c,null,o.createElement(Ze.a,{path:"/",exact:!0,component:Ct}),this.isUser()&&o.createElement(Ze.a,{path:"/members",exact:!0,component:Mt}),this.isUser()&&o.createElement(Ze.a,{path:"/new-member",exact:!0,component:Ft}),this.isUser()&&o.createElement(Ze.a,{path:"/vehicles",exact:!0,component:Gt}),this.isUser()&&o.createElement(Ze.a,{path:"/new-vehicle",exact:!0,component:Kt}),this.isUser()&&o.createElement(Ze.a,{path:"/servents",exact:!0,component:Jt}),this.isUser()&&o.createElement(Ze.a,{path:"/new-servent",exact:!0,component:$t}),(this.isUser()||this.isAdmin()||this.isManager())&&o.createElement(Ze.a,{path:"/tickets",exact:!0,component:an}),this.isUser()&&o.createElement(Ze.a,{path:"/new-ticket",exact:!0,component:sn}),this.isUser()&&o.createElement(Ze.a,{path:"/visitors",exact:!0,component:dn}),(this.isAdmin()||this.isManager())&&o.createElement(Ze.a,{path:"/ads",exact:!0,component:wn}),(this.isAdmin()||this.isManager())&&o.createElement(Ze.a,{path:"/new-ad",exact:!0,component:kn}),(this.isAdmin()||this.isManager())&&o.createElement(Ze.a,{path:"/notification",exact:!0,component:Vn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/users",exact:!0,component:Nn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:Rn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/approve-users",exact:!0,component:Pn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/homes",exact:!0,component:Tn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/view-home/:id",exact:!0,component:Sa}),this.isAdmin()&&o.createElement(Ze.a,{path:"/edit-home/:id",exact:!0,component:Bn}),this.isAdmin()&&o.createElement(Ze.a,{path:"/blocks",exact:!0,component:ea}),this.isAdmin()&&o.createElement(Ze.a,{path:"/edit-block/:id",exact:!0,component:na}),(this.isAdmin()||this.isManager())&&o.createElement(Ze.a,{path:"/payment",exact:!0,component:ca}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&o.createElement(Ze.a,{path:"/all-visitors",exact:!0,component:Hn}),o.createElement(Ze.a,{path:"/notice",exact:!0,component:Ia}),this.isUser()&&o.createElement(Ze.a,{path:"/new-outing",exact:!0,component:zn}),o.createElement(Ze.a,{path:"/my-profile",exact:!0,component:gn}),this.props.user.role.split(",").length>0&&o.createElement(Ze.a,{path:"/my-role",exact:!0,component:En}),o.createElement(Ze.a,{path:"/my-documents",exact:!0,component:Xn}),o.createElement(Ze.a,{path:"/change-password",exact:!0,component:hn}),o.createElement(Ze.a,{path:"/info",exact:!0,component:La}),o.createElement(Ze.a,{component:Da})):o.createElement(Le,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager."),ee(this.props.user)&&Q(this.props.user._id)&&o.createElement(ot,null),o.createElement(Me,{visible:this.state.isLoading,text:"Loading..."}))}}]),t}(o.Component),_a={container:{flex:1,backgroundColor:G,alignItems:"flex-start",justifyContent:"flex-start"}},Pa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new oe).get("account/profile",function(n,a){if(ee(n)&&ee(n.data)&&Q(n.data._id)){t(ue(n.data)),t(ce(Q(n.data.homes)?0:-1));var o=n.data.role.split(",");Q(o)&&t(le(o[0])),(o.indexOf(X.ADMIN)>=0||o.indexOf(X.MANAGER)>=0)&&((new oe).get("members",function(e,n){ee(e)&&Q(e.data)&&t(me(e.data,!0,!1,""))}),(new oe).get("blocks/"+n.data.client._id,function(e,n){ee(e)&&Q(e.data)&&t(pe(e.data,!0,!1,""))})),(o.indexOf(X.ADMIN)>=0||o.indexOf(X.MANAGER)>=0||o.indexOf(X.GATEKEEPER)>=0)&&(new oe).get("homes/"+n.data.client._id,function(e,n){ee(e)&&Q(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(de(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,a)})}}(t))},onHomeChange:function(t,n){return e(function(e,t){return function(n){n(ce(e)),t(!0)}}(t,n))},onLogout:function(t){return e(se(t))}}})(Ra),Ma=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Q(sessionStorage.getItem("auth_token"))&&this.props.setLogin(!0)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.appUser.isLoggedIn?o.createElement(fe.a,null,o.createElement(Pa,null)):o.createElement(ze,null)}}]),t}(o.Component),Ba=Object(p.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(ie(e))}}(t))}}})(Ma),Fa=(n(119),n(120),n(121),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(p.a,{store:L},s.a.createElement(Ba,null),s.a.createElement(h.ToastsContainer,{store:h.ToastsStore,position:h.ToastsContainerPosition.TOP_RIGHT}))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Fa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,n){e.exports=n(122)}},[[71,1,2]]]);
//# sourceMappingURL=main.bf9f48b1.chunk.js.map