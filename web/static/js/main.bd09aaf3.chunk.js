(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n,s=a(0),o=a.n(s),r=a(22),i=a.n(r),l=a(4),c=a(5),m=a(7),u=a(6),d=a(8),p=a(10),f=a(23),h=a(29),E=a(77),g=a(1);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(n||(n={}));var y=function(e,t){return Object(g.a)({},e,{isLoggedIn:t})},b=function(e,t){return Object(g.a)({},e,{role:t})},v=function(e,t){return Object(g.a)({},e,{homeIndex:t})},w=function(e,t){return Object(g.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},N=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},S=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},O=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},C=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},A=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},x=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=function(e,t){return Object(g.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},U=function(e,t){return t},I=Object(h.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_LOGIN_STATUS:return y(e,t.payload);case n.SET_ROLE:return b(e,t.payload);case n.SET_HOME_INDEX:return v(e,t.payload);case n.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USER:return w(e,t.payload);case n.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_ADS:return N(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_POLLS:return S(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_OUTINGS:return O(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_DOCUMENTS:return k(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERS:return C(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_HOMES:return A(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERHOMES:return j(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_TICKETS:return x(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_BLOCKS:return T(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_GATE_NO:return U(e,t.payload)}return e}}),L=Object(h.e)(I,Object(h.d)(Object(h.a)(E.a))),R=a(24),D=a.n(R),_=a(40),P="https://nestadmin.herokuapp.com/",M=P+"image/",B=P+"file/",F="DD/MMM/YYYY",V="DD/MMM/YYYY hh:mm A",H="#0078d7",W="#0067b9",G="#FFFFFF",Y="#FF0000",K="#008000",z="#cce1f1",q="#e1e1e1",X="#000000",Z="#FFFFFF",J={USER:"USER",ADMIN:"ADMIN",GATEKEEPER:"GATEKEEPER",MANAGER:"MANAGER"},Q=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function $(e){return ee(e)&&e.length>0}function ee(e){return null!==e&&void 0!==e}function te(e){try{return ee(e)?JSON.stringify(e):""}catch(t){return ne(t,"JSON2String"),""}}function ae(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}function ne(e,t){console.log("Error:"+t+":"+e)}function se(e,t){13===(e.keyCode?e.keyCode:e.which)&&"function"===typeof t&&t()}var oe=function e(){var t=this;Object(l.a)(this,e),this.url="https://nestadmin.herokuapp.com/api/",this.get=function(e,a){t.fetch(e,"GET",a)},this.post=function(e,a,n){t.fetch(e,"POST",a,n)},this.delete=function(e,a,n){t.fetch(e,"DELETE",a,n)},this.patch=function(e,a,n){t.fetch(e,"PATCH",a,n)},this.put=function(e,a,n){t.fetch(e,"PUT",a,n)},this.upload=function(){var e=Object(_.a)(D.a.mark(function e(a,n,s){var o,r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return o=e.sent,e.next=5,t.getAS("client_id");case 5:return r=e.sent,e.next=8,t.getAS("user_id");case 8:i=e.sent,(l=new FormData).append("file",s.file,s.name),l.append("name",s.name),fetch(t.url+a,{method:"POST",headers:{Accept:"application/json","x-access-token":$(o)?"Bearer "+o:"","client-id":$(r)?""+r:"","user-id":$(i)?""+i:""},body:l}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(n,e,"Some problem occurs. Please contact administrator."):t.callback(n,null,e.message):t.callback(n,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(n,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(_.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(_.a)(D.a.mark(function e(a,n,s,o){var r,i,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return r=e.sent,e.next=5,t.getAS("client_id");case 5:return i=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,fetch(t.url+a,{method:n,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":$(r)?"Bearer "+r:"","client-id":$(i)?""+i:"","user-id":$(l)?""+l:""},body:ee(o)?te(o):null}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(s,e,"Some problem occurs. Please contact administrator."):t.callback(s,null,e.message):t.callback(s,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(s,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,a,n,s){return e.apply(this,arguments)}}(),this.callback=function(e,t,a){ee(e)&&"function"==typeof e&&e(t,a)}},re=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(le(!1)),t(me(-1)),t(he()),e(!0)}catch(a){e(!1)}}},ie=function(e){return{type:n.SET_GATE_NO,payload:e}},le=function(e){return{type:n.SET_LOGIN_STATUS,payload:e}},ce=function(e){return{type:n.SET_ROLE,payload:e}},me=function(e){return{type:n.SET_HOME_INDEX,payload:e}},ue=function(e){return{type:n.LOAD_USER,payload:e}},de=function(e,t,a,s){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},pe=function(e,t,a,s){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},fe=function(e,t,a,s){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},he=function(){return{type:n.RESET}},Ee=a(13),ge=a(2),ye=a(31),be=a(32);function ve(){var e=Object(ye.a)(["\n"]);return ve=function(){return e},e}function we(){var e=Object(ye.a)(["\n"]);return we=function(){return e},e}function Ne(){var e=Object(ye.a)(["\n"]);return Ne=function(){return e},e}function Se(){var e=Object(ye.a)(["\n"]);return Se=function(){return e},e}function Oe(){var e=Object(ye.a)(["\n"]);return Oe=function(){return e},e}function ke(){var e=Object(ye.a)(["\noverflow: auto;\n"]);return ke=function(){return e},e}function Ce(){var e=Object(ye.a)(["\n"]);return Ce=function(){return e},e}var Ae=be.a.div(Ce()),je=be.a.div(ke()),xe=be.a.img(Oe()),Te=be.a.input(Se()),Ue=be.a.textarea(Ne()),Ie=be.a.select(we()),Le=be.a.label(ve()),Re=function(e){var t=e.title,a=e.onPress,n=e.className,o=e.style;return s.createElement("input",{type:"button",className:"btn"+(n||" btn-primary"),value:t,onClick:function(){return a()},style:Object(g.a)({},o)})},De=function(e){return e.visible?s.createElement(Ae,{id:"loader"},s.createElement(Ae,{className:"spinner"})):null},_e=function e(){Object(l.a)(this,e)};_e.logo=M+"logo.png",_e.workInProgress=M+"work-in-progress.png",_e.username=M+"username.png",_e.password=M+"password.png",_e.mobile=M+"mobile.png",_e.email=M+"email.png",_e.loading=M+"loading.gif",_e.avatarMale=M+"avatar-male.png",_e.avatarFemale=M+"avatar-female.gif";var Pe={},Me=function e(){Object(l.a)(this,e)};Me.success=function(e){f.ToastsStore.success(e)},Me.fail=function(e){f.ToastsStore.error(e)},Me.warn=function(e){f.ToastsStore.warning(e)},Me.info=function(e){f.ToastsStore.info(e)},Me.show=function(e,t,a){f.ToastsStore.info(e)};var Be=Me,Fe=function(e){var t=e.isActive,a=e.text,n=e.onPress,o=e.key,r=e.className,i=ae();return s.createElement("span",{className:"mR-10"+(r||"")},s.createElement("input",{type:"radio",id:i,key:o,checked:t,onClick:n||function(){}}),$(a)&&s.createElement("label",{htmlFor:i,className:"mL-5 va-m"},a))},Ve={container:{},head:{flexDirection:"row",alignContent:"flex-start",backgroundColor:H,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},title:{flex:15,alignSelf:"flex-start",width:"auto","font-weight":"bold",fontSize:20,color:Z},close:{flex:1,alignSelf:"flex-end",marginBottom:5},row:{marginTop:3,marginBottom:3,paddingTop:5,paddingBottom:5},ele:{flex:1,width:"100%"},radio:{borderColor:q,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioText:{},radioActive:{backgroundColor:H,borderColor:H,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioActiveText:{color:Z},saveBtn:{marginTop:5,marginBottom:3,paddingTop:5,paddingBottom:5}},He=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.clientCode)&&$(a.state.name)&&a.state.age>0&&$(a.state.gender)&&$(a.state.mobileNo)&&$(a.state.emailId)){var e={_id:a.state.id,number:"",name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():"",type:a.state.type,role:a.state.role};a.props.onSignUp(e,a.state.clientCode,function(e){!0===e&&a.setState({id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})})}else Be.warn("Please fill all the required fields before Submit.")},a.state={id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{style:{flex:1}},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",className:"form-control",placeholder:"App Code",style:Object(g.a)({},Pe,Ve.ele),value:this.state.clientCode,onChange:function(t){return e.setState({clientCode:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",className:"form-control",placeholder:"Name",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"number",className:"form-control",placeholder:"Age",style:Object(g.a)({},Pe,Ve.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(g.a)({},Pe,Ve.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",className:"form-control",placeholder:"Email ID",style:Object(g.a)({},Pe,Ve.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),s.createElement(Fe,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SUBMIT",onPress:this.onSave})))}}]),t}(s.Component),We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onLogin=function(){$(a.state.userName)&&$(a.state.password)?(a.setState({message:"",isLoading:!0}),a.props.onLogin(a.state.userName,a.state.password,function(e,t){!0===e?a.setState({isLoading:!1,message:""}):a.setState({message:t,isLoading:!1})})):Be.warn("Enter Mobile Number and Password to continue.")},a.onForgetPassword=function(){a.setState({isForgetPass:!0,isSignUp:!1,mobileNumber:"",email:"",message:""})},a.onForgetPassSubmit=function(){$(a.state.mobileNumber)&&$(a.state.email)?(a.setState({message:"",isLoading:!0}),a.props.onForgetPassword(a.state.mobileNumber,a.state.email.toLowerCase(),function(e,t){!0===e?(Be.success("Password reset success. Login with New password sent to your Email. Change password after login."),a.setState({isLoading:!1,message:"",isForgetPass:!1,isSignUp:!1,userName:"",password:""})):a.setState({message:t,isLoading:!1})})):Be.warn("Enter Mobile Number and Email to continue.")},a.onCreateAccount=function(){a.setState({isForgetPass:!1,isSignUp:!0,mobileNumber:"",email:"",message:""})},a.onSignUp=function(e,t,n){a.setState({message:"",isLoading:!0}),a.props.onSignUp(e,t,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({isForgetPass:!1,isSignUp:!1,message:""}),Be.success("Sign Up success. Please wait till Manager approves then you can access your account."),n(!0)):(Be.fail($(t)?t:"Failed to Sign Up."),n(!1))})},a.state={userName:"",password:"",message:"",isLoading:!1,isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:""},a.onLogin=a.onLogin.bind(Object(ge.a)(a)),a.onForgetPassword=a.onForgetPassword.bind(Object(ge.a)(a)),a.onForgetPassSubmit=a.onForgetPassSubmit.bind(Object(ge.a)(a)),a.onCreateAccount=a.onCreateAccount.bind(Object(ge.a)(a)),a.onSignUp=a.onSignUp.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{className:"container",style:{backgroundColor:G,maxWidth:"270px"}},s.createElement(Ae,{className:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30,marginTop:5}},s.createElement(xe,{src:_e.logo,style:{width:150,height:150}})),this.state.isForgetPass&&s.createElement(Ae,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},s.createElement(Ae,{className:"col-12",style:Ge.row},s.createElement(xe,{className:"absolute",src:_e.mobile,style:Ge.txtIcon}),s.createElement(Te,{type:"text",className:"form-control",placeholder:"Registered Mobile Number",value:this.state.mobileNumber,style:Object(g.a)({},Pe,Ge.txt),onChange:function(t){return e.setState({mobileNumber:t.target.value})},onKeyPress:function(t){se(t,e.onForgetPassSubmit)}})),s.createElement(Ae,{className:"col-12",style:Object(g.a)({},Ge.row,{marginBottom:40})},s.createElement(xe,{className:"absolute",src:_e.email,style:Ge.txtIcon}),s.createElement(Te,{type:"text",className:"form-control",placeholder:"Registered Email",value:this.state.email,style:Object(g.a)({},Pe,Ge.txt),onChange:function(t){return e.setState({email:t.target.value})},onKeyPress:function(t){se(t,e.onForgetPassSubmit)}})),s.createElement(Re,{title:!1===this.state.isLoading?"Reset my password":"Loading...",onPress:this.onForgetPassSubmit}),s.createElement(Le,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?X:Y}},this.state.message),s.createElement(Ae,{style:{marginTop:15}},s.createElement(Le,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:W}},"Go back to Login."))),this.state.isSignUp&&s.createElement(s.Fragment,null,s.createElement(He,{onSignUp:this.onSignUp}),s.createElement(Ae,{style:{marginTop:15,textAlign:"center"}},s.createElement(Le,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:W}},"Go back to Login."))),!this.state.isForgetPass&&!this.state.isSignUp&&s.createElement(Ae,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},s.createElement(Ae,{className:"col-12",style:Ge.row},s.createElement(xe,{className:"absolute",src:_e.username,style:Ge.txtIcon}),s.createElement(Te,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(g.a)({},Pe,Ge.txt),value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})},onKeyPress:function(t){se(t,e.onLogin)}})),s.createElement(Ae,{className:"col-12",style:Object(g.a)({},Ge.row,{marginBottom:15})},s.createElement(xe,{className:"absolute",src:_e.password,style:Ge.txtIcon}),s.createElement(Te,{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,style:Object(g.a)({},Pe,Ge.txt),onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:function(t){se(t,e.onLogin)}})),s.createElement(Le,{className:"col-12 pointer",onClick:this.onForgetPassword,style:{marginBottom:15,textAlign:"right",color:W}},"Forgot Password?"),s.createElement(Re,{title:!1===this.state.isLoading?"LOGIN":"Loading...",onPress:this.onLogin}),s.createElement(Le,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?X:Y}},this.state.message),s.createElement(Ae,{className:"col-12",style:{marginTop:15,alignItems:"center",justifyContent:"center"}},s.createElement(Le,{className:"col-12",style:{marginBottom:5,textAlign:"center"}},"Dont have an account?"),s.createElement(Ae,{className:"col",style:{float:"left",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#000000",borderStyle:"solid",borderRadius:10}},s.createElement(Le,{style:{textAlign:"center",margin:"7px",cursor:"pointer"},onClick:this.onCreateAccount},"CREATE / JOIN YOUR FLAT")))),s.createElement(De,{visible:this.state.isLoading,text:""}))}}]),t}(s.Component),Ge={row:{marginBottom:25},txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11},txt:{flex:1,paddingLeft:25}},Ye=Object(p.b)(function(e,t){return{}},function(e){return{onLogin:function(t,a,n){return e(function(e,t,a){return function(n){var s=localStorage.getItem("fcm_token");(new oe).post("account/login",function(e,t){if(ee(e)&&ee(e.data)&&$(e.data.token)&&$(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(s){}n(le(!0)),a(!0,"")}else a(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:s,os:"web",osVersion:"web"})}}(t,a,n))},onForgetPassword:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).post("account/resetpassword",function(e,t){ee(e)&&ee(e.data)&&ee(e.data.data)?!0===e.data.data?a(!0,""):a(!1,e.data.message):a(!1,t)},{mobileNo:e,emailId:t})}}(t,a,n))},onSignUp:function(t,a,n){return e(function(e,t,a){return function(n){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new oe).post("account/signup",function(e,t){ee(e)&&ee(e.data)&&e.data.length>0?a(!0,""):a(!1,t)},e)}}(t,a,n))}}})(We),Ke=a(30),ze=a(11),qe=function(e){return s.createElement("div",{className:"header navbar"},s.createElement("div",{className:"header-container"},s.createElement("ul",{className:"nav-left"},s.createElement("li",null,s.createElement("a",{id:"sidebar-toggle",className:"sidebar-toggle",href:"javascript:void(0);"},s.createElement("i",{className:"ti-menu"}))),s.createElement("li",{className:"search-box"},s.createElement("a",{className:"search-toggle no-pdd-right",href:"javascript:void(0);"},s.createElement("i",{className:"search-icon ti-search pdd-right-10"}),s.createElement("i",{className:"search-icon-close ti-close pdd-right-10"}))),s.createElement("li",{className:"search-input"},s.createElement("input",{className:"form-control",type:"text",placeholder:"Search..."}))),s.createElement("ul",{className:"nav-right"},e.appUser.role===J.USER&&s.createElement("li",{className:"notifications dropdown"},s.createElement("span",{className:"counter bgc-red"},e.user.homes.length),s.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},s.createElement("i",{className:"fa fa-home"})),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",{className:"pX-20 pY-15 bdB"},s.createElement("i",{className:"fa fa-home pR-10"}),s.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Home(s)")),s.createElement("li",null,s.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.homes.map(function(t,a){return s.createElement("li",{key:"h"+a},s.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},s.createElement("div",{className:"peer peer-greed",onClick:function(){return t=a,void e.onHomeChange(t,function(e){});var t}},s.createElement("span",null,s.createElement("span",{className:e.appUser.homeIndex===a?"fw-500":"c-grey-600"},""+t.number)))))}))))),e.user.role.indexOf(",")>0&&s.createElement("li",{className:"notifications dropdown"},s.createElement("span",{className:"counter bgc-red"},e.user.role.split(",").length),s.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},s.createElement("i",{className:"ti-user"})),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",{className:"pX-20 pY-15 bdB"},s.createElement("i",{className:"ti-user pR-10"}),s.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Role(s)")),s.createElement("li",null,s.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.role.split(",").map(function(t,a){return s.createElement("li",{key:"r"+a},s.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},s.createElement("div",{className:"peer peer-greed"},s.createElement("span",null,s.createElement("span",{className:"tt-c "+(e.appUser.role===t?"fw-500":"c-grey-600")},""+t.toLowerCase())))))}))),s.createElement("li",{className:"pX-20 pY-15 ta-c bdT"},s.createElement("span",null,s.createElement(Ee.b,{className:"c-grey-600 cH-blue fsz-sm td-n",to:"my-role"},"Change Role ",s.createElement("i",{className:"ti-angle-right fsz-xs mL-10"})))))),s.createElement("li",{className:"notifications dropdown"},s.createElement("span",{className:"counter bgc-red"},"0"),s.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},s.createElement("i",{className:"ti-bell"})),s.createElement("ul",{className:"dropdown-menu"},s.createElement("li",{className:"pX-20 pY-15 bdB"},s.createElement("i",{className:"ti-bell pR-10"}),s.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Notification(s)")),s.createElement("li",null,s.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},s.createElement("li",null,s.createElement("a",{href:"",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},s.createElement("div",{className:"peer peer-greed"},s.createElement("span",null,s.createElement("span",{className:"c-grey-600"},"No notification found."))))))))),s.createElement("li",{className:"dropdown"},s.createElement("a",{href:"",className:"dropdown-toggle no-after peers fxw-nw ai-c lh-1","data-toggle":"dropdown"},s.createElement("div",{className:"peer mR-10"},s.createElement(xe,{className:"w-2r bdrs-50p",src:$(e.user.image)?e.user.image:"F"===e.user.gender.toLocaleUpperCase()?_e.avatarFemale:_e.avatarMale,alt:""})),s.createElement("div",{className:"peer"},s.createElement("span",{className:"fsz-sm c-grey-900"},e.user.name))),s.createElement("ul",{className:"dropdown-menu fsz-sm"},s.createElement("li",null,s.createElement(Ee.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-profile"},s.createElement("i",{className:"fa fa-user mR-10"}),s.createElement("span",null,"Profile"))),s.createElement("li",null,s.createElement(Ee.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-documents"},s.createElement("i",{className:"fa fa-file-text mR-10"}),s.createElement("span",null,"Documents"))),e.user.role.indexOf(",")>0&&s.createElement("li",null,s.createElement(Ee.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-role"},s.createElement("i",{className:"ti-user mR-10"}),s.createElement("span",null,"Role"))),s.createElement("li",null,s.createElement(Ee.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"change-password"},s.createElement("i",{className:"fa fa-key mR-10"}),s.createElement("span",null,"Password"))),s.createElement("li",{role:"separator",className:"divider"}),s.createElement("li",null,s.createElement("a",{href:"#",className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",onClick:function(){Object(ze.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){e.onLogout(function(e){!0===e?Be.success("Logout Success!"):Be.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})}},s.createElement("i",{className:"ti-power-off mR-10"}),s.createElement("span",null,"Logout"))))))))},Xe=[{title:"Home",icon:"c-blue-500 ti-home",path:"/"},{title:"Members",icon:"c-brown-500 fa fa-users",path:"/members",roles:[J.USER]},{title:"Vehicles",icon:"c-indigo-500 fa fa-car",path:"/vehicles",roles:[J.USER]},{title:"Servants",icon:"c-deep-purple-500 fa fa-female",path:"/servants",roles:[J.USER]},{title:"Tickets",icon:"c-orange-500 ti-headphone-alt",path:"/tickets",roles:[J.USER,J.ADMIN,J.MANAGER]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/visitors",roles:[J.USER]},{title:"Ads",icon:"c-teal-500 fa fa-bullhorn",path:"/ads",roles:[J.ADMIN,J.MANAGER]},{title:"Notification",icon:"c-red-500 ti-bell",path:"/notification",roles:[J.ADMIN,J.MANAGER]},{title:"Users",icon:"c-deep-purple-500 fa fa-users",path:"/users",roles:[J.ADMIN]},{title:"Homes",icon:"c-blue-700 fa fa-home",path:"/homes",roles:[J.ADMIN]},{title:"Blocks",icon:"c-brown-500 fa fa-building",path:"/blocks",roles:[J.ADMIN]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/all-visitors",roles:[J.ADMIN,J.MANAGER,J.GATEKEEPER]},{title:"Payment",icon:"c-indigo-500 fa fa-credit-card",path:"/payment",roles:[J.ADMIN,J.MANAGER]},{title:"Notice",icon:"c-blue-a400 ti-notepad",path:"/notice"},{title:"Settings",icon:"c-deep-orange-500 ti-settings",child:[{title:"My Profile",path:"/my-profile"},{title:"My Role",path:"/my-role",isMRole:!0},{title:"My Documents",path:"/my-documents"},{title:"Change Password",path:"/change-password"}]},{title:"Info",icon:"c-deep-purple-a700 ti-info-alt",path:"/info"}],Ze=a(15),Je=a(81),Qe=function(){var e=Ze(".scrollable");e.length>0&&e.each(function(e,t){new Je.a(t)})},$e=function(e){return Object(s.useEffect)(function(){Qe()}),o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"sidebar-inner"},o.a.createElement("div",{className:"sidebar-logo"},o.a.createElement("div",{className:"peers ai-c fxw-nw"},o.a.createElement("div",{className:"peer peer-greed"},o.a.createElement(Ee.b,{className:"sidebar-link td-n",to:"/"},o.a.createElement("div",{className:"peers ai-c fxw-nw"},o.a.createElement("div",{className:"peer"},o.a.createElement("div",{className:"logo"},o.a.createElement(xe,{src:_e.logo,className:"",style:{width:70,height:65,padding:"13px 15px"},alt:""}))),o.a.createElement("div",{className:"peer peer-greed"},o.a.createElement("h5",{className:"lh-1 mB-0 logo-text"},"Nest"))))),o.a.createElement("div",{className:"peer"},o.a.createElement("div",{className:"mobile-toggle sidebar-toggle"},o.a.createElement("a",{href:"",className:"td-n"},o.a.createElement("i",{className:"ti-arrow-circle-left"})))))),Xe&&Xe.length>0&&o.a.createElement("ul",{className:"sidebar-menu scrollable pos-r"},Xe.map(function(t,a){if(($(t.path)||$(t.child))&&(!$(t.roles)||t.roles.indexOf(e.appUser.role)>=0)&&(!t.isMRole||e.user.role.indexOf(",")>0))return o.a.createElement("li",{key:"nav-item-"+a,className:"nav-item"+($(t.child)?" dropdown":"")+(0===a?" mT-30":"")},o.a.createElement(Ee.b,{className:$(t.child)?"dropdown-toggle":"sidebar-link",to:$(t.path)?t.path:"#"},o.a.createElement("span",{className:"icon-holder"},o.a.createElement("i",{className:t.icon})),o.a.createElement("span",{className:"title"},t.title),$(t.child)&&o.a.createElement("span",{className:"arrow"},o.a.createElement("i",{className:"ti-angle-right"}))),$(t.child)&&o.a.createElement("ul",{className:"dropdown-menu"},t.child.map(function(e,t){return o.a.createElement("li",{key:"sub-nav-item-"+t},o.a.createElement(Ee.b,{className:"sidebar-link",to:$(e.path)?e.path:"#"},e.title))})))}))))},et=function(){return s.createElement("footer",{className:"bdT ta-c p-30 lh-0 fsz-sm c-grey-600"},s.createElement("span",null,"Copyright \xa9 Nest. All rights reserved."))},tt=function(e,t,a,n){return function(e){(new oe).get("payments"+($(t)?"/"+t:""),function(e,t){ee(e)&&ee(e.data)?a(e.data):n($(t)?t:"Failed to load Payments.")})}},at=function(e){return{type:n.LOAD_USER,payload:e}},nt=function(e,t,a,n,s){return function(e){(new oe).get("visitors"+($(t)?"/"+t:"")+"/"+a,function(e,t){ee(e)&&ee(e.data)?n(e.data):s(e&&$(e.message)?e.message:"Failed to load Visitors.")})}},st=function(e,t,a,n,s,o){return function(a){t&&$(t._id)?(new oe).put("visitor/"+t._id,function(e,t){ee(e)&&ee(e.data)&&e.data._id.length>0?s(e.data):o(e&&$(e.message)?e.message:"Failed to load Visitors.")},t):(new oe).post("visitor/"+e,function(e,t){ee(e)&&ee(e.data)&&e.data._id.length>0?s(e.data):o(e&&$(e.message)?e.message:"Failed to load Visitors.")},t)}},ot=function(e,t,a){return function(n){(new oe).get("visitor/search/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Visitors.")})}},rt=function(e,t){return function(a){(new oe).upload("upload",function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0,""):t(!1,a)},e)}},it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getTotalDue=function(){var e=0;return a.props.home.payments.map(function(t,a){var n=0;return t.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),e+=t.amount-n,1}),e},a.payNow=function(e,t){if(e&&e.length>0&&t&&t>0)if($(a.props.user.client.upi.id)&&$(a.props.user.client.upi.name)){var n=ae();a.setState({payment:{paymentId:e,amount:t,transactionRef:n}}),Be.warn("Payment is in progress. Please contact administrator.")}else Be.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else Be.warn("Amount should be more then 0 to proceed payment.")},a.successCallback=function(e){if(console.log("Payment Success...",e),e&&e.Status)if("SUCCESS"===e.Status&&e.responseCode&&"00"===e.responseCode){a.setState({isLoading:!0});var t={txnRef:e.txnRef,txnId:e.txnId,amount:a.state.payment.amount,status:"PAID",isSuccess:!0,reason:""};a.props.onPaymentUpdate(a.state.payment.paymentId,t,function(e){a.setState({isLoading:!1}),a.clearTxn(),!0===e?Be.success("Payment success."):Be.fail("Payment failed.")})}else a.txnFailure(e);else a.txnFailure(e)},a.failureCallback=function(e){a.txnFailure(e)},a.txnFailure=function(e){console.log("Payment Failure...",e);var t="";t=e&&e.Status?"FAILURE"===e.Status&&e.responseCode&&"ZM"===e.responseCode?"Payment failed because of wrong pin.":"FAILURE"===e.Status&&e.message&&e.message.length>0?"Payment failed because "+e.message:"Payment failed.":"Payment failed.",Be.fail(t),a.setState({isLoading:!0});var n={txnRef:a.state.payment.transactionRef,txnId:"",amount:a.state.payment.amount,status:"FAIL",isSuccess:!1,reason:t};a.props.onPaymentUpdate(a.state.payment.paymentId,n,function(e){a.setState({isLoading:!1}),a.clearTxn()})},a.clearTxn=function(){a.setState({payment:{paymentId:"",amount:0,transactionRef:""}})},a.state={isLoading:!1,payment:{paymentId:"",amount:0,transactionRef:""}},a.getTotalDue=a.getTotalDue.bind(Object(ge.a)(a)),a.payNow=a.payNow.bind(Object(ge.a)(a)),a.clearTxn=a.clearTxn.bind(Object(ge.a)(a)),a.txnFailure=a.txnFailure.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,null,s.createElement(Ae,{style:{margin:5}},s.createElement(Le,{style:{marginTop:2,fontWeight:"bold"}},"Total Due Amount: Rs "+this.getTotalDue())),s.createElement(je,null,$(this.props.home.payments)?this.props.home.payments.filter(function(e,t){var a=0;return $(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<e.amount}).map(function(t,a){var n=0;return $(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<t.amount?s.createElement(Ae,{key:"my-due"+a,style:0===a?lt.myDueFirst:lt.myDue},s.createElement(Ae,{style:{marginTop:4}},s.createElement(Le,null,"Due for: "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),s.createElement(Ae,{style:{width:"100%",marginTop:4,marginBottom:3}},s.createElement(Le,{style:{fontSize:17}},"Rs "+(t.amount-n))),s.createElement(Ae,{style:{width:"100%"}},s.createElement(Le,null,"Due Date: 15/"+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),s.createElement(Ae,{style:{marginTop:4}},s.createElement(Re,{title:"PAY NOW",onPress:function(){return e.payNow(t._id,t.amount-n)}}))):null}):s.createElement(Le,{style:{padding:20}},"No due found.")),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),lt={myDue:{margin:7,paddingLeft:15,borderLeftColor:q,borderLeftWidth:1},myDueFirst:{margin:7}},ct=a(37),mt=a.n(ct);function ut(e,t){try{return ee(e)?("string"!=typeof e&&e.toString(),$(t)||(t=F),mt()(e).format(t)):""}catch(a){return ne(a,"convert.toDateString"),""}}function dt(e,t){try{return ut(e,V)}catch(a){return ne(a,"convert.toDateTimeString"),""}}var pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.createElement(je,{style:{}},$(this.props.home.payments.filter(function(e,t){return $(e.transactions)&&$(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?this.props.home.payments.filter(function(e,t){return $(e.transactions)&&$(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var a=0,n=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount,0===t&&(n=e.createdAt),1}),s.createElement(Ae,{key:"my-his"+t,style:0===t?ft.myDueFirst:ft.myDue},s.createElement(Ae,{style:{marginTop:4}},s.createElement(Le,{style:{}},"Paid for: "+Q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),s.createElement(Ae,{style:{width:"100%",marginTop:4,marginBottom:3}},s.createElement(Le,{style:{fontSize:17}},"Rs "+a)),s.createElement(Ae,{style:{width:"100%"}},s.createElement(Le,null,"Paid On: "+ut(n))))}):s.createElement(Le,null,"No history found!"))}}]),t}(s.Component),ft={myDue:{margin:7,paddingLeft:15,borderLeftColor:q,borderLeftWidth:1},myDueFirst:{margin:7}},ht=function(e){var t=e.data,a=e.message;return $(t)?t.map(function(e,t){return s.createElement(Ae,{className:"bdB pB-3"},s.createElement(Ae,null,s.createElement(Le,{key:t,className:"fw-600"},e.title)),s.createElement(Ae,null,s.createElement(Le,{key:t},e.description)))}):$(a)?s.createElement(Le,null,a):null},Et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item w-100"},s.createElement(Ae,{className:"row gap-20"},s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.props.history.push("members")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Member(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-brown-500 fa fa-users fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-brown-50 c-brown-500"},this.props.home.members?this.props.home.members.length:0)))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.props.history.push("vehicles")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Vehicle(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-indigo-500 fa fa-car fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-indigo-50 c-indigo-500"},this.props.home.vehicles?this.props.home.vehicles.length:0)))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.props.history.push("servants")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Servant(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-deep-purple-500 fa fa-female fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-deep-purple-500"},"View all")))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.props.history.push("tickets")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Ticket(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-orange-500 ti-headphone-alt fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-orange-500"},"View all"))))))),s.createElement(Ae,{className:"row gap-20"},s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.props.history.push("visitors")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Visitor(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-pink-500 fa fa-id-card-o fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-pink-500"},"View all")))))))),s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Ae,{className:"tab-bar bgc-white p-20"},s.createElement("span",{className:"tab"+(1===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:1})}},"MY DUES"),s.createElement("span",{className:"tab"+(2===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:2})}},"ADVANCE"),s.createElement("span",{className:"tab"+(3===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:3})}},"HISTORY")),s.createElement(Ae,{className:"bgc-white p-20"},1===this.state.activeTab?s.createElement(it,{history:this.props.history,user:this.props.user,home:this.props.home,onPaymentUpload:this.props.onPaymentUpload,onPaymentUpdate:this.props.onPaymentUpdate}):2===this.state.activeTab?s.createElement(ht,{data:[],message:"No advance found!"}):3===this.state.activeTab?s.createElement(pt,{history:this.props.history,home:this.props.home}):4===this.state.activeTab?s.createElement(ht,{data:[],message:"Work in progress"}):[]))))}}]),t}(s.Component),gt=function(e){return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item w-100"},s.createElement(Ae,{className:"row gap-20"},s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("tickets")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Ticket(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-orange-500 ti-headphone-alt fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-orange-500"},"View all")))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("ads")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"ads")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-teal-500 fa fa-bullhorn fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-teal-500"},"View all")))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("notification")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Notification")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-red-500 ti-bell fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-red-500"},"View all")))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("all-visitors")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Visitor(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-pink-500 fa fa-id-card-o fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-pink-500"},"View all"))))))),s.createElement(Ae,{className:"row gap-20"},e.appUser.role===J.ADMIN&&s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("users")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"User(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-deep-purple-500 fa fa-users fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-deep-purple-50 c-deep-purple-500"},e.users.isUpToDate?e.users.isError?0:e.users.data.length:"Loading")))))),e.appUser.role===J.ADMIN&&s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("homes")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Home(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-blue-700 fa fa-home fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-700"},e.homes.isUpToDate?e.homes.isError?0:e.homes.data.length:"Loading")))))),e.appUser.role===J.ADMIN&&s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("blocks")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Block(s)")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-brown-500 fa fa-building fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-brown-50 c-brown-500"},e.blocks.isUpToDate?e.blocks.isError?0:e.blocks.data.length:"Loading")))))),s.createElement(Ae,{className:"col-md-3"},s.createElement(Ae,{className:"layers bd bgc-white p-20 cur-p",onClick:function(){return e.history.push("payment")}},s.createElement(Ae,{className:"layer w-100 mB-10"},s.createElement("h6",{className:"lh-1"},"Payment")),s.createElement(Ae,{className:"layer w-100"},s.createElement(Ae,{className:"peers ai-sb fxw-nw"},s.createElement(Ae,{className:"peer peer-greed"},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-indigo-500 fa fa-credit-card fa-2x"}))),s.createElement(Ae,{className:"peer"},s.createElement("span",{className:"d-ib lh-0 va-m c-indigo-500"},"View all"))))))))))},yt=a(17),bt=a(18),vt=a.n(bt),wt=a(85),Nt=a.n(wt),St={container:{height:"80%",marginTop:30,marginBottom:25,marginLeft:15,marginRight:15},head:{alignContent:"center"},title:{flex:1,alignContent:"center",color:X},close:{width:20,flex:1,justifyContent:"flex-end",alignContent:"flex-end",alignSelf:"flex-end"},content:{}},Ot=function(e){var t=e.isActive,a=e.text,n=e.onPress,o=e.key,r=e.className,i=ae();return s.createElement("span",{className:"mR-10"+(r||"")},s.createElement("input",{type:"checkbox",id:i,key:o||i,checked:t,className:"va-m",onClick:n||function(){}}),s.createElement("label",{htmlFor:i,className:"mL-5 va-m"},a))},kt={content:{backgroundColor:G},row:{alignItems:"flex-start",borderBottomColor:q,borderBottomWidth:1,"border-bottom-style":"solid",marginTop:5},ele:{alignItems:"flex-start",marginTop:1,marginBottom:3,padding:2}},Ct=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){a.setState({isZoomImage:e})},a.state={isZoomImage:!1,zoomImage:"",searchText:""},a.onToggleZoomImage=a.onToggleZoomImage.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.searchText;t=$(t)?t.toLowerCase():t;var a=$(t)&&$(this.props.data)?this.props.data.filter(function(e,a){return e.homeNumber.toLowerCase().indexOf(t)>=0||e.passCode.toLowerCase().indexOf(t)>=0||e.name.toLowerCase().indexOf(t)>=0}):this.props.data;return s.createElement(s.Fragment,null,s.createElement(Ae,{style:kt.row},s.createElement(Le,null,"No of "+(this.props.isActive?"Active":"")+" Visitors: "+this.props.data.length),!this.props.isSearch&&this.props.appUser.role!==J.GATEKEEPER&&s.createElement(Ot,{isActive:this.props.isActive,text:"Only Active Visitors",onPress:this.props.onActiveChange,className:"fr"})),$(this.props.data)&&s.createElement(Ae,{style:{width:"100%",marginTop:10,marginBottom:5}},s.createElement(Te,{type:"text",placeholder:"Enter passcode to search",className:"form-control",style:Object(g.a)({},Pe,Ve.ele,{display:"inline",width:"100%"}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}})),s.createElement(Ae,{style:At.cardContainer},$(a)?a.map(function(t,a){return s.createElement(Ae,{key:a,className:"fl",style:At.card},$(t.image)&&s.createElement(Ae,{className:"center"},s.createElement(xe,{src:B+t.image,className:"pointer",style:At.img,onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}})),s.createElement(Ae,{style:At.content},$(t.passCode)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold"},t.passCode)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold"},t.name+" ["+t.type+"]")),(t.age>0||$(t.gender))&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,(t.age>0?t.age:"")+(t.age>0&&$(t.gender)?", ":"")+($(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),s.createElement(Ae,{style:kt.ele},"To ",s.createElement(Le,{className:"bold"},t.homeNumber)," on ",s.createElement(Le,{className:"bold"},dt(t.createdAt))),!t.isEntered&&!t.isExit&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),t.personCount>0&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.personCount+" Person"+(t.personCount>1?"s":"")+("WALK"===t.vehicleType?" by WALK":" in "+t.vehicleType+($(t.vehicleNo)?" "+t.vehicleNo:"")))),!t.isApproved&&!t.isRejected&&!t.isEntered&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:{color:H}},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:{color:t.isApproved?K:Y}},t.isApproved?"APPROVED":"REJECTED"),s.createElement(Ae,null,"By "+t.approvedBy),s.createElement(Ae,null,"On "+dt(t.approvedAt))),t.isEntered&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),s.createElement(Ae,null,"On "+dt(t.enteredAt))),t.isApproved&&!t.isEntered&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:{color:Y}},"NOT ENTERED")),!t.isRejected&&t.isExit&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),s.createElement(Ae,null,"On "+dt(t.exitAt))),t.isEntered&&!t.isExit&&s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:{color:Y}},"STAYING IN")),!t.isEntered&&t.arriveAt&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold",style:{color:Y}},"Expected Arrival "+dt(t.arriveAt))),!e.props.isSearch&&e.props.appUser.role===J.GATEKEEPER&&s.createElement(Ae,{style:kt.ele,className:"center"},!t.isEntered&&!t.isRejected&&(!t.arriveAt||new Date(t.arriveAt).getDate()===mt()().toDate().getDate())&&s.createElement(Re,{title:"Enter",onPress:function(){e.props.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&s.createElement(Re,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.props.onExit(t._id)}})),!e.props.isSearch&&e.props.appUser.role===J.USER&&!t.isApproved&&!t.isRejected&&!t.isEntered&&s.createElement(Ae,{style:kt.ele,className:"center"},s.createElement(Re,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.props.onApprove(t._id)}}),s.createElement(Re,{title:"Reject",onPress:function(){e.props.onReject(t._id)}})),!e.props.isSearch&&e.props.appUser.role===J.USER&&$(t.passCode)&&!t.isEntered&&!t.isRejected&&s.createElement(Ae,{style:kt.ele,className:"center"},s.createElement(Re,{title:"Remove",onPress:function(){e.props.onRemove(t._id)}})),e.props.isSearch&&s.createElement(Ae,{style:kt.ele,className:"center"},s.createElement(Re,{title:"Select",onPress:function(){e.props.onSelect(t)}}))))}):s.createElement(Le,{style:{padding:20}},"No visitor found.")),s.createElement(yt.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},s.createElement(Ae,{className:"center"},s.createElement(xe,{src:B+this.state.zoomImage,style:{height:"50%",width:"50%"}}))))}}]),t}(s.Component);Ct.defaultProps={isSearch:!1,onActiveChange:function(){},onEnter:function(){},onExit:function(){},onApprove:function(){},onReject:function(){},onSelect:function(){},onRemove:function(){}};var At={cardContainer:{flex:1,width:"100%",padding:10,marginBottom:10},card:{flex:1,margin:15},img:{height:"25vh",margin:0,borderRadius:"50%",marginBottom:"-25px"},content:{flex:1,padding:10,paddingTop:"25px",borderColor:q,borderWidth:1,borderStyle:"solid",borderRadius:10}},jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onImageSelect=function(e){var t=e.target.files[0];if(t&&t.name){var n=t.name.split(".");if(n&&n.length>1){var s=ae();s+="."+n[n.length-1],a.setState({fileName:s});var o={file:t,type:t.type,name:s};a.props.onUpload(o,function(e,t){e||Be.fail(t||"Failed to upload file.")})}}},a.onSave=function(){if((a.props.appUser.role===J.USER||$(a.props.gateNo))&&(a.props.appUser.role!==J.USER||ee(a.state.arriveAt))&&!1===a.state.showHomes&&a.state.homeId.length>0&&$(a.state.name)&&a.state.personCount>0&&$(a.state.fileName)){var e,t=a.state.arriveAt;if(ee(t))ee(a.state.arriveAt)&&$(a.state.arriveAtTime)&&(e=a.state.arriveAtTime.split(":")),$(e)&&e.length>1?t.setHours(parseInt(e[0]),parseInt(e[1]),0,0):t.setHours(0,0,0,0);var n={_id:"",type:a.state.type,name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:"",arriveAt:t,personCount:a.state.personCount,vehicleType:a.state.vehicleType,vehicleNo:a.state.vehicleNo,image:a.state.fileName,passCode:"",gateNo:a.props.gateNo};n=Object.assign(n,{isUser:a.props.appUser.role===J.USER}),a.props.onToggleLoading(!0),a.props.onSave(a.state.homeId,n,a.props.user,a.props.appUser,function(e){a.onClear(),a.props.onToggleLoading(!1),a.props.appUser.role===J.USER?Be.success("Visitor Request created successfully. Please share the passcode("+e.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."):Be.success("Visitor created successfully. Notification sent to the home members for approval. If this visitor got approved from home member then allow him/her inside.")},function(e){a.props.onToggleLoading(!1),Be.fail("Failed to save visitor "+n.name+".")})}else Be.warn("Please fill Gate Number, Home, Name, People count and Image before "+(a.state.id.length>0?"Update":"Save")+".")},a.onClear=function(){a.setState({homeId:a.props.appUser.role===J.USER?a.state.homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:null,arriveAtTime:null,personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:"",showHomes:!1,homeSearchText:"",searchResult:[],isShowSearch:!1})},a.onSearch=function(){a.state.mobileNo.length>2&&(a.props.onToggleLoading(!0),a.props.onSearch(a.state.mobileNo,function(e){a.props.onToggleLoading(!1),a.setState({isShowSearch:!0,searchResult:e})},function(e){a.props.onToggleLoading(!1),Be.fail(e),a.setState({isShowSearch:!1,searchResult:[]})}))},a.state={homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:null,arriveAtTime:null,personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:"",showHomes:!1,homeSearchText:"",searchResult:[],isShowSearch:!1},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onClear=a.onClear.bind(Object(ge.a)(a)),a.onImageSelect=a.onImageSelect.bind(Object(ge.a)(a)),a.onSearch=a.onSearch.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.appUser.role===J.USER&&this.setState({homeId:this.props.user.homes[this.props.appUser.homeIndex]._id})}},{key:"render",value:function(){var e=this;return s.createElement(Ae,null,this.props.appUser.role===J.GATEKEEPER&&s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(g.a)({},Ve.ele,xt.ele,{flexDirection:"row",padding:12,borderWidth:1,borderColor:q,borderRadius:5}),value:this.state.homeSearchText,onChange:function(t){return e.setState({showHomes:!0,homeSearchText:t.target.value})}})),this.props.appUser.role===J.GATEKEEPER&&this.state.showHomes&&$(this.state.homeSearchText)&&this.props.homes&&this.props.homes.data.length>0&&s.createElement(je,{style:Object(g.a)({},Ve.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,a){return t.number.toLowerCase().indexOf(e.state.homeSearchText.toLowerCase())>=0}).map(function(t,a){return s.createElement(Le,{className:"pointer",key:"ho"+a,style:Object(g.a)({},xt.ele,{flexDirection:"column",margin:3,padding:6,backgroundColor:z}),onClick:function(){e.setState({homeSearchText:t.number,homeId:t._id,showHomes:!1})}},t.number)})),this.props.appUser.role===J.GATEKEEPER&&s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"VISITOR"===this.state.type,text:"Visitor",onPress:function(){return e.setState({type:"VISITOR"})}}),s.createElement(Fe,{isActive:"DELIVERY"===this.state.type,text:"Delivery",onPress:function(){return e.setState({type:"DELIVERY"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},xt.ele,Pe,Ve.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})},onKeyPress:function(t){se(t,e.onSearch)}}),s.createElement("span",{className:"icon-holder cur-p",onClick:this.onSearch},s.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},xt.ele,Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),this.props.appUser.role===J.USER&&s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Arrival At \xa0"),s.createElement(vt.a,{minDate:mt()().toDate(),maxDate:mt()().add(2,"d").toDate(),onChange:function(t){e.setState({arriveAt:t})},value:this.state.arriveAt}),s.createElement(Le,null,"\xa0"),s.createElement(Nt.a,{value:this.state.arriveAtTime,onChange:function(t){e.setState({arriveAtTime:t})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"number",placeholder:"Age",className:"form-control",maxLength:3,style:Object(g.a)({},xt.ele,Pe,Ve.ele,{width:"auto",display:"inline-block",marginRight:10}),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}}),s.createElement(Ae,{style:{display:"inline-block",width:"auto"}},s.createElement(Fe,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}}))),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"number",placeholder:"People Count",className:"form-control",style:Object(g.a)({},xt.ele,Pe,Ve.ele,{width:"auto",display:"inline-block",marginRight:10}),value:this.state.personCount>0?this.state.personCount+"":"",onChange:function(t){return e.setState({personCount:+t.target.value.replace(/[^0-9]/g,"")})}}),s.createElement(Ie,{className:"form-control",value:this.state.vehicleType,style:Object(g.a)({},xt.ele,Pe,Ve.ele,{display:"inline-block",width:"auto",marginRight:10}),onChange:function(t){return e.setState({vehicleType:t.target.value})}},s.createElement("option",{value:"WALK"},"WALK"),s.createElement("option",{value:"CYCLE"},"CYCLE"),s.createElement("option",{value:"BIKE"},"BIKE"),s.createElement("option",{value:"CAR"},"CAR"),s.createElement("option",{value:"VAN"},"VAN"),s.createElement("option",{value:"JEEP"},"JEEP"),s.createElement("option",{value:"TEMPO"},"TEMPO"),s.createElement("option",{value:"BUS"},"BUS"),s.createElement("option",{value:"TRUCK"},"TRUCK")),s.createElement(Te,{type:"text",placeholder:"Vehicle No",className:"form-control",style:Object(g.a)({},xt.ele,Pe,Ve.ele,{display:"inline-block",width:"auto"}),value:this.state.vehicleNo,onChange:function(t){return e.setState({vehicleNo:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:this.onImageSelect}),$(this.state.fileName)&&s.createElement(Le,{style:Object(g.a)({},xt.ele,{marginLeft:15})},this.state.fileName)),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{title:"SAVE",onPress:this.onSave,style:Object(g.a)({},xt.ele,{marginRight:10})}),s.createElement(Re,{title:"CLEAR",onPress:this.onClear,style:xt.ele})),this.state.isShowSearch&&s.createElement(yt.a,{open:this.state.isShowSearch,onClose:function(){return e.setState({isShowSearch:!1})}},s.createElement(Ae,{style:St.container},s.createElement(Ct,{user:this.props.user,appUser:this.props.appUser,data:this.state.searchResult,isActive:!1,isSearch:!0,onSelect:function(t){e.setState({isShowSearch:!1,searchResult:[],name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,vehicleType:t.vehicleType,vehicleNo:t.vehicleNo,fileName:t.image})}}))))}}]),t}(s.Component),xt={container:{width:"100%",paddingLeft:15,paddingRight:15},ele:{fontSize:17}},Tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).viewAllVisitors=function(){$(a.state.gateNo)?a.props.history.push("all-visitors"):Be.warn("Please enter Gate Number to view this page.")},a.viewAllTakeaways=function(){$(a.state.gateNo)?a.props.history.push("all-takeways"):Be.warn("Please enter Gate Number to view this page.")},a.state={gateNo:"",isLoading:!1},a.viewAllVisitors=a.viewAllVisitors.bind(Object(ge.a)(a)),a.viewAllTakeaways=a.viewAllTakeaways.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({gateNo:this.props.gateNo})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{className:""},s.createElement(Te,{type:"text",placeholder:"Gate Number",className:"form-control",style:{width:"auto"},value:this.state.gateNo,onChange:function(t){return e.setState({gateNo:t.target.value})},onBlur:function(){return e.props.onGateNoChanged(e.state.gateNo)}}),s.createElement(Le,{className:"fr pointer",onClick:this.viewAllTakeaways,style:Object(g.a)({},Ut.ele,{color:W,fontWeight:"bold",textAlign:"right"})},"View all Active Takeaways"),s.createElement(Le,{className:"fr pointer",onClick:this.viewAllVisitors,style:Object(g.a)({},Ut.ele,{color:W,fontWeight:"bold",textAlign:"right",marginRight:20})},"View all Active Visitors")),s.createElement(jt,{appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.state.gateNo,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.props.onSaveVisitor,onUpload:this.props.onUpload,onSearch:this.props.onSearchVisitor}),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Ut={content:{flex:1,width:"100%"},ele:{fontSize:17}},It=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.appUser.role===J.USER?this.props.appUser.homeIndex>=0&&$(this.props.user.homes)?s.createElement(Et,{history:this.props.history,user:this.props.user,home:this.props.user.homes[this.props.appUser.homeIndex],onPaymentUpload:function(t,a,n){return e.props.onPaymentUpload(t,a,e.props.user,n)},onPaymentUpdate:function(t,a,n){return e.props.onPaymentUpdate(t,a,e.props.appUser.homeIndex,e.props.user,n)}}):s.createElement(Ae,{id:"mainContent"},s.createElement(Le,{style:{margin:20}},"No home assigned to you. Please contact administrator/manager.")):this.props.appUser.role===J.ADMIN||this.props.appUser.role===J.MANAGER?s.createElement(gt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,users:this.props.users,homes:this.props.homes,blocks:this.props.blocks}):this.props.appUser.role===J.GATEKEEPER?s.createElement(Tt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.props.gateNo,onGateNoChanged:this.props.onGateNoChanged,onSaveVisitor:this.props.onSaveVisitor,onUpload:this.props.onUpload,onSearchVisitor:this.props.onSearchVisitor}):s.createElement(Ae,{id:"mainContent"},s.createElement(Le,{style:{margin:20}},"No role assigned to you. Please contact administrator/manager."))}}]),t}(s.Component),Lt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t(ie(e))}}(t))},onPaymentUpload:function(t,a,n,s){return e(function(e,t,a,n){return function(t){(new oe).post("paymentupload",function(e,s){ee(e)&&ee(e.data)&&e.data.approvalid>0?(t(at(a)),n(!0)):n(!1)},e)}}(t,0,n,s))},onPaymentUpdate:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(o){(new oe).post("payment/transaction/"+e,function(r,i){if(ee(r)&&ee(r.data)&&r.data.length>0){t._id=r.data;var l=n.homes[a].payments.findIndex(function(t){return t._id===e});n.homes[a].payments[l].transactions||(n.homes[a].payments[l].transactions=[]),n.homes[a].payments[l].transactions.push(t),o(at(n)),s(!0)}else s(!1)},t)}}(t,a,n,s,o))},onSaveVisitor:function(t,a,n,s,o,r){return e(st(t,a,0,0,o,r))},onUpload:function(t,a){return e(rt(t,a))},onSearchVisitor:function(t,a,n){return e(ot(t,a,n))}}})(It),Rt=function(e,t,a,n){return function(s){e&&e._id&&e._id.length>0?(new oe).put("member/"+e._id,function(o,r){if(ee(o)&&ee(o.data)&&o.data.length>0){var i=t.homes[a].members,l=i.findIndex(function(e){return e._id===o.data});i[l]._id=o.data,i[l].number=e.number,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,i[l].type=e.type,t.homes[a].members=i,s(Dt(t)),n(!0,"")}else n(!1,r)},e):(e=Object.assign(e,{password:e.mobileNo}),(new oe).post("member/"+t.homes[a]._id,function(o,r){if(ee(o)&&ee(o.data)&&o.data.length>0){e._id=o.data,e.createdBy=t.name;var i=t.homes[a].members;i.push(e),t.homes[a].members=i,s(Dt(t)),n(!0,"")}else n(!1,r)},e))}},Dt=function(e){return{type:n.LOAD_USER,payload:e}},_t=function(e,t,a,s){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},Pt=function(e){return s.createElement("div",{className:"mB-10"},s.createElement(Ee.b,{to:""},"Home"),e.data.map(function(t,a){return s.createElement(s.Fragment,null,s.createElement("span",{key:"bd"+a,className:"mL-10 mR-10"},"/"),a===e.data.length-1?s.createElement("span",{key:"bc"+a},t.title):s.createElement(Ee.b,{key:"bc"+a,to:"/"+t.link},t.title))}))},Mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.name)&&a.state.age>0&&$(a.state.gender)&&$(a.state.type)){a.setState({isLoading:!0});var e={_id:a.state.id,number:"",name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():"",type:a.state.type,role:a.state.role};a.props.onSave(e,a.props.user,a.props.homeIndex,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),Be.success("Member saved successfully.")):Be.fail($(t)?t:"Failed to save member.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.homeIndex,a.props.user,a.props.users,function(e){a.setState({isLoading:!1}),!0===e?Be.success("Member removed successfully."):Be.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Members",link:"members"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-member")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),$(this.props.user.homes[this.props.homeIndex].members)?this.props.user.homes[this.props.homeIndex].members.map(function(t,a){return!0===e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(g.a)({},Pe,Ve.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Fe,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===e.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Fe,{isActive:"OWNER"===e.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),s.createElement(Fe,{isActive:"TENANT"===e.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.type)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},"No member found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Bt=Object(p.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,s){return e(Rt(t,a,n,s))},onRemove:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(o){(new oe).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),o(Dt(a)),n&&!0===n.isUpToDate&&!1===n.isError&&$(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),o(_t(n.data,!0,!1,""))),s(!0)):s(!1)})}}(t,a,n,s,o))}}})(Mt),Ft=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.name)&&a.state.age>0&&$(a.state.gender)&&$(a.state.type)){a.setState({isLoading:!0});var e={_id:a.state.id,number:"",name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():"",type:a.state.type,role:a.state.role};a.props.onSave(e,a.props.user,a.props.homeIndex,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),Be.success("Member saved successfully.")):Be.fail($(t)?t:"Failed to save member.")})}else Be.warn("Please fill all the required fields before Save.")},a.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(g.a)({},Pe,Ve.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),s.createElement(Fe,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),Vt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,s){return e(Rt(t,a,n,s))}}})(Ft),Ht=function(e,t,a,n){return function(s){e&&$(e._id)?(new oe).put("vehicle/"+e._id,function(o,r){if(ee(o)&&$(o.data)){var i=t.homes[a].vehicles,l=i.findIndex(function(e){return e._id===o.data});i[l]._id=o.data,i[l].number=e.number,i[l].type=e.type,t.homes[a].vehicles=i,s(Wt(t)),n(!0)}else n(!1)},e):(new oe).post("vehicle/"+t.homes[a]._id,function(o,r){if(ee(o)&&$(o.data)){e._id=o.data,e.createdBy=t.name;var i=t.homes[a].vehicles;i.push(e),t.homes[a].vehicles=i,s(Wt(t)),n(!0)}else n(!1)},e)}},Wt=function(e){return{type:n.LOAD_USER,payload:e}},Gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.number)&&$(a.state.type)){a.setState({isLoading:!0});var e={_id:a.state.id,number:a.state.number,type:a.state.type};a.props.onSave(e,a.props.user,a.props.homeIndex,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",number:"",type:""}),Be.success("Vehicle saved successfully.")):Be.fail("Failed to save vehicle.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.user,a.props.homeIndex,function(e){a.setState({isLoading:!1}),!0===e?Be.success("Vehicle removed successfully."):Be.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,id:"",number:"",type:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Vehicles",link:"vehicles"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-vehicle")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),$(this.props.user.homes[this.props.homeIndex].vehicles)?this.props.user.homes[this.props.homeIndex].vehicles.map(function(t,a){return!0===e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Fe,{isActive:"TWO WHEELER"===e.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),s.createElement(Fe,{isActive:"FOUR WHEELER"===e.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",number:"",type:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.type)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.number)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,type:t.type})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},"No vehicle found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Yt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,s){return e(Ht(t,a,n,s))},onRemove:function(t,a,n,s){return e(function(e,t,a,n){return function(s){(new oe).delete("vehicle/"+e,function(o,r){ee(o)&&ee(o.data)&&!0===o.data?(t.homes[a].vehicles=t.homes[a].vehicles.filter(function(t,a){return t._id!==e}),s(Wt(t)),n(!0)):n(!1)})}}(t,a,n,s))}}})(Gt),Kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.number)&&$(a.state.type)){a.setState({isLoading:!0});var e={_id:a.state.id,number:a.state.number,type:a.state.type};a.props.onSave(e,a.props.user,a.props.homeIndex,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",number:"",type:""}),Be.success("Vehicle saved successfully.")):Be.fail("Failed to save vehicle.")})}else Be.warn("Please fill all the required fields before Save.")},a.state={isLoading:!1,id:"",number:"",type:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"TWO WHEELER"===this.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),s.createElement(Fe,{isActive:"FOUR WHEELER"===this.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),zt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,s){return e(Ht(t,a,n,s))}}})(Kt),qt=function(e,t,a){return function(n){(new oe).get("servants/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Servants.")})}},Xt=function(e,t,a){return function(n){t&&$(t._id)?(new oe).put("servant/"+t._id,function(e,t){ee(e)&&$(e.data)?a(!0):a(!1)},t):(new oe).post("servant/"+e,function(e,t){ee(e)&&$(e.data)?a(!0):a(!1)},t)}},Zt={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{},cmntsHdrTxt:{},cmntsCnt:{padding:15,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:q,borderBottomWidth:1,borderBottomColor:q,"border-bottom-style":"solid"},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderBottomWidth:1,borderBottomColor:q,"border-bottom-style":"solid"},cmntHdr:{},cmntCnt:{},addCmntCnt:{marginTop:5,marginBottom:5},newCmnt:{width:"100%",borderWidth:1,borderColor:q},saveBtn:{marginTop:5}},Jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.name)&&a.state.age>0&&$(a.state.gender)){a.setState({isLoading:!0});var e={_id:a.state.id,name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():""};a.props.onSave(a.props.user.homes[a.props.homeIndex]._id,e,function(e){if(a.setState({isLoading:!1}),!0===e){var t=a.state.data.findIndex(function(e){return e._id===a.state.id});a.state.data[t].name=a.state.name,a.state.data[t].age=a.state.age,a.state.data[t].gender=a.state.gender,a.state.data[t].mobileNo=a.state.mobileNo,a.state.data[t].emailId=a.state.emailId,a.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),Be.success("Servant saved successfully.")}else Be.fail("Failed to save servant.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,function(t){!0===t?(a.setState({isLoading:!1,data:a.state.data.filter(function(t,a){return t._id!==e}),viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),Be.success("Servant removed successfully.")):(a.setState({isLoading:!1}),Be.fail("Failed to remove servant."))})}},{label:"No",onClick:function(){}}]})},a.onView=function(e,t){a.state.viewId===e?a.setState({viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}):a.setState({viewId:e,takeaways:t,takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})},a.onCreateTakeaway=function(e){$(a.state.takeawayTitle)&&$(a.state.takeawayDesc)?(a.setState({isLoading:!0}),a.props.onCreateTakeaway(e,{_id:"",title:a.state.takeawayTitle,description:a.state.takeawayDesc,createdBy:a.props.user.name,createdAt:new Date,updatedBy:a.props.user._id,updatedAt:new Date},function(t){var n=a.state.data.findIndex(function(t){return t._id===e});a.state.data[n].takeaways.unshift({_id:t,title:a.state.takeawayTitle,description:a.state.takeawayDesc,createdAt:new Date,createdBy:a.props.user.name,updatedBy:a.props.user._id,updatedAt:new Date}),a.setState({isLoading:!1,takeawayTitle:"",takeawayDesc:""}),Be.success("Takeayway added successfully.")},function(e){a.setState({isLoading:!1}),Be.fail("Failed to add takeaway.")})):Be.warn("Please fill Takeaway title & description before Add.")},a.onUpdateTakeaway=function(e){$(a.state.editTakeawayTitle)&&$(a.state.editTakeawayDesc)?(a.setState({isLoading:!0}),a.props.onCreateTakeaway(e,{_id:a.state.editTakeawayId,title:a.state.editTakeawayTitle,description:a.state.editTakeawayDesc,createdBy:a.props.user.name,createdAt:new Date,updatedBy:a.props.user._id,updatedAt:new Date},function(t){var n=a.state.data.findIndex(function(t){return t._id===e}),s=a.state.data[n].takeaways.findIndex(function(e){return e._id===a.state.editTakeawayId});a.state.data[n].takeaways[s].title=a.state.editTakeawayTitle,a.state.data[n].takeaways[s].description=a.state.editTakeawayDesc,a.state.data[n].takeaways[s].updatedBy=a.props.user.name,a.state.data[n].takeaways[s].updatedAt=new Date,a.setState({isLoading:!1,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),Be.success("Takeayway updated successfully.")},function(e){a.setState({isLoading:!1}),Be.fail("Failed to update takeaway.")})):Be.warn("Please fill Takeaway title & description before Add.")},a.onRemoveTakeaway=function(e,t){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this takeaway?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemoveTakeaway(e,function(n){var s=a.state.data.findIndex(function(e){return e._id===t});a.state.data[s].takeaways=a.state.data[s].takeaways.filter(function(t,a){return t._id!==e}),!0===n?(a.setState({isLoading:!1,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewId:""}),Be.success("Takeaway removed successfully.")):(a.setState({isLoading:!1}),Be.fail("Failed to remove takeaway."))})}},{label:"No",onClick:function(){}}]})},a.state={data:[],isLoading:!1,isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a.onView=a.onView.bind(Object(ge.a)(a)),a.onCreateTakeaway=a.onCreateTakeaway.bind(Object(ge.a)(a)),a.onUpdateTakeaway=a.onUpdateTakeaway.bind(Object(ge.a)(a)),a.onRemoveTakeaway=a.onRemoveTakeaway.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Be.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Servants",link:"servants"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-servant")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),$(this.state.data)?this.state.data.map(function(t,a){return!0===e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(g.a)({},Pe,Ve.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Fe,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===e.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"})),s.createElement("span",{style:{},onClick:function(){e.onView(t._id,t.takeaways)}},s.createElement(Le,{className:"pointer",style:{color:W}},(e.state.viewId===t._id?"Hide":"View")+" Takeaways"))),e.state.viewId===t._id&&s.createElement(Ae,{style:Zt.cmntsCnr},s.createElement(Ae,{style:Zt.cmntsHdr},s.createElement(Le,{className:"bold",style:Zt.cmntsHdrTxt},"Takeaways")),s.createElement(Ae,{style:Zt.cmntsCnt},s.createElement(Ae,{style:Zt.addCmntCnt},s.createElement(Te,{type:"text",placeholder:"Takeaway Title",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt,{marginBottom:10}),value:e.state.takeawayTitle,onChange:function(t){return e.setState({takeawayTitle:t.target.value})}}),s.createElement(Ue,{placeholder:"Takeaway Description",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt),value:e.state.takeawayDesc,onChange:function(t){return e.setState({takeawayDesc:t.target.value})}}),s.createElement(Ae,{style:Zt.saveBtn},s.createElement(Re,{title:"ADD NEW TAKEAWAY",onPress:function(){return e.onCreateTakeaway(t._id)}}))),$(e.state.takeaways)?e.state.takeaways.map(function(a,n){return s.createElement(Ae,{key:"tkycmt"+n,style:0===n?Zt.cmntCnrFst:Zt.cmntCnr},s.createElement(Ae,{style:Zt.cmntHdr},s.createElement(Le,{className:"bold"},a.createdBy+" on "+dt(a.updatedAt))),s.createElement(Ae,{style:Zt.cmntCnt},e.state.editTakeawayId!==a._id||a.isExit?s.createElement(Le,null,a.title):s.createElement(Te,{type:"text",placeholder:"Takeaway Title",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt,{marginBottom:10}),value:e.state.editTakeawayTitle,onChange:function(t){return e.setState({editTakeawayTitle:t.target.value})}})),s.createElement(Ae,{style:Zt.cmntCnt},e.state.editTakeawayId!==a._id||a.isExit?s.createElement(Le,null,a.description):s.createElement(Ue,{placeholder:"Takeaway Description",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt),value:e.state.editTakeawayDesc,onChange:function(t){return e.setState({editTakeawayDesc:t.target.value})}})),a.isExit?s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,{style:{color:K}},"Exit by "+a.exitBy+" in Gate "+a.exitGateNo+" on "+dt(a.exitAt))):s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,{style:{color:Y}},"Still not exit.")),!a.isExit&&s.createElement(s.Fragment,null,e.state.editTakeawayId===a._id?s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return e.onUpdateTakeaway(t._id)}},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"}))):s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({editTakeawayId:a._id,editTakeawayTitle:a.title,editTakeawayDesc:a.description})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){e.onRemoveTakeaway(a._id,t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):s.createElement(Le,{style:{padding:20}},"No takeaway found."))))}):s.createElement(Le,{style:{padding:20}},"No servant found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Qt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onLoad:function(t,a,n){return e(qt(t,a,n))},onSave:function(t,a,n){return e(Xt(t,a,n))},onRemove:function(t,a){return e(function(e,t){return function(a){(new oe).delete("servant/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onCreateTakeaway:function(t,a,n,s){return e(function(e,t,a,n){return function(s){$(t._id)?(new oe).put("servant/takeaway/"+t._id,function(e,t){ee(e)&&$(e.data)?a(e.data):n(e&&$(e.message)?e.message:"Failed to update takeaway.")},t):(new oe).post("servant/takeaway/"+e,function(e,t){ee(e)&&$(e.data)?a(e.data):n(e&&$(e.message)?e.message:"Failed to create Takeaway.")},t)}}(t,a,n,s))},onRemoveTakeaway:function(t,a){return e(function(e,t){return function(a){(new oe).delete("servant/takeaway/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(Jt),$t=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onExit=function(e,t){Object(ze.confirmAlert)({title:"Confirm to Exit Servant with Takeaway",message:"Are you sure you wish to exit the servant with this takeaway things?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onExit(e,a.props.gateNo,function(n){if(!0===n){var s=a.state.data.findIndex(function(e){return e._id===t});a.state.data[s].takeaways=a.state.data[s].takeaways.filter(function(t){return t._id!==e}),a.setState({isLoading:!1}),Be.success("Servant exit with takeaway successfully.")}else a.setState({isLoading:!1}),Be.fail("Failed to exit servant with takeaway.")})}},{label:"No",onClick:function(){}}]})},a.state={data:[],isLoading:!1},a.onExit=a.onExit.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Be.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Takeaways",link:"all-takeaways"}]}),s.createElement(Ae,{className:"bgc-white p-20"},$(this.state.data)&&$(this.state.data.filter(function(e){return e.takeaways&&e.takeaways.length>0}))?this.state.data.filter(function(e){return e.takeaways&&e.takeaways.length>0}).map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold"},t.createdBy+" on "+dt(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),s.createElement(Ae,{style:Zt.cmntsCnr},s.createElement(Ae,{style:Zt.cmntsHdr},s.createElement(Le,{className:"bold",style:Zt.cmntsHdrTxt},"Takeaways")),s.createElement(Ae,{style:Zt.cmntsCnt},$(t.takeaways)?t.takeaways.map(function(a,n){return s.createElement(Ae,{key:"tkycmt"+n,style:0===n?Zt.cmntCnrFst:Zt.cmntCnr},s.createElement(Ae,{style:Zt.cmntHdr},s.createElement(Le,{className:"bold"},a.createdBy+" on "+dt(a.updatedAt))),s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,null,a.title)),s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,null,a.description)),e.props.appUser.role===J.GATEKEEPER&&s.createElement(Ae,{style:Object(g.a)({},Zt.cmntCnt,{marginTop:10})},!a.isExit&&s.createElement(Re,{title:"Exit",onPress:function(){e.onExit(a._id,t._id)}})))}):s.createElement(Le,{style:{padding:20}},"No takeaway found."))))}):s.createElement(Le,null,"No data found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),ea=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("servant/takeaways/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Takeaways.")})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).post("servant/exittakeaway/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0):a(!1)},{gateNo:t})}}(t,a,n))}}})($t),ta=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.name)&&a.state.age>0&&$(a.state.gender)){a.setState({isLoading:!0});var e={_id:a.state.id,name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():""};a.props.onSave(a.props.user.homes[a.props.homeIndex]._id,e,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),Be.success("Servant saved successfully.")):Be.fail("Failed to save servant.")})}else Be.warn("Please fill all the required fields before Save.")},a.state={isLoading:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Servants",link:"servants"},{title:"New Servant",link:"new-servant"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(g.a)({},Pe,Ve.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},onKeyPress:function(t){se(t,e.onSave)}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),aa=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n){return e(Xt(t,a,n))}}})(ta),na=function(e,t,a,n,s){return function(o){e&&e._id&&e._id.length>0?(new oe).put("ticket/"+e._id,function(a,r){if(ee(a)&&$(a.data)){if($(n.data)){var i=[],l=(i=n.data).findIndex(function(e){return e._id===a.data});i[l]._id=a.data,i[l].title=e.title,i[l].description=e.description,i[l].status=e.status,i[l].updatedBy=t.name,o(sa(i,!0,!1,""))}s(!0)}else s(!1)},e):(new oe).post("ticket/"+t.homes[a]._id,function(r,i){if(ee(r)&&$(r.data)){var l=[];$(n.data)&&((l=n.data).unshift({_id:r.data,_homeId:t.homes[a].number,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),o(sa(l,!0,!1,""))),s(!0)}else s(!1)},e)}},sa=function(e,t,a,s){return{type:n.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},oa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.title)&&$(a.state.description)){a.setState({isLoading:!0});var e={_id:a.state.id,title:a.state.title,description:a.state.description,status:a.state.status};a.props.onSave(e,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),Be.success("Ticket saved successfully.")):Be.fail("Failed to save ticket.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){a.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?Be.success("Ticket removed successfully."):Be.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})},a.onResolve=function(e){Object(ze.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onResolve(e,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){a.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?Be.success("Ticket resolved successfully."):Be.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})},a.onStart=function(e){Object(ze.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onStart(e,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){a.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?Be.success("Ticket started successfully."):Be.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})},a.onView=function(e,t){a.state.viewId===e?a.setState({viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}):a.setState({viewId:e,comments:t,comment:"",editCommentId:"",editComment:""})},a.onAddComment=function(e){$(a.state.comment)?(a.setState({isLoading:!0}),a.props.onAddComment(e,{_id:"",comment:a.state.comment,createdBy:a.props.user._id,createdByName:a.props.user.name,createdAt:new Date,updatedBy:a.props.user._id,updatedAt:new Date},a.props.appUser,a.props.user,a.props.tickets,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({comment:""}),Be.success("Comment added successfully.")):Be.fail("Failed to add comment.")})):Be.warn("Please fill comment before Add.")},a.onUpdateComment=function(e){$(a.state.editCommentId)&&$(a.state.editComment)?(a.setState({isLoading:!0}),a.props.onAddComment(e,{_id:a.state.editCommentId,comment:a.state.editComment,updatedBy:a.props.user._id,updatedAt:new Date},a.props.appUser,a.props.user,a.props.tickets,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({editCommentId:"",editComment:""}),Be.success("Comment updated successfully.")):Be.fail("Failed to update comment.")})):Be.warn("Please fill comment before update.")},a.onRemoveComment=function(e,t){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this comment?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemoveComment(e,t,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){!0===e?(a.setState({isLoading:!1,editCommentId:"",editComment:"",viewId:""}),Be.success("Comment removed successfully.")):(a.setState({isLoading:!1}),Be.fail("Failed to remove comment."))})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,data:[],isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a.onResolve=a.onResolve.bind(Object(ge.a)(a)),a.onStart=a.onStart.bind(Object(ge.a)(a)),a.onView=a.onView.bind(Object(ge.a)(a)),a.onAddComment=a.onAddComment.bind(Object(ge.a)(a)),a.onUpdateComment=a.onUpdateComment.bind(Object(ge.a)(a)),a.onRemoveComment=a.onRemoveComment.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.appUser.role===J.ADMIN||this.props.appUser.role===J.MANAGER?"":this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||Be.fail("Failed to load Tickets.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Tickets",link:"tickets"}]}),s.createElement(Ae,{className:"bgc-white p-20"},this.props.appUser.role===J.USER&&s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ticket")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),ee(this.props.tickets)&&this.props.tickets.isUpToDate&&!this.props.tickets.isError&&$(this.props.tickets.data)?this.props.tickets.data.map(function(t,a){return s.createElement(Ae,{key:"tkt"+a,style:kt.row},s.createElement(Ae,{className:"bold",style:kt.ele},s.createElement(Le,{className:"bold"},t.createdBy+" from "+t._homeId+" on "+dt(t.createdAt))),s.createElement(Ae,{style:kt.ele},e.state.isEdit&&e.state.id===t._id?s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}}):s.createElement(Le,null,t.title)),s.createElement(Ae,{style:kt.ele},e.state.isEdit&&e.state.id===t._id?s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}}):s.createElement(Le,null,t.description)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.status)),e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"}))):s.createElement(Ae,{style:kt.ele},e.props.appUser.role===J.USER&&s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),e.props.appUser.role===J.USER&&s.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"})),e.props.appUser.role===J.USER&&s.createElement("span",{style:{marginRight:25},onClick:function(){e.onResolve(t._id)}},s.createElement(Le,{className:"pointer",style:{color:W}},"RESOLVE")),(e.props.appUser.role===J.ADMIN||e.props.appUser.role===J.MANAGER)&&"INIT"===t.status&&s.createElement("span",{style:{marginRight:25},onClick:function(){e.onStart(t._id)}},s.createElement(Le,{className:"pointer",style:{color:W}},"START")),s.createElement("span",{style:{},onClick:function(){e.onView(t._id,t.comments)}},s.createElement(Le,{className:"pointer",style:{color:W}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&s.createElement(Ae,{style:Zt.cmntsCnr},s.createElement(Ae,{style:Zt.cmntsHdr},s.createElement(Le,{className:"bold",style:Zt.cmntsHdrTxt},"Comments")),s.createElement(Ae,{style:Zt.cmntsCnt},s.createElement(Ae,{style:Zt.addCmntCnt},s.createElement(Ue,{placeholder:"Comment Text",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt),value:e.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),s.createElement(Ae,{style:Zt.saveBtn},s.createElement(Re,{title:"ADD COMMENT",onPress:function(){return e.onAddComment(t._id)}}))),$(e.state.comments)?e.state.comments.map(function(a,n){return s.createElement(Ae,{key:"tktcmt"+n,style:0===n?Zt.cmntCnrFst:Zt.cmntCnr},s.createElement(Ae,{style:Zt.cmntHdr},s.createElement(Le,{className:"bold"},a.createdByName+" on "+dt(a.updatedAt))),s.createElement(Ae,{style:Zt.cmntCnt},e.state.editCommentId===a._id?s.createElement(Ue,{placeholder:"Comment Text",className:"form-control",style:Object(g.a)({},Pe,Zt.newCmnt),value:e.state.editComment,onChange:function(t){return e.setState({editComment:t.target.value})}}):s.createElement(Le,null,a.comment)),a.createdBy===e.props.user._id&&s.createElement(s.Fragment,null,e.state.editCommentId===a._id?s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return e.onUpdateComment(t._id)}},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({editCommentId:"",editComment:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"}))):s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({editCommentId:a._id,editComment:a.comment})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){e.onRemoveComment(a._id,t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):s.createElement(Le,{style:{padding:20}},"No comment found."))))}):s.createElement(Le,{style:{padding:20}},this.props.tickets.isUpToDate?this.props.tickets.isError?this.props.tickets.errorMessage:"No ticket found.":"Loading..."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),ra=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(sa([],!1,!1,"")),(new oe).get("tickets"+($(t)?"/"+t:""),function(t,n){ee(t)?(e(sa(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onSave:function(t,a,n,s,o){return e(na(t,a,n,s,o))},onRemove:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(t){(new oe).delete("ticket/"+e,function(a,o){ee(a)&&ee(a.data)&&!0===a.data?($(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(sa(n.data,!0,!1,""))),s(!0)):s(!1)})}}(t,0,0,s,o))},onResolve:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(t){(new oe).delete("ticket/resolve/"+e,function(a,o){ee(a)&&ee(a.data)&&!0===a.data?($(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(sa(n.data,!0,!1,""))),s(!0)):s(!1)})}}(t,0,0,s,o))},onStart:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(t){(new oe).put("ticket/start/"+e,function(a,o){if(ee(a)&&ee(a.data)&&!0===a.data){if($(n.data)){var r=[],i=(r=n.data).findIndex(function(t){return t._id===e});r[i].status="IN-PROGRESS",t(sa(r,!0,!1,""))}s(!0)}else s(!1)},{status:"IN-PROGRESS"})}}(t,0,0,s,o))},onAddComment:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(a){$(t._id)?(new oe).put("ticket/comment/"+t._id,function(n,r){if(ee(n)&&$(n.data)){t.createdAt=new Date;var i=[];if($(s.data)){var l=(i=s.data).findIndex(function(t){return t._id===e}),c=i[l].comments.findIndex(function(e){return e._id===t._id});i[l].comments[c].comment=t.comment,i[l].comments[c].updatedBy=t.updatedBy,i[l].comments[c].updatedAt=t.updatedAt,a(sa(i,!0,!1,""))}o(!0)}else o(!1)},t):(new oe).post("ticket/comment/"+e,function(n,r){if(ee(n)&&$(n.data)){t._id=n.data,t.createdAt=new Date;var i=[];if($(s.data)){var l=(i=s.data).findIndex(function(t){return t._id===e});i[l].comments.unshift(t),a(sa(i,!0,!1,""))}o(!0)}else o(!1)},t)}}(t,a,0,0,o,r))},onRemoveComment:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(a){(new oe).delete("ticket/comment/"+e,function(n,r){if(ee(n)&&ee(n.data)&&!0===n.data){if($(s.data)){var i=s.data.findIndex(function(e){return e._id===t});s.data[i].comments=s.data[i].comments.filter(function(t,a){return t._id!==e}),a(sa(s.data,!0,!1,""))}o(!0)}else o(!1)})}}(t,a,0,0,o,r))}}})(oa),ia=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.title)&&$(a.state.description)){a.setState({isLoading:!0});var e={_id:a.state.id,title:a.state.title,description:a.state.description,status:a.state.status};a.props.onSave(e,a.props.user,a.props.appUser.homeIndex,a.props.tickets,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",title:"",description:"",status:"INIT"}),Be.success("Ticket saved successfully.")):Be.fail("Failed to save ticket.")})}else Be.warn("Please fill all the required fields before Save.")},a.state={isLoading:!1,id:"",title:"",description:"",status:"INIT"},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),this.props.appUser.role===J.USER?s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){se(t,e.onSave)}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))):s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings->My Role and try again."))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),la=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,a,n,s,o){return e(na(t,a,n,s,o))}}})(ia),ca=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){a.setState({isLoading:!0}),a.props.onLoad(a.props.user.client._id,a.props.user.homes[a.props.appUser.homeIndex]._id,a.state.isActive,function(e){a.setState({isLoading:!1,data:e})},function(e){a.setState({isLoading:!1}),Be.fail(e)})},a.onActiveChange=function(){a.setState({isActive:!a.state.isActive},a.loadData)},a.onApprove=function(e){Object(ze.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onApprove(e,function(t){if(a.setState({isLoading:!1}),!0===t){var n=a.state.data.findIndex(function(t){return t._id===e});a.state.data[n].isApproved=!0,a.state.data[n].approvedBy=a.props.user.name,a.state.data[n].approvedAt=new Date,a.setState({}),Be.success("Visitor approved successfully.")}else Be.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},a.onReject=function(e){Object(ze.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onReject(e,function(t){if(a.setState({isLoading:!1}),!0===t){var n=a.state.data.findIndex(function(t){return t._id===e});a.state.data[n].isRejected=!0,a.state.data[n].approvedBy=a.props.user.name,a.state.data[n].approvedAt=new Date,a.setState({}),Be.success("Visitor rejected successfully.")}else Be.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to Remove Visitor",message:"Are you sure you wish to remove visitor?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,function(t){a.setState({isLoading:!1}),!0===t?(a.setState({data:a.state.data.filter(function(t){return t._id!==e})}),Be.success("Visitor removed successfully.")):Be.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})},a.onSave=function(e,t,n,s,o,r){a.props.onSave(e,t,n,s,function(e){o(e),a.state.data.unshift(e),a.setState({passCode:e.passCode,isRequestNew:!1})},function(e){r(e)})},a.state={data:[],isActive:!0,isRequestNew:!1,isLoading:!1,passCode:""},a.loadData=a.loadData.bind(Object(ge.a)(a)),a.onActiveChange=a.onActiveChange.bind(Object(ge.a)(a)),a.onApprove=a.onApprove.bind(Object(ge.a)(a)),a.onReject=a.onReject.bind(Object(ge.a)(a)),a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Visitors",link:"visitors"}]}),s.createElement(Ae,{className:"bgc-white p-20"},this.props.appUser.role===J.USER&&s.createElement(Ae,{style:Object(g.a)({},Ve.row,{textAlign:"right"})},s.createElement(Le,{className:"pointer",onClick:function(){return e.setState({isRequestNew:!e.state.isRequestNew})},style:{color:W,fontWeight:"bold",textAlign:"right"}},this.state.isRequestNew?"< Back to Visitors":"Request for a New Visitor")),!this.state.isRequestNew&&s.createElement(Ct,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange,onApprove:this.onApprove,onReject:this.onReject,onRemove:this.onRemove}),this.state.isRequestNew&&s.createElement(jt,{appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.props.gateNo,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.onSave,onUpload:this.props.onUpload,onSearch:this.props.onSearch}),$(this.state.passCode)&&s.createElement(yt.a,{open:$(this.state.passCode),onClose:function(){return e.setState({passCode:""})}},s.createElement(Ae,{style:St.container},s.createElement(Ae,{style:Ve.row},"Visitor Request created successfully. Please share the passcode("+this.state.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."),s.createElement(Ae,{style:Object(g.a)({},Ve.row,{textAlign:"center",fontSize:30,fontWeight:"bold",color:W})},this.state.passCode))),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),ma=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,s,o){return e(nt(0,a,n,s,o))},onApprove:function(t,a){return e(function(e,t){return function(a){(new oe).get("visitor/approve/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new oe).get("visitor/reject/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onRemove:function(t,a){return e(function(e,t){return function(a){(new oe).delete("visitor/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onSave:function(t,a,n,s,o,r){return e(st(t,a,0,0,o,r))},onUpload:function(t,a){return e(rt(t,a))},onSearch:function(t,a,n){return e(ot(t,a,n))}}})(ca),ua=a(48),da=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,s){return e(function(e,t,a,n){return function(s){(new oe).post("account/changepassword/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0,""):n(!1,t)},{password:t,newPassword:a})}}(t,a,n,s))},onLogout:function(t){return e(re(t))}}})(function(e){var t=Object(s.useState)(!1),a=Object(ua.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),l=Object(ua.a)(i,2),c=l[0],m=l[1],u=Object(s.useState)(""),d=Object(ua.a)(u,2),p=d[0],f=d[1],h=Object(s.useState)(""),E=Object(ua.a)(h,2),y=E[0],b=E[1],v=function(){if($(c)&&$(p)&&$(y))if(p===y){var t=function(e){var t=/[A-Z]/,a=/[a-z]/,n=/[0-9]/,s=/[!|@|#|$|%|^|&|*|(|)|-|_]/,o="";if(e.length<6)return o="New Password not long enough!";for(var r=0,i=0,l=0,c=0,m=0;m<e.length;m++)t.test(e[m])?r++:a.test(e[m])?i++:n.test(e[m])?l++:s.test(e[m])&&c++;return r<1||i<1||l<1||c<1?o="New Password dose not match with password policy!":o}(p);t.length<1?(r(!0),e.onUpdate(e.user._id,c,p,function(t,a){r(!1),!0===t?(Be.success("Password updated successfully. Please login with your new password."),e.onLogout(function(e){})):Be.fail(a)})):Be.warn(t)}else Be.warn("New Password and Confirm New Password not matchs.");else Be.warn("Please fill all the fields before Update.")};return o.a.createElement(Ae,{id:"mainContent"},o.a.createElement(Ae,{className:"row gap-20 masonry pos-r"},o.a.createElement(Ae,{className:"masonry-item col-12"},o.a.createElement(Pt,{data:[{title:"Change Password",link:"change-password"}]}),o.a.createElement(Ae,{className:"bgc-white p-20"},o.a.createElement(Ae,{style:Ve.row},o.a.createElement(Te,{type:"password",placeholder:"Password",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:c,onChange:function(e){return m(e.target.value)}})),o.a.createElement(Ae,{style:Ve.row},o.a.createElement(Te,{type:"password",placeholder:"New Password",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:p,onChange:function(e){return f(e.target.value)}})),o.a.createElement(Ae,{style:Ve.row},o.a.createElement(Te,{type:"password",placeholder:"Confirm New Password",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:y,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){se(e,v)}})),o.a.createElement(Ae,{className:"center",style:Ve.saveBtn},o.a.createElement(Re,{title:"UPDATE",onPress:v})),o.a.createElement(Ae,{style:{marginTop:7}},o.a.createElement(Le,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),o.a.createElement(De,{visible:n}))))}),pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){$(a.state.name)&&$(a.state.mobileNo)&&$(a.state.emailId)?(a.setState({isLoading:!0}),a.props.onUpdate(a.props.user._id,a.state.name,a.state.mobileNo,a.state.emailId?a.state.emailId.toLowerCase():"",a.props.user,function(e,t){a.setState({isLoading:!1}),!0===e?Be.success("Profile updated successfully."):Be.fail(t)})):Be.warn("Please fill all the fields before Update.")},a.state={isLoading:!1,name:"",mobileNo:"",emailId:""},a.onUpdate=a.onUpdate.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.user.name,mobileNo:this.props.user.mobileNo,emailId:this.props.user.emailId})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"My Profile",link:"my-profile"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},onKeyPress:function(t){se(t,e.onUpdate)}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"UPDATE",onPress:this.onUpdate}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),fa=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(r){(new oe).put("account/profile/"+e,function(e,i){ee(e)&&ee(e.data)&&!0===e.data?(s.name=t,s.mobileNo=a,s.emailId=n,r(ue(s)),o(!0,"")):o(!1,i)},{name:t,mobileNo:a,emailId:n})}}(t,a,n,s,o,r))}}})(pa),ha=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){$(a.state.role)?(a.setState({isLoading:!0}),a.props.onUpdate(a.state.role,function(e,t){a.setState({isLoading:!1}),!0===e?(Be.success("Role updated successfully."),a.props.history.push("/")):Be.fail(t)})):Be.warn("Please select role before Update.")},a.state={isLoading:!1,role:""},a.onUpdate=a.onUpdate.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({role:this.props.appUser.role})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"My Role",link:"my-role"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Ie,{className:"form-control",value:this.state.role,style:Ve.ele,onChange:function(t){return e.setState({role:t.target.value})}},this.props.user.role.split(",").map(function(e,t){return s.createElement("option",{key:"role"+t,value:e},e)}))),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"UPDATE",onPress:this.onUpdate}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),Ea=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,a){return e(function(e,t){return function(a){a(ce(e)),t(!0,"")}}(t,a))}}})(ha),ga=function(e,t){return function(a){a(ba([],!1,!1,"")),(new oe).get("ads/"+e,function(e,n){ee(e)&&ee(e.data)?(a(ba(e.data,!0,!1,"")),t(!0)):t(!1)})}},ya=function(e,t,a,n,s){return function(o){t&&$(t._id)?(new oe).put("ad/"+t._id,function(e,a){if(ee(e)&&$(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].title=t.title,n[r].description=t.description,o(ba(n,!0,!1,"")),s(!0)}else s(!1)},t):(new oe).post("ad/"+e,function(e,r){ee(e)&&$(e.data)?(n.unshift({_id:e.data,title:t.title,description:t.description,createdBy:a.name,createdAt:new Date}),o(ba(n,!0,!1,"")),s(!0)):s(!1)},t)}},ba=function(e,t,a,s){return{type:n.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},va=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.title)&&$(a.state.description)){a.setState({isLoading:!0});var e={_id:a.state.id,title:a.state.title,description:a.state.description};a.props.onSave(a.props.user.client._id,e,a.props.user,a.props.ads.data,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",title:"",description:""}),Be.success("Ad saved successfully.")):Be.fail("Failed to save ad.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.ads.data,function(e){a.setState({isLoading:!1}),!0===e?Be.success("Ad removed successfully."):Be.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,id:"",title:"",description:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1}),t||Be.fail("Failed to load Ads.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Ads",link:"ads"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ad")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),this.props.ads.isUpToDate&&!this.props.ads.isError&&$(this.props.ads.data)?this.props.ads.data.map(function(t,a){return!0===e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:""})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.title)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No ad found.":"Loading..."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),wa=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,a){return e(ga(t,a))},onSave:function(t,a,n,s,o){return e(ya(t,a,n,s,o))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).delete("ad/"+e,function(s,o){ee(s)&&ee(s.data)&&!0===s.data?(t=t.filter(function(t,a){return t._id!==e}),n(ba(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(va),Na=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.title)&&$(a.state.description)){a.setState({isLoading:!0});var e={_id:a.state.id,title:a.state.title,description:a.state.description};a.props.onSave(a.props.user.client._id,e,a.props.user,a.props.ads.data,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",title:"",description:""}),Be.success("Ad saved successfully.")):Be.fail("Failed to save ad.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.state={isLoading:!1,id:"",title:"",description:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){se(t,e.onSave)}})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),Sa=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,a,n,s,o){return e(ya(t,a,n,s,o))}}})(Na),Oa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(e){var t="";if(a.props.homes.isUpToDate&&!a.props.homes.isError&&$(a.props.homes.data)&&a.props.userHomes.isUpToDate&&!a.props.userHomes.isError&&$(a.props.userHomes.data)){var n=[];a.props.userHomes.data.filter(function(t){return t.userId===e}).map(function(e,t){return n.push(e.homeId)}),a.props.homes.data.filter(function(e){return n.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.number})}return t},a.onSearch=function(){if($(a.state.searchText)&&a.props.users.isUpToDate&&!a.props.users.isError&&$(a.props.users.data)){var e=a.state.searchText.toLocaleLowerCase(),t=a.props.homes.data.filter(function(t){return t.number.toLocaleLowerCase()===e});a.setState({searchResult:a.props.users.data.filter(function(a){return(a.name+"").toLocaleLowerCase().indexOf(e)>=0||(a.mobileNo+"").toLocaleLowerCase().indexOf(e)>=0||(a.emailId+"").toLocaleLowerCase().indexOf(e)>=0||(a.number+"").toLocaleLowerCase().indexOf(e)>=0||$(t.filter(function(e){return e.memberIds.indexOf(a._id)>=0}))}),searchResultIndex:10})}else a.setState({searchResult:[],searchResultIndex:10})},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.appUser.homeIndex,a.props.user,a.props.users,function(e){a.setState({isLoading:!1}),!0===e?(a.onSearch(),Be.success("User removed successfully.")):Be.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},a.getHomes=a.getHomes.bind(Object(ge.a)(a)),a.onSearch=a.onSearch.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Users",link:"users"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-user/0/false")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New"),s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("approve-users")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right",marginRight:15})},"View Users Waiting for Approval")),s.createElement(Ae,{style:Object(g.a)({},Ve.row,{marginTop:0,paddingTop:0})},s.createElement(Te,{type:"text",placeholder:"Search User",className:"form-control",style:Object(g.a)({},Pe,Ve.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){se(t,e.onSearch)}}),s.createElement("span",{className:"icon-holder cur-p",onClick:this.onSearch},s.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,a){return s.createElement(Ae,{key:"usr"+a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Name: "+($(t.name)?t.name:""))),t._id!==e.props.user._id&&s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.props.history.push("edit-user/"+t._id+"/false")}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},"No user match with your search."),this.state.searchResult.length>this.state.searchResultIndex&&s.createElement(Ae,{style:kt.row},s.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},s.createElement(Le,{style:{color:W,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),ka=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(o){(new oe).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),o(Dt(a)),n&&!0===n.isUpToDate&&!1===n.isError&&$(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),o(_t(n.data,!0,!1,""))),s(!0)):s(!1)})}}(t,a,n,s,o))}}})(Oa),Ca=function(e,t,a){return function(n){(new oe).get("home/"+e,function(e,n){ee(e)&&ee(e.data)&&$(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):a(e&&$(e.message)?e.message:"Failed to load Home.")})}},Aa=function(e){return{type:n.LOAD_USER,payload:e}},ja=function(e,t,a,s){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},xa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(e){var t="";if(a.props.users.isUpToDate&&!a.props.users.isError&&$(a.props.users.data)&&a.props.userHomes.isUpToDate&&!a.props.userHomes.isError&&$(a.props.userHomes.data)){var n=[];a.props.userHomes.data.filter(function(t){return t.homeId===e}).map(function(e,t){return n.push(e.userId)}),a.props.users.data.filter(function(e){return n.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.name})}return t},a.onSearch=function(){if($(a.state.searchText)&&a.props.homes.isUpToDate&&!a.props.homes.isError&&$(a.props.homes.data)){var e=a.state.searchText.toLocaleLowerCase();a.setState({searchResult:a.props.homes.data.filter(function(t){return(t.number+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else a.setState({searchResult:[],searchResultIndex:10})},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.user,a.props.homes,function(e){a.setState({isLoading:!1}),!0===e?(a.onSearch(),Be.success("Home removed successfully.")):Be.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},a.getUsers=a.getUsers.bind(Object(ge.a)(a)),a.onSearch=a.onSearch.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Homes",link:"homes"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-home/0")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),s.createElement(Ae,{style:Object(g.a)({},Ve.row,{marginTop:0,paddingTop:0})},s.createElement(Te,{type:"text",placeholder:"Search Home",className:"form-control",style:Object(g.a)({},Pe,Ve.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){se(t,e.onSearch)}}),s.createElement("span",{className:"icon-holder cur-p",onClick:this.onSearch},s.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,a){return s.createElement(Ae,{key:"home"+a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Number: "+t.number)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.props.history.push("view-home/"+t._id)}},s.createElement("i",{className:"c-orange-500 fa fa-eye"})),s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.props.history.push("edit-home/"+t._id)}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},"No home match with your search."),this.state.searchResult.length>this.state.searchResultIndex&&s.createElement(Ae,{style:kt.row},s.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},s.createElement(Le,{style:{color:W,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Ta=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,s){return e(function(e,t,a,n){return function(s){(new oe).delete("home/"+e,function(o,r){ee(o)&&ee(o.data)&&!0===o.data?(t.homes=t.homes.filter(function(t,a){return t._id!==e}),a.data=a.data.filter(function(t,a){return t._id!==e}),s(Aa(t)),s(ja(a.data,!0,!1,"")),n(!0)):n(!1)})}}(t,a,n,s))}}})(xa),Ua={mListCnr:{borderColor:W,borderWidth:1,height:"50%"},mListActiveRow:{padding:3,backgroundColor:W,color:Z,borderBottomWidth:1,borderBottomColor:q,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"},mListRow:{padding:3,borderBottomWidth:1,borderBottomColor:q,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"}},Ia=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(){var e="";return $(a.state.homeIds)&&a.props.homes.isUpToDate&&!a.props.homes.isError&&$(a.props.homes.data)&&a.props.homes.data.filter(function(e){return a.state.homeIds.indexOf(e._id)>=0}).map(function(t,a){return e+=(e.length>0?", ":"")+t.number}),e},a.onSave=function(){if($(a.state.name)&&a.state.age>0&&$(a.state.gender)){var e="";a.state.role.isAdmin&&(e=J.ADMIN),a.state.role.isManager&&(e+=(e.length>0?",":"")+J.MANAGER),a.state.role.isGatekeeper&&(e+=(e.length>0?",":"")+J.GATEKEEPER),a.state.role.isUser&&(e+=(e.length>0?",":"")+J.USER),a.setState({isLoading:!0});var t={_id:a.state.id,number:"",name:a.state.name,age:a.state.age,gender:a.state.gender,mobileNo:a.state.mobileNo,emailId:a.state.emailId?a.state.emailId.toLowerCase():"",type:a.state.type,role:e};a.props.onSave(t,a.state.homeIds,a.props.user,a.props.users,"true"===a.props.match.params.isApprove,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),Be.success("User saved successfully.")):Be.fail($(t)?t:"Failed to save user.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onToggleHomeModel=function(e){a.setState({isShowHomes:e})},a.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1},isShowHomes:!1},a.getHomes=a.getHomes.bind(Object(ge.a)(a)),a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onToggleHomeModel=a.onToggleHomeModel.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t,a){t&&$(t._id)?e.setState({isLoading:!1,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,homeIds:a,role:{isAdmin:(","+t.role+",").indexOf(","+J.ADMIN+",")>=0,isManager:(","+t.role+",").indexOf(","+J.MANAGER+",")>=0,isGatekeeper:(","+t.role+",").indexOf(","+J.GATEKEEPER+",")>=0,isUser:(","+t.role+",").indexOf(","+J.USER+",")>=0}}):Be.fail("Failed to load User.")},function(e){Be.fail($(e)?e:"Failed to load User.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(g.a)({},Pe,Ve.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),s.createElement(Fe,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),s.createElement(Fe,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),s.createElement(Fe,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{className:"mR-10"},"Role: "),s.createElement(Ot,{isActive:this.state.role.isAdmin,text:J.ADMIN,onPress:function(){e.state.role.isAdmin=!e.state.role.isAdmin,e.setState({})}}),s.createElement(Ot,{isActive:this.state.role.isManager,text:J.MANAGER,onPress:function(){e.state.role.isManager=!e.state.role.isManager,e.setState({})}}),s.createElement(Ot,{isActive:this.state.role.isGatekeeper,text:J.GATEKEEPER,onPress:function(){e.state.role.isGatekeeper=!e.state.role.isGatekeeper,e.setState({})}}),s.createElement(Ot,{isActive:this.state.role.isUser,text:J.USER,onPress:function(){e.state.role.isUser=!e.state.role.isUser,e.setState({})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Home(s): "+this.getHomes())),s.createElement(Ae,{style:Ve.row},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isShowHomes:!0})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"}))),this.props.homes.isUpToDate&&!this.props.homes.isError&&$(this.props.homes.data)&&s.createElement(yt.a,{open:this.state.isShowHomes,onClose:function(){return e.onToggleHomeModel(!1)}},s.createElement(Ae,{style:St.container},s.createElement(je,{style:Object(g.a)({},Ua.mListCnr,{maxHeight:"50%"})},this.props.homes.data.map(function(t,a){return s.createElement(Le,{key:"home"+a,style:e.state.homeIds.indexOf(t._id)>=0?Ua.mListActiveRow:Ua.mListRow,onClick:function(){e.state.homeIds.indexOf(t._id)>=0?e.setState({homeIds:e.state.homeIds.filter(function(e){return e!==t._id})}):(e.state.homeIds.push(t._id),e.setState({}))}},t.number)})))),s.createElement(Ae,{style:Ve.saveBtn},s.createElement(Re,{title:"true"===this.props.match.params.isApprove?"Approve":"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),La=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("member/"+e,function(e,n){ee(e)&&ee(e.data)&&ee(e.data.member)&&$(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):a(e&&$(e.message)?e.message:"Failed to load Member.")})}}(t,a,n))},onSave:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(a){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:s}))&&$(e._id)?(new oe).put("member/"+e._id,function(t,s){if(ee(t)&&ee(t.data)&&t.data.length>0){if(n.isUpToDate&&!n.isError&&$(n.data)){var r=n.data.findIndex(function(e){return e._id===t.data});r>=0?(n.data[r]._id=t.data,n.data[r].name=e.name):n.data.push({_id:t.data,name:e.name}),a(_t(n.data,!0,!1,""))}o(!0,"")}else o(!1,s)},e):(new oe).post("member/0",function(t,s){ee(t)&&ee(t.data)&&t.data.length>0?(n.isUpToDate&&!n.isError&&$(n.data)&&(n.data.push({_id:t.data,name:e.name}),a(_t(n.data,!0,!1,""))),o(!0,"")):o(!1,s)},e)}}(t,a,0,s,o,r))}}})(Ia),Ra=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onApprove=function(e){Object(ze.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){a.props.history.push("edit-user/"+e+"/true")}},{label:"No",onClick:function(){}}]})},a.onReject=function(e){Object(ze.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onReject(e,function(t){a.setState({isLoading:!1}),!0===t?(a.setState({data:a.state.data.filter(function(t){return t._id!==e})}),Be.success("User rejected successfully.")):Be.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})},a.state={data:[],isLoading:!1},a.onApprove=a.onApprove.bind(Object(ge.a)(a)),a.onReject=a.onReject.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Be.fail(t)})}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),s.createElement(Ae,{className:"bgc-white p-20"},$(this.state.data)?this.state.data.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.name)),(t.age>0||$(t.gender))&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,(t.age>0?t.age:"")+(t.age>0&&$(t.gender)?", ":"")+($(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),s.createElement(Ae,{style:kt.ele},"On ",s.createElement(Le,{style:{fontWeight:"bold"}},dt(t.createdAt))),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),s.createElement(Ae,{style:kt.ele},s.createElement(Re,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.onApprove(t._id)}}),s.createElement(Re,{title:"Reject",onPress:function(){e.onReject(t._id)}})))}):s.createElement(Le,{style:{padding:20}},"No user found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Da=Object(p.b)(function(e,t){return{}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){(new oe).get("account/wfausers",function(a,n){ee(a)&&ee(a.data)?e(a.data):t(ee(a)&&$(a.message)?a.message:"Failed to load Members.")})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new oe).delete("account/rejectuser/"+e,function(e,a){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(Ra),_a=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(){var e="";return $(a.state.members)&&a.props.users.isUpToDate&&!a.props.users.isError&&$(a.props.users.data)&&a.props.users.data.filter(function(e){return a.state.members.indexOf(e._id)>=0}).map(function(t,a){return e+=(e.length>0?", ":"")+t.name+($(t.number)?"("+t.number+")":"")}),e},a.onSave=function(){if($(a.state.blockId)&&$(a.state.number)){a.setState({isLoading:!0});var e={_id:a.state.id,_blockId:a.state.blockId,number:a.state.number,address:a.state.address,bedRoom:a.state.bedRoom,parking:a.state.parking,description:a.state.description,memberIds:a.state.members};a.props.onSave(e,a.props.user,a.props.homes,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),Be.success("Home saved successfully.")):Be.fail($(t)?t:"Failed to save home.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onToggleUserModel=function(e){a.setState({isShowUsers:e})},a.state={isLoading:!1,id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[],isShowUsers:!1},a.getUsers=a.getUsers.bind(Object(ge.a)(a)),a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onToggleUserModel=a.onToggleUserModel.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){t&&$(t._id)?e.setState({isLoading:!1,id:t._id,blockId:t._blockId,number:t.number,address:t.address,bedRoom:t.bedRoom,parking:t.parking,description:t.description,members:t.memberIds}):Be.fail("Failed to load Home.")},function(e){Be.fail($(e)?e:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Homes",link:"homes"},{title:"Edit Home",link:"edit-home/0"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,null,s.createElement(Ae,{style:Ve.row},s.createElement(Ie,{className:"form-control",value:this.state.blockId,style:Ve.ele,onChange:function(t){return e.setState({blockId:t.target.value})}},s.createElement("option",{key:"block0",value:""},"Select Block"),this.props.blocks&&this.props.blocks.isUpToDate&&!this.props.blocks.isError&&$(this.props.blocks.data)&&this.props.blocks.data.map(function(e,t){return s.createElement("option",{key:"block"+t,value:e._id},e.name)}))),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Address",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"No of bed rooms: ")),s.createElement(Ae,{style:Ve.row},s.createElement(Fe,{isActive:1===this.state.bedRoom,text:"1",onPress:function(){return e.setState({bedRoom:1})}}),s.createElement(Fe,{isActive:2===this.state.bedRoom,text:"2",onPress:function(){return e.setState({bedRoom:2})}}),s.createElement(Fe,{isActive:3===this.state.bedRoom,text:"3",onPress:function(){return e.setState({bedRoom:3})}}),s.createElement(Fe,{isActive:4===this.state.bedRoom,text:"4",onPress:function(){return e.setState({bedRoom:4})}}),s.createElement(Fe,{isActive:5===this.state.bedRoom,text:"5",onPress:function(){return e.setState({bedRoom:5})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Parking",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.parking,onChange:function(t){return e.setState({parking:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"User(s): "+this.getUsers())),s.createElement(Ae,{style:Ve.row},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isShowUsers:!0})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"}))),this.props.users.isUpToDate&&!this.props.users.isError&&$(this.props.users.data)&&s.createElement(yt.a,{open:this.state.isShowUsers,onClose:function(){return e.onToggleUserModel(!1)}},s.createElement(Ae,{style:St.container},s.createElement(je,{style:Object(g.a)({},Ua.mListCnr,{maxHeight:"50%"})},this.props.users.data.map(function(t,a){return s.createElement(Le,{key:"user"+a,style:e.state.members.indexOf(t._id)>=0?Ua.mListActiveRow:Ua.mListRow,onClick:function(){e.state.members.indexOf(t._id)>=0?e.setState({members:e.state.members.filter(function(e){return e!==t._id})}):(e.state.members.push(t._id),e.setState({}))}},t.name+(t.number?"("+t.number+")":""))})))),s.createElement(Ae,{style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Pa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(Ca(t,a,n))},onSave:function(t,a,n,s){return e(function(e,t,a,n){return function(t){e&&$(e._id)?(new oe).put("home/"+e._id,function(s,o){if(ee(s)&&ee(s.data)&&s.data.length>0){if(a.isUpToDate&&!a.isError&&$(a.data)){var r=a.data.findIndex(function(e){return e._id===s.data});a.data[r]._id=s.data,a.data[r].number=e.number,t(ja(a.data,!0,!1,""))}n(!0,"")}else n(!1,o)},e):(new oe).post("home/0",function(s,o){ee(s)&&ee(s.data)&&s.data.length>0?(a.isUpToDate&&!a.isError&&$(a.data)&&(a.data.push({_id:s.data,number:e.number}),t(ja(a.data,!0,!1,""))),n(!0,"")):n(!1,o)},e)}}(t,0,n,s))},onCheckNumberAvail:function(t,a,n){return e(function(e,t,a){return function(e){(new oe).get("home/checkno/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0):a(!1)})}}(0,a,n))}}})(_a),Ma=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){a.setState({isLoading:!0}),a.props.onLoad(a.props.user.client._id,"",a.state.isActive,function(e){a.setState({isLoading:!1,data:e})},function(e){a.setState({isLoading:!1}),Be.fail(e)})},a.onActiveChange=function(){a.setState({isActive:!a.state.isActive},a.loadData)},a.onEnter=function(e){Object(ze.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onEnter(e,a.props.gateNo,function(t){if(a.setState({isLoading:!1}),!0===t){var n=a.state.data.findIndex(function(t){return t._id===e});a.state.data[n].isEntered=!0,a.state.data[n].enteredBy=a.props.user.name,a.state.data[n].enteredAt=new Date,a.setState({}),Be.success("Visitor entered successfully.")}else Be.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},a.onExit=function(e){Object(ze.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onExit(e,a.props.gateNo,function(t){a.setState({isLoading:!1}),!0===t?(a.setState({data:a.state.data.filter(function(t){return t._id!==e})}),Be.success("Visitor exit successfully.")):Be.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})},a.state={data:[],isActive:!0,isLoading:!1},a.loadData=a.loadData.bind(Object(ge.a)(a)),a.onActiveChange=a.onActiveChange.bind(Object(ge.a)(a)),a.onEnter=a.onEnter.bind(Object(ge.a)(a)),a.onExit=a.onExit.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Visitors",link:"all-visitors"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ct,{user:this.props.user,appUser:this.props.appUser,data:this.state.data,isActive:this.state.isActive,onActiveChange:this.onActiveChange,onEnter:this.onEnter,onExit:this.onExit}),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Ba=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,s,o){return e(nt(0,a,n,s,o))},onEnter:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("visitor/enter/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("visitor/exit/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(Ma),Fa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onPush=function(){$(a.state.title)&&$(a.state.body)?Object(ze.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0});var e={title:a.state.title,body:a.state.body};a.props.onPush(a.props.user.client._id,e,a.props.user,function(e){if(a.setState({isLoading:!1}),ee(e)){var t=a.state.data;t.unshift(e),a.setState({data:t,title:"",body:""}),Be.success("Notification pushed successfully.")}else Be.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):Be.warn("Please fill all the required fields before Push.")},a.state={isLoading:!1,data:[],title:"",body:""},a.onPush=a.onPush.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),Be.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Notification",link:"notification"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Body",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})},onKeyPress:function(t){se(t,e.onPush)}})),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{style:{marginRight:10},title:"PUSH",onPress:this.onPush}),s.createElement(Re,{title:"CLEAR",onPress:function(){e.setState({title:"",body:""})}})),$(this.state.data)?this.state.data.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.title)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.body)),s.createElement(Ae,{style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{title:"Duplicate",onPress:function(){e.setState({title:t.title,body:t.body})}})))}):s.createElement(Le,{style:{padding:20}},"No nofification found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Va=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("notifications/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Notification.")})}}(t,a,n))},onPush:function(t,a,n,s){return e(function(e,t,a,n){return function(s){(new oe).post("notification/"+e,function(e,s){ee(e)&&$(e.data)?n({_id:e.data,title:t.title,body:t.body,createdBy:a.name,createdAt:new Date}):n(null)},t)}}(t,a,n,s))}}})(Fa),Ha=function(e,t,a,s){return{type:n.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},Wa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(ee(a.state.fromDate)&&ee(a.state.toDate)){a.setState({isLoading:!0});var e={_homeId:a.props.user.homes[a.props.appUser.homeIndex].number,fromDate:a.state.fromDate,toDate:a.state.toDate,place:a.state.place,address:a.state.address,isReturned:!1,createdBy:a.props.user.name,createdAt:new Date};a.props.onSave(e,a.props.user.homes[a.props.appUser.homeIndex]._id,a.props.user,a.props.outings,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date}),Be.success("Outing submitted successfully.")):Be.fail("Failed to submit Outing.")})}else Be.warn("Please fill all the required fields before submit Outing.")},a.state={isLoading:!1,fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Notice",link:"notice"},{title:"New Outing",link:"new-outing"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(vt.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),s.createElement(Ae,{style:Ve.row},s.createElement(vt.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),s.createElement(Ae,{className:"center",style:Ve.saveBtn},s.createElement(Re,{title:"SUBMIT",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),Ga=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(o){e&&$(e._id)?s(!1):(new oe).post("outing/"+t,function(t,r){console.log("result:",t),ee(t)&&$(t.data)?(e._id=t.data,e.createdBy=a.name,n.data.unshift(e),o(Ha(n.data,!0,!1,"")),s(!0)):s(!1)},e)}}(t,a,n,s,o))}}})(Wa),Ya=function(e,t,a,s){return{type:n.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},Ka=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onFileSelect=function(e){var t=e.target.files[0];if(t&&t.name){var n=t.name.split(".");if(n&&n.length>1){var s=ae();s+="."+n[n.length-1],a.setState({isLoading:!0});var o={file:t,type:t.type,name:s};a.props.onUpload(o,function(e,t){a.setState({isLoading:!1}),e?a.setState({fileName:s}):Be.fail(t||"Failed to upload file.")})}}},a.onSave=function(){if($(a.state.title)&&$(a.state.fileName)){a.setState({isLoading:!0});var e={_id:a.state.id,title:a.state.title,description:a.state.description,file:a.state.fileName,createdBy:a.props.user.name,createdAt:new Date};a.props.onSave(a.state.homeId,e,a.props.homeIndex,a.props.user,a.props.documents.data,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",homeId:$(a.props.user.homes)?a.props.user.homes[0]._id:"",title:"",description:"",fileName:""}),Be.success("Document saved successfully.")):Be.fail("Failed to save document.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onClear=function(){a.setState({id:"",homeId:$(a.props.user.homes)?a.props.user.homes[0]._id:"",title:"",description:"",fileName:""})},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.documents.data,function(e){a.setState({isLoading:!1}),!0===e?Be.success("Document removed successfully."):Be.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,id:"",homeId:$(a.props.user.homes)?a.props.user.homes[0]._id:"",title:"",description:"",fileName:""},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a.onClear=a.onClear.bind(Object(ge.a)(a)),a.onFileSelect=a.onFileSelect.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||Be.fail("Failed to load Documents.")})}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"My Documents",link:"my-documents"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),$(this.props.user.homes)&&s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:{marginRight:10}},"Home:"),this.props.user.homes.map(function(t,a){return s.createElement(Fe,{isActive:t._id===e.state.homeId,text:t.number,key:"home"+a,onPress:function(){return e.setState({homeId:t._id})}})})),s.createElement(Ae,{style:Ve.row},s.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:this.onFileSelect}),$(this.state.fileName)&&s.createElement(Le,{style:{marginLeft:15}},this.state.fileName)),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),s.createElement(Re,{title:"CLEAR",onPress:this.onClear})),this.props.documents.isUpToDate&&!this.props.documents.isError&&$(this.props.documents.data)?this.props.documents.data.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.title)),$(t.description)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),$(e.props.user.homes.filter(function(e){return e._id===t._id}))&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Home: "+e.props.user.homes.filter(function(e){return e._id===t._id})[0].number)),$(t.file)&&s.createElement(Ae,{style:kt.ele},s.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:B+t.file},t.file)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},this.props.documents.isUpToDate?"No document found.":this.props.documents.isError?this.props.documents.errorMessage:"No document found."),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),za=Object(p.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){a(Ya([],!1,!1,"")),(new oe).get("documents/"+e,function(e,n){ee(e)&&ee(e.data)?(a(Ya(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,a))},onSave:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(a){t&&$(t._id)?(new oe).put("document/"+t._id,function(e,n){if(ee(e)&&$(e.data)){var r=s.findIndex(function(t){return t._id===e.data._id});s[r]._id=e.data._id,s[r].title=t.title,s[r].description=t.description,s[r].file=t.file,a(Ya(s,!0,!1,"")),o(!0)}else o(!1)},t):(new oe).post("document/"+e,function(e,r){ee(e)&&$(e.data)?(s.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:n.name,createdAt:new Date}),a(Ya(s,!0,!1,"")),o(!0)):o(!1)},t)}}(t,a,0,s,o,r))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).delete("document/"+e,function(s,o){ee(s)&&ee(s.data)&&!0===s.data?(t=t.filter(function(t,a){return t._id!==e}),n(Ya(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))},onUpload:function(t,a){return e(rt(t,a))}}})(Ka),qa=function(e,t,a,s){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},Xa=function(e,t,a,s){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}},Za=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if($(a.state.searchText)&&a.props.blocks.isUpToDate&&!a.props.blocks.isError&&$(a.props.blocks.data)){var e=a.state.searchText.toLocaleLowerCase();a.setState({searchResult:a.props.blocks.data.filter(function(t){return(t.name+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else a.setState({searchResult:[],searchResultIndex:10})},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){var t=$(a.props.homes.data)?a.props.homes.data.filter(function(t){return t._blockId===e}):[];if($(t)){var n="";t.map(function(e){n+=(n.length>0?", ":"")+e.number}),n=t.length>1?"Homes "+n+" are assigned under this block. Please move these homes to other block and try to delete":"Home "+n+" is assigned under this block. Please move this home to other block and try to delete.",Be.fail(n)}else a.setState({isLoading:!0}),a.props.onRemove(e,a.props.blocks.data,function(e){a.setState({isLoading:!1}),!0===e?(a.onSearch(),Be.success("Home removed successfully.")):Be.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},a.onSearch=a.onSearch.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Blocks",link:"blocks"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},s.createElement(Le,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-block/0")},style:Object(g.a)({},kt.ele,{color:W,textAlign:"right"})},"Add New")),s.createElement(Ae,{style:Object(g.a)({},Ve.row,{marginTop:0,paddingTop:0})},s.createElement(Te,{type:"text",placeholder:"Search Block",className:"form-control",style:Object(g.a)({},Pe,Ve.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){se(t,e.onSearch)}}),s.createElement("span",{className:"icon-holder cur-p",onClick:this.onSearch},s.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,a){return s.createElement(Ae,{key:"block"+a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Name: "+t.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Description: "+($(t.description)?t.description:""))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{marginRight:10}},"Homes: "),$(e.props.homes.data)&&$(e.props.homes.data.filter(function(e){return e._blockId===t._id}))?e.props.homes.data.filter(function(e){return e._blockId===t._id}).map(function(e,t){return s.createElement(Ee.b,{to:"edit-home/"+e._id,style:{marginRight:10}},e.number)}):s.createElement(Le,null,"No homes assigned under this block.")),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.props.history.push("edit-block/"+t._id)}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):s.createElement(Le,{style:{padding:20}},"No block match with your search."),this.state.searchResult.length>this.state.searchResultIndex&&s.createElement(Ae,{style:kt.row},s.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},s.createElement(Le,{style:{color:W,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),s.createElement(De,{visible:this.state.isLoading})))))}}]),t}(s.Component),Ja=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).delete("block/"+e,function(s,o){ee(s)&&ee(s.data)&&!0===s.data?(t=t.filter(function(t,a){return t._id!==e}),n(qa(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(Za),Qa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.name)&&($(a.state.id)||a.state.homeCount>0))if($(a.props.blocks.data)&&$(a.props.blocks.data.filter(function(e){return e.name===a.state.name})))Be.fail("Block with same name already exists. Please give different name.");else{a.setState({isLoading:!0});var e={_id:a.state.id,name:a.state.name,description:a.state.description};e=Object.assign(e,{homeCount:a.state.homeCount}),a.props.onSave(a.props.user.client._id,e,a.props.user,a.props.blocks&&a.props.blocks.data?a.props.blocks.data:[],a.props.homes&&a.props.homes.data?a.props.homes.data:[],function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({id:"",name:"",description:"",homeCount:0}),Be.success($(a.state.id)?"Block saved successfully.":"Block saved and home(s) created successfully.")):Be.fail($(t)?t:"Failed to save block.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.state={isLoading:!1,id:"",name:"",description:"",homeCount:0},a.onSave=a.onSave.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;if(e.length>0&&"0"!==e&&this.props.blocks&&$(this.props.blocks.data)){var t=this.props.blocks.data.filter(function(t,a){return t._id===e});$(t)&&this.setState({id:t[0]._id,name:t[0].name,description:t[0].description})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){se(t,e.onSave)}})),!$(this.state.id)&&s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"number",placeholder:"Number of houses in this block",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.homeCount>0?this.state.homeCount+"":"",onChange:function(t){return e.setState({homeCount:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.saveBtn},s.createElement(Re,{title:"SAVE",onPress:this.onSave}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),$a=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onSave:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(r){t&&$(t._id)?(new oe).put("block/"+t._id,function(e,a){if(ee(e)&&$(e.data)){var s=n.findIndex(function(t){return t._id===e.data});n[s]._id=e.data,n[s].name=t.name,n[s].description=t.description,r(qa(n,!0,!1,"")),o(!0,"")}else o(!1,a)},t):(new oe).post("block/"+e,function(e,i){ee(e)&&ee(e.data)&&$(e.data.blockId)?(n.unshift({_id:e.data.blockId,name:t.name,description:t.description,createdBy:a.name}),r(qa(n,!0,!1,"")),$(e.data.homes)&&(e.data.homes.forEach(function(e){e.memberIds=e.members,delete e.members}),s=s.concat(e.data.homes),r(Xa(s,!0,!1,""))),o(!0,"")):o(!1,i)},t)}}(t,a,n,s,o,r))}}})(Qa),en=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(a.state.amount>0&&(a.state.isAllHome||a.state.homes.length>0)){var e=[];a.state.homes.map(function(t,a){return e.push(t._id)});var t={amount:a.state.amount,description:a.state.description,month:a.state.month,year:a.state.year,isAllHome:a.state.isAllHome,homes:e};a.setState({isLoading:!0}),a.props.onSave(a.props.user.client._id,t,a.props.user,function(e,t){a.setState({isLoading:!1}),!0===e?(a.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]}),Be.success("Payment saved successfully.")):Be.fail(t||"Failed to save payment.")})}else Be.warn("Please fill all required fields before Save.")},a.onClear=function(){a.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]})},a.state={isLoading:!1,amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onClear=a.onClear.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.createElement(Ae,{style:tn.container},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Amount",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.amount>0?this.state.amount+"":"",onChange:function(t){return e.setState({amount:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:{marginTop:15}},"Payment for "+this.state.year+" "),s.createElement(Ie,{className:"form-control",value:this.state.month,style:Ve.ele,onChange:function(t){return e.setState({month:t.target.value})}},Q.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return s.createElement("option",{key:"month"+t,value:e.value},e.title)}))),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:{marginRight:15}},"Apply to Home(s): "+(this.state.isAllHome?"":this.state.homes.length)),s.createElement(Ot,{isActive:this.state.isAllHome,text:"All Homes",onPress:function(){return e.setState({isAllHome:!e.state.isAllHome})}})),!this.state.isAllHome&&s.createElement(je,{style:Object(g.a)({},Ve.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,a){return s.createElement(Le,{className:"pointer",key:"ho"+a,style:{flexDirection:"column",marginRight:6,color:W},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,a){return e._id!==t._id})})}},t.number)})),!this.state.isAllHome&&s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(g.a)({},Ve.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:q,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),!this.state.isAllHome&&this.state.showHomes&&$(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&s.createElement(je,{style:Object(g.a)({},Ve.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,a){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,a){return s.createElement(Le,{className:"pointer",key:"ho"+a,style:{flexDirection:"column",marginRight:6},onClick:function(){var a=e.state.homes;a.push(t),e.setState({homes:a})}},t.number)})),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),s.createElement(Re,{title:"CLEAR",onPress:this.onClear})),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),tn={container:{width:"100%",paddingLeft:15,paddingRight:15}},an=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(a.state.fromDate&&a.state.toDate){var e=[];a.state.homes.map(function(t,a){return e.push(t._id)});var t={fromDate:a.state.fromDate,toDate:a.state.toDate,homes:e};a.setState({isLoading:!0}),a.props.onSearch(a.props.user.client._id,t,a.props.user,function(e){a.setState({isLoading:!1,isShowSearch:!1,data:e})},function(e){a.setState({isLoading:!1}),Be.fail(e||"Failed to load payment.")})}else Be.warn("Please fill all required fields before Search.")},a.onUpdate=function(){if($(a.state.uPaymentId)&&a.state.uAmount>0){var e={amount:a.state.uAmount,description:a.state.uDescription};a.setState({isLoading:!0}),a.props.onUpdate(a.state.uPaymentId,e,a.props.user,function(e,t){if(a.setState({isLoading:!1}),!0===e){var n=a.state.data,s=n.findIndex(function(e){return e._id===a.state.uPaymentId});n[s].amount=a.state.uAmount,n[s].description=a.state.uDescription,a.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:n}),Be.success("Payment updated successfully.")}else Be.fail(t||"Failed to update payment.")})}else Be.warn("Please fill all required fields before update.")},a.state={isLoading:!1,isShowSearch:!0,fromDate:"",toDate:"",datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""},a.onSearch=a.onSearch.bind(Object(ge.a)(a)),a.onUpdate=a.onUpdate.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.createElement(Ae,{style:nn.container},this.state.isShowSearch?s.createElement(Ae,null,s.createElement(Ae,{style:Ve.row},s.createElement(vt.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),s.createElement(Ae,{style:Ve.row},s.createElement(vt.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:{marginRight:15}},"Home(s): "+(this.state.homes.length>0?this.state.homes.length:"All"))),s.createElement(je,{style:Object(g.a)({},Ve.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,a){return s.createElement(Le,{className:"pointer",key:"ho"+a,style:{flexDirection:"column",marginRight:6,color:W},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,a){return e._id!==t._id})})}},t.number)})),s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(g.a)({},Ve.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:q,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),this.state.showHomes&&$(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&s.createElement(je,{style:Object(g.a)({},Ve.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,a){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,a){return s.createElement(Le,{className:"pointer",key:"ho"+a,style:{flexDirection:"column",marginRight:6},onClick:function(){var a=e.state.homes;a.push(t),e.setState({homes:a})}},t.number)})),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{title:"SEARCH",onPress:this.onSearch}))):s.createElement(Ae,null,s.createElement(Le,{className:"fr pointer",style:{color:W,fontWeight:"bold",textAlign:"right"},onClick:function(){e.setState({isShowSearch:!0})}},"Show Search")),s.createElement(Ae,null,$(this.state.data)?this.state.data.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},"Rs."+t.amount+" for "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+($(t.mode)?" "+t.mode:"")+($(t.type)?" "+t.type:""))),$(t.description)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),s.createElement(Ae,{style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{title:"Update",onPress:function(){e.setState({isShowUpdateModel:!0,uPaymentId:t._id,uAmount:t.amount,uDescription:t.description})}})))}):s.createElement(Le,{style:{padding:20}},"No payment found.")),s.createElement(yt.a,{open:this.state.isShowUpdateModel,onClose:function(){e.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""})}},s.createElement(Ae,{style:St.container},s.createElement(Ae,{style:St.content},s.createElement(Ae,{style:Ve.row},s.createElement(Te,{type:"text",placeholder:"Amount",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.uAmount>0?this.state.uAmount+"":"",onChange:function(t){return e.setState({uAmount:+t.target.value.replace(/[^0-9]/g,"")})}})),s.createElement(Ae,{style:Ve.row},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.uDescription,onChange:function(t){return e.setState({uDescription:t.target.value})}})),s.createElement(Ae,{className:"center",style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{style:{marginRight:10},title:"SAVE",onPress:this.onUpdate}),s.createElement(Re,{title:"CLEAR",onPress:function(){e.setState({uAmount:0,uDescription:""})}}))))),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),nn={container:{width:"100%",paddingLeft:15,paddingRight:15}},sn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1,history:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Payment",link:"payment"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},s.createElement("span",{className:"tab"+(1===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:1})}},"NEW"),s.createElement("span",{className:"tab"+(2===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:2})}},"HISTORY")),s.createElement(Ae,{className:"tab-content p-15"},1===this.state.activeTab?s.createElement(en,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSave:this.props.onSave}):s.createElement(an,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSearch:this.props.onSearch,onUpdate:this.props.onUpdate}))))))}}]),t}(s.Component),on=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,a,n,s){return e(tt(0,a,n,s))},onSave:function(t,a,n,s){return e(function(e,t,a,n){return function(a){(new oe).post("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to save Payment.")},t)}}(t,a,0,s))},onSearch:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(a){(new oe).post("payments/"+e,function(e,t){ee(e)?n(e.data):s($(t)?t:"Failed to load Payments.")},t)}}(t,a,0,s,o))},onUpdate:function(t,a,n,s){return e(function(e,t,a,n){return function(a){(new oe).put("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to update Payment.")},t)}}(t,a,0,s))}}})(sn),rn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,homeId:"",data:{}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.blocks,a=e.data,n="";if(a&&$(a._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var o=t.data.filter(function(e,t){return e._id===a._blockId});o&&o.length>0&&(n=o[0].name)}return a&&$(a._id)?s.createElement(Ae,null,s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Block: "+n)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Number: "+a.number)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Address: "+a.address)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"No of bed room(s): "+a.bedRoom)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Parking: "+a.parking)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Description: "+a.description))):s.createElement(Le,null,"No data found.")}}]),t}(s.Component),ln=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Members.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Members")),$(e)?e.map(function(e,t){return s.createElement(Ae,{key:t,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},($(e.createdBy)?e.createdBy:"")+" on "+ut(e.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.age+", "+("M"===e.gender?"Male":"F"===e.gender?"Female":"Other"))),$(e.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.mobileNo)),$(e.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.emailId)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.type)))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),cn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Vehicles")),$(e)?e.map(function(e,t){return s.createElement(Ae,{key:t,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},e.createdBy+" on "+ut(e.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.type)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.number)))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),mn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){a.state.viewId===e?a.setState({viewId:"",takeaways:[]}):a.setState({viewId:e,takeaways:t})},a.state={data:[],viewId:"",takeaways:[]},a.onView=a.onView.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Servants.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Servants")),$(t)?t.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold"},t.createdBy+" on "+dt(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.name)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.mobileNo)),$(t.emailId)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.emailId)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{style:{},onClick:function(){e.onView(t._id,t.takeaways)}},s.createElement(Le,{className:"pointer",style:{color:W}},(e.state.viewId===t._id?"Hide":"View")+" Takeaways"))),e.state.viewId===t._id&&s.createElement(Ae,{style:Zt.cmntsCnr},s.createElement(Ae,{style:Zt.cmntsHdr},s.createElement(Le,{className:"bold",style:Zt.cmntsHdrTxt},"Takeaways")),s.createElement(Ae,{style:Zt.cmntsCnt},$(e.state.takeaways)?e.state.takeaways.map(function(e,t){return s.createElement(Ae,{key:"tkycmt"+t,style:0===t?Zt.cmntCnrFst:Zt.cmntCnr},s.createElement(Ae,{style:Zt.cmntHdr},s.createElement(Le,{className:"bold"},e.createdBy+" on "+dt(e.updatedAt))),s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,null,e.title)),s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,null,e.description)),e.isExit?s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,{style:{color:K}},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+dt(e.exitAt))):s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,{style:{color:Y}},"Still not exit.")))}):s.createElement(Le,{style:{padding:20}},"No takeaway found."))))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),un=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){a.state.viewId===e?a.setState({viewId:"",comments:[]}):a.setState({viewId:e,comments:t})},a.state={data:[],viewId:"",comments:[]},a.onView=a.onView.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Tickets")),$(t)?t.map(function(t,a){return s.createElement(Ae,{key:"tkt"+a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{className:"bold"},t.createdBy+" from "+t._homeId+" on "+dt(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.title)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.status)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{style:{},onClick:function(){e.onView(t._id,t.comments)}},s.createElement(Le,{className:"pointer",style:{color:W}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&s.createElement(Ae,{style:Zt.cmntsCnr},s.createElement(Ae,{style:Zt.cmntsHdr},s.createElement(Le,{className:"bold",style:Zt.cmntsHdrTxt},"Comments")),s.createElement(Ae,{style:Zt.cmntsCnt},$(e.state.comments)?e.state.comments.map(function(e,t){return s.createElement(Ae,{key:"tkycmt"+t,style:0===t?Zt.cmntCnrFst:Zt.cmntCnr},s.createElement(Ae,{style:Zt.cmntHdr},s.createElement(Le,{className:"bold"},e.createdByName+" on "+dt(e.updatedAt))),s.createElement(Ae,{style:Zt.cmntCnt},s.createElement(Le,null,e.comment)))}):s.createElement(Le,{style:{padding:20}},"No comment found."))))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),dn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){a.props.homeId.length>0&&(a.props.onToggleLoading(!0),a.props.onLoad(a.props.homeId,a.state.isActive,function(e){a.props.onToggleLoading(!1),a.setState({data:e})},function(e){a.props.onToggleLoading(!1),Be.fail($(e)?e:"Failed to load Visitors.")}))},a.onActiveChange=function(){a.setState({isActive:!a.state.isActive},a.loadData)},a.state={data:[],isActive:!0},a.loadData=a.loadData.bind(Object(ge.a)(a)),a.onActiveChange=a.onActiveChange.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Visitors")),s.createElement(Ct,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange}))}}]),t}(s.Component),pn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){a.state.viewId===e?a.setState({viewId:"",transactions:[]}):a.setState({viewId:e,transactions:t})},a.getAmountPaid=function(e){var t=0;return $(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,a){return t+=e.amount}),t},a.state={data:[],viewId:"",transactions:[]},a.onView=a.onView.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Payments.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Payments")),$(t)?t.map(function(t,a){return s.createElement(Ae,{key:a,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.createdBy+" on "+ut(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Rs. "+t.amount+" for "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+($(t.mode)?" "+t.mode:"")+($(t.type)?" "+t.type:""))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Amount Paid Rs. "+e.getAmountPaid(t.transactions))),$(t.description)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),s.createElement(Ae,{style:kt.ele},s.createElement("span",{style:{},onClick:function(){e.onView(t._id,t.transactions)}},s.createElement(Le,{className:"pointer",style:{color:W}},(e.state.viewId===t._id?"Hide":"View")+" Transactions"))),e.state.viewId===t._id&&s.createElement(Ae,{style:fn.cmntsCnr},s.createElement(Ae,{style:fn.cmntsHdr},s.createElement(Le,{style:fn.cmntsHdrTxt},"Transactions")),s.createElement(Ae,{style:fn.cmntsCnt},$(e.state.transactions)?e.state.transactions.map(function(e,t){return s.createElement(Ae,{key:"tktcmt"+t,style:0===t?fn.cmntCnrFst:fn.cmntCnr},s.createElement(Ae,{style:fn.cmntHdr},s.createElement(Le,null,e.createdBy+" on "+ut(e.createdAt))),s.createElement(Ae,{style:fn.cmntCnt},s.createElement(Le,null,"Ref Id: "+e.txnRef)),s.createElement(Ae,{style:fn.cmntCnt},s.createElement(Le,null,"Txn Id: "+e.txnId)),s.createElement(Ae,{style:fn.cmntCnt},s.createElement(Le,null,"Amount: "+e.amount)),s.createElement(Ae,{style:fn.cmntCnt},s.createElement(Le,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),$(e.reason)&&s.createElement(Ae,{style:fn.cmntCnt},s.createElement(Le,null,"Reason: "+e.reason)))}):s.createElement(Le,{style:{padding:20}},"No transaction found."))))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),fn={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:q,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:q},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},hn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),Be.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return s.createElement(Ae,null,s.createElement(Ae,{className:"center",style:kt.ele},s.createElement(Le,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Documents")),$(e)?e.map(function(e,t){return s.createElement(Ae,{key:t,style:kt.row},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},e.createdBy+" on "+ut(e.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},e.title)),$(e.description)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,e.description)),$(e.file)&&s.createElement(Ae,{style:kt.ele},s.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:B+e.file},e.file)))}):s.createElement(Le,null,"No data found."))}}]),t}(s.Component),En=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleLoading=function(e){a.setState({isLoading:e})},a.state={isLoading:!1,homeId:"",activeTab:1,data:{}},a.toggleLoading=a.toggleLoading.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({homeId:t}),t.length>0&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){e.setState({isLoading:!1}),t&&$(t._id)?e.setState({data:t}):Be.fail("Failed to load Home.")},function(t){e.setState({isLoading:!1}),Be.fail($(t)?t:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Homes",link:"homes"},{title:"View Home",link:"view-home"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{className:"tab-bar"},s.createElement("span",{className:"tab"+(1===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:1})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-deep-purple-a700 ti-info-alt"}))),s.createElement("span",{className:"tab"+(2===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:2})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-brown-500 fa fa-users"}))),s.createElement("span",{className:"tab"+(3===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:3})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-indigo-500 fa fa-car"}))),s.createElement("span",{className:"tab"+(4===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:4})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-deep-purple-500 fa fa-female"}))),s.createElement("span",{className:"tab"+(5===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:5})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-orange-500 ti-headphone-alt"}))),s.createElement("span",{className:"tab"+(6===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:6})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-pink-500 fa fa-id-card-o"}))),s.createElement("span",{className:"tab"+(7===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:7})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-indigo-500 fa fa-credit-card"}))),s.createElement("span",{className:"tab"+(8===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:8})}},s.createElement("span",{className:"icon-holder"},s.createElement("i",{className:"c-blue-500 fa fa-file-text"})))),s.createElement(Ae,{className:"p-15"},1===t?s.createElement(rn,{blocks:this.props.blocks,data:this.state.data}):2===t?s.createElement(ln,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadMembers}):3===t?s.createElement(cn,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVehicles}):4===t?s.createElement(mn,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadServants}):5===t?s.createElement(un,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadTickets}):6===t?s.createElement(dn,{appUser:this.props.appUser,user:this.props.user,homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVisitors}):7===t?s.createElement(pn,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadPayments}):s.createElement(hn,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadDocuments}))),s.createElement(De,{visible:this.state.isLoading}))))}}]),t}(s.Component),gn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(Ca(t,a,n))},onLoadMembers:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("members/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadVehicles:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("vehicles/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadServants:function(t,a,n){return e(qt(t,a,n))},onLoadTickets:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("tickets/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Tickets.")})}}(t,a,n))},onLoadVisitors:function(t,a,n,s){return e(nt(0,t,a,n,s))},onLoadPayments:function(t,a,n){return e(tt(0,t,a,n))},onLoadDocuments:function(t,a,n){return e(function(e,t,a){return function(n){(new oe).get("documents/"+e,function(e,n){ee(e)&&ee(e.data)?t(e.data):a(e&&$(e.message)?e.message:"Failed to load Documents.")})}}(t,a,n))}}})(En),yn=function(e,t,a,s){return{type:n.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:s}}};function bn(e,t){try{return t>0?100*e/t:0}catch(a){return ne(a,"calc.percentage"),0}}var vn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(a.state.topic)&&$(a.state.description)&&ee(a.state.fromDate)&&ee(a.state.toDate)&&$(a.state.pollOption.filter(function(e){return $(e)}))){a.setState({isLoading:!0});var e={_id:a.state.id,topic:a.state.topic,description:a.state.description,isAllowMultiple:a.state.isAllowMultiple,isOneVotePerFlat:a.state.isOneVotePerFlat,isAnonymous:a.state.isAnonymous,fromDate:a.state.fromDate,toDate:a.state.toDate,options:a.state.pollOption.filter(function(e){return $(e)})};a.props.onSave(a.props.user.client._id,e,a.props.polls.data,a.props.user,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),Be.success("Poll saved successfully.")):Be.fail("Failed to save pol.")})}else Be.warn("Please fill all the required fields before "+(a.state.id.length>0?"Update":"Save")+".")},a.onRemove=function(e){Object(ze.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onRemove(e,a.props.polls.data,a.props.user._id,function(e){a.setState({isLoading:!1}),!0===e?Be.success("Poll removed successfully."):Be.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})},a.loadVotes=function(){if(ee(a.state.showVotePoll)&&a.state.showVotePoll._id.length>0){var e=[];return a.state.showVotePoll.options.map(function(t,n){return e.push({option:t,votes:a.state.showVotePoll.votes.filter(function(e){return e.option===n}).length})}),s.createElement(Ae,{style:{padding:15}},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},a.state.showVotePoll.topic)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,a.state.showVotePoll.description)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},"Votes: "+a.state.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return s.createElement(Ae,{key:"pvo"+t,style:kt.ele},s.createElement(Le,null,e.votes+" ("+bn(e.votes,a.state.showVotePoll.votes.length)+"%) - "+e.option))}))}return""},a.state={isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date},a.onSave=a.onSave.bind(Object(ge.a)(a)),a.onRemove=a.onRemove.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,null,!1===this.state.isEdit&&s.createElement(Ae,{style:Object(g.a)({},kt.row,{paddingBottom:5})},s.createElement(Re,{title:"ADD NEW",onPress:function(){e.setState({isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})}})),!0===this.state.isEdit&&0===this.state.id.length?s.createElement(Ae,{key:"p0",style:Object(g.a)({},kt.row,{borderBottomWidth:1,borderBottomColor:q,borderBottomStyle:"solid"})},s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Topic",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(vt.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),s.createElement(Ae,{style:kt.ele},s.createElement(vt.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:this.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:this.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:this.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Options: ")),$(this.state.pollOption)?this.state.pollOption.map(function(t,a){return s.createElement(Ae,{key:"pop"+a,style:kt.ele},s.createElement(Te,{type:"text",key:"popt"+a,placeholder:"Option"+(a+1),className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:t,onChange:function(t){var n=e.state.pollOption;n[a]=t.target.value,e.setState({pollOption:n})}}),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){var t=e.state.pollOption;delete t[a],e.setState({pollOption:t})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))}):s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"No option found.")),s.createElement(Ae,{style:kt.ele},s.createElement("span",{onClick:function(){if(!$(e.state.pollOption.filter(function(e){return!$(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},s.createElement(Le,null,"Add More +"))),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:this.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):[],ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&$(this.props.polls.data)?this.props.polls.data.map(function(t,a){return!0===e.state.isEdit&&e.state.id===t._id?s.createElement(Ae,{key:"p"+t._id,style:Object(g.a)({},kt.row,{borderBottomWidth:1,borderBottomColor:q,borderBottomStyle:"solid"})},s.createElement(Ae,{style:kt.ele},s.createElement(Te,{type:"text",placeholder:"Topic",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),s.createElement(Ae,{style:kt.ele},s.createElement(vt.a,{onChange:function(t){e.setState({fromDate:t})},value:e.state.fromDate})),s.createElement(Ae,{style:kt.ele},s.createElement(vt.a,{onChange:function(t){e.setState({toDate:t})},value:e.state.toDate})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:e.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:e.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Ot,{isActive:e.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Options: ")),$(e.state.pollOption)?e.state.pollOption.map(function(t,a){return s.createElement(Ae,{key:"pop"+a,style:kt.ele},s.createElement(Te,{type:"text",key:"popt"+a,placeholder:"Option"+(a+1),className:"form-control",style:Object(g.a)({},Pe,Ve.ele),value:t,onChange:function(t){var n=e.state.pollOption;n[a]=t.target.value,e.setState({pollOption:n})}}),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){var t=e.state.pollOption;delete t[a],e.setState({pollOption:t})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))}):s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"No option found.")),s.createElement(Ae,{style:kt.ele},s.createElement("span",{onClick:function(){if(!$(e.state.pollOption.filter(function(e){return!$(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},s.createElement(Le,null,"Add More +"))),s.createElement(Ae,{style:kt.ele},s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:e.onSave},s.createElement("i",{className:"c-green-500 fa fa-check"})),s.createElement("span",{className:"icon-holder cur-p",onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},s.createElement("i",{className:"c-red-500 fa fa-times"})))):s.createElement(Ae,{key:"p"+t._id,style:Object(g.a)({},kt.row,{borderBottomWidth:1,borderBottomColor:q,borderBottomStyle:"solid"})},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.topic)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,ut(t.fromDate)+" to "+ut(t.toDate))),s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:!0===t.isAllowMultiple?Ve.radioActive:Object(g.a)({},Ve.radio,{marginLeft:5})},s.createElement(Le,{style:!0===t.isAllowMultiple?Object(g.a)({},Ve.radioActiveText):Object(g.a)({},Ve.radioText)},"Allow Multiple Votes"))),s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:!0===t.isOneVotePerFlat?Object(g.a)({},Ve.radioActive):Object(g.a)({},Ve.radio,{marginLeft:5})},s.createElement(Le,{style:!0===t.isOneVotePerFlat?Object(g.a)({},Ve.radioActiveText):Object(g.a)({},Ve.radioText)},"One Vote per Flat"))),s.createElement(Ae,{style:kt.ele},s.createElement(Ae,{style:!0===t.isAnonymous?Object(g.a)({},Ve.radioActive):Object(g.a)({},Ve.radio,{marginLeft:5})},s.createElement(Le,{style:!0===t.isAnonymous?Object(g.a)({},Ve.radioActiveText):Object(g.a)({},Ve.radioText)},"Anonymous Voting"))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Options: ")),$(t.options)?t.options.map(function(e,t){return s.createElement(Ae,{key:"po"+t,style:kt.ele},s.createElement(Le,{key:"pot"+t,style:{width:"100%"}},e))}):s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{padding:10}},"No option found.")),s.createElement(Ae,{style:kt.ele},t.fromDate>new Date&&s.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.setState({isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:$(t.options)?t.options:[]})}},s.createElement("i",{className:"c-blue-500 fa fa-pencil"})),s.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){e.onRemove(t._id)}},s.createElement("i",{className:"c-red-500 fa fa-trash"})),s.createElement(Le,{className:"pointer",style:{color:W},onClick:function(){e.setState({showVotePoll:t})}},"View Votes")))}):s.createElement(Le,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No poll found.":"Loading..."),s.createElement(yt.a,{open:ee(this.state.showVotePoll)&&this.state.showVotePoll._id.length>0,onClose:function(){return e.setState({showVotePoll:{_id:""}})}},s.createElement(Ae,{style:St.container},s.createElement(Ae,{style:St.content},this.loadVotes()))),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),wn=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadVotes=function(e){var t=[];return e.options.map(function(a,n){return t.push({option:a,votes:e.votes.filter(function(e){return e.option===n}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,a){return s.createElement(Ae,{key:"pvo"+a,style:kt.ele},s.createElement(Le,null,t.votes+" ("+bn(t.votes,e.votes.length)+"%) - "+t.option))})},a.onSelectOption=function(e,t){if(a.state.votePollId===e._id)if($(a.state.votes.filter(function(e){return e.option===t})))a.setState({votes:a.state.votes.filter(function(e){return e.option!==t})});else{var n=[];e.isAllowMultiple&&(n=a.state.votes),n.push({_homeId:a.props.user.homes[a.props.appUser.homeIndex]._id,_memberId:a.props.user._id,option:t,isActive:!0,createdBy:a.props.user._id}),a.setState({votes:n})}else{var s=[];s.push({_homeId:a.props.user.homes[a.props.appUser.homeIndex]._id,_memberId:a.props.user._id,option:t,isActive:!0,createdBy:a.props.user._id}),a.setState({votePollId:e._id,votes:s})}},a.onVote=function(e){a.state.votePollId===e&&$(a.state.votes)?(a.setState({isLoading:!0}),a.props.onVote(e,a.state.votes,a.props.polls,a.props.user,a.props.appUser,function(e){a.setState({isLoading:!1}),!0===e?(a.setState({votePollId:"",votes:[]}),Be.success("Your vote saved successfully.")):Be.fail("Failed to save your vote.")})):Be.warn("Please select any option to vote.")};var n=new Date;return a.state={isLoading:!1,votePollId:"",votes:[],currentDate:new Date(n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear())},a.loadVotes=a.loadVotes.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,null,ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&$(this.props.polls.data.filter(function(t){return $(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}))?this.props.polls.data.filter(function(t){return $(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}).map(function(t,a){return s.createElement(Ae,{key:"p"+t._id,style:Object(g.a)({},kt.row,{borderBottomWidth:1,borderBottomColor:q,borderBottomStyle:"solid"})},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.topic)),s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.description)),(!0!==t.isOneVotePerFlat||!$(t.votes)||!$(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&t.options.map(function(a,n){return s.createElement(Ae,{key:"popt"+n,style:kt.ele},s.createElement(Ot,{isActive:e.state.votePollId===t._id&&$(e.state.votes.filter(function(e){return e.option===n})),text:a,onPress:function(){return e.onSelectOption(t,n)}}))}),(!0!==t.isOneVotePerFlat||!$(t.votes)||!$(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&s.createElement(Ae,{style:{marginTop:5,width:"100%"}},s.createElement(Re,{title:"Vote",onPress:function(){return e.onVote(t._id)},style:{width:"100%"}})),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},"Your Votes:")),$(t.options)&&e.loadVotes(t))}):s.createElement(Le,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No active poll found.":"Loading..."),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),Nn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onReturnBack=function(e){Object(ze.confirmAlert)({title:"Confirm to return back from outing",message:"Are you sure? You return back from this outing?",buttons:[{label:"Yes",onClick:function(){a.setState({isLoading:!0}),a.props.onReturnBack(e,a.props.user,a.props.outings,function(e){a.setState({isLoading:!1}),e?Be.success("Successfully returned back."):Be.fail("Failed to Return back.")})}},{label:"No",onClick:function(){}}]})},a.state={isLoading:!1},a.onReturnBack=a.onReturnBack.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,null,this.props.appUser.role===J.USER&&(!ee(this.props.outings)||!$(this.props.outings.data.filter(function(e){return!0!==e.isReturned})))&&s.createElement(Ae,{style:kt.row},s.createElement(Re,{title:"Go Outing",onPress:function(){e.props.history.push("new-outing")}})),ee(this.props.outings)&&this.props.outings.isUpToDate&&!this.props.outings.isError&&$(this.props.outings.data)?this.props.outings.data.map(function(t,a){return s.createElement(Ae,{key:"o"+t._id,style:Object(g.a)({},kt.row,{borderBottomWidth:1,borderBottomColor:q,borderBottomStyle:"solid"})},s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+dt(t.createdAt))),s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},dt(t.fromDate)+" to "+dt(t.toDate))),$(t.place)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,{style:{fontWeight:"bold"}},t.place)),$(t.address)&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,t.address)),t.isReturned&&s.createElement(Ae,{style:kt.ele},s.createElement(Le,null,"Returned on "+dt(t.returnedAt))),e.props.appUser.role!==J.USER&&s.createElement(Ae,{style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Le,null,"No one in the home")),e.props.appUser.role===J.USER&&!0!==t.isReturned&&s.createElement(Ae,{style:Object(g.a)({},Ve.saveBtn,{flexDirection:"row"})},s.createElement(Re,{title:"Return to Home",onPress:function(){e.onReturnBack(t._id)}})))}):s.createElement(Le,{style:{padding:20}},this.props.outings.isUpToDate?this.props.outings.isError?this.props.outings.errorMessage:"No outings found.":"Loading..."),s.createElement(De,{visible:this.state.isLoading}))}}]),t}(s.Component),Sn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:!ee(a.props.user)||a.props.appUser.role!==J.ADMIN&&a.props.appUser.role!==J.MANAGER?2:1,isShowPoll:ee(a.props.user)&&(a.props.appUser.role===J.ADMIN||a.props.appUser.role===J.MANAGER||a.props.appUser.role===J.USER&&a.props.appUser.homeIndex>=0)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadAds(this.props.user.client._id,function(e){e||Be.fail("Failed to load Ads.")}),this.state.isShowPoll&&this.props.onLoadPoll(this.props.user.client._id,this.props.appUser.role,function(e){e||Be.fail("Failed to load Poll.")}),this.props.onLoadOuting(this.props.user.client._id,this.props.appUser.role===J.USER?this.props.user.homes[this.props.appUser.homeIndex]._id:"",function(e){e||Be.fail("Failed to load Outing.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Notice",link:"notice"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},this.state.isShowPoll&&s.createElement("span",{className:"tab"+(1===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:1})}},"POLL"),s.createElement("span",{className:"tab"+(2===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:2})}},"ADS"),s.createElement("span",{className:"tab"+(3===this.state.activeTab?" active":""),onClick:function(){return e.setState({activeTab:3})}},"OUTING")),s.createElement(Ae,{className:"p-15"},1===this.state.activeTab?this.props.appUser.role===J.ADMIN||this.props.appUser.role===J.MANAGER?s.createElement(vn,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onSave:this.props.onSavePoll,onRemove:this.props.onRemovePoll}):s.createElement(wn,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onVote:this.props.onVote}):2===this.state.activeTab?s.createElement(ht,{data:this.props.ads.isUpToDate?this.props.ads.data:[],message:this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No data found.":"Loading..."}):3===this.state.activeTab?s.createElement(Nn,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,outings:this.props.outings,onReturnBack:this.props.onReturnBack}):s.createElement(ht,{data:4===this.state.activeTab?this.props.remainders:this.props.complaints,message:"No data found."}))))))}}]),t}(s.Component),On=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,outings:e.Outings,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,a){return e(ga(t,a))},onLoadPoll:function(t,a,n){return e(function(e,t,a){return function(t){t(yn([],!1,!1,"")),(new oe).get("polls/"+e,function(e,n){ee(e)&&ee(e.data)?(t(yn(e.data,!0,!1,"")),a(!0)):a(!1)})}}(t,0,n))},onSavePoll:function(t,a,n,s,o){return e(function(e,t,a,n,s){return function(o){t&&$(t._id)?(new oe).put("poll/"+t._id,function(e,n){if(ee(e)&&$(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].topic=t.topic,a[r].description=t.description,a[r].isAllowMultiple=t.isAllowMultiple,a[r].isOneVotePerFlat=t.isOneVotePerFlat,a[r].isAnonymous=t.isAnonymous,a[r].fromDate=t.fromDate,a[r].toDate=t.toDate,a[r].options=t.options,o(yn(ee(a)?a:[],!0,!1,"")),s(!0)}else s(!1)},t):(new oe).post("poll/"+e,function(e,r){ee(e)&&$(e.data)?(t._id=e.data,t.createdBy=n.name,a.unshift(t),o(yn(ee(a)?a:[],!0,!1,"")),s(!0)):s(!1)},t)}}(t,a,n,s,o))},onRemovePoll:function(t,a,n,s){return e(function(e,t,a,n){return function(s){(new oe).delete("poll/"+e,function(a,o){ee(a)&&ee(a.data)&&!0===a.data?(t=t.filter(function(t,a){return t._id!==e}),s(yn(ee(t)?t:[],!0,!1,"")),n(!0)):n(!1)},{Id:e,UserId:a})}}(t,a,n,s))},onVote:function(t,a,n,s,o,r){return e(function(e,t,a,n,s,o){return function(n){(new oe).post("poll/vote/"+e,function(t,s){if(ee(t)&&$(t.data)){var r=a.data.findIndex(function(t){return t._id===e});if(a.data[r].votes=t.data,n(yn(a.data,!0,!1,"")),a.isUpToDate&&!a.isError&&$(a.data)){var i=a.data,l=i.findIndex(function(t){return t._id===e});i[l].votes=t.data,n(yn(i,!0,!1,""))}o(!0)}else o(!1)},{votes:t})}}(t,a,n,0,0,r))},onLoadOuting:function(t,a,n){return e(function(e,t,a){return function(e){e(Ha([],!1,!1,"")),(new oe).get("outings"+($(t)?"/"+t:""),function(t,n){ee(t)&&ee(t.data)?(e(Ha(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onReturnBack:function(t,a,n,s){return e(function(e,t,a,n){return function(t){(new oe).delete("outing/return/"+e,function(s,o){if(ee(s)&&ee(s.data)&&!0===s.data){var r=a.data.findIndex(function(t){return t._id===e});a.data[r].isReturned=!0,a.data[r].returnedAt=new Date,t(Ha(a.data,!0,!1,"")),n(!0)}else n(!1)})}}(t,0,n,s))}}})(Sn),kn={content:{flex:1,width:"100%"},listItem:{marginLeft:15}},Cn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(function(e){return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Pt,{data:[{title:"Info",link:"info"}]}),s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Ae,{className:"center",style:Ve.row},s.createElement(Le,{style:{color:W,fontWeight:"bold",textAlign:"center"}},e.user.client.name)),s.createElement(Ae,{className:"center",style:Ve.row},s.createElement(Le,{style:{color:W,fontWeight:"bold",textAlign:"center"}},e.user.client.description)),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Home users")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Maintenance Admin Payment")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Receive real-time notifications")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Visitor management")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Lodge any complaint related to your apartment and track")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,null,"Admin Users")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Create polls and gather the opinion of all Apartment residents")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"All details of your flat, staff who work in your flat, visitors coming to your flat")),s.createElement(Ae,{style:Ve.row},s.createElement(Le,{style:kn.listItem},"Accounts  and much more..."))))))}),An=function(){return s.createElement(Ae,{id:"mainContent"},s.createElement(Ae,{className:"row gap-20 masonry pos-r"},s.createElement(Ae,{className:"masonry-item col-12"},s.createElement(Ae,{className:"bgc-white p-20"},s.createElement(Le,null,"Page not found.")))))},jn=function(){Ze(".sidebar .sidebar-menu li a").on("click",function(){var e=Ze(this);e.parent().hasClass("open")?e.parent().children(".dropdown-menu").slideUp(200,function(){e.parent().removeClass("open")}):(e.parent().parent().children("li.open").children(".dropdown-menu").slideUp(200),e.parent().parent().children("li.open").children("a").removeClass("open"),e.parent().parent().children("li.open").removeClass("open"),e.parent().children(".dropdown-menu").slideDown(200,function(){e.parent().addClass("open")}))}),Ze(".sidebar").find(".sidebar-link").each(function(e,t){Ze(t).removeClass("active")}).filter(function(){var e=Ze(this).attr("href");return("/"===e[0]?e.substr(1):e)===window.location.pathname.substr(1)}).addClass("active"),Ze(".sidebar-toggle").on("click",function(e){Ze(".app").toggleClass("is-collapsed"),e.preventDefault()}),Ze("#sidebar-toggle").click(function(e){e.preventDefault(),setTimeout(function(){window.dispatchEvent(window.EVENT)},300)})},xn=(a(155),function(){Ze('[data-toggle="popover"]').popover(),Ze('[data-toggle="tooltip"]').tooltip()}),Tn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).isUser=function(){return a.props.appUser.role===J.USER},a.isAdmin=function(){return a.props.appUser.role===J.ADMIN},a.isManager=function(){return a.props.appUser.role===J.MANAGER},a.isGateKeeper=function(){return a.props.appUser.role===J.GATEKEEPER},a.state={isLoading:!1},a.isUser=a.isUser.bind(Object(ge.a)(a)),a.isAdmin=a.isAdmin.bind(Object(ge.a)(a)),a.isManager=a.isManager.bind(Object(ge.a)(a)),a.isGateKeeper=a.isGateKeeper.bind(Object(ge.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ee(this.props.user)&&$(this.props.user._id)||(this.setState({isLoading:!0}),this.props.getProfile(function(t,a){e.setState({isLoading:!1}),!0!==t&&Be.fail("Failed to load Profile: "+a)})),setTimeout(function(){jn(),Qe(),xn()},1e3)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.state.isLoading?s.createElement(De,{visible:this.state.isLoading,text:"Loading..."}):s.createElement(Ae,null,s.createElement($e,{appUser:this.props.appUser,user:this.props.user}),s.createElement(Ae,{className:"page-container"},s.createElement(qe,{appUser:this.props.appUser,user:this.props.user,onHomeChange:this.props.onHomeChange,onLogout:this.props.onLogout}),s.createElement("main",{className:"main-content bgc-grey-100"},$(this.props.appUser.role)&&!this.isUser()||$(this.props.user.homes)?s.createElement(Ke.c,null,s.createElement(Ke.a,{path:"/",exact:!0,component:Lt}),this.isUser()&&s.createElement(Ke.a,{path:"/members",exact:!0,component:Bt}),this.isUser()&&s.createElement(Ke.a,{path:"/new-member",exact:!0,component:Vt}),this.isUser()&&s.createElement(Ke.a,{path:"/vehicles",exact:!0,component:Yt}),this.isUser()&&s.createElement(Ke.a,{path:"/new-vehicle",exact:!0,component:zt}),this.isUser()&&s.createElement(Ke.a,{path:"/servants",exact:!0,component:Qt}),this.isUser()&&s.createElement(Ke.a,{path:"/new-servant",exact:!0,component:aa}),(this.isUser()||this.isAdmin()||this.isManager())&&s.createElement(Ke.a,{path:"/tickets",exact:!0,component:ra}),this.isUser()&&s.createElement(Ke.a,{path:"/new-ticket",exact:!0,component:la}),this.isUser()&&s.createElement(Ke.a,{path:"/visitors",exact:!0,component:ma}),this.isUser()&&s.createElement(Ke.a,{path:"/new-outing",exact:!0,component:Ga}),(this.isAdmin()||this.isManager())&&s.createElement(Ke.a,{path:"/ads",exact:!0,component:wa}),(this.isAdmin()||this.isManager())&&s.createElement(Ke.a,{path:"/new-ad",exact:!0,component:Sa}),(this.isAdmin()||this.isManager())&&s.createElement(Ke.a,{path:"/notification",exact:!0,component:Va}),this.isAdmin()&&s.createElement(Ke.a,{path:"/users",exact:!0,component:ka}),this.isAdmin()&&s.createElement(Ke.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:La}),this.isAdmin()&&s.createElement(Ke.a,{path:"/approve-users",exact:!0,component:Da}),this.isAdmin()&&s.createElement(Ke.a,{path:"/homes",exact:!0,component:Ta}),this.isAdmin()&&s.createElement(Ke.a,{path:"/view-home/:id",exact:!0,component:gn}),this.isAdmin()&&s.createElement(Ke.a,{path:"/edit-home/:id",exact:!0,component:Pa}),this.isAdmin()&&s.createElement(Ke.a,{path:"/blocks",exact:!0,component:Ja}),this.isAdmin()&&s.createElement(Ke.a,{path:"/edit-block/:id",exact:!0,component:$a}),(this.isAdmin()||this.isManager())&&s.createElement(Ke.a,{path:"/payment",exact:!0,component:on}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&s.createElement(Ke.a,{path:"/all-visitors",exact:!0,component:Ba}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&s.createElement(Ke.a,{path:"/all-takeways",exact:!0,component:ea}),s.createElement(Ke.a,{path:"/notice",exact:!0,component:On}),s.createElement(Ke.a,{path:"/my-profile",exact:!0,component:fa}),this.props.user.role.indexOf(",")>0&&s.createElement(Ke.a,{path:"/my-role",exact:!0,component:Ea}),s.createElement(Ke.a,{path:"/my-documents",exact:!0,component:za}),s.createElement(Ke.a,{path:"/change-password",exact:!0,component:da}),s.createElement(Ke.a,{path:"/info",exact:!0,component:Cn}),s.createElement(Ke.a,{component:An})):s.createElement(Ae,{id:"mainContent"},s.createElement(Le,{style:{margin:20}},"You are not authorized to view this content. Please contact administrator/manager."))),s.createElement(et,null)))}}]),t}(s.Component),Un=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new oe).get("account/profile",function(a,n){if(ee(a)&&ee(a.data)&&$(a.data._id)){t(ue(a.data)),t(me($(a.data.homes)?0:-1));var s=a.data.role.split(",");$(s)&&t(ce(s[0])),(s.indexOf(J.ADMIN)>=0||s.indexOf(J.MANAGER)>=0)&&((new oe).get("members",function(e,a){ee(e)&&$(e.data)&&t(de(e.data,!0,!1,""))}),(new oe).get("blocks/"+a.data.client._id,function(e,a){ee(e)&&$(e.data)&&t(fe(e.data,!0,!1,""))})),(s.indexOf(J.ADMIN)>=0||s.indexOf(J.MANAGER)>=0||s.indexOf(J.GATEKEEPER)>=0)&&(new oe).get("homes/"+a.data.client._id,function(e,a){ee(e)&&$(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(pe(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,n)})}}(t))},onHomeChange:function(t,a){return e(function(e,t){return function(a){a(me(e)),t(!0)}}(t,a))},onLogout:function(t){return e(re(t))}}})(Tn),In=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){$(sessionStorage.getItem("auth_token"))&&this.props.setLogin(!0)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.appUser.isLoggedIn?s.createElement(Ee.a,null,s.createElement(Un,null)):s.createElement(Ye,null)}}]),t}(s.Component),Ln=Object(p.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(le(e))}}(t))}}})(In),Rn=a(86),Dn=(a(160),a(158),function(){var e=document.createEvent("UIEvents");window.EVENT=e,e.initUIEvent("resize",!0,!1,window,0),window.addEventListener("load",function(){window.dispatchEvent(e)}),Ze("a").filter('[href^="http"], [href^="//"]').not('[href*="'.concat(window.location.host,'"]')).attr("rel","noopener noreferrer").attr("target","_blank"),document.addEventListener("click",function(){window.dispatchEvent(window.EVENT)})}(),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){!function(){try{var e=Rn.initializeApp({apiKey:"AIzaSyCrGumtbn2McvNXzZdhShhLaW0QsIFZxOk",authDomain:"nest-df0a7.firebaseapp.com",databaseURL:"https://nest-df0a7.firebaseio.com",projectId:"nest-df0a7",storageBucket:"nest-df0a7.appspot.com",messagingSenderId:"422026408390",appId:"1:422026408390:web:cf0e6a945e7f1ec0d602c7"}).messaging();e.usePublicVapidKey("BExnmgKfYLBd44lIqI5xRAD55I5Qhsaa7sI_wJ19zcIuq05y2Z1AtuaNBChU--UhjFxpA2XLR2lI02otUje4Rkk"),e.requestPermission().then(Object(_.a)(D.a.mark(function t(){var a;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:a=t.sent,localStorage.setItem("fcm_token",a);case 4:case"end":return t.stop()}},t)}))).catch(function(e){console.log("Unable to get permission to notify.",e)})}catch(t){console.log("FCM ERROR: ",t)}}()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.a.createElement(p.a,{store:L},o.a.createElement(Ln,null),o.a.createElement(f.ToastsContainer,{store:f.ToastsStore,position:f.ToastsContainerPosition.TOP_RIGHT}))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),i.a.render(o.a.createElement(Dn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},91:function(e,t,a){e.exports=a(159)}},[[91,1,2]]]);
//# sourceMappingURL=main.bd09aaf3.chunk.js.map