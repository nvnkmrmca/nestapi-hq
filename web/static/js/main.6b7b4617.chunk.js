(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(19),l=a.n(o),s=a(5),i=a(20),m=a(25),u=a(74),d=a(2);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(n||(n={}));var p=function(e,t){return Object(d.a)({},e,{isLoggedIn:t})},f=function(e,t){return Object(d.a)({},e,{role:t})},E=function(e,t){return Object(d.a)({},e,{homeIndex:t})},h=function(e,t){return Object(d.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,relationship:t.relationship,otherRelationship:t.otherRelationship,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},b=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},g=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},v=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},y=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},O=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},B=function(e,t){return t},j=Object(m.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_LOGIN_STATUS:return p(e,t.payload);case n.SET_ROLE:return f(e,t.payload);case n.SET_HOME_INDEX:return E(e,t.payload);case n.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",relationship:"",otherRelationship:"",isApproved:null,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[],memberRelationships:[]}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USER:return h(e,t.payload);case n.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",relationship:"",otherRelationship:"",isApproved:null,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[],memberRelationships:[]}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_ADS:return b(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_POLLS:return N(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_OUTINGS:return g(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_DOCUMENTS:return v(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERS:return y(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_HOMES:return T(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERHOMES:return O(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_TICKETS:return w(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_BLOCKS:return k(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_GATE_NO:return B(e,t.payload)}return e}}),A=Object(m.e)(j,Object(m.d)(Object(m.a)(u.a))),C=a(21),S=a.n(C),U=a(37),_=a(36),I="https://nestadmin.herokuapp.com/",x=I+"image/",D=I+"file/",R="DD/MMM/YYYY",P="DD/MMM/YYYY hh:mm A",L="USER",M="ADMIN",F="GATEKEEPER",V="MANAGER",H="MAINTENANCE SUPERVISOR",Y="SECURITY SUPERVISOR",G="MAINTENANCE MANAGER",K="SECURITY MANAGER",W="A",q="Q",z=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function J(e){return X(e)&&e.length>0}function X(e){return null!==e&&void 0!==e}function Z(e){try{return X(e)?JSON.stringify(e):""}catch(t){return $(t,"JSON2String"),""}}function Q(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}function $(e,t){console.log("Error:"+t+":"+e)}function ee(e,t){13===(e.keyCode?e.keyCode:e.which)&&"function"===typeof t&&t()}var te=function e(){var t=this;Object(_.a)(this,e),this.url="https://nestadmin.herokuapp.com/api/",this.get=function(e,a){t.fetch(e,"GET",a)},this.post=function(e,a,n){t.fetch(e,"POST",a,n)},this.delete=function(e,a,n){t.fetch(e,"DELETE",a,n)},this.patch=function(e,a,n){t.fetch(e,"PATCH",a,n)},this.put=function(e,a,n){t.fetch(e,"PUT",a,n)},this.upload=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r){var c,o,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return c=e.sent,e.next=5,t.getAS("client_id");case 5:return o=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,(s=new FormData).append("file",r.file,r.name),s.append("name",r.name),fetch(t.url+a,{method:"POST",headers:{Accept:"application/json","x-access-token":J(c)?"Bearer "+c:"","client-id":J(o)?""+o:"","user-id":J(l)?""+l:""},body:s}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){X(e)?X(e.data)?t.callback(n,e,"Some problem occurs. Please contact administrator."):t.callback(n,null,e.message):t.callback(n,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(n,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(U.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r,c){var o,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return o=e.sent,e.next=5,t.getAS("client_id");case 5:return l=e.sent,e.next=8,t.getAS("user_id");case 8:s=e.sent,fetch(t.url+a,{method:n,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":J(o)?"Bearer "+o:"","client-id":J(l)?""+l:"","user-id":J(s)?""+s:""},body:X(c)?Z(c):null}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){X(e)?X(e.data)?t.callback(r,e,"Some problem occurs. Please contact administrator."):t.callback(r,null,e.message):t.callback(r,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(r,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.callback=function(e,t,a){X(e)&&"function"==typeof e&&e(t,a)}},ae=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(re(!1)),t(oe(-1)),t(ue()),e(!0)}catch(a){e(!1)}}},ne=function(e){return{type:n.SET_GATE_NO,payload:e}},re=function(e){return{type:n.SET_LOGIN_STATUS,payload:e}},ce=function(e){return{type:n.SET_ROLE,payload:e}},oe=function(e){return{type:n.SET_HOME_INDEX,payload:e}},le=function(e){return{type:n.LOAD_USER,payload:e}},se=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ie=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},me=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ue=function(){return{type:n.RESET}},de=a(9),pe=a(1),fe=a(28),Ee=a(29);function he(){var e=Object(fe.a)(["\n"]);return he=function(){return e},e}function be(){var e=Object(fe.a)(["\n"]);return be=function(){return e},e}function Ne(){var e=Object(fe.a)(["\n"]);return Ne=function(){return e},e}function ge(){var e=Object(fe.a)(["\n"]);return ge=function(){return e},e}function ve(){var e=Object(fe.a)(["\n"]);return ve=function(){return e},e}function ye(){var e=Object(fe.a)(["\noverflow: auto;\n"]);return ye=function(){return e},e}function Te(){var e=Object(fe.a)(["\n"]);return Te=function(){return e},e}var Oe=Ee.a.div(Te()),we=Ee.a.div(ye()),ke=Ee.a.img(ve()),Be=Ee.a.input(ge()),je=Ee.a.textarea(Ne()),Ae=Ee.a.select(be()),Ce=Ee.a.label(he()),Se=function(e){var t=e.title,a=e.onPress,n=e.type,c=e.className,o=e.style;return r.createElement("input",{type:"button",className:"btn "+(n||"btn-primary")+(c?" "+c:""),value:t,onClick:function(){return a()},style:Object(d.a)({},o)})},Ue=function(e){return e.visible?r.createElement(Oe,{id:"loader"},r.createElement(Oe,{className:"bg"}),r.createElement(Oe,{className:"spinner"})):null},_e=function e(){Object(_.a)(this,e)};_e.logo=x+"logo.png",_e.workInProgress=x+"work-in-progress.png",_e.username=x+"username.png",_e.password=x+"password.png",_e.mobile=x+"mobile.png",_e.email=x+"email.png",_e.loading=x+"loading.gif",_e.avatarMale=x+"avatar-male.png",_e.avatarFemale=x+"avatar-female.gif";var Ie=function e(){Object(_.a)(this,e)};Ie.success=function(e){i.ToastsStore.success(e)},Ie.fail=function(e){i.ToastsStore.error(e)},Ie.warn=function(e){i.ToastsStore.warning(e)},Ie.info=function(e){i.ToastsStore.info(e)},Ie.show=function(e,t,a){i.ToastsStore.info(e)};var xe=Ie,De=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,o=e.className,l=Q();return r.createElement("span",{className:"mR-10 "+(o||"")},r.createElement("input",{type:"radio",id:l,key:c,checked:t,onClick:n||function(){}}),J(a)&&r.createElement("label",{htmlFor:l,className:"mL-5 va-m"},a))},Re=function(e){var t=Object(r.useState)(""),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(0),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=Object(r.useState)(""),w=Object(pe.a)(O,2),k=w[0],B=w[1],j=Object(r.useState)(""),A=Object(pe.a)(j,2),C=A[0],S=A[1],U=Object(r.useState)(""),_=Object(pe.a)(U,2),I=_[0],x=_[1],D=Object(r.useState)("TENANT"),R=Object(pe.a)(D,2),P=R[0],L=R[1],M=Object(r.useState)("USER"),F=Object(pe.a)(M,2),V=F[0],H=F[1];return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",className:"form-control",placeholder:"App Code",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",className:"form-control",placeholder:"User Id / Number",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",className:"form-control",placeholder:"Name",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"number",className:"form-control",placeholder:"Age",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"M"===k,text:"Male",onPress:function(){return B("M")}}),c.a.createElement(De,{isActive:"F"===k,text:"Female",onPress:function(){return B("F")}}),c.a.createElement(De,{isActive:"O"===k,text:"Other",onPress:function(){return B("O")}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",className:"form-control",placeholder:"Mobile Number",value:C,onChange:function(e){return S(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",className:"form-control",placeholder:"Email ID",value:I,onChange:function(e){return x(e.target.value)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SUBMIT",onPress:function(){if(J(i)&&J(p)&&J(b)&&y>0&&J(k)&&J(C)&&J(I)){var t={_id:n,number:p,name:b,age:y,gender:k,mobileNo:C,emailId:I?I.toLowerCase():"",type:P,role:V};e.onSignUp(t,i,function(e){!0===e&&(o(""),m(""),f(""),N(""),T(0),B(""),S(""),x(""),L("TENANT"),H("USER"))})}else xe.warn("Please fill all the required fields before Submit.")}})))},Pe={txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11}},Le=Object(s.b)(function(e,t){return{}},function(e){return{onLogin:function(t,a,n){return e(function(e,t,a){return function(n){var r=localStorage.getItem("fcm_token");(new te).post("account/login",function(e,t){if(X(e)&&X(e.data)&&J(e.data.token)&&J(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(r){}n(re(!0)),a(!0,"")}else a(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:r,os:"web",osVersion:"web"})}}(t,a,n))},onForgetPassword:function(t,a,n){return e(function(e,t,a){return function(n){(new te).post("account/resetpassword",function(e,t){X(e)&&X(e.data)&&X(e.data.data)?!0===e.data.data?a(!0,""):a(!1,e.data.message):a(!1,t)},{mobileNo:e,emailId:t})}}(t,a,n))},onSignUp:function(t,a,n){return e(function(e,t,a){return function(n){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new te).post("account/signup",function(e,t){X(e)&&X(e.data)&&e.data.length>0?a(!0,""):a(!1,t)},e)}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(!1),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=Object(r.useState)(!1),w=Object(pe.a)(O,2),k=w[0],B=w[1],j=Object(r.useState)(""),A=Object(pe.a)(j,2),C=A[0],S=A[1],U=Object(r.useState)(""),_=Object(pe.a)(U,2),I=_[0],x=_[1],D=function(){J(i)&&J(p)?(N(""),o(!0),e.onLogin(i,p,function(e,t){o(!1),N(!0===e?"":t)})):xe.warn("Enter Mobile Number and Password to continue.")},R=function(){J(C)&&J(I)?(N(""),o(!0),e.onForgetPassword(C,I.toLowerCase(),function(e,t){o(!1),!0===e?(xe.success("Password reset success. Login with New password sent to your Email. Change password after login."),N(""),T(!1),B(!1),m(""),f("")):N(t)})):xe.warn("Enter Mobile Number and Email to continue.")};return c.a.createElement(Oe,{className:"container",style:{maxWidth:"270px"}},c.a.createElement(Oe,{className:"ta-c ai-c jc-c mB-30 mT-5"},c.a.createElement(ke,{src:_e.logo,style:{width:100,height:100}})),y&&c.a.createElement(Oe,{className:"ai-c jc-c"},c.a.createElement(Oe,{className:"col-12 mB-25"},c.a.createElement(ke,{className:"pos-a",src:_e.mobile,style:Pe.txtIcon}),c.a.createElement(Be,{type:"text",className:"form-control pL-25",placeholder:"Registered Mobile Number",value:C,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){ee(e,R)}})),c.a.createElement(Oe,{className:"col-12 mB-25"},c.a.createElement(ke,{className:"pos-a",src:_e.email,style:Pe.txtIcon}),c.a.createElement(Be,{type:"text",className:"form-control pL-25",placeholder:"Registered Email",value:I,onChange:function(e){return x(e.target.value)},onKeyPress:function(e){ee(e,R)}})),c.a.createElement(Oe,{className:"ta-c"},c.a.createElement(Se,{title:!1===n?"Reset my password":"Loading...",onPress:R}),c.a.createElement(Ce,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},b)),c.a.createElement(Oe,{className:"mT-5 ta-c"},c.a.createElement(Ce,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),B(!1),S(""),x(""),N("")}},"Go back to Login."))),k&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Re,{onSignUp:function(t,a,n){N(""),o(!0),e.onSignUp(t,a,function(e,t){o(!1),!0===e?(T(!1),B(!1),N(""),xe.success("Sign Up success. Please wait till Manager approves then you can access your account."),n(!0)):(xe.fail(J(t)?t:"Failed to Sign Up."),n(!1))})}}),c.a.createElement(Oe,{className:"mT-15 ta-c"},c.a.createElement(Ce,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),B(!1),S(""),x(""),N("")}},"Go back to Login."))),!y&&!k&&c.a.createElement(Oe,{className:"ai-c jc-c"},c.a.createElement(Oe,{className:"col-12 mB-25"},c.a.createElement(ke,{className:"pos-a",src:_e.username,style:Pe.txtIcon}),c.a.createElement(Be,{type:"text",className:"form-control pL-25",placeholder:"Mobile Number",value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){ee(e,D)}})),c.a.createElement(Oe,{className:"col-12 mB-15"},c.a.createElement(ke,{className:"pos-a",src:_e.password,style:Pe.txtIcon}),c.a.createElement(Be,{type:"password",className:"form-control pL-25",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){ee(e,D)}})),c.a.createElement(Oe,{className:"ta-c"},c.a.createElement(Ce,{className:"col-12 cur-p mB-15 ta-r c-blue-500",onClick:function(){T(!0),B(!1),S(""),x(""),N("")}},"Forgot Password?"),c.a.createElement(Se,{title:!1===n?"LOGIN":"Loading...",onPress:D}),c.a.createElement(Ce,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},b)),c.a.createElement(Oe,{className:"col-12 mT-5 ai-c jc-c"},c.a.createElement(Ce,{className:"col-12 mB-5 ta-c"},"Dont have an account?"),c.a.createElement(Oe,{className:"col ai-c jc-c cur-p bd p-0 bdc-blue-500 c-blue-500",style:{borderRadius:"15px"}},c.a.createElement(Ce,{className:"ta-c m-0 p-15 cur-p",onClick:function(){T(!1),B(!0),S(""),x(""),N("")}},"CREATE / JOIN YOUR FLAT")))),c.a.createElement(Ue,{visible:n,text:""}))}),Me=a(26),Fe=a(6),Ve=function(e){return r.createElement("div",{className:"header navbar"},r.createElement("div",{className:"header-container"},r.createElement("ul",{className:"nav-left"},r.createElement("li",null,r.createElement("a",{id:"sidebar-toggle",className:"sidebar-toggle",href:"javascript:void(0);"},r.createElement("i",{className:"ti-menu"}))),r.createElement("li",{className:"search-box"},r.createElement("a",{className:"search-toggle no-pdd-right",href:"javascript:void(0);"},r.createElement("i",{className:"search-icon ti-search pdd-right-10"}),r.createElement("i",{className:"search-icon-close ti-close pdd-right-10"}))),r.createElement("li",{className:"search-input"},r.createElement("input",{className:"form-control",type:"text",placeholder:"Search..."}))),r.createElement("ul",{className:"nav-right"},e.appUser.role===L&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.homes.length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"fa fa-home"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"fa fa-home pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"House(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.homes.map(function(t,a){return r.createElement("li",{key:"h"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed",onClick:function(){return t=a,void e.onHomeChange(t,function(e){});var t}},r.createElement("span",null,r.createElement("span",{className:e.appUser.homeIndex===a?"fw-500":"c-grey-600"},""+t.number)))))}))))),e.user.role.indexOf(",")>0&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.role.split(",").length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-user"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-user pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Role(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.role.split(",").map(function(t,a){return r.createElement("li",{key:"r"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"tt-c "+(e.appUser.role===t?"fw-500":"c-grey-600")},""+t.toLowerCase())))))}))),r.createElement("li",{className:"pX-20 pY-15 ta-c bdT"},r.createElement("span",null,r.createElement(de.b,{className:"c-grey-600 cH-blue fsz-sm td-n",to:"my-role"},"Change Role ",r.createElement("i",{className:"ti-angle-right fsz-xs mL-10"})))))),r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},"0"),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-bell"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-bell pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Notification(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},r.createElement("li",null,r.createElement("a",{href:"",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"c-grey-600"},"No notification found."))))))))),r.createElement("li",{className:"dropdown"},r.createElement("a",{href:"",className:"dropdown-toggle no-after peers fxw-nw ai-c lh-1","data-toggle":"dropdown"},r.createElement("div",{className:"peer mR-10"},r.createElement(ke,{className:"w-2r bdrs-50p",src:J(e.user.image)?D+e.user.image:"F"===e.user.gender.toLocaleUpperCase()?_e.avatarFemale:_e.avatarMale,alt:""})),r.createElement("div",{className:"peer"},r.createElement("span",{className:"fsz-sm c-grey-900"},e.user.name))),r.createElement("ul",{className:"dropdown-menu fsz-sm"},r.createElement("li",null,r.createElement(de.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-profile"},r.createElement("i",{className:"fa fa-user mR-10"}),r.createElement("span",null,"Profile"))),r.createElement("li",null,r.createElement(de.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-documents"},r.createElement("i",{className:"fa fa-file-text mR-10"}),r.createElement("span",null,"Documents"))),e.user.role.indexOf(",")>0&&r.createElement("li",null,r.createElement(de.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/my-role"},r.createElement("i",{className:"ti-user mR-10"}),r.createElement("span",null,"Role"))),r.createElement("li",null,r.createElement(de.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"/change-password"},r.createElement("i",{className:"fa fa-key mR-10"}),r.createElement("span",null,"Password"))),r.createElement("li",{role:"separator",className:"divider"}),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",onClick:function(){Object(Fe.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){e.onLogout(function(e){!0===e?xe.success("Logout Success!"):xe.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})}},r.createElement("i",{className:"ti-power-off mR-10"}),r.createElement("span",null,"Logout"))))))))},He=[{title:"Dashboard",icon:"c-blue-500 ti-home",path:"/"},{title:"Blocks",icon:"c-brown-500 fa fa-building",path:"/blocks",roles:[M]},{title:"Houses",icon:"c-blue-700 fa fa-home",path:"/homes",roles:[M]},{title:"Users",icon:"c-deep-purple-500 fa fa-users",path:"/users",roles:[M]},{title:"Members",icon:"c-brown-500 fa fa-users",path:"/members",roles:[L]},{title:"Servants",icon:"c-deep-purple-500 fa fa-female",path:"/servants",roles:[L]},{title:"Vehicles",icon:"c-blue-700 fa fa-car",path:"/vehicles",roles:[L]},{title:"Tickets",icon:"c-orange-500 ti-headphone-alt",path:"/tickets",roles:[L,M,V,H,G]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/visitors",roles:[L]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/all-visitors",roles:[M,V,F,Y,K]},{title:"Door Locks",icon:"c-indigo-800 ti-lock",path:"/outings",roles:[L,M,V,F,Y,K]},{title:"Notification",icon:"c-red-500 ti-bell",path:"/notification",roles:[M,V]},{title:"Ads",icon:"c-teal-500 fa fa-bullhorn",path:"/ads",roles:[M,V]},{title:"Payment",icon:"c-indigo-500 fa fa-credit-card",path:"/payment",hasPayment:!0,roles:[M,V]},{title:"Notice",icon:"c-blue-a400 ti-notepad",path:"/notice"},{title:"Settings",icon:"c-deep-orange-500 ti-settings",child:[{title:"My Profile",path:"/my-profile"},{title:"My Role",path:"/my-role",hasMRole:!0},{title:"My Documents",path:"/my-documents"},{title:"Change Password",path:"/change-password"}]},{title:"Info",icon:"c-deep-purple-a700 ti-info-alt",path:"/info"}],Ye=function(e){return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar-inner"},c.a.createElement("div",{className:"sidebar-logo"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement(de.b,{className:"sidebar-link td-n",to:"/"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"logo"},c.a.createElement(ke,{src:_e.logo,className:"",style:{width:70,height:65,padding:"13px 15px"},alt:""}))),c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement("h5",{className:"lh-1 mB-0 logo-text"},"Nest"))))),c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"mobile-toggle sidebar-toggle"},c.a.createElement("a",{href:"",className:"td-n"},c.a.createElement("i",{className:"ti-arrow-circle-left"})))))),He&&He.length>0&&c.a.createElement("ul",{className:"sidebar-menu scrollable pos-r"},He.map(function(t,a){if((J(t.path)||J(t.child))&&(!J(t.roles)||t.roles.indexOf(e.appUser.role)>=0)&&(!t.hasMRole||e.user.role.indexOf(",")>0)&&(!t.hasPayment||e.user.client.config.hasPayment))return c.a.createElement("li",{key:"nav-item-"+a,className:"nav-item"+(J(t.child)?" dropdown":"")+(0===a?" mT-30":"")},c.a.createElement(de.b,{className:J(t.child)?"dropdown-toggle":"sidebar-link",to:J(t.path)?t.path:"#"},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:t.icon})),c.a.createElement("span",{className:"title"},t.title),J(t.child)&&c.a.createElement("span",{className:"arrow"},c.a.createElement("i",{className:"ti-angle-right"}))),J(t.child)&&c.a.createElement("ul",{className:"dropdown-menu"},t.child.map(function(e,t){return c.a.createElement("li",{key:"sub-nav-item-"+t},c.a.createElement(de.b,{className:"sidebar-link",to:J(e.path)?e.path:"#"},e.title))})))}))))},Ge=function(){return r.createElement("footer",{className:"bdT ta-c p-30 lh-0 fsz-sm c-grey-600 bgc-white"},r.createElement("span",null,"Copyright \xa9 Nest. All rights reserved."))},Ke=function(e,t,a,n){return function(e){(new te).get("payments"+(J(t)?"/"+t:""),function(e,t){X(e)&&X(e.data)?a(e.data):n(J(t)?t:"Failed to load Payments.")})}},We=function(e){return{type:n.LOAD_USER,payload:e}},qe=function(e,t,a,n,r){return function(e){(new te).get("visitors"+(J(t)?"/"+t:"")+"/"+a,function(e,t){X(e)&&X(e.data)?n(e.data):r(e&&J(e.message)?e.message:"Failed to load Visitors.")})}},ze=function(e,t,a,n,r,c){return function(a){t&&J(t._id)?(new te).put("visitor/"+t._id,function(e,t){X(e)&&X(e.data)&&e.data._id.length>0?r(e.data):c(e&&J(e.message)?e.message:"Failed to load Visitors.")},t):(new te).post("visitor/"+e,function(e,t){X(e)&&X(e.data)&&e.data._id.length>0?r(e.data):c(e&&J(e.message)?e.message:"Failed to load Visitors.")},t)}},Je=function(e,t,a){return function(n){(new te).get("visitor/search/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Visitors.")})}},Xe=function(e,t,a){return function(n){(new te).upload("upload",function(r,c){X(r)&&X(r.data)&&!0===r.data?(e&&e.isProfile&&1==e.isProfile&&a&&(a.image=e.name,n(Ze(a))),t(!0,"")):t(!1,c)},e)}},Ze=function(e){return{type:n.LOAD_USER,payload:e}},Qe=function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=(a[1],Object(r.useState)({paymentId:"",amount:0,transactionRef:""})),l=Object(pe.a)(o,2),s=(l[0],l[1]);return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"m-5"},c.a.createElement(Ce,{className:"mT-2 fw-600"},"Total Due Amount: Rs "+function(){var t=0;return e.home.payments.map(function(e,a){var n=0;return e.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),t+=e.amount-n,1}),t}())),c.a.createElement(we,null,J(e.home.payments)?e.home.payments.filter(function(e,t){var a=0;return J(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<e.amount}).map(function(t,a){var n=0;return J(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<t.amount?c.a.createElement(Oe,{key:"my-due"+a,className:"m-7"+(0===a?"":" pL-15 bdL")},c.a.createElement(Oe,{className:"mT-4"},c.a.createElement(Ce,null,"Due for: "+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(Oe,{className:"mT-4 mB-3"},c.a.createElement(Ce,null,"Rs "+(t.amount-n))),c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Due Date: 15/"+z.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(Oe,{className:"mT-4"},c.a.createElement(Se,{title:"PAY NOW",onPress:function(){return function(t,a){if(t&&t.length>0&&a&&a>0)if(J(e.user.client.upi.id)&&J(e.user.client.upi.name)){var n=Q();s({paymentId:t,amount:a,transactionRef:n}),xe.warn("Payment is in progress. Please contact administrator.")}else xe.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else xe.warn("Amount should be more then 0 to proceed payment.")}(t._id,t.amount-n)}}))):null}):c.a.createElement(Ce,{className:"p-20"},"No due found.")),c.a.createElement(Ue,{visible:n}))},$e=a(34),et=a.n($e);function tt(e,t){try{return X(e)?("string"!=typeof e&&e.toString(),J(t)||(t=R),et()(e).format(t)):""}catch(a){return $(a,"convert.toDateString"),""}}function at(e,t){try{return tt(e,P)}catch(a){return $(a,"convert.toDateTimeString"),""}}var nt=function(e){return r.createElement(we,null,J(e.home.payments.filter(function(e,t){return J(e.transactions)&&J(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?e.home.payments.filter(function(e,t){return J(e.transactions)&&J(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var a=0,n=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount,0===t&&(n=e.createdAt),1}),r.createElement(Oe,{key:"my-his"+t,className:"m-7"+(0===t?"":" pL-15 bdL")},r.createElement(Oe,{className:"mT-4"},r.createElement(Ce,null,"Paid for: "+z.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),r.createElement(Oe,{className:"mT-4 mB-3"},r.createElement(Ce,null,"Rs "+a)),r.createElement(Oe,null,r.createElement(Ce,null,"Paid On: "+tt(n))))}):r.createElement(Ce,null,"No history found!"))},rt=function(e){var t=e.data,a=e.message;return J(t)?t.map(function(e,t){return r.createElement(Oe,{className:"bdB pB-3"},r.createElement(Oe,null,r.createElement(Ce,{key:t,className:"fw-600"},e.title)),r.createElement(Oe,null,r.createElement(Ce,{key:t},e.description)))}):J(a)?r.createElement(Ce,null,a):null},ct=function(e){return r.createElement(Oe,{className:"col-md-3"},r.createElement(Oe,{className:"layers bd p-20 cur-p c-white bg"+e.color,onClick:e.onClick},r.createElement(Oe,{className:"layer w-100 mB-10"},r.createElement("h6",{className:"lh-1"},e.title)),r.createElement(Oe,{className:"layer w-100"},r.createElement(Oe,{className:"peers ai-sb fxw-nw"},r.createElement(Oe,{className:"peer peer-greed"},r.createElement("span",{className:"icon-holder"},r.createElement("i",{className:e.icon+" fa-2x"}))),r.createElement(Oe,{className:"peer"},e.hasCount?r.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 "+e.color+" "+e.bgColor},e.count):r.createElement("span",{className:"d-ib lh-0 va-m"},"View all"))))))},ot=function(e){var t=Object(r.useState)(1),a=Object(pe.a)(t,2),n=a[0],o=a[1];return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"fw-600"},"Dashboard"),c.a.createElement(Oe,{className:"masonry-item w-100"},c.a.createElement(Oe,{className:"row gap-20"},c.a.createElement(ct,{title:"Member(s)",icon:"fa fa-users",color:"c-brown-400",bgColor:"bgc-brown-50",hasCount:!0,count:e.home.members?e.home.members.length+"":"0",onClick:function(){return e.history.push("members")}}),c.a.createElement(ct,{title:"Servant(s)",icon:"fa fa-female",color:"c-deep-purple-400",onClick:function(){return e.history.push("servants")}}),c.a.createElement(ct,{title:"Vehicle(s)",icon:"fa fa-car",color:"c-blue-600",bgColor:"bgc-indigo-50",hasCount:!0,count:e.home.vehicles?e.home.vehicles.length+"":"0",onClick:function(){return e.history.push("vehicles")}}),c.a.createElement(ct,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",onClick:function(){return e.history.push("tickets")}})),c.a.createElement(Oe,{className:"row gap-20"},c.a.createElement(ct,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("visitors")}}),c.a.createElement(ct,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}}))),e.user.client.config.hasPayment&&c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(Oe,{className:"tab-bar bgc-white p-20"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"MY DUES"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"ADVANCE"),c.a.createElement("span",{className:"tab"+(3===n?" active":""),onClick:function(){return o(3)}},"HISTORY")),c.a.createElement(Oe,{className:"bgc-white p-20"},1===n?c.a.createElement(Qe,{history:e.history,user:e.user,home:e.home,onPaymentUpload:e.onPaymentUpload,onPaymentUpdate:e.onPaymentUpdate}):2===n?c.a.createElement(rt,{data:[],message:"No advance found!"}):3===n?c.a.createElement(nt,{history:e.history,home:e.home}):4===n?c.a.createElement(rt,{data:[],message:"Work in progress"}):[]))))},lt=function(e){return r.createElement(Oe,{id:"mainContent"},r.createElement(Oe,{className:"row gap-20 masonry pos-r"},r.createElement(Oe,{className:"fw-600"},"Dashboard"),(e.appUser.role===M||e.appUser.role===V)&&r.createElement(Oe,{className:"masonry-item w-100"},r.createElement(Oe,{className:"row gap-20"},r.createElement(ct,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",onClick:function(){return e.history.push("tickets")}}),r.createElement(ct,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("all-visitors")}}),r.createElement(ct,{title:"ads",icon:"fa fa-bullhorn",color:"c-teal-400",onClick:function(){return e.history.push("ads")}}),r.createElement(ct,{title:"Notification",icon:"ti-bell",color:"c-red-400",onClick:function(){return e.history.push("notification")}})),r.createElement(Oe,{className:"row gap-20"},r.createElement(ct,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}}),e.appUser.role===M&&r.createElement(r.Fragment,null,r.createElement(ct,{title:"Block(s)",icon:"fa fa-building",color:"c-brown-400",bgColor:"bgc-brown-50",hasCount:!0,count:e.blocks.isUpToDate?e.blocks.isError?"0":e.blocks.data.length+"":"Loading",onClick:function(){return e.history.push("blocks")}}),r.createElement(ct,{title:"House(s)",icon:"fa fa-home",color:"c-blue-600",bgColor:"bgc-blue-50",hasCount:!0,count:e.homes.isUpToDate?e.homes.isError?"0":e.homes.data.length+"":"Loading",onClick:function(){return e.history.push("homes")}}),r.createElement(ct,{title:"User(s)",icon:"fa fa-users",color:"c-deep-purple-400",bgColor:"bgc-deep-purple-50",hasCount:!0,count:e.users.isUpToDate?e.users.isError?"0":e.users.data.length+"":"Loading",onClick:function(){return e.history.push("users")}})),e.appUser.role!==M&&e.user.client.config.hasPayment&&r.createElement(ct,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-400",onClick:function(){return e.history.push("payment")}})),e.appUser.role===M&&e.user.client.config.hasPayment&&r.createElement(Oe,{className:"row gap-20"},r.createElement(ct,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-400",onClick:function(){return e.history.push("payment")}}))),(e.appUser.role===H||e.appUser.role===G)&&r.createElement(Oe,{className:"masonry-item w-100"},r.createElement(Oe,{className:"row gap-20"},r.createElement(ct,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-400",onClick:function(){return e.history.push("tickets")}}))),(e.appUser.role===Y||e.appUser.role===K)&&r.createElement(Oe,{className:"masonry-item w-100"},r.createElement(Oe,{className:"row gap-20"},r.createElement(ct,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-400",onClick:function(){return e.history.push("all-visitors")}}),r.createElement(ct,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-700",onClick:function(){return e.history.push("outings")}})))))},st=a(13),it=a(16),mt=a.n(it),ut=a(79),dt=a.n(ut),pt=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,o=e.className,l=Q();return r.createElement("span",{className:"mR-10 "+(o||"")},r.createElement("input",{type:"checkbox",id:l,key:c||l,checked:t,className:"va-m",onClick:n||function(){}}),r.createElement("label",{htmlFor:l,className:"mL-5 va-m mB-0"},a))},ft=function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=J(p)?p.toLowerCase():p,h=J(E)&&J(e.data)?e.data.filter(function(e,t){return e.homeNumber.toLowerCase().indexOf(E)>=0||e.passCode.toLowerCase().indexOf(E)>=0||e.name.toLowerCase().indexOf(E)>=0}):e.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe,{className:"bdB mT-5"},c.a.createElement(Ce,null,"No of "+(e.isActive?"Active":"")+" Visitors: "+e.data.length),!e.isSearch&&e.appUser.role!==F&&c.a.createElement(pt,{isActive:e.isActive,text:"Only Active Visitors",onPress:e.onActiveChange,className:"fl-r"})),J(e.data)&&c.a.createElement(Oe,{className:"mT-10 mB-5"},c.a.createElement(Be,{type:"text",placeholder:"Enter passcode to search",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"p-10 mB-10"},J(h)?h.map(function(t,a){return c.a.createElement(Oe,{key:a,className:"card m-1 d-ib"},J(t.image)&&c.a.createElement(Oe,{className:"ta-c mB-5"},c.a.createElement(ke,{src:D+t.image,className:"cur-p m-0",style:{height:"25vh",borderRadius:"50%"},onClick:function(){o(!0),m(t.image)}})),c.a.createElement(Oe,{className:"container"},J(t.passCode)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.passCode)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.name+" ["+t.type+"]")),(t.age>0||J(t.gender))&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.age>0?t.age:"")+(t.age>0&&J(t.gender)?", ":"")+(J(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},"To ",c.a.createElement(Ce,{className:"fw-600"},t.homeNumber)," on ",c.a.createElement(Ce,{className:"fw-600"},at(t.createdAt))),!t.isEntered&&!t.isExit&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),t.personCount>0&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.personCount+" Person"+(t.personCount>1?"s":"")+("WALK"===t.vehicleType?" by WALK":" in "+t.vehicleType+(J(t.vehicleNo)?" "+t.vehicleNo:"")))),!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"c-blue-500"},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:t.isApproved?"c-green-600":"c-red-600"},t.isApproved?"APPROVED":"REJECTED"),c.a.createElement(Oe,null,"By "+t.approvedBy),c.a.createElement(Oe,null,"On "+at(t.approvedAt))),t.isEntered&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),c.a.createElement(Oe,null,"On "+at(t.enteredAt))),t.isApproved&&!t.isEntered&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"c-red-600"},"NOT ENTERED")),!t.isRejected&&t.isExit&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),c.a.createElement(Oe,null,"On "+at(t.exitAt))),t.isEntered&&!t.isExit&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"c-red-600"},"STAYING IN")),!t.isEntered&&t.passCode&&t.arriveAt&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600 c-red-600"},"Expected Arrival "+at(t.arriveAt))),!e.isSearch&&e.appUser.role===F&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2 ta-c"},!t.isEntered&&!t.isRejected&&(!t.arriveAt||new Date(t.arriveAt).getDate()===et()().toDate().getDate())&&c.a.createElement(Se,{title:"Enter",onPress:function(){e.onEnter&&e.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&c.a.createElement(Se,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.onExit&&e.onExit(t._id)}})),!e.isSearch&&e.appUser.role===L&&!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Se,{title:"Approve",className:"mR-10",onPress:function(){e.onApprove&&e.onApprove(t._id)}}),c.a.createElement(Se,{title:"Reject",onPress:function(){e.onReject&&e.onReject(t._id)}})),!e.isSearch&&e.appUser.role===L&&J(t.passCode)&&!t.isEntered&&!t.isRejected&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Se,{title:"Remove",onPress:function(){e.onRemove&&e.onRemove(t._id)}})),e.isSearch&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Se,{title:"Select",onPress:function(){e.onSelect&&e.onSelect(t)}}))))}):c.a.createElement(Ce,{className:"p-20"},"No visitor found.")),c.a.createElement(st.a,{open:n,onClose:function(){o(!1)}},c.a.createElement(Oe,{className:"ta-c"},c.a.createElement(ke,{src:D+i,style:{height:"50%",width:"50%"}}))))},Et=function(e){var t=Object(r.useState)(""),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""}),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!1),p=Object(pe.a)(u,2),f=p[0],E=p[1],h=Object(r.useState)(""),b=Object(pe.a)(h,2),N=b[0],g=b[1],v=Object(r.useState)([]),y=Object(pe.a)(v,2),T=y[0],O=y[1],w=Object(r.useState)(!1),k=Object(pe.a)(w,2),B=k[0],j=k[1];Object(r.useEffect)(function(){e.appUser.role===L&&o(e.user.homes[e.appUser.homeIndex]._id)},[]);var A=function(){o(e.appUser.role===L?n:""),m(Object(d.a)({},i,{id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""})),E(!1),g(""),O([]),j(!1)},C=function(){i.mobileNo.length>2&&(e.onToggleLoading(!0),e.onSearch(i.mobileNo,function(t){e.onToggleLoading(!1),j(!0),O(t)},function(t){e.onToggleLoading(!1),xe.fail(t),j(!1),O([])}))};return c.a.createElement(Oe,null,e.appUser.role===F&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Enter House Number",className:"form-control",value:N,onChange:function(e){E(!0),g(e.target.value)}})),e.appUser.role===F&&f&&J(N)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(N.toLowerCase())>=0}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p m-3 p-5 bgc-blue-50",key:"ho"+t,onClick:function(){g(e.number),o(e._id),E(!1)}},e.number)})),e.appUser.role===F&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"VISITOR"===i.type,text:"Visitor",onPress:function(){return m(Object(d.a)({},i,{type:"VISITOR"}))}}),c.a.createElement(De,{isActive:"DELIVERY"===i.type,text:"Delivery",onPress:function(){return m(Object(d.a)({},i,{type:"DELIVERY"}))}}),c.a.createElement(De,{isActive:"SERVICE"===i.type,text:"Service",onPress:function(){return m(Object(d.a)({},i,{type:"SERVICE"}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))},onKeyPress:function(e){ee(e,C)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:C},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),e.appUser.role===L&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"Arrival At \xa0"),c.a.createElement(mt.a,{minDate:et()().toDate(),maxDate:et()().add(2,"d").toDate(),onChange:function(e){m(Object(d.a)({},i,{arriveAt:e}))},value:i.arriveAt}),c.a.createElement(Ce,null,"\xa0"),c.a.createElement(dt.a,{value:i.arriveAtTime,onChange:function(e){m(Object(d.a)({},i,{arriveAtTime:e}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"number",placeholder:"Age",className:"form-control w-a d-ib mR-10",maxLength:3,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(Oe,{className:"d-ib w-a"},c.a.createElement(De,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(De,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}}))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"number",placeholder:"People Count",className:"form-control w-a d-ib mR-10",value:i.personCount>0?i.personCount+"":"",onChange:function(e){return m(Object(d.a)({},i,{personCount:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(Ae,{className:"form-control w-a d-ib mR-10",value:i.vehicleType,onChange:function(e){return m(Object(d.a)({},i,{vehicleType:e.target.value}))}},c.a.createElement("option",{value:"WALK"},"WALK"),c.a.createElement("option",{value:"CYCLE"},"CYCLE"),c.a.createElement("option",{value:"BIKE"},"BIKE"),c.a.createElement("option",{value:"CAR"},"CAR"),c.a.createElement("option",{value:"VAN"},"VAN"),c.a.createElement("option",{value:"JEEP"},"JEEP"),c.a.createElement("option",{value:"TEMPO"},"TEMPO"),c.a.createElement("option",{value:"BUS"},"BUS"),c.a.createElement("option",{value:"TRUCK"},"TRUCK")),c.a.createElement(Be,{type:"text",placeholder:"Vehicle No",className:"form-control w-a d-ib",value:i.vehicleNo,onChange:function(e){return m(Object(d.a)({},i,{vehicleNo:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",accept:"image/*",name:"image",placeholder:"SELECT IMAGE",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Q();r+="."+n[n.length-1],m(Object(d.a)({},i,{fileName:r}));var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){e||xe.fail(t||"Failed to upload file.")})}}}}),J(i.fileName)&&c.a.createElement(Ce,{className:"mL-15"},i.fileName)),c.a.createElement(Oe,{className:"ta-c mT-5 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:function(){if((e.appUser.role===L||J(e.gateNo))&&(e.appUser.role!==L||X(i.arriveAt))&&!1===f&&n.length>0&&J(i.name)&&i.personCount>0&&J(i.fileName)){var t=i.arriveAt;if(X(t)){var a=[];X(i.arriveAt)&&J(i.arriveAtTime)&&(a=i.arriveAtTime.split(":")),J(a)&&a.length>1?t.setHours(parseInt(a[0]),parseInt(a[1]),0,0):t.setHours(0,0,0,0)}var r={_id:"",type:i.type,name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:"",arriveAt:t,personCount:i.personCount,vehicleType:i.vehicleType,vehicleNo:i.vehicleNo,image:i.fileName,passCode:"",gateNo:e.gateNo};r=Object.assign(r,{isUser:e.appUser.role===L}),e.onToggleLoading(!0),e.onSave(n,r,e.user,e.appUser,function(t){A(),e.onToggleLoading(!1),e.appUser.role===L?xe.success("Visitor Request created successfully. Please share the passcode("+t.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."):xe.success("Visitor created successfully. Notification sent to the house members for approval. If this visitor got approved from house member then allow him/her inside.")},function(t){e.onToggleLoading(!1),xe.fail("Failed to save visitor "+r.name+".")})}else xe.warn("Please fill Gate Number, House, Name, People count and Image before "+(i.id.length>0?"Update":"Save")+".")},className:"mR-10"}),c.a.createElement(Se,{title:"CLEAR",onPress:A})),B&&c.a.createElement(st.a,{open:B,onClose:function(){return j(!1)}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(ft,{user:e.user,appUser:e.appUser,data:T,isActive:!1,isSearch:!0,onSelect:function(e){j(!1),O([]),m(Object(d.a)({},i,{name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,vehicleType:e.vehicleType,vehicleNo:e.vehicleNo,fileName:e.image}))}}))))},ht=function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){m(e.gateNo)},[e.gateNo]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:""},c.a.createElement(Be,{type:"text",placeholder:"Gate Number",className:"form-control w-a",value:i,onChange:function(e){return m(e.target.value)},onBlur:function(){return e.onGateNoChanged(i)}}),c.a.createElement(Ce,{className:"fl-r c-blue-700 fw-600 cur-p",onClick:function(){J(i)?e.history.push("all-takeways"):xe.warn("Please enter Gate Number to view this page.")}},"View all Active Takeaways"),c.a.createElement(Ce,{className:"fl-r c-blue-700 fw-600 cur-p mR-20",onClick:function(){J(i)?e.history.push("all-visitors"):xe.warn("Please enter Gate Number to view this page.")}},"View all Active Visitors")),c.a.createElement(Et,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:i,onToggleLoading:function(e){return o(e)},onSave:e.onSaveVisitor,onUpload:e.onUpload,onSearch:e.onSearchVisitor}),c.a.createElement(Ue,{visible:n})))))},bt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t(ne(e))}}(t))},onPaymentUpload:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new te).post("paymentupload",function(e,r){X(e)&&X(e.data)&&e.data.approvalid>0?(t(We(a)),n(!0)):n(!1)},e)}}(t,0,n,r))},onPaymentUpdate:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new te).post("payment/transaction/"+e,function(o,l){if(X(o)&&X(o.data)&&o.data.length>0){t._id=o.data;var s=n.homes[a].payments.findIndex(function(t){return t._id===e});n.homes[a].payments[s].transactions||(n.homes[a].payments[s].transactions=[]),n.homes[a].payments[s].transactions.push(t),c(We(n)),r(!0)}else r(!1)},t)}}(t,a,n,r,c))},onSaveVisitor:function(t,a,n,r,c,o){return e(ze(t,a,0,0,c,o))},onUpload:function(t,a){return e(Xe(t,a))},onSearchVisitor:function(t,a,n){return e(Je(t,a,n))}}})(function(e){return e.appUser.role===L?e.appUser.homeIndex>=0&&J(e.user.homes)?r.createElement(ot,{history:e.history,user:e.user,home:e.user.homes[e.appUser.homeIndex],onPaymentUpload:function(t,a,n){return e.onPaymentUpload(t,a,e.user,n)},onPaymentUpdate:function(t,a,n){return e.onPaymentUpdate(t,a,e.appUser.homeIndex,e.user,n)}}):r.createElement(Oe,{id:"mainContent"},r.createElement(Ce,{className:"m-20"},"No house assigned to you. Please contact administrator/manager.")):e.appUser.role===M||e.appUser.role===V||e.appUser.role===H||e.appUser.role===G||e.appUser.role===Y||e.appUser.role===K?r.createElement(lt,{history:e.history,appUser:e.appUser,user:e.user,users:e.users,homes:e.homes,blocks:e.blocks}):e.appUser.role===F?r.createElement(ht,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onGateNoChanged:e.onGateNoChanged,onSaveVisitor:e.onSaveVisitor,onUpload:e.onUpload,onSearchVisitor:e.onSearchVisitor}):r.createElement(Oe,{id:"mainContent"},r.createElement(Ce,{className:"m-20"},"No role assigned to you. Please contact administrator/manager."))}),Nt=function(e,t,a,n){return function(r){e&&e._id&&e._id.length>0?(new te).put("member/"+e._id,function(c,o){if(X(c)&&X(c.data)&&c.data.length>0){var l=t.homes[a].members,s=l.findIndex(function(e){return e._id===c.data});l[s]._id=c.data,l[s].number=e.number,l[s].name=e.name,l[s].age=e.age,l[s].gender=e.gender,l[s].mobileNo=e.mobileNo,l[s].emailId=e.emailId,l[s].type=e.type,l[s].relationship=e.relationship,l[s].otherRelationship=e.otherRelationship,t.homes[a].members=l,r(gt(t)),n(!0,"")}else n(!1,o)},e):(e=Object.assign(e,{password:e.mobileNo}),(new te).post("member/"+t.homes[a]._id,function(c,o){if(X(c)&&X(c.data)&&c.data.length>0){e._id=c.data,e.createdBy=t.name,e.isApproved=!0;var l=t.homes[a].members;l.push(e),t.homes[a].members=l,r(gt(t)),n(!0,"")}else n(!1,o)},e))}},gt=function(e){return{type:n.LOAD_USER,payload:e}},vt=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},yt=function(e){return r.createElement("div",{className:"mB-10"},r.createElement(de.b,{to:""},"Dashboard"),e.data.map(function(t,a){return r.createElement(r.Fragment,null,r.createElement("span",{key:"bd"+a,className:"mL-10 mR-10"},"/"),a===e.data.length-1?r.createElement("span",{key:"bc"+a},t.title):r.createElement(de.b,{key:"bc"+a,to:"/"+t.link},t.title))}))},Tt=Object(s.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(Nt(t,a,n,r))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new te).delete("member/"+e,function(o,l){X(o)&&X(o.data)&&!0===o.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(gt(a)),n&&!0===n.isUpToDate&&!1===n.isError&&J(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(vt(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),p=Object(pe.a)(u,2),f=p[0],E=p[1],h=function(){if(J(f.name)&&f.age>0&&J(f.gender)&&J(f.type)){o(!0);var t={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",relationship:f.relationship,otherRelationship:f.otherRelationship,type:f.type,role:f.role};e.onSave(t,e.user,e.homeIndex,function(e,t){o(!1),!0===e?(m(!1),E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),xe.success("Member saved successfully.")):xe.fail(J(t)?t:"Failed to save member.")})}else xe.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Members",link:"members"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-member")}},"Add New")),J(e.user.homes[e.homeIndex].members)?e.user.homes[e.homeIndex].members.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(Oe,{key:a,className:"bdB mT-5"},e.user.client.config.appType==q&&J(t.number)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(De,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(De,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ae,{className:"form-control",value:f.relationship,onChange:function(e){return E(Object(d.a)({},f,{relationship:e.target.value}))}},c.a.createElement("option",{key:"memrel-1",value:""},"Select Relationship"),J(e.user.client.config.memberRelationships)?e.user.client.config.memberRelationships.map(function(e,t){return c.a.createElement("option",{key:"memrel"+t,value:e},e)}):c.a.createElement("option",{key:"memrel0",value:"Other"},"Other"))),"Other"===f.relationship&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Other Relationship",className:"form-control",value:f.otherRelationship,onChange:function(e){return E(Object(d.a)({},f,{otherRelationship:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Oe,{key:a,className:"bdB mT-5"},e.user.client.config.appType==q&&J(t.number)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),(J(t.relationship)||J(t.otherRelationship))&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,J(t.relationship)&&"Other"!=t.relationship?t.relationship:J(t.otherRelationship)?t.otherRelationship:"Other")),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,relationship:t.relationship,otherRelationship:t.otherRelationship,type:t.type,role:t.role}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.homeIndex,e.user,e.users,function(e){o(!1),!0===e?xe.success("Member removed successfully."):xe.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No member found."),c.a.createElement(Ue,{visible:n})))))}),Ot=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(Nt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),s=Object(pe.a)(l,2),i=s[0],m=s[1];return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(De,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Email ID",className:"form-control",value:i.emailId,onChange:function(e){return m(Object(d.a)({},i,{emailId:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"form-control",value:i.relationship,onChange:function(e){return m(Object(d.a)({},i,{relationship:e.target.value}))}},c.a.createElement("option",{key:"memrel-1",value:""},"Select Relationship"),J(e.user.client.config.memberRelationships)?e.user.client.config.memberRelationships.map(function(e,t){return c.a.createElement("option",{key:"memrel"+t,value:e},e)}):c.a.createElement("option",{key:"memrel0",value:"Other"},"Other"))),"Other"===i.relationship&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Other Relationship",className:"form-control",value:i.otherRelationship,onChange:function(e){return m(Object(d.a)({},i,{otherRelationship:e.target.value}))}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:function(){if(J(i.name)&&i.age>0&&J(i.gender)&&J(i.type)){o(!0);var t={_id:i.id,number:"",name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:i.emailId?i.emailId.toLowerCase():"",relationship:i.relationship,otherRelationship:i.otherRelationship,type:i.type,role:i.role};e.onSave(t,e.user,e.homeIndex,function(e,t){o(!1),!0===e?(m({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",role:"USER"}),xe.success("Member saved successfully.")):xe.fail(J(t)?t:"Failed to save member.")})}else xe.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(Ue,{visible:n}))))}),wt=function(e,t,a,n){return function(r){e&&J(e._id)?(new te).put("vehicle/"+e._id,function(c,o){if(X(c)&&J(c.data)){var l=t.homes[a].vehicles,s=l.findIndex(function(e){return e._id===c.data});l[s]._id=c.data,l[s].number=e.number,l[s].type=e.type,t.homes[a].vehicles=l,r(kt(t)),n(!0)}else n(!1)},e):(new te).post("vehicle/"+t.homes[a]._id,function(c,o){if(X(c)&&J(c.data)){e._id=c.data,e.createdBy=t.name;var l=t.homes[a].vehicles;l.push(e),t.homes[a].vehicles=l,r(kt(t)),n(!0)}else n(!1)},e)}},kt=function(e){return{type:n.LOAD_USER,payload:e}},Bt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(wt(t,a,n,r))},onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new te).delete("vehicle/"+e,function(c,o){X(c)&&X(c.data)&&!0===c.data?(t.homes[a].vehicles=t.homes[a].vehicles.filter(function(t,a){return t._id!==e}),r(kt(t)),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=function(){if(J(b)&&J(y)){o(!0);var t={_id:p,number:b,type:y};e.onSave(t,e.user,e.homeIndex,function(e){o(!1),!0===e?(m(!1),f(""),N(""),T(""),xe.success("Vehicle saved successfully.")):xe.fail("Failed to save vehicle.")})}else xe.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Vehicles",link:"vehicles"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-vehicle")}},"Add New")),J(e.user.homes[e.homeIndex].vehicles)?e.user.homes[e.homeIndex].vehicles.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(De,{isActive:"TWO WHEELER"===y,text:"Two Wheeler",onPress:function(){return T("TWO WHEELER")}}),c.a.createElement(De,{isActive:"FOUR WHEELER"===y,text:"Four Wheeler",onPress:function(){return T("FOUR WHEELER")}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Number",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:O},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.type)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.number)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.number),T(t.type)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.homeIndex,function(e){o(!1),!0===e?xe.success("Vehicle removed successfully."):xe.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No vehicle found."),c.a.createElement(Ue,{visible:n})))))}),jt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(wt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1];return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"TWO WHEELER"===b,text:"Two Wheeler",onPress:function(){return N("TWO WHEELER")}}),c.a.createElement(De,{isActive:"FOUR WHEELER"===b,text:"Four Wheeler",onPress:function(){return N("FOUR WHEELER")}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:function(){if(J(p)&&J(b)){o(!0);var t={_id:i,number:p,type:b};e.onSave(t,e.user,e.homeIndex,function(e){o(!1),!0===e?(m(""),f(""),N(""),xe.success("Vehicle saved successfully.")):xe.fail("Failed to save vehicle.")})}else xe.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(Ue,{visible:n}))))}),At=function(e,t,a){return function(n){(new te).get("servants/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Servants.")})}},Ct=function(e,t,a){return function(n){t&&J(t._id)?(new te).put("servant/"+t._id,function(e,t){X(e)&&J(e.data)?a(!0):a(!1)},t):(new te).post("servant/"+e,function(e,t){X(e)&&J(e.data)?a(!0):a(!1)},t)}},St=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onLoad:function(t,a,n){return e(At(t,a,n))},onSave:function(t,a,n){return e(Ct(t,a,n))},onRemove:function(t,a){return e(function(e,t){return function(a){(new te).delete("servant/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onCreateTakeaway:function(t,a,n,r){return e(function(e,t,a,n){return function(r){J(t._id)?(new te).put("servant/takeaway/"+t._id,function(e,t){X(e)&&J(e.data)?a(e.data):n(e&&J(e.message)?e.message:"Failed to update takeaway.")},t):(new te).post("servant/takeaway/"+e,function(e,t){X(e)&&J(e.data)?a(e.data):n(e&&J(e.message)?e.message:"Failed to create Takeaway.")},t)}}(t,a,n,r))},onRemoveTakeaway:function(t,a){return e(function(e,t){return function(a){(new te).delete("servant/takeaway/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({data:[],id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),p=Object(pe.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){o(!1),E(Object(d.a)({},f,{data:e}))},function(e){o(!1),xe.fail(e)})},[]);var h=function(){if(J(f.name)&&f.age>0&&J(f.gender)){o(!0);var t={_id:f.id,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){if(o(!1),!0===e){var t=f.data,a=t.findIndex(function(e){return e._id===f.id});t[a].name=f.name,t[a].age=f.age,t[a].gender=f.gender,t[a].mobileNo=f.mobileNo,t[a].emailId=f.emailId,m(!1),E(Object(d.a)({},f,{data:t,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),xe.success("Servant saved successfully.")}else xe.fail("Failed to save servant.")})}else xe.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Servants",link:"servants"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-servant")}},"Add New")),J(f.data)?f.data.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(De,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(De,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Email Id",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{data:f.data.filter(function(e,t){return e._id!==a}),viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),xe.success("Servant removed successfully.")):xe.fail("Failed to remove servant.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement("span",{onClick:function(){var e,a;e=t._id,a=t.takeaways,f.viewId===e?E(Object(d.a)({},f,{viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})):E(Object(d.a)({},f,{viewId:e,takeaways:a,takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Takeaways"))),f.viewId===t._id&&c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Oe,{className:"p-15"},c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Be,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.takeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{takeawayTitle:e.target.value}))}}),c.a.createElement(je,{placeholder:"Takeaway Description",className:"form-control bd",value:f.takeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{takeawayDesc:e.target.value}))}}),c.a.createElement(Oe,{className:"mT-5"},c.a.createElement(Se,{title:"ADD NEW TAKEAWAY",onPress:function(){return a=t._id,void(J(f.takeawayTitle)&&J(f.takeawayDesc)?(o(!0),e.onCreateTakeaway(a,{_id:"",title:f.takeawayTitle,description:f.takeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){o(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a});n[r].takeaways.unshift({_id:t,title:f.takeawayTitle,description:f.takeawayDesc,createdAt:new Date,createdBy:e.user.name,updatedBy:e.user._id,updatedAt:new Date}),E(Object(d.a)({},f,{data:n,takeawayTitle:"",takeawayDesc:""})),xe.success("Takeayway added successfully.")},function(e){o(!1),xe.fail("Failed to add takeaway.")})):xe.warn("Please fill Takeaway title & description before Add."));var a}}))),J(f.takeaways)?f.takeaways.map(function(a,n){return c.a.createElement(Oe,{key:"tkycmt"+n,className:"pL-3 pR-3 pT-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},a.createdBy+" on "+at(a.updatedAt))),c.a.createElement(Oe,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(Ce,null,a.title):c.a.createElement(Be,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.editTakeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayTitle:e.target.value}))}})),c.a.createElement(Oe,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(Ce,null,a.description):c.a.createElement(je,{placeholder:"Takeaway Description",className:"form-control bd",value:f.editTakeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayDesc:e.target.value}))}})),a.isExit?c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"c-green-600"},"Exit by "+a.exitBy+" in Gate "+a.exitGateNo+" on "+at(a.exitAt))):c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"c-red-600"},"Still not exit.")),!a.isExit&&c.a.createElement(c.a.Fragment,null,f.editTakeawayId===a._id?c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(J(f.editTakeawayTitle)&&J(f.editTakeawayDesc)?(o(!0),e.onCreateTakeaway(a,{_id:f.editTakeawayId,title:f.editTakeawayTitle,description:f.editTakeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){o(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a}),c=n[r].takeaways.findIndex(function(e){return e._id===f.editTakeawayId});n[r].takeaways[c].title=f.editTakeawayTitle,n[r].takeaways[c].description=f.editTakeawayDesc,n[r].takeaways[c].updatedBy=e.user.name,n[r].takeaways[c].updatedAt=new Date,E(Object(d.a)({},f,{data:n,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),xe.success("Takeayway updated successfully.")},function(e){o(!1),xe.fail("Failed to update takeaway.")})):xe.warn("Please fill Takeaway title & description before Add."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:a._id,editTakeawayTitle:a.title,editTakeawayDesc:a.description}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this takeaway?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemoveTakeaway(n,function(e){o(!1);var t=f.data,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e,t){return e._id!==n}),!0===e?(E(Object(d.a)({},f,{data:t,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewId:""})),xe.success("Takeaway removed successfully.")):xe.fail("Failed to remove takeaway.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(Ce,{className:"p-20"},"No servant found."),c.a.createElement(Ue,{visible:n})))))}),Ut=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("servant/takeaways/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Takeaways.")})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new te).post("servant/exittakeaway/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)},{gateNo:t})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(pe.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),m(e)},function(e){o(!1),xe.fail(e)})},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Takeaways",link:"all-takeaways"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},J(i)&&J(i.filter(function(e){return e.takeaways&&e.takeaways.length>0}))?i.filter(function(e){return e.takeaways&&e.takeaways.length>0}).map(function(t,a){return c.a.createElement(Oe,{key:a,className:"mT-5 bdB"},c.a.createElement(Oe,{className:"mB-3"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+at(t.createdAt))),c.a.createElement(Oe,{className:"mB-3"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Oe,{className:"mB-3"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mB-3"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mB-3"},c.a.createElement(Ce,null,t.emailId)),c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Oe,{className:"pL-15 pR-15 pB-15 pT-3"},J(t.takeaways)?t.takeaways.map(function(a,n){return c.a.createElement(Oe,{key:"tkycmt"+n,className:"pT-5 pB-5 pR-3 pL-3"+(0===n?"":" bdB")},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},a.createdBy+" on "+at(a.updatedAt))),c.a.createElement(Oe,null,c.a.createElement(Ce,null,a.title)),c.a.createElement(Oe,null,c.a.createElement(Ce,null,a.description)),e.appUser.role===F&&c.a.createElement(Oe,{className:"mT-10"},!a.isExit&&c.a.createElement(Se,{title:"Exit",onPress:function(){var n,r;n=a._id,r=t._id,Object(Fe.confirmAlert)({title:"Confirm to Exit Servant with Takeaway",message:"Are you sure you wish to exit the servant with this takeaway things?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onExit(n,e.gateNo,function(e){if(!0===e){var t=i,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e){return e._id!==n}),m(t),o(!1),xe.success("Servant exit with takeaway successfully.")}else o(!1),xe.fail("Failed to exit servant with takeaway.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(Ce,null,"No data found."),c.a.createElement(Ue,{visible:n})))))}),_t=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n){return e(Ct(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(0),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=Object(r.useState)(""),w=Object(pe.a)(O,2),k=w[0],B=w[1],j=Object(r.useState)(""),A=Object(pe.a)(j,2),C=A[0],S=A[1],U=function(){if(J(p)&&b>0&&J(y)){o(!0);var t={_id:i,name:p,age:b,gender:y,mobileNo:k,emailId:C?C.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){o(!1),!0===e?(m(""),f(""),N(0),T(""),B(""),S(""),xe.success("Servant saved successfully.")):xe.fail("Failed to save servant.")})}else xe.warn("Please fill all the required fields before Save.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Servants",link:"servants"},{title:"New Servant",link:"new-servant"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,value:b>0?b+"":"",onChange:function(e){return N(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"M"===y,text:"Male",onPress:function(){return T("M")}}),c.a.createElement(De,{isActive:"F"===y,text:"Female",onPress:function(){return T("F")}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===y,text:"Other",onPress:function(){return T("O")}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:k,onChange:function(e){return B(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Email Id",className:"form-control",value:C,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){ee(e,U)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:U}))),c.a.createElement(Ue,{visible:n}))))}),It=function(e,t,a,n,r){return function(c){e&&e._id&&e._id.length>0?(new te).put("ticket/"+e._id,function(a,o){if(X(a)&&J(a.data)){if(J(n.data)){var l=[],s=(l=n.data).findIndex(function(e){return e._id===a.data});l[s]._id=a.data,l[s].category=e.category,l[s].title=e.title,l[s].description=e.description,l[s].status=e.status,l[s].updatedBy=t.name,c(xt(l,!0,!1,""))}r(!0)}else r(!1)},e):(new te).post("ticket/"+t.homes[a]._id,function(o,l){if(X(o)&&J(o.data)){var s=[];J(n.data)&&((s=n.data).unshift({_id:o.data,_homeId:t.homes[a].number,category:e.category,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),c(xt(s,!0,!1,""))),r(!0)}else r(!1)},e)}},xt=function(e,t,a,r){return{type:n.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Dt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(xt([],!1,!1,"")),(new te).get("tickets"+(J(t)?"/"+t:""),function(t,n){X(t)?(e(xt(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onSave:function(t,a,n,r,c){return e(It(t,a,n,r,c))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new te).delete("ticket/"+e,function(a,c){X(a)&&X(a.data)&&!0===a.data?(J(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(xt(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onResolve:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new te).delete("ticket/resolve/"+e,function(a,c){X(a)&&X(a.data)&&!0===a.data?(J(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(xt(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onStart:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new te).put("ticket/start/"+e,function(a,c){if(X(a)&&X(a.data)&&!0===a.data){if(J(n.data)){var o=[],l=(o=n.data).findIndex(function(t){return t._id===e});o[l].status="IN-PROGRESS",t(xt(o,!0,!1,""))}r(!0)}else r(!1)},{status:"IN-PROGRESS"})}}(t,0,0,r,c))},onAddComment:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){J(t._id)?(new te).put("ticket/comment/"+t._id,function(n,o){if(X(n)&&J(n.data)){t.createdAt=new Date;var l=[];if(J(r.data)){var s=(l=r.data).findIndex(function(t){return t._id===e}),i=l[s].comments.findIndex(function(e){return e._id===t._id});l[s].comments[i].comment=t.comment,l[s].comments[i].updatedBy=t.updatedBy,l[s].comments[i].updatedAt=t.updatedAt,a(xt(l,!0,!1,""))}c(!0)}else c(!1)},t):(new te).post("ticket/comment/"+e,function(n,o){if(X(n)&&J(n.data)){t._id=n.data,t.createdAt=new Date;var l=[];if(J(r.data)){var s=(l=r.data).findIndex(function(t){return t._id===e});l[s].comments.unshift(t),a(xt(l,!0,!1,""))}c(!0)}else c(!1)},t)}}(t,a,0,0,c,o))},onRemoveComment:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){(new te).delete("ticket/comment/"+e,function(n,o){if(X(n)&&X(n.data)&&!0===n.data){if(J(r.data)){var l=r.data.findIndex(function(e){return e._id===t});r.data[l].comments=r.data[l].comments.filter(function(t,a){return t._id!==e}),a(xt(r.data,!0,!1,""))}c(!0)}else c(!1)})}}(t,a,0,0,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({data:[],id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),p=Object(pe.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,e.appUser.role===M||e.appUser.role===V?"":e.user.homes[e.appUser.homeIndex]._id,function(e){o(!1),e||xe.fail("Failed to load Tickets.")})},[]);var h=function(){if(J(f.category)&&J(f.title)&&J(f.description)){o(!0);var t={_id:f.id,category:f.category,title:f.title,description:f.description,status:f.status};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),xe.success("Ticket saved successfully.")):xe.fail("Failed to save ticket.")})}else xe.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Tickets",link:"tickets"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},e.appUser.role===L&&c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-ticket")}},"Add New")),X(e.tickets)&&e.tickets.isUpToDate&&!e.tickets.isError&&J(e.tickets.data)?e.tickets.data.map(function(t,a){return c.a.createElement(Oe,{key:"tkt"+a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"fw-600 mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" from "+t._homeId+" on "+at(t.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(Ae,{className:"form-control",value:f.category,onChange:function(e){return E(Object(d.a)({},f,{category:e.target.value}))}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),J(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance")):c.a.createElement(Ce,{className:"fw-600"},t.category)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:f.title,onChange:function(e){return E(Object(d.a)({},f,{title:e.target.value}))}}):c.a.createElement(Ce,null,t.title)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(je,{placeholder:"Description",className:"form-control",value:f.description,onChange:function(e){return E(Object(d.a)({},f,{description:e.target.value}))}}):c.a.createElement(Ce,null,t.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.status)),i&&f.id===t._id?c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:h},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},e.appUser.role===L&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,category:t.category,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),e.appUser.role===L&&c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?xe.success("Ticket removed successfully."):xe.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),e.appUser.role===L&&c.a.createElement("span",{className:"m-25",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onResolve(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?xe.success("Ticket resolved successfully."):xe.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"RESOLVE")),(e.appUser.role===M||e.appUser.role===V)&&"INIT"===t.status&&c.a.createElement("span",{className:"mR-25",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onStart(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?xe.success("Ticket started successfully."):xe.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},"START")),c.a.createElement("span",{onClick:function(){var e,a;e=t._id,a=t.comments,f.viewId===e?E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})):E(Object(d.a)({},f,{viewId:e,comments:a,comment:"",editCommentId:"",editComment:""}))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Comments"))),f.viewId===t._id&&c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},"Comments")),c.a.createElement(Oe,{className:"p-15"},c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(je,{placeholder:"Comment Text",className:"form-control bd",value:f.comment,onChange:function(e){return E(Object(d.a)({},f,{comment:e.target.value}))}}),c.a.createElement(Oe,{className:"mT-5"},c.a.createElement(Se,{title:"ADD COMMENT",onPress:function(){return a=t._id,void(J(f.comment)?(o(!0),e.onAddComment(a,{_id:"",comment:f.comment,createdBy:e.user._id,createdByName:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{comment:""})),xe.success("Comment added successfully.")):xe.fail("Failed to add comment.")})):xe.warn("Please fill comment before Add."));var a}}))),J(f.comments)?f.comments.map(function(a,n){return c.a.createElement(Oe,{key:"tktcmt"+n,className:"pL-3 pR-3 pt-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},a.createdByName+" on "+at(a.updatedAt))),c.a.createElement(Oe,null,f.editCommentId===a._id?c.a.createElement(je,{placeholder:"Comment Text",className:"form-control bd",value:f.editComment,onChange:function(e){return E(Object(d.a)({},f,{editComment:e.target.value}))}}):c.a.createElement(Ce,null,a.comment)),a.createdBy===e.user._id&&c.a.createElement(c.a.Fragment,null,f.editCommentId===a._id?c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(J(f.editCommentId)&&J(f.editComment)?(o(!0),e.onAddComment(a,{_id:f.editCommentId,comment:f.editComment,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:""})),xe.success("Comment updated successfully.")):xe.fail("Failed to update comment.")})):xe.warn("Please fill comment before update."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:"",editComment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:a._id,editComment:a.comment}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this comment?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemoveComment(n,r,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:"",viewId:""})),xe.success("Comment removed successfully.")):xe.fail("Failed to remove comment.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(Ce,{className:"p-20"},"No comment found."))))}):c.a.createElement(Ce,{className:"p-20"},e.tickets.isUpToDate?e.tickets.isError?e.tickets.errorMessage:"No ticket found.":"Loading..."),c.a.createElement(Ue,{visible:n})))))}),Rt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,a,n,r,c){return e(It(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=Object(r.useState)("INIT"),w=Object(pe.a)(O,2),k=w[0],B=w[1],j=function(){if(J(p)&&J(b)&&J(y)){o(!0);var t={_id:i,category:p,title:b,description:y,status:k};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(m(""),f(""),N(""),T(""),B("INIT"),xe.success("Ticket saved successfully.")):xe.fail("Failed to save ticket.")})}else xe.warn("Please fill all the required fields before Save.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),e.appUser.role===L?c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"form-control",value:p,onChange:function(e){return f(e.target.value)}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),J(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance"))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)},onKeyPress:function(e){ee(e,j)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:j}))):c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings -> My Role and try again."))),c.a.createElement(Ue,{visible:n}))))}),Pt=a(48),Lt=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(qe(0,a,n,r,c))},onApprove:function(t,a){return e(function(e,t){return function(a){(new te).get("visitor/approve/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new te).get("visitor/reject/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onRemove:function(t,a){return e(function(e,t){return function(a){(new te).delete("visitor/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,o){return e(ze(t,a,0,0,c,o))},onUpload:function(t,a){return e(Xe(t,a))},onSearch:function(t,a,n){return e(Je(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!0),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(!1),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=function(){o(!0),e.onLoad(e.user.client._id,e.user.homes[e.appUser.homeIndex]._id,p,function(e){o(!1),m(e)},function(e){o(!1),xe.fail(e)})};Object(r.useEffect)(function(){O()},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Visitors",link:"visitors"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},e.appUser.role===L&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-r"},c.a.createElement(Ce,{className:"cur-p c-blue-500 fw-600 ta-r",onClick:function(){return N(!b)}},b?"< Back to Visitors":"Request for a New Visitor")),!b&&c.a.createElement(ft,{data:i,isActive:p,user:e.user,appUser:e.appUser,onActiveChange:function(){f(!p),O()},onApprove:function(t){Object(Fe.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onApprove(t,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isApproved=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),xe.success("Visitor approved successfully.")}else xe.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onReject:function(t){Object(Fe.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReject(t,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isRejected=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),xe.success("Visitor rejected successfully.")}else xe.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},onRemove:function(t){Object(Fe.confirmAlert)({title:"Confirm to Remove Visitor",message:"Are you sure you wish to remove visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(t,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),xe.success("Visitor removed successfully.")):xe.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})}}),b&&c.a.createElement(Et,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onToggleLoading:function(e){return o(e)},onSave:function(t,a,n,r,c,o){e.onSave(t,a,n,r,function(e){c(e),m([e].concat(Object(Pt.a)(i))),T(e.passCode),N(!1)},function(e){o(e)})},onUpload:e.onUpload,onSearch:e.onSearch}),J(y)&&c.a.createElement(st.a,{open:J(y),onClose:function(){return T("")}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},"Visitor Request created successfully. Please share the passcode("+y+") to yor visitor and ask him/her to show it to the security in the gate while entering."),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-c fw-600 c-blue-600",style:{fontSize:30}},y))),c.a.createElement(Ue,{visible:n})))))}),Mt=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new te).post("account/changepassword/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?n(!0,""):n(!1,e&&e.message?e.message:t)},{password:t,newPassword:a})}}(t,a,n,r))},onLogout:function(t){return e(ae(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=function(){if(J(i)&&J(p)&&J(b))if(p===b){var t=function(e){var t=/[A-Z]/,a=/[a-z]/,n=/[0-9]/,r=/[!|@|#|$|%|^|&|*|(|)|-|_]/,c="";if(e.length<6)return c="New Password not long enough!";for(var o=0,l=0,s=0,i=0,m=0;m<e.length;m++)t.test(e[m])?o++:a.test(e[m])?l++:n.test(e[m])?s++:r.test(e[m])&&i++;return o<1||l<1||s<1||i<1?c="New Password dose not match with password policy!":c}(p);t.length<1?(o(!0),e.onUpdate(e.user._id,i,p,function(t,a){o(!1),!0===t?(xe.success("Password updated successfully. Please login with your new password."),e.onLogout(function(e){})):xe.fail(a)})):xe.warn(t)}else xe.warn("New Password and Confirm New Password not matchs.");else xe.warn("Please fill all the fields before Update.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Change Password",link:"change-password"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"password",placeholder:"Password",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"password",placeholder:"New Password",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"password",placeholder:"Confirm New Password",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){ee(e,g)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"UPDATE",onPress:g})),c.a.createElement(Oe,{className:"mT-7"},c.a.createElement(Ce,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),c.a.createElement(Ue,{visible:n}))))}),Ft=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onUpload:function(t,a,n){return e(Xe(t,a,n))},onUpdate:function(t,a,n,r,c,o,l){return e(function(e,t,a,n,r,c,o){return function(l){(new te).put("account/profile/"+e,function(e,r){X(e)&&X(e.data)&&!0===e.data?(c.name=t,c.mobileNo=a,c.emailId=n,l(le(c)),o(!0,"")):o(!1,r)},{name:t,mobileNo:a,emailId:n,image:r})}}(t,a,n,r,c,o,l))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){m(e.user.name),f(e.user.mobileNo),N(e.user.emailId)},[]);var g=function(){J(i)&&J(p)&&J(b)?(o(!0),e.onUpdate(e.user._id,i,p,b?b.toLowerCase():"",e.user&&e.user.image?e.user.image:"",e.user,function(e,t){o(!1),!0===e?xe.success("Profile updated successfully."):xe.fail(t)})):xe.warn("Please fill all the fields before Update.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"My Profile",link:"my-profile"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(ke,{src:J(e.user.image)?D+e.user.image:"F"===e.user.gender.toLocaleUpperCase()?_e.avatarFemale:_e.avatarMale,className:"m-0",style:{height:"25vh",borderRadius:"50%"}}),c.a.createElement("input",{type:"file",accept:"image/*",name:"profile-image",placeholder:"SELECT IMAGE",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Q();r+="."+n[n.length-1];var c={file:a,type:a.type,name:r,isProfile:!0};e.onUpload(c,function(e,t){e?g():xe.fail(t||"Failed to upload profile image.")},e.user)}}}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Email Id",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){ee(e,g)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"UPDATE",onPress:g}))),c.a.createElement(Ue,{visible:n}))))}),Vt=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,a){return e(function(e,t){return function(a){a(ce(e)),t(!0,"")}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){m(e.appUser.role)},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"My Role",link:"my-role"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"form-control",value:i,onChange:function(e){return m(e.target.value)}},e.user.role.split(",").map(function(e,t){return c.a.createElement("option",{key:"role"+t,value:e},e)}))),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"UPDATE",onPress:function(){J(i)?(o(!0),e.onUpdate(i,function(t,a){o(!1),!0===t?(xe.success("Role updated successfully."),e.history.push("/")):xe.fail(a)})):xe.warn("Please select role before Update.")}}))),c.a.createElement(Ue,{visible:n}))))}),Ht=function(e,t){return function(a){a(Gt([],!1,!1,"")),(new te).get("ads/"+e,function(e,n){X(e)&&X(e.data)?(a(Gt(e.data,!0,!1,"")),t(!0)):t(!1)})}},Yt=function(e,t,a,n,r){return function(c){t&&J(t._id)?(new te).put("ad/"+t._id,function(e,a){if(X(e)&&J(e.data)){var o=n.findIndex(function(t){return t._id===e.data});n[o]._id=e.data,n[o].title=t.title,n[o].description=t.description,c(Gt(n,!0,!1,"")),r(!0)}else r(!1)},t):(new te).post("ad/"+e,function(e,o){X(e)&&J(e.data)?(n.unshift({_id:e.data,title:t.title,description:t.description,createdBy:a.name,createdAt:new Date}),c(Gt(n,!0,!1,"")),r(!0)):r(!1)},t)}},Gt=function(e,t,a,r){return{type:n.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Kt=Object(s.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,a){return e(Ht(t,a))},onSave:function(t,a,n,r,c){return e(Yt(t,a,n,r,c))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new te).delete("ad/"+e,function(r,c){X(r)&&X(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(Gt(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(""),v=Object(pe.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),e||xe.fail("Failed to load Ads.")})},[]);var O=function(){if(J(b)&&J(y)){o(!0);var t={_id:p,title:b,description:y};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){o(!1),!0===e?(m(!1),f(""),N(""),T(""),xe.success("Ad saved successfully.")):xe.fail("Failed to save ad.")})}else xe.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Ads",link:"ads"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p mB-3 c-blue-500",onClick:function(){return e.history.push("new-ad")}},"Add New")),e.ads.isUpToDate&&!e.ads.isError&&J(e.ads.data)?e.ads.data.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+tt(t.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:b,onChange:function(e){return N(e.target.value)}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:O},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+tt(t.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.title)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.title),T(t.description)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.ads.data,function(e){o(!1),!0===e?xe.success("Ad removed successfully."):xe.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No ad found.":"Loading..."),c.a.createElement(Ue,{visible:n})))))}),Wt=Object(s.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,a,n,r,c){return e(Yt(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=function(){if(J(p)&&J(b)){o(!0);var t={_id:i,title:p,description:b};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){o(!1),!0===e?(m(""),f(""),N(""),xe.success("Ad saved successfully.")):xe.fail("Failed to save ad.")})}else xe.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){ee(e,g)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SAVE",onPress:g}))),c.a.createElement(Ue,{visible:n}))))}),qt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new te).delete("member/"+e,function(o,l){X(o)&&X(o.data)&&!0===o.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(gt(a)),n&&!0===n.isUpToDate&&!1===n.isError&&J(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(vt(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=function(){if(J(i)&&e.users.isUpToDate&&!e.users.isError&&J(e.users.data)){var t=i.toLowerCase(),a=e.homes.data.filter(function(e){return e.number.toLowerCase()===t});f(e.users.data.filter(function(e){return(e.name+"").toLowerCase().indexOf(t)>=0||(e.mobileNo+"").toLowerCase().indexOf(t)>=0||(e.emailId+"").toLowerCase().indexOf(t)>=0||(e.number+"").toLowerCase().indexOf(t)>=0||J(a.filter(function(t){return t.memberIds.indexOf(e._id)>=0}))})),N(10)}else f([]),N(10)};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Users",link:"users"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-user/0/false")}},"Add New"),c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500 mR-15",onClick:function(){return e.history.push("approve-users")}},"View Users Waiting for Approval")),c.a.createElement(Oe,{className:"mB-3 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Search User",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){ee(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),J(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Oe,{key:"usr"+a,className:"bdB mT-5"},e.user.client.config.appType==q&&J(t.number)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Name: "+(J(t.name)?t.name:""))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Mobile No: "+t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Email: "+t.emailId)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-user/"+t._id+"/false")}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),t._id!==e.user._id&&c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.appUser.homeIndex,e.user,e.users,function(e){o(!1),!0===e?(g(),xe.success("User removed successfully.")):xe.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No user match with your search."),p.length>b&&c.a.createElement(Oe,{className:"bdB mT-5"},c.a.createElement(Oe,{className:"p-10"},c.a.createElement(Ce,{className:"c-blue-500 fw-600",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Ue,{visible:n})))))}),zt=function(e,t,a){return function(n){(new te).get("home/"+e,function(e,n){X(e)&&X(e.data)&&J(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):a(e&&J(e.message)?e.message:"Failed to load Home.")})}},Jt=function(e){return{type:n.LOAD_USER,payload:e}},Xt=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Zt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new te).delete("home/"+e,function(c,o){X(c)&&X(c.data)&&!0===c.data?(t.homes=t.homes.filter(function(t,a){return t._id!==e}),a.data=a.data.filter(function(t,a){return t._id!==e}),r(Jt(t)),r(Xt(a.data,!0,!1,"")),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=function(){J(i)&&e.homes.isUpToDate&&!e.homes.isError&&J(e.homes.data)?(f(e.homes.data.filter(function(e){return(e.number+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Houses",link:"homes"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-home/0")}},"Add New")),c.a.createElement(Oe,{className:"mB-3 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Search House",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){ee(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),J(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Oe,{key:"home"+a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Number: "+t.number)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("view-home/"+t._id)}},c.a.createElement("i",{className:"c-orange-500 fa fa-eye"})),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-home/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.homes,function(e){o(!1),!0===e?(g(),xe.success("House removed successfully.")):xe.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No house match with your search."),p.length>b&&c.a.createElement(Oe,{className:"bdB mT-5"},c.a.createElement(Oe,{className:"p-10"},c.a.createElement(Ce,{className:"fw-600 c-blue-500",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Ue,{visible:n})))))}),Qt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("member/"+e,function(e,n){X(e)&&X(e.data)&&X(e.data.member)&&J(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):a(e&&J(e.message)?e.message:"Failed to load Member.")})}}(t,a,n))},onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:r}))&&J(e._id)?(new te).put("member/"+e._id,function(t,r){if(X(t)&&X(t.data)&&t.data.length>0){if(n.isUpToDate&&!n.isError&&J(n.data)){var o=n.data.findIndex(function(e){return e._id===t.data});o>=0?(n.data[o]._id=t.data,n.data[o].name=e.name):n.data.push({_id:t.data,name:e.name}),a(vt(n.data,!0,!1,""))}c(!0,"")}else c(!1,r)},e):(new te).post("member/0",function(t,r){X(t)&&X(t.data)&&t.data.length>0?(n.isUpToDate&&!n.isError&&J(n.data)&&(n.data.push({_id:t.data,name:e.name}),a(vt(n.data,!0,!1,""))),c(!0,"")):c(!1,r)},e)}}(t,a,0,r,c,o))},onAllowOwnAccess:function(t,a,n){return e(function(e,t,a){return function(n){(new te).put("member/allow/"+e+"/"+t,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",type:"TENANT",isApproved:!1,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1,isMaintenanceSupervisor:!1,isSecuritySupervisor:!1,isMaintenanceManager:!1,isSecurityManager:!1}}),p=Object(pe.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(o(!0),e.onLoad(t,function(e,t){o(!1),e&&J(e._id)?E({id:e._id,number:e.number,name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,emailId:e.emailId,relationship:e.relationship,otherRelationship:e.otherRelationship,isApproved:e.isApproved||!1,isPrimary:e.isPrimary,hasOwnAccess:e.hasOwnAccess,isOwnAccessRequested:e.isOwnAccessRequested,type:e.type,homeIds:t,role:{isAdmin:(","+e.role+",").indexOf(","+M+",")>=0,isManager:(","+e.role+",").indexOf(","+V+",")>=0,isGatekeeper:(","+e.role+",").indexOf(","+F+",")>=0,isUser:(","+e.role+",").indexOf(","+L+",")>=0,isMaintenanceSupervisor:(","+e.role+",").indexOf(","+H+",")>=0,isSecuritySupervisor:(","+e.role+",").indexOf(","+Y+",")>=0,isMaintenanceManager:(","+e.role+",").indexOf(","+G+",")>=0,isSecurityManager:(","+e.role+",").indexOf(","+K+",")>=0}}):xe.fail("Failed to load User.")},function(e){o(!1),xe.fail(J(e)?e:"Failed to load User.")}))},[]);var h=function(t){o(!0),e.onAllowOwnAccess(f.id,t,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{hasOwnAccess:t})),xe.success("User "+(t?"allowed to login":"login access revoked")+" successfully.")):xe.fail("Failed to "+(t?"allow":"revoke")+".")})};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},e.user.client.config.appType==q&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"User Id / Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(De,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(De,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),(J(f.relationship)||J(f.otherRelationship))&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,J(f.relationship)&&"Other"!=f.relationship?f.relationship:J(f.otherRelationship)?f.otherRelationship:"Other")),e.user.client.config.appType==W&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:"OWNER"===f.type,text:"Owner",onPress:function(){return E(Object(d.a)({},f,{type:"OWNER"}))}}),c.a.createElement(De,{isActive:"TENANT"===f.type,text:"Tenant",onPress:function(){return E(Object(d.a)({},f,{type:"TENANT"}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-10"},"Role: "),c.a.createElement(pt,{isActive:f.role.isAdmin,text:M,onPress:function(){var e=f.role;e.isAdmin=!f.role.isAdmin,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isManager,text:V,onPress:function(){var e=f.role;e.isManager=!f.role.isManager,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isGatekeeper,text:F,onPress:function(){var e=f.role;e.isGatekeeper=!f.role.isGatekeeper,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isUser,text:L,onPress:function(){var e=f.role;e.isUser=!f.role.isUser,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isMaintenanceSupervisor,text:H,onPress:function(){var e=f.role;e.isMaintenanceSupervisor=!f.role.isMaintenanceSupervisor,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isSecuritySupervisor,text:Y,onPress:function(){var e=f.role;e.isSecuritySupervisor=!f.role.isSecuritySupervisor,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isMaintenanceManager,text:G,onPress:function(){var e=f.role;e.isMaintenanceManager=!f.role.isMaintenanceManager,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(pt,{isActive:f.role.isSecurityManager,text:K,onPress:function(){var e=f.role;e.isSecurityManager=!f.role.isSecurityManager,E(Object(d.a)({},f,{role:e}))}})),J(f.id)&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"Access to Login:"),c.a.createElement("span",{className:"d-ib bd bdc-blue-500"},f.hasOwnAccess?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{className:"p-5 m-0 bgc-blue-500 c-white"},"Allowed"),c.a.createElement(Ce,{className:"p-5 m-0 c-blue-500 cur-p",onClick:function(){return h(!1)}},"Revoke")):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{className:"p-5 m-0 c-blue-500 cur-p",onClick:function(){return h(!0)}},"Allow"),c.a.createElement(Ce,{className:"p-5 m-0 bgc-blue-500 c-white"},"Revoked")))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"House(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(Ce,null,function(){var t="";return J(f.homeIds)&&e.homes.isUpToDate&&!e.homes.isError&&J(e.homes.data)&&e.homes.data.filter(function(e){return f.homeIds.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.number}),t}())),e.homes.isUpToDate&&!e.homes.isError&&J(e.homes.data)&&i&&c.a.createElement(st.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(we,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.homes.data.map(function(e,t){return c.a.createElement(Ce,{key:"home"+t,className:"cur-p bdB p-3 mB-1"+(f.homeIds.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.homeIds.indexOf(e._id)>=0)E(Object(d.a)({},f,{homeIds:f.homeIds.filter(function(t){return t!==e._id})}));else{var t=f.homeIds;t.push(e._id),E(Object(d.a)({},f,{homeIds:t}))}}},e.number)})))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Se,{title:"true"===e.match.params.isApprove?"Approve":"SAVE",onPress:function(){if((e.user.client.config.appType!==q||J(f.number))&&J(f.name)&&f.age>0&&J(f.gender)){var t="";f.role.isAdmin&&(t=M),f.role.isManager&&(t+=(t.length>0?",":"")+V),f.role.isGatekeeper&&(t+=(t.length>0?",":"")+F),f.role.isUser&&(t+=(t.length>0?",":"")+L),f.role.isMaintenanceSupervisor&&(t+=(t.length>0?",":"")+H),f.role.isSecuritySupervisor&&(t+=(t.length>0?",":"")+Y),f.role.isMaintenanceManager&&(t+=(t.length>0?",":"")+G),f.role.isSecurityManager&&(t+=(t.length>0?",":"")+K),o(!0);var a={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",relationship:f.relationship,otherRelationship:f.otherRelationship,type:f.type,role:t};e.onSave(a,f.homeIds,e.user,e.users,"true"===e.match.params.isApprove,function(e,t){o(!1),!0===e?(E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",relationship:"",otherRelationship:"",isApproved:!1,isPrimary:!1,hasOwnAccess:!1,isOwnAccessRequested:!1,type:"TENANT",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1,isMaintenanceSupervisor:!1,isSecuritySupervisor:!1,isMaintenanceManager:!1,isSecurityManager:!1}}),xe.success("User saved successfully.")):xe.fail(J(t)?t:"Failed to save user.")})}else xe.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(Ue,{visible:n}))))}),$t=Object(s.b)(function(e,t){return{}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){(new te).get("account/wfausers",function(a,n){X(a)&&X(a.data)?e(a.data):t(X(a)&&J(a.message)?a.message:"Failed to load Members.")})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new te).delete("account/rejectuser/"+e,function(e,a){X(e)&&X(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(pe.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){o(!0),e.onLoad(function(e){o(!1),m(e)},function(e){o(!1),xe.fail(e)})},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},J(i)?i.map(function(t,a){return c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.name)),(t.age>0||J(t.gender))&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,(t.age>0?t.age:"")+(t.age>0&&J(t.gender)?", ":"")+(J(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},"On ",c.a.createElement(Ce,{className:"fw-600"},at(t.createdAt))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Se,{title:"Approve",className:"mR-10",onPress:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){e.history.push("edit-user/"+a+"/true")}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(Se,{title:"Reject",onPress:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReject(a,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==a})),xe.success("User rejected successfully.")):xe.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},"No user found."),c.a.createElement(Ue,{visible:n})))))}),ea=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(zt(t,a,n))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(t){e&&J(e._id)?(new te).put("home/"+e._id,function(r,c){if(X(r)&&X(r.data)&&r.data.length>0){if(a.isUpToDate&&!a.isError&&J(a.data)){var o=a.data.findIndex(function(e){return e._id===r.data});a.data[o]._id=r.data,a.data[o].number=e.number,t(Xt(a.data,!0,!1,""))}n(!0,"")}else n(!1,c)},e):(new te).post("home/0",function(r,c){X(r)&&X(r.data)&&r.data.length>0?(a.isUpToDate&&!a.isError&&J(a.data)&&(a.data.push({_id:r.data,number:e.number}),t(Xt(a.data,!0,!1,""))),n(!0,"")):n(!1,c)},e)}}(t,0,n,r))},onCheckNumberAvail:function(t,a,n){return e(function(e,t,a){return function(e){(new te).get("home/checkno/"+t,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)})}}(0,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),p=Object(pe.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(o(!0),e.onLoad(t,function(e){o(!1),e&&J(e._id)?E(Object(d.a)({},f,{id:e._id,blockId:e._blockId,number:e.number,address:e.address,bedRoom:e.bedRoom,parking:e.parking,description:e.description,members:e.memberIds})):xe.fail("Failed to load house.")},function(e){o(!1),xe.fail(J(e)?e:"Failed to load house.")}))},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Houses",link:"homes"},{title:"Edit House",link:"edit-home/0"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ae,{className:"form-control",value:f.blockId,onChange:function(e){return E(Object(d.a)({},f,{blockId:e.target.value}))}},c.a.createElement("option",{key:"block0",value:""},"Select Block"),e.blocks&&e.blocks.isUpToDate&&!e.blocks.isError&&J(e.blocks.data)&&e.blocks.data.map(function(e,t){return c.a.createElement("option",{key:"block"+t,value:e._id},e.name)}))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"No of bed rooms: ")),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(De,{isActive:1===f.bedRoom,text:"1",onPress:function(){return E(Object(d.a)({},f,{bedRoom:1}))}}),c.a.createElement(De,{isActive:2===f.bedRoom,text:"2",onPress:function(){return E(Object(d.a)({},f,{bedRoom:2}))}}),c.a.createElement(De,{isActive:3===f.bedRoom,text:"3",onPress:function(){return E(Object(d.a)({},f,{bedRoom:3}))}}),c.a.createElement(De,{isActive:4===f.bedRoom,text:"4",onPress:function(){return E(Object(d.a)({},f,{bedRoom:4}))}}),c.a.createElement(De,{isActive:5===f.bedRoom,text:"5",onPress:function(){return E(Object(d.a)({},f,{bedRoom:5}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Parking",className:"form-control",value:f.parking,onChange:function(e){return E(Object(d.a)({},f,{parking:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-5"},"User(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(Ce,null,function(){var t="";return J(f.members)&&e.users.isUpToDate&&!e.users.isError&&J(e.users.data)&&e.users.data.filter(function(e){return f.members.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.name+(J(e.number)?"("+e.number+")":"")}),t}())),e.users.isUpToDate&&!e.users.isError&&J(e.users.data)&&c.a.createElement(st.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(we,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.users.data.map(function(e,t){return c.a.createElement(Ce,{key:"user"+t,className:"cur-p bdB p-3 mB-1"+(f.members.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.members.indexOf(e._id)>=0)E(Object(d.a)({},f,{members:f.members.filter(function(t){return t!==e._id})}));else{var t=f.members;t.push(e._id),E(Object(d.a)({},f,{members:t}))}}},e.name+(e.number?"("+e.number+")":""))})))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Se,{title:"SAVE",onPress:function(){if(J(f.blockId)&&J(f.number)){o(!0);var t={_id:f.id,_blockId:f.blockId,number:f.number,address:f.address,bedRoom:f.bedRoom,parking:f.parking,description:f.description,memberIds:f.members};e.onSave(t,e.user,e.homes,function(e,t){o(!1),!0===e?(E({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),xe.success("House saved successfully.")):xe.fail(J(t)?t:"Failed to save house.")})}else xe.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(Ue,{visible:n})))))}),ta=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(qe(0,a,n,r,c))},onEnter:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("visitor/enter/"+e+"/"+t,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("visitor/exit/"+e+"/"+t,function(e,t){X(e)&&X(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!0),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=function(){o(!0),e.onLoad(e.user.client._id,"",p,function(e){o(!1),m(e)},function(e){o(!1),xe.fail(e)})};Object(r.useEffect)(function(){E()},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Visitors",link:"all-visitors"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(ft,{user:e.user,appUser:e.appUser,data:i,isActive:p,onActiveChange:function(){f(!p),E()},onEnter:function(t){Object(Fe.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onEnter(t,e.gateNo,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isEntered=!0,n[r].enteredBy=e.user.name,n[r].enteredAt=new Date,m(n),xe.success("Visitor entered successfully.")}else xe.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onExit:function(t){Object(Fe.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onExit(t,e.gateNo,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),xe.success("Visitor exit successfully.")):xe.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(Ue,{visible:n})))))}),aa=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("notifications/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Notification.")})}}(t,a,n))},onPush:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new te).post("notification/"+e,function(e,r){X(e)&&J(e.data)?n({_id:e.data,title:t.title,body:t.body,createdBy:a.name,createdAt:new Date}):n(null)},t)}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),m(e)},function(e){o(!1),xe.fail(e)})},[]);var g=function(){J(p)&&J(b)?Object(Fe.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){o(!0);var t={title:p,body:b};e.onPush(e.user.client._id,t,e.user,function(e){o(!1),X(e)?(m([e].concat(Object(Pt.a)(i))),f(""),N(""),xe.success("Notification pushed successfully.")):xe.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):xe.warn("Please fill all the required fields before Push.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Notification",link:"notification"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},J(e.user.client.config.notificationTypes)&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},e.user.client.config.notificationTypes.map(function(e,t){return c.a.createElement(De,{isActive:e===p,text:e,onPress:function(){return f(e)}})}),c.a.createElement(De,{isActive:!J(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),text:"Other",onPress:function(){return f("")}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:p,disabled:J(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Body",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){ee(e,g)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{className:"mR-10",title:"PUSH",onPress:g}),c.a.createElement(Se,{title:"CLEAR",onPress:function(){f(""),N("")}})),J(i)?i.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"mT-5"+(0===t?"":" bdT")},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.title)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.body)),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"Duplicate",onPress:function(){f(e.title),N(e.body)}})))}):c.a.createElement(Ce,{className:"p-20"},"No notification found."),c.a.createElement(Ue,{visible:n})))))}),na=function(e,t,a,r){return{type:n.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ra=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,data:e.Outings}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(na([],!1,!1,"")),(new te).get("outings"+(J(t)?"/"+t:""),function(t,n){X(t)&&X(t.data)?(e(na(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onReturnBack:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new te).delete("outing/return/"+e,function(r,c){if(X(r)&&X(r.data)&&!0===r.data){var o=a.data.findIndex(function(t){return t._id===e});a.data[o].isReturned=!0,a.data[o].returnedAt=new Date,t(na(a.data,!0,!1,"")),n(!0)}else n(!1)})}}(t,0,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,e.appUser.role===L?e.user.homes[e.appUser.homeIndex]._id:"",function(e){o(!1),e||xe.fail("Failed to load Door Locks.")})},[]);return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Door Locks",link:"outings"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},e.appUser.role===L&&(!X(e.data)||!J(e.data.data.filter(function(e){return!0!==e.isReturned})))&&c.a.createElement(Oe,{className:"ta-r"},c.a.createElement(Se,{title:"Lock The Door",onPress:function(){e.history.push("new-outing")}})),X(e.data)&&e.data.isUpToDate&&!e.data.isError&&J(e.data.data)?e.data.data.map(function(t,a){return c.a.createElement(Oe,{key:"o"+t._id,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t._homeId+" by "+t.createdBy+" on "+at(t.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},at(t.fromDate)+" to "+at(t.toDate))),J(t.place)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.place)),J(t.address)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.address)),t.isReturned&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Returned on "+at(t.returnedAt))),e.appUser.role!==L&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,null,"No one in the house. Please take care.")),e.appUser.role===L&&!0!==t.isReturned&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"Open The Door",onPress:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to open the door",message:"Are you sure? You want to open the door?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReturnBack(a,e.user,e.data,function(e){o(!1),e?xe.success("Successfully opened the door."):xe.fail("Failed to open the door.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(Ce,{className:"p-20"},e.data.isUpToDate?e.data.isError?e.data.errorMessage:"No door lock found.":"Loading..."),c.a.createElement(Ue,{visible:n})))))}),ca=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){e&&J(e._id)?r(!1):(new te).post("outing/"+t,function(t,o){console.log("result:",t),X(t)&&J(t.data)?(e._id=t.data,e.createdBy=a.name,n.data.unshift(e),c(na(n.data,!0,!1,"")),r(!0)):r(!1)},e)}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=function(){if(X(i.fromDate)&&X(i.toDate)){o(!0);var t={_homeId:e.user.homes[e.appUser.homeIndex].number,fromDate:i.fromDate,toDate:i.toDate,place:i.place,address:i.address,isReturned:!1,createdBy:e.user.name,createdAt:new Date};e.onSave(t,e.user.homes[e.appUser.homeIndex]._id,e.user,e.outings,function(e){o(!1),!0===e?(m({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),xe.success("Outing submitted successfully.")):xe.fail("Failed to submit Outing.")})}else xe.warn("Please fill all the required fields before submit Outing.")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Door Locks",link:"outings"},{title:"New Door Lock",link:"new-outing"}]}),c.a.createElement(Oe,{className:"bgc-white p-20",style:{minHeight:450}},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"w-100"},"From Date: "),c.a.createElement(mt.a,{onChange:function(e){m(Object(d.a)({},i,{fromDate:e}))},value:i.fromDate})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"w-100"},"To Date: "),c.a.createElement(mt.a,{onChange:function(e){m(Object(d.a)({},i,{toDate:e}))},value:i.toDate})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:i.place,onChange:function(e){return m(Object(d.a)({},i,{place:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:i.address,onChange:function(e){return m(Object(d.a)({},i,{address:e.target.value}))},onKeyPress:function(e){ee(e,u)}})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SUBMIT",onPress:u}))),c.a.createElement(Ue,{visible:n}))))}),oa=function(e,t,a,r){return{type:n.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},la=Object(s.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){a(oa([],!1,!1,"")),(new te).get("documents/"+e,function(e,n){X(e)&&X(e.data)?(a(oa(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){t&&J(t._id)?(new te).put("document/"+t._id,function(e,n){if(X(e)&&J(e.data)){var o=r.findIndex(function(t){return t._id===e.data._id});r[o]._id=e.data._id,r[o].title=t.title,r[o].description=t.description,r[o].file=t.file,a(oa(r,!0,!1,"")),c(!0)}else c(!1)},t):(new te).post("document/"+e,function(e,o){X(e)&&J(e.data)?(r.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:n.name,createdAt:new Date}),a(oa(r,!0,!1,"")),c(!0)):c(!1)},t)}}(t,a,0,r,c,o))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new te).delete("document/"+e,function(r,c){X(r)&&X(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(oa(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))},onUpload:function(t,a){return e(Xe(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(pe.a)(l,2),i=(s[0],s[1]),m=Object(r.useState)({id:"",homeId:J(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}),u=Object(pe.a)(m,2),p=u[0],f=u[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){o(!1),e||xe.fail("Failed to load Documents.")})},[]);var E=function(){f(Object(d.a)({},p,{id:"",homeId:J(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}))};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"My Documents",link:"my-documents"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Title",className:"form-control",value:p.title,onChange:function(e){return f(Object(d.a)({},p,{title:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:p.description,onChange:function(e){return f(Object(d.a)({},p,{description:e.target.value}))}})),J(e.user.homes)&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-10"},"House:"),e.user.homes.map(function(e,t){return c.a.createElement(De,{isActive:e._id===p.homeId,text:e.number,key:"home"+t,onPress:function(){return f(Object(d.a)({},p,{homeId:e._id}))}})})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=Q();r+="."+n[n.length-1],o(!0);var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){o(!1),e?f(Object(d.a)({},p,{fileName:r})):xe.fail(t||"Failed to upload file.")})}}}}),J(p.fileName)&&c.a.createElement(Ce,{className:"mL-15"},p.fileName)),c.a.createElement(Oe,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{className:"mR-10",title:"SAVE",onPress:function(){if(J(p.title)&&J(p.fileName)){o(!0);var t={_id:p.id,title:p.title,description:p.description,file:p.fileName,createdBy:e.user.name,createdAt:new Date};e.onSave(p.homeId,t,e.homeIndex,e.user,e.documents.data,function(e){o(!1),!0===e?(i(!1),E(),xe.success("Document saved successfully.")):xe.fail("Failed to save document.")})}else xe.warn("Please fill all the required fields before "+(p.id.length>0?"Update":"Save")+".")}}),c.a.createElement(Se,{title:"CLEAR",onPress:E})),e.documents.isUpToDate&&!e.documents.isError&&J(e.documents.data)?e.documents.data.map(function(t,a){return c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.createdBy+" on "+tt(t.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.title)),J(t.description)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),J(e.user.homes.filter(function(e){return e._id===t._id}))&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"House: "+e.user.homes.filter(function(e){return e._id===t._id})[0].number)),J(t.file)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:D+t.file},t.file)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.documents.data,function(e){o(!1),!0===e?xe.success("Document removed successfully."):xe.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},e.documents.isUpToDate?"No document found.":e.documents.isError?e.documents.errorMessage:"No document found."),c.a.createElement(Ue,{visible:n})))))}),sa=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ia=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ma=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new te).delete("block/"+e,function(r,c){X(r)&&X(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(sa(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=function(){J(i)&&e.blocks.isUpToDate&&!e.blocks.isError&&J(e.blocks.data)?(f(e.blocks.data.filter(function(e){return(e.name+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Blocks",link:"blocks"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-block/0")}},"Add New")),c.a.createElement(Oe,{className:"mB-3 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Search Block",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){ee(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),J(p)?p.slice(0,b).map(function(t,a){return c.a.createElement(Oe,{key:"block"+a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Name: "+t.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Description: "+(J(t.description)?t.description:""))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"mR-10"},"Houses: "),J(e.homes.data)&&J(e.homes.data.filter(function(e){return e._blockId===t._id}))?e.homes.data.filter(function(e){return e._blockId===t._id}).map(function(e,t){return c.a.createElement(de.b,{to:"edit-home/"+e._id,className:"mR-10"},e.number)}):c.a.createElement(Ce,null,"No house assigned under this block.")),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-block/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){var t=J(e.homes.data)?e.homes.data.filter(function(e){return e._blockId===a}):[];if(J(t)){var n="";t.map(function(e){n+=(n.length>0?", ":"")+e.number}),n=t.length>1?"Houses "+n+" are assigned under this block. Please move these houses to other block and try to delete":"House "+n+" is assigned under this block. Please move this house to other block and try to delete.",xe.fail(n)}else o(!0),e.onRemove(a,e.blocks.data,function(e){o(!1),!0===e?(g(),xe.success("House removed successfully.")):xe.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(Ce,{className:"p-20"},"No block match with your search."),p.length>b&&c.a.createElement(Oe,{className:"bdB mT-5"},c.a.createElement(Oe,{className:"p-10"},c.a.createElement(Ce,{className:"fw-600 c-blue-500",onClick:function(){N(b+10)}},"Show More"))),c.a.createElement(Ue,{visible:n})))))}),ua=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(o){t&&J(t._id)?(new te).put("block/"+t._id,function(e,a){if(X(e)&&J(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].name=t.name,n[r].description=t.description,o(sa(n,!0,!1,"")),c(!0,"")}else c(!1,a)},t):(new te).post("block/"+e,function(e,l){X(e)&&X(e.data)&&J(e.data.blockId)?(n.unshift({_id:e.data.blockId,name:t.name,description:t.description,createdBy:a.name}),o(sa(n,!0,!1,"")),J(e.data.homes)&&(e.data.homes.forEach(function(e){e.memberIds=e.members,delete e.members}),r=r.concat(e.data.homes),o(ia(r,!0,!1,""))),c(!0,"")):c(!1,l)},t)}}(t,a,n,r,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)(0),v=Object(pe.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){var t=e.match.params.id;if(t.length>0&&"0"!==t&&e.blocks&&J(e.blocks.data)){var a=e.blocks.data.filter(function(e,a){return e._id===t});J(a)&&(m(a[0]._id),f(a[0].name),N(a[0].description))}},[]);var O=function(){if(J(p)&&(J(i)||y>0))if(J(e.blocks.data)&&J(e.blocks.data.filter(function(e){return e.name===p})))xe.fail("Block with same name already exists. Please give different name.");else{o(!0);var t={_id:i,name:p,description:b};t=Object.assign(t,{homeCount:y}),e.onSave(e.user.client._id,t,e.user,e.blocks&&e.blocks.data?e.blocks.data:[],e.homes&&e.homes.data?e.homes.data:[],function(e,t){o(!1),!0===e?(m(""),f(""),N(""),T(0),xe.success(J(i)?"Block saved successfully.":"Block saved and house(s) created successfully.")):xe.fail(J(t)?t:"Failed to save block.")})}else xe.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Description",className:"form-control",value:b,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){ee(e,O)}})),!J(i)&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"number",placeholder:"Number of houses in this block",className:"form-control",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5 ta-c"},c.a.createElement(Se,{title:"SAVE",onPress:O}))),c.a.createElement(Ue,{visible:n}))))}),da=function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(0),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)((new Date).getMonth()),h=Object(pe.a)(E,2),b=h[0],N=h[1],g=Object(r.useState)((new Date).getFullYear()),v=Object(pe.a)(g,2),y=v[0],T=v[1],O=Object(r.useState)(""),w=Object(pe.a)(O,2),k=w[0],B=w[1],j=Object(r.useState)(!1),A=Object(pe.a)(j,2),C=A[0],S=A[1],U=Object(r.useState)(!1),_=Object(pe.a)(U,2),I=_[0],x=_[1],D=Object(r.useState)([]),R=Object(pe.a)(D,2),P=R[0],L=R[1],M=function(){m(0),f(""),N((new Date).getMonth()),T((new Date).getFullYear()),B(""),S(!1),x(!1),L([])};return c.a.createElement(Oe,{className:"pL-15 pR-15"},c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Amount",className:"form-control",value:i>0?i+"":"",onChange:function(e){return m(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mT-15"},"Payment for "+y+" "),c.a.createElement(Ae,{className:"form-control",value:b,onChange:function(e){return N(e.target.value)}},z.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return c.a.createElement("option",{key:"month"+t,value:e.value},e.title)}))),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-15"},"Apply to House(s): "+(I?"":P.length)),c.a.createElement(pt,{isActive:I,text:"All Homes",onPress:function(){return x(!I)}})),!I&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},P.map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){L(P.filter(function(t,a){return t._id!==e._id}))}},e.number)})),!I&&c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:k,onChange:function(e){S(!0),B(e.target.value)}})),!I&&C&&J(k)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(k.toLowerCase())>=0&&P.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=P;t.push(e),L(t)}},e.number)})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{className:"mR-10",title:"SAVE",onPress:function(){if(i>0&&(I||P.length>0)){var t=[];P.map(function(e,a){return t.push(e._id)});var a={amount:i,description:p,month:b,year:y,isAllHome:I,homes:t};o(!0),e.onSave(e.user.client._id,a,e.user,function(e,t){o(!1),!0===e?(M(),xe.success("Payment saved successfully.")):xe.fail(t||"Failed to save payment.")})}else xe.warn("Please fill all required fields before Save.")}}),c.a.createElement(Se,{title:"CLEAR",onPress:M})),c.a.createElement(Ue,{visible:n}))},pa=function(e){var t=Object(r.useState)({isLoading:!1,isShowSearch:!0,fromDate:new Date,toDate:new Date,datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}),a=Object(pe.a)(t,2),n=a[0],o=a[1];return c.a.createElement(Oe,{className:"pL-15 pR-15"},n.isShowSearch?c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ce,{className:"mR-15"},"House(s): "+(n.homes.length>0?n.homes.length:"All"))),c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},n.homes.map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){o(Object(d.a)({},n,{homes:n.homes.filter(function(t,a){return t._id!==e._id})}))}},e.number)})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:n.searchText,onChange:function(e){return o(Object(d.a)({},n,{showHomes:!0,searchText:e.target.value}))}})),n.showHomes&&J(n.searchText)&&e.homes&&e.homes.data.length>0&&c.a.createElement(we,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(n.searchText.toLowerCase())>=0&&n.homes.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(Ce,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=n.homes;t.push(e),o(Object(d.a)({},n,{homes:t}))}},e.number)})),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"SEARCH",onPress:function(){if(n.fromDate&&n.toDate){var t=[];n.homes.map(function(e,a){return t.push(e._id)});var a={fromDate:n.fromDate,toDate:n.toDate,homes:t};o(Object(d.a)({},n,{isLoading:!0})),e.onSearch(e.user.client._id,a,e.user,function(e){o(Object(d.a)({},n,{isLoading:!1,isShowSearch:!1,data:e}))},function(e){o(Object(d.a)({},n,{isLoading:!1})),xe.fail(e||"Failed to load payment.")})}else xe.warn("Please fill all required fields before Search.")}}))):c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fl-r cur-p c-blue-500 fw-600 ta-c",onClick:function(){o(Object(d.a)({},n,{isShowSearch:!0}))}},"Show Search")),c.a.createElement(Oe,null,J(n.data)?n.data.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e._homeId+" by "+e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Rs."+e.amount+" for "+z.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(J(e.mode)?" "+e.mode:"")+(J(e.type)?" "+e.type:""))),J(e.description)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{title:"Update",onPress:function(){o(Object(d.a)({},n,{isShowUpdateModel:!0,uPaymentId:e._id,uAmount:e.amount,uDescription:e.description}))}})))}):c.a.createElement(Ce,{className:"p-20"},"No payment found.")),c.a.createElement(st.a,{open:n.isShowUpdateModel,onClose:function(){o(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}))}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15"},c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{type:"text",placeholder:"Amount",className:"form-control",value:n.uAmount>0?n.uAmount+"":"",onChange:function(e){return o(Object(d.a)({},n,{uAmount:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.uDescription,onChange:function(e){return o(Object(d.a)({},n,{uDescription:e.target.value}))}})),c.a.createElement(Oe,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Se,{className:"mR-10",title:"SAVE",onPress:function(){if(J(n.uPaymentId)&&n.uAmount>0){var t={amount:n.uAmount,description:n.uDescription};o(Object(d.a)({},n,{isLoading:!0})),e.onUpdate(n.uPaymentId,t,e.user,function(e,t){if(o(Object(d.a)({},n,{isLoading:!1})),!0===e){var a=n.data,r=a.findIndex(function(e){return e._id===n.uPaymentId});a[r].amount=n.uAmount,a[r].description=n.uDescription,o(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a})),xe.success("Payment updated successfully.")}else xe.fail(t||"Failed to update payment.")})}else xe.warn("Please fill all required fields before update.")}}),c.a.createElement(Se,{title:"CLEAR",onPress:function(){o(Object(d.a)({},n,{uAmount:0,uDescription:""}))}}))))),c.a.createElement(Ue,{visible:n.isLoading}))},fa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,a,n,r){return e(Ke(0,a,n,r))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new te).post("payment/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to save Payment.")},t)}}(t,a,0,r))},onSearch:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(a){(new te).post("payments/"+e,function(e,t){X(e)?n(e.data):r(J(t)?t:"Failed to load Payments.")},t)}}(t,a,0,r,c))},onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new te).put("payment/"+e,function(e,t){X(e)&&X(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to update Payment.")},t)}}(t,a,0,r))}}})(function(e){var t=Object(r.useState)(1),a=Object(pe.a)(t,2),n=a[0],o=a[1];return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Payment",link:"payment"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"NEW"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"HISTORY")),c.a.createElement(Oe,{className:"tab-content p-15"},1===n?c.a.createElement(da,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSave:e.onSave}):c.a.createElement(pa,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSearch:e.onSearch,onUpdate:e.onUpdate}))))))}),Ea=function(e){var t=e.blocks,a=e.data,n="";if(a&&J(a._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var c=t.data.filter(function(e,t){return e._id===a._blockId});c&&c.length>0&&(n=c[0].name)}return a&&J(a._id)?r.createElement(Oe,null,r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Block: "+n)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Number: "+a.number)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Address: "+a.address)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"No of bed room(s): "+a.bedRoom)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Parking: "+a.parking)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Description: "+a.description))):r.createElement(Ce,null,"No data found.")},ha=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Members.")}))},[]),c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Members")),J(n)?n.map(function(t,a){return c.a.createElement(Oe,{key:a,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},(J(t.createdBy)?t.createdBy:"")+" on "+tt(t.createdAt))),e.user.client.config.appType==q&&J(t.number)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),J(t.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.mobileNo)),J(t.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.emailId)),(J(t.relationship)||J(t.otherRelationship))&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,J(t.relationship)&&"Other"!=t.relationship?t.relationship:J(t.otherRelationship)?t.otherRelationship:"Other")),e.user.client.config.appType==W&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.type)))}):c.a.createElement(Ce,null,"No data found."))},ba=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Vehicles")),J(n)?n.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.type)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.number)))}):c.a.createElement(Ce,null,"No data found."))},Na=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Servants.")}))},[]);return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Servants")),J(n)?n.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+at(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.name)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.age+", "+("M"===e.gender?"Male":"F"===e.gender?"Female":"Other"))),J(e.mobileNo)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.mobileNo)),J(e.emailId)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.emailId)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.takeaways,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Takeaways"))),i===e._id&&c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},"Takeaways")),c.a.createElement(Oe,{className:"p-15"},J(p)?p.map(function(e,t){return c.a.createElement(Oe,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+at(e.updatedAt))),c.a.createElement(Oe,null,c.a.createElement(Ce,null,e.title)),c.a.createElement(Oe,null,c.a.createElement(Ce,null,e.description)),e.isExit?c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"c-green-600"},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+at(e.exitAt))):c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"c-red-600"},"Still not exit.")))}):c.a.createElement(Ce,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(Ce,null,"No data found."))},ga=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Vehicles.")}))},[]);return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Tickets")),J(n)?n.map(function(e,t){return c.a.createElement(Oe,{key:"tkt"+t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" from "+e._homeId+" on "+at(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.title)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.status)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.comments,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Comments"))),i===e._id&&c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},"Comments")),c.a.createElement(Oe,{className:"p-15"},J(p)?p.map(function(e,t){return c.a.createElement(Oe,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Oe,null,c.a.createElement(Ce,{className:"fw-600"},e.createdByName+" on "+at(e.updatedAt))),c.a.createElement(Oe,null,c.a.createElement(Ce,null,e.comment)))}):c.a.createElement(Ce,{className:"p-20"},"No comment found."))))}):c.a.createElement(Ce,null,"No data found."))},va=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!0),s=Object(pe.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){u()},[]);var u=function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,i,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Visitors.")}))};return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Visitors")),c.a.createElement(ft,{data:n,isActive:i,user:e.user,appUser:e.appUser,onActiveChange:function(){m(!i),u()}}))},ya=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(pe.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Payments.")}))},[]);return c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Payments")),J(n)?n.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Rs. "+e.amount+" for "+z.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(J(e.mode)?" "+e.mode:"")+(J(e.type)?" "+e.type:""))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Amount Paid Rs. "+function(e){var t=0;return J(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,a){return t+=e.amount}),t}(e.transactions))),J(e.description)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.transactions,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(Ce,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Transactions"))),i===e._id&&c.a.createElement(Oe,{className:"mT-5 mB-5"},c.a.createElement(Oe,{className:"bdB"},c.a.createElement(Ce,{className:"fw-600"},"Transactions")),c.a.createElement(Oe,{className:"mT-3"},J(p)?p.map(function(e,t){return c.a.createElement(Oe,{key:"tktcmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(Oe,{className:"fw-600"},c.a.createElement(Ce,null,e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Ref Id: "+e.txnRef)),c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Txn Id: "+e.txnId)),c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Amount: "+e.amount)),c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),J(e.reason)&&c.a.createElement(Oe,null,c.a.createElement(Ce,null,"Reason: "+e.reason)))}):c.a.createElement(Ce,{className:"p-20"},"No transaction found."))))}):c.a.createElement(Ce,null,"No data found."))},Ta=function(e){var t=Object(r.useState)([]),a=Object(pe.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),xe.fail(J(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(Oe,null,c.a.createElement(Oe,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"c-blue-700 fw-600 mB-10"},"Documents")),J(n)?n.map(function(e,t){return c.a.createElement(Oe,{key:t,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.createdBy+" on "+tt(e.createdAt))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},e.title)),J(e.description)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.description)),J(e.file)&&c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:D+e.file},e.file)))}):c.a.createElement(Ce,null,"No data found."))},Oa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(zt(t,a,n))},onLoadMembers:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("members/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadVehicles:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("vehicles/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadServants:function(t,a,n){return e(At(t,a,n))},onLoadTickets:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("tickets/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Tickets.")})}}(t,a,n))},onLoadVisitors:function(t,a,n,r){return e(qe(0,t,a,n,r))},onLoadPayments:function(t,a,n){return e(Ke(0,t,a,n))},onLoadDocuments:function(t,a,n){return e(function(e,t,a){return function(n){(new te).get("documents/"+e,function(e,n){X(e)&&X(e.data)?t(e.data):a(e&&J(e.message)?e.message:"Failed to load Documents.")})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(pe.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(1),d=Object(pe.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)({}),h=Object(pe.a)(E,2),b=h[0],N=h[1];Object(r.useEffect)(function(){var t=e.match.params.id;m(t),t.length>0&&(o(!0),e.onLoad(t,function(e){o(!1),e&&J(e._id)?N(e):xe.fail("Failed to load house.")},function(e){o(!1),xe.fail(J(e)?e:"Failed to load house.")}))},[]);var g=function(e){o(e)};return c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Houses",link:"homes"},{title:"View House",link:"view-home"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===p?" active":""),onClick:function(){return f(1)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-a700 ti-info-alt"}))),c.a.createElement("span",{className:"tab"+(2===p?" active":""),onClick:function(){return f(2)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-brown-500 fa fa-users"}))),c.a.createElement("span",{className:"tab"+(3===p?" active":""),onClick:function(){return f(3)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-car"}))),c.a.createElement("span",{className:"tab"+(4===p?" active":""),onClick:function(){return f(4)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-500 fa fa-female"}))),c.a.createElement("span",{className:"tab"+(5===p?" active":""),onClick:function(){return f(5)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-orange-500 ti-headphone-alt"}))),c.a.createElement("span",{className:"tab"+(6===p?" active":""),onClick:function(){return f(6)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-pink-500 fa fa-id-card-o"}))),e.user.client.config.hasPayment&&c.a.createElement("span",{className:"tab"+(7===p?" active":""),onClick:function(){return f(7)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-credit-card"}))),c.a.createElement("span",{className:"tab"+(8===p?" active":""),onClick:function(){return f(8)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-blue-500 fa fa-file-text"})))),c.a.createElement(Oe,{className:"p-15"},1===p?c.a.createElement(Ea,{blocks:e.blocks,data:b}):2===p?c.a.createElement(ha,{user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadMembers}):3===p?c.a.createElement(ba,{homeId:i,onToggleLoading:g,onLoad:e.onLoadVehicles}):4===p?c.a.createElement(Na,{homeId:i,onToggleLoading:g,onLoad:e.onLoadServants}):5===p?c.a.createElement(ga,{homeId:i,onToggleLoading:g,onLoad:e.onLoadTickets}):6===p?c.a.createElement(va,{appUser:e.appUser,user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadVisitors}):7===p?c.a.createElement(ya,{homeId:i,onToggleLoading:g,onLoad:e.onLoadPayments}):c.a.createElement(Ta,{homeId:i,onToggleLoading:g,onLoad:e.onLoadDocuments}))),c.a.createElement(Ue,{visible:n}))))}),wa=function(e,t,a,r){return{type:n.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}};function ka(e,t){try{return t>0?100*e/t:0}catch(a){return $(a,"calc.percentage"),0}}var Ba=function(e){var t=Object(r.useState)({isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=function(){if(J(n.topic)&&J(n.description)&&X(n.fromDate)&&X(n.toDate)&&J(n.pollOption.filter(function(e){return J(e)}))){o(Object(d.a)({},n,{isLoading:!0}));var t={_id:n.id,topic:n.topic,description:n.description,isAllowMultiple:n.isAllowMultiple,isOneVotePerFlat:n.isOneVotePerFlat,isAnonymous:n.isAnonymous,fromDate:n.fromDate,toDate:n.toDate,options:n.pollOption.filter(function(e){return J(e)})};e.onSave(e.user.client._id,t,e.polls.data,e.user,function(e){o(Object(d.a)({},n,{isLoading:!1})),!0===e?(o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})),xe.success("Poll saved successfully.")):xe.fail("Failed to save pol.")})}else xe.warn("Please fill all the required fields before "+(n.id.length>0?"Update":"Save")+".")};return c.a.createElement(Oe,null,!1===n.isEdit&&c.a.createElement(Oe,{className:"bdB mT-5 pB-5"},c.a.createElement(Se,{title:"ADD NEW",onPress:function(){o(Object(d.a)({},n,{isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}))}})),!0===n.isEdit&&0===n.id.length?c.a.createElement(Oe,{key:"p0",className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return o(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return o(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return o(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return o(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return o(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),J(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(Oe,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,o(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],o(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"No option found.")),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!J(n.pollOption.filter(function(e){return!J(e)}))){var e=n.pollOption;e.push(""),o(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(Ce,null,"Add More +"))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:l},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):[],X(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&J(e.polls.data)?e.polls.data.map(function(t,a){return!0===n.isEdit&&n.id===t._id?c.a.createElement(Oe,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return o(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(je,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return o(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(mt.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return o(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return o(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return o(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),J(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(Oe,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,o(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],o(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"No option found.")),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!J(n.pollOption.filter(function(e){return!J(e)}))){var e=n.pollOption;e.push(""),o(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(Ce,null,"Add More +"))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:l},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(Oe,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.topic)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,tt(t.fromDate)+" to "+tt(t.toDate))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAllowMultiple?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isAllowMultiple?"c-white":""},"Allow Multiple Votes"))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isOneVotePerFlat?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isOneVotePerFlat?"c-white":""},"One Vote per Flat"))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Oe,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAnonymous?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(Ce,{className:!0===t.isAnonymous?"c-white":""},"Anonymous Voting"))),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,"Options: ")),J(t.options)?t.options.map(function(e,t){return c.a.createElement(Oe,{key:"po"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{key:"pot"+t},e))}):c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"p-10"},"No option found.")),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},t.fromDate>new Date&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:J(t.options)?t.options:[]}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Fe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(Object(d.a)({},n,{isLoading:!0})),e.onRemove(a,e.polls.data,e.user._id,function(e){o(Object(d.a)({},n,{isLoading:!1})),!0===e?xe.success("Poll removed successfully."):xe.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement(Ce,{className:"cur-p c-blue-500",onClick:function(){o(Object(d.a)({},n,{showVotePoll:t}))}},"View Votes")))}):c.a.createElement(Ce,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No poll found.":"Loading..."),c.a.createElement(st.a,{open:X(n.showVotePoll)&&n.showVotePoll._id.length>0,onClose:function(){return o(Object(d.a)({},n,{showVotePoll:{_id:""}}))}},c.a.createElement(Oe,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(Oe,null,function(){if(X(n.showVotePoll)&&n.showVotePoll._id.length>0){var e=[];return n.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),c.a.createElement(Oe,{className:"p-15"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},n.showVotePoll.topic)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,n.showVotePoll.description)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Votes: "+n.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return c.a.createElement(Oe,{key:"pvo"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,e.votes+" ("+ka(e.votes,n.showVotePoll.votes.length)+"%) - "+e.option))}))}return""}()))),c.a.createElement(Ue,{visible:n.isLoading}))},ja=function(e){var t=new Date,a=Object(r.useState)(!1),n=Object(pe.a)(a,2),o=n[0],l=n[1],s=Object(r.useState)(""),i=Object(pe.a)(s,2),m=i[0],u=i[1],d=Object(r.useState)([]),p=Object(pe.a)(d,2),f=p[0],E=p[1],h=Object(r.useState)(new Date(t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear())),b=Object(pe.a)(h,2),N=b[0];b[1];return c.a.createElement(Oe,null,X(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&J(e.polls.data.filter(function(e){return J(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}))?e.polls.data.filter(function(e){return J(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}).map(function(t,a){return c.a.createElement(Oe,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},t.topic)),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.description)),(!0!==t.isOneVotePerFlat||!J(t.votes)||!J(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&t.options.map(function(a,n){return c.a.createElement(Oe,{key:"popt"+n,className:"mT-1 mB-3 p-2"},c.a.createElement(pt,{isActive:m===t._id&&J(f.filter(function(e){return e.option===n})),text:a,onPress:function(){return function(t,a){if(m===t._id)if(J(f.filter(function(e){return e.option===a})))E(f.filter(function(e){return e.option!==a}));else{var n=[];t.isAllowMultiple&&(n=f),n.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),E(n)}else{var r=[];r.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),u(t._id),E(r)}}(t,n)}}))}),(!0!==t.isOneVotePerFlat||!J(t.votes)||!J(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&c.a.createElement(Oe,{className:"mT-5"},c.a.createElement(Se,{title:"Vote",onPress:function(){return a=t._id,void(m===a&&J(f)?(l(!0),e.onVote(a,f,e.polls,e.user,e.appUser,function(e){l(!1),!0===e?(u(""),E([]),xe.success("Your vote saved successfully.")):xe.fail("Failed to save your vote.")})):xe.warn("Please select any option to vote."));var a}})),c.a.createElement(Oe,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,{className:"fw-600"},"Your Votes:")),J(t.options)&&function(e){var t=[];return e.options.map(function(a,n){return t.push({option:a,votes:e.votes.filter(function(e){return e.option===n}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,a){return c.a.createElement(Oe,{key:"pvo"+a,className:"mT-1 mB-3 p-2"},c.a.createElement(Ce,null,t.votes+" ("+ka(t.votes,e.votes.length)+"%) - "+t.option))})}(t))}):c.a.createElement(Ce,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No active poll found.":"Loading..."),c.a.createElement(Ue,{visible:o}))},Aa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,a){return e(Ht(t,a))},onLoadPoll:function(t,a,n){return e(function(e,t,a){return function(t){t(wa([],!1,!1,"")),(new te).get("polls/"+e,function(e,n){X(e)&&X(e.data)?(t(wa(e.data,!0,!1,"")),a(!0)):a(!1)})}}(t,0,n))},onSavePoll:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){t&&J(t._id)?(new te).put("poll/"+t._id,function(e,n){if(X(e)&&J(e.data)){var o=a.findIndex(function(t){return t._id===e.data});a[o]._id=e.data,a[o].topic=t.topic,a[o].description=t.description,a[o].isAllowMultiple=t.isAllowMultiple,a[o].isOneVotePerFlat=t.isOneVotePerFlat,a[o].isAnonymous=t.isAnonymous,a[o].fromDate=t.fromDate,a[o].toDate=t.toDate,a[o].options=t.options,c(wa(X(a)?a:[],!0,!1,"")),r(!0)}else r(!1)},t):(new te).post("poll/"+e,function(e,o){X(e)&&J(e.data)?(t._id=e.data,t.createdBy=n.name,a.unshift(t),c(wa(X(a)?a:[],!0,!1,"")),r(!0)):r(!1)},t)}}(t,a,n,r,c))},onRemovePoll:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new te).delete("poll/"+e,function(a,c){X(a)&&X(a.data)&&!0===a.data?(t=t.filter(function(t,a){return t._id!==e}),r(wa(X(t)?t:[],!0,!1,"")),n(!0)):n(!1)},{Id:e,UserId:a})}}(t,a,n,r))},onVote:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(n){(new te).post("poll/vote/"+e,function(t,r){if(X(t)&&J(t.data)){var o=a.data.findIndex(function(t){return t._id===e});if(a.data[o].votes=t.data,n(wa(a.data,!0,!1,"")),a.isUpToDate&&!a.isError&&J(a.data)){var l=a.data,s=l.findIndex(function(t){return t._id===e});l[s].votes=t.data,n(wa(l,!0,!1,""))}c(!0)}else c(!1)},{votes:t})}}(t,a,n,0,0,o))}}})(function(e){var t=Object(r.useState)(!X(e.user)||e.appUser.role!==M&&e.appUser.role!==V?2:1),a=Object(pe.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(X(e.user)&&(e.appUser.role===M||e.appUser.role===V||e.appUser.role===L&&e.appUser.homeIndex>=0)),s=Object(pe.a)(l,2),i=s[0];s[1];return Object(r.useEffect)(function(){e.onLoadAds(e.user.client._id,function(e){e||xe.fail("Failed to load Ads.")}),i&&e.onLoadPoll(e.user.client._id,e.appUser.role,function(e){e||xe.fail("Failed to load Poll.")})},[]),c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Oe,{className:"row gap-20 masonry pos-r"},c.a.createElement(Oe,{className:"masonry-item col-12"},c.a.createElement(yt,{data:[{title:"Notice",link:"notice"}]}),c.a.createElement(Oe,{className:"bgc-white p-20"},c.a.createElement(Oe,{className:"tab-bar"},i&&c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"POLL"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"ADS")),c.a.createElement(Oe,{className:"p-15"},1===n?e.appUser.role===M||e.appUser.role===V?c.a.createElement(Ba,{appUser:e.appUser,user:e.user,polls:e.polls,onSave:e.onSavePoll,onRemove:e.onRemovePoll}):c.a.createElement(ja,{appUser:e.appUser,user:e.user,polls:e.polls,onVote:e.onVote}):2===n?c.a.createElement(rt,{data:e.ads.isUpToDate?e.ads.data:[],message:e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No data found.":"Loading..."}):c.a.createElement(rt,{data:3===n?e.remainders:e.complaints,message:"No data found."}))))))}),Ca=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(function(e){return r.createElement(Oe,{id:"mainContent"},r.createElement(Oe,{className:"row gap-20 masonry pos-r"},r.createElement(Oe,{className:"masonry-item col-12"},r.createElement(yt,{data:[{title:"Info",link:"info"}]}),r.createElement(Oe,{className:"bgc-white p-20"},r.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"c-blue-500 fw-600 ta-c"},e.user.client.name)),r.createElement(Oe,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"c-blue-500 fw-600 ta-c"},e.user.client.description)),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"House users")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Maintenance Admin Payment")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Receive real-time notifications")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Visitor management")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Lodge any complaint related to your apartment and track")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,null,"Admin Users")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Create polls and gather the opinion of all Apartment residents")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"All details of your flat, staff who work in your flat, visitors coming to your flat")),r.createElement(Oe,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(Ce,{className:"mL-15"},"Accounts  and much more..."))))))}),Sa=function(){return r.createElement(Oe,{id:"mainContent"},r.createElement(Oe,{className:"row gap-20 masonry pos-r"},r.createElement(Oe,{className:"masonry-item col-12"},r.createElement(Oe,{className:"bgc-white p-20"},r.createElement(Ce,null,"Page not found.")))))},Ua=a(10),_a=function(){Ua(".sidebar .sidebar-menu li a").on("click",function(){var e=Ua(this);e.parent().hasClass("open")?e.parent().children(".dropdown-menu").slideUp(200,function(){e.parent().removeClass("open")}):(e.parent().parent().children("li.open").children(".dropdown-menu").slideUp(200),e.parent().parent().children("li.open").children("a").removeClass("open"),e.parent().parent().children("li.open").removeClass("open"),e.parent().children(".dropdown-menu").slideDown(200,function(){e.parent().addClass("open")}))}),Ua(".sidebar").find(".sidebar-link").each(function(e,t){Ua(t).removeClass("active")}).filter(function(){var e=Ua(this).attr("href");return("/"===e[0]?e.substr(1):e)===window.location.pathname.substr(1)}).addClass("active"),Ua(".sidebar-toggle").on("click",function(e){Ua(".app").toggleClass("is-collapsed"),e.preventDefault()}),Ua("#sidebar-toggle").click(function(e){e.preventDefault(),setTimeout(function(){window.dispatchEvent(window.EVENT)},300)})},Ia=a(80),xa=function(){var e=Ua(".scrollable");e.length>0&&e.each(function(e,t){new Ia.a(t)})},Da=(a(153),function(){Ua('[data-toggle="popover"]').popover(),Ua('[data-toggle="tooltip"]').tooltip()}),Ra=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new te).get("account/profile",function(a,n){if(X(a)&&X(a.data)&&J(a.data._id)){t(le(a.data)),t(oe(J(a.data.homes)?0:-1));var r=a.data.role.split(",");J(r)&&t(ce(r[0])),(r.indexOf(M)>=0||r.indexOf(V)>=0)&&((new te).get("members",function(e,a){X(e)&&J(e.data)&&t(se(e.data,!0,!1,""))}),(new te).get("blocks/"+a.data.client._id,function(e,a){X(e)&&J(e.data)&&t(me(e.data,!0,!1,""))})),(r.indexOf(M)>=0||r.indexOf(V)>=0||r.indexOf(F)>=0)&&(new te).get("homes/"+a.data.client._id,function(e,a){X(e)&&J(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(ie(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,n)})}}(t))},onHomeChange:function(t,a){return e(function(e,t){return function(a){a(oe(e)),t(!0)}}(t,a))},onLogout:function(t){return e(ae(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(pe.a)(t,2),n=a[0],o=a[1];Object(r.useEffect)(function(){X(e.user)&&J(e.user._id)||(o(!0),e.getProfile(function(e,t){o(!1),!0!==e&&xe.fail("Failed to load Profile: "+t)}))},[]),Object(r.useEffect)(function(){_a(),xa(),Da()});var l=function(){return e.appUser.role===L},s=function(){return e.appUser.role===M},i=function(){return e.appUser.role===V},m=function(){return e.appUser.role===F},u=function(){return e.appUser.role===Y},d=function(){return e.appUser.role===K};return n?c.a.createElement(Ue,{visible:n,text:"Loading..."}):c.a.createElement(Oe,null,c.a.createElement(Ye,{appUser:e.appUser,user:e.user}),c.a.createElement(Oe,{className:"page-container"},c.a.createElement(Ve,{appUser:e.appUser,user:e.user,onHomeChange:e.onHomeChange,onLogout:e.onLogout}),c.a.createElement("main",{className:"main-content bgc-grey-100"},J(e.appUser.role)&&!l()||J(e.user.homes)?c.a.createElement(Me.c,null,c.a.createElement(Me.a,{path:"/",exact:!0,component:bt}),l()&&c.a.createElement(Me.a,{path:"/members",exact:!0,component:Tt}),l()&&c.a.createElement(Me.a,{path:"/new-member",exact:!0,component:Ot}),l()&&c.a.createElement(Me.a,{path:"/vehicles",exact:!0,component:Bt}),l()&&c.a.createElement(Me.a,{path:"/new-vehicle",exact:!0,component:jt}),l()&&c.a.createElement(Me.a,{path:"/servants",exact:!0,component:St}),l()&&c.a.createElement(Me.a,{path:"/new-servant",exact:!0,component:_t}),(l()||s()||i()||e.appUser.role===H||e.appUser.role===G)&&c.a.createElement(Me.a,{path:"/tickets",exact:!0,component:Dt}),l()&&c.a.createElement(Me.a,{path:"/new-ticket",exact:!0,component:Rt}),l()&&c.a.createElement(Me.a,{path:"/visitors",exact:!0,component:Lt}),(l()||s()||i()||m()||u()||d())&&c.a.createElement(Me.a,{path:"/outings",exact:!0,component:ra}),l()&&c.a.createElement(Me.a,{path:"/new-outing",exact:!0,component:ca}),(s()||i())&&c.a.createElement(Me.a,{path:"/ads",exact:!0,component:Kt}),(s()||i())&&c.a.createElement(Me.a,{path:"/new-ad",exact:!0,component:Wt}),(s()||i())&&c.a.createElement(Me.a,{path:"/notification",exact:!0,component:aa}),s()&&c.a.createElement(Me.a,{path:"/users",exact:!0,component:qt}),s()&&c.a.createElement(Me.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:Qt}),s()&&c.a.createElement(Me.a,{path:"/approve-users",exact:!0,component:$t}),s()&&c.a.createElement(Me.a,{path:"/homes",exact:!0,component:Zt}),s()&&c.a.createElement(Me.a,{path:"/view-home/:id",exact:!0,component:Oa}),s()&&c.a.createElement(Me.a,{path:"/edit-home/:id",exact:!0,component:ea}),s()&&c.a.createElement(Me.a,{path:"/blocks",exact:!0,component:ma}),s()&&c.a.createElement(Me.a,{path:"/edit-block/:id",exact:!0,component:ua}),(s()||i()&&e.user.client.config.hasPayment)&&c.a.createElement(Me.a,{path:"/payment",exact:!0,component:fa}),(s()||i()||m()||u()||d())&&c.a.createElement(Me.a,{path:"/all-visitors",exact:!0,component:ta}),(s()||i()||m()||u()||d())&&c.a.createElement(Me.a,{path:"/all-takeways",exact:!0,component:Ut}),c.a.createElement(Me.a,{path:"/notice",exact:!0,component:Aa}),c.a.createElement(Me.a,{path:"/my-profile",exact:!0,component:Ft}),e.user.role.indexOf(",")>0&&c.a.createElement(Me.a,{path:"/my-role",exact:!0,component:Vt}),c.a.createElement(Me.a,{path:"/my-documents",exact:!0,component:la}),c.a.createElement(Me.a,{path:"/change-password",exact:!0,component:Mt}),c.a.createElement(Me.a,{path:"/info",exact:!0,component:Ca}),c.a.createElement(Me.a,{component:Sa})):c.a.createElement(Oe,{id:"mainContent"},c.a.createElement(Ce,{className:"m-20"},"You are not authorized to view this content. Please contact administrator/manager."))),c.a.createElement(Ge,null)))}),Pa=Object(s.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(re(e))}}(t))}}})(function(e){return Object(r.useEffect)(function(){J(sessionStorage.getItem("auth_token"))&&e.setLogin(!0)},[]),e.appUser.isLoggedIn?c.a.createElement(de.a,null,c.a.createElement(Ra,null)):c.a.createElement(Le,null)}),La=a(81);a(158),a(156),function(){var e=document.createEvent("UIEvents");window.EVENT=e,e.initUIEvent("resize",!0,!1,window,0),window.addEventListener("load",function(){window.dispatchEvent(e)}),Ua("a").filter('[href^="http"], [href^="//"]').not('[href*="'.concat(window.location.host,'"]')).attr("rel","noopener noreferrer").attr("target","_blank"),document.addEventListener("click",function(){window.dispatchEvent(window.EVENT)})}(),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),l.a.render(c.a.createElement(function(){return Object(r.useEffect)(function(){!function(){try{var e=La.initializeApp({apiKey:"AIzaSyCrGumtbn2McvNXzZdhShhLaW0QsIFZxOk",authDomain:"nest-df0a7.firebaseapp.com",databaseURL:"https://nest-df0a7.firebaseio.com",projectId:"nest-df0a7",storageBucket:"nest-df0a7.appspot.com",messagingSenderId:"422026408390",appId:"1:422026408390:web:cf0e6a945e7f1ec0d602c7"}).messaging();e.usePublicVapidKey("BExnmgKfYLBd44lIqI5xRAD55I5Qhsaa7sI_wJ19zcIuq05y2Z1AtuaNBChU--UhjFxpA2XLR2lI02otUje4Rkk"),e.requestPermission().then(Object(U.a)(S.a.mark(function t(){var a;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:a=t.sent,localStorage.setItem("fcm_token",a);case 4:case"end":return t.stop()}},t)}))).catch(function(e){console.log("Unable to get permission to notify.",e)})}catch(t){console.log("FCM ERROR: ",t)}}()},[]),c.a.createElement(s.a,{store:A},c.a.createElement(Pa,null),c.a.createElement(i.ToastsContainer,{store:i.ToastsStore,position:i.ToastsContainerPosition.TOP_RIGHT}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(157)}},[[85,1,2]]]);
//# sourceMappingURL=main.6b7b4617.chunk.js.map