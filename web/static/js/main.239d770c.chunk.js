(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(19),l=a.n(o),s=a(5),i=a(20),m=a(25),u=a(74),d=a(2);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(n||(n={}));var p=function(e,t){return Object(d.a)({},e,{isLoggedIn:t})},f=function(e,t){return Object(d.a)({},e,{role:t})},E=function(e,t){return Object(d.a)({},e,{homeIndex:t})},b=function(e,t){return Object(d.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},h=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},g=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},v=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},y=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},w=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},O=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(d.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},B=function(e,t){return t},j=Object(m.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_LOGIN_STATUS:return p(e,t.payload);case n.SET_ROLE:return f(e,t.payload);case n.SET_HOME_INDEX:return E(e,t.payload);case n.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[]}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USER:return b(e,t.payload);case n.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""},config:{appType:"",hasOtherGender:!1,hasPayment:!1,ticketCategories:[],notificationTypes:[]}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_ADS:return h(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_POLLS:return N(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_OUTINGS:return g(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_DOCUMENTS:return v(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERS:return y(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_HOMES:return T(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_USERHOMES:return w(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_TICKETS:return O(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOAD_BLOCKS:return k(e,t.payload);case n.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_GATE_NO:return B(e,t.payload)}return e}}),C=Object(m.e)(j,Object(m.d)(Object(m.a)(u.a))),A=a(21),S=a.n(A),U=a(37),_=a(36),I="https://nestadmin.herokuapp.com/",x=I+"image/",D=I+"file/",P="DD/MMM/YYYY",L="DD/MMM/YYYY hh:mm A",R="USER",M="ADMIN",F="GATEKEEPER",V="MANAGER",H="A",Y="Q",G=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function K(e){return W(e)&&e.length>0}function W(e){return null!==e&&void 0!==e}function q(e){try{return W(e)?JSON.stringify(e):""}catch(t){return J(t,"JSON2String"),""}}function z(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}function J(e,t){console.log("Error:"+t+":"+e)}function X(e,t){13===(e.keyCode?e.keyCode:e.which)&&"function"===typeof t&&t()}var Z=function e(){var t=this;Object(_.a)(this,e),this.url="https://nestadmin.herokuapp.com/api/",this.get=function(e,a){t.fetch(e,"GET",a)},this.post=function(e,a,n){t.fetch(e,"POST",a,n)},this.delete=function(e,a,n){t.fetch(e,"DELETE",a,n)},this.patch=function(e,a,n){t.fetch(e,"PATCH",a,n)},this.put=function(e,a,n){t.fetch(e,"PUT",a,n)},this.upload=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r){var c,o,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return c=e.sent,e.next=5,t.getAS("client_id");case 5:return o=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,(s=new FormData).append("file",r.file,r.name),s.append("name",r.name),fetch(t.url+a,{method:"POST",headers:{Accept:"application/json","x-access-token":K(c)?"Bearer "+c:"","client-id":K(o)?""+o:"","user-id":K(l)?""+l:""},body:s}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){W(e)?W(e.data)?t.callback(n,e,"Some problem occurs. Please contact administrator."):t.callback(n,null,e.message):t.callback(n,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(n,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(U.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(U.a)(S.a.mark(function e(a,n,r,c){var o,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return o=e.sent,e.next=5,t.getAS("client_id");case 5:return l=e.sent,e.next=8,t.getAS("user_id");case 8:s=e.sent,fetch(t.url+a,{method:n,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":K(o)?"Bearer "+o:"","client-id":K(l)?""+l:"","user-id":K(s)?""+s:""},body:W(c)?q(c):null}).then(function(e){return e&&e.status&&401===e.status&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),window.location.reload()),e.json()}).then(function(e){W(e)?W(e.data)?t.callback(r,e,"Some problem occurs. Please contact administrator."):t.callback(r,null,e.message):t.callback(r,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(r,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.callback=function(e,t,a){W(e)&&"function"==typeof e&&e(t,a)}},Q=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(ee(!1)),t(ae(-1)),t(le()),e(!0)}catch(a){e(!1)}}},$=function(e){return{type:n.SET_GATE_NO,payload:e}},ee=function(e){return{type:n.SET_LOGIN_STATUS,payload:e}},te=function(e){return{type:n.SET_ROLE,payload:e}},ae=function(e){return{type:n.SET_HOME_INDEX,payload:e}},ne=function(e){return{type:n.LOAD_USER,payload:e}},re=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ce=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},oe=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},le=function(){return{type:n.RESET}},se=a(9),ie=a(1),me=a(28),ue=a(29);function de(){var e=Object(me.a)(["\n"]);return de=function(){return e},e}function pe(){var e=Object(me.a)(["\n"]);return pe=function(){return e},e}function fe(){var e=Object(me.a)(["\n"]);return fe=function(){return e},e}function Ee(){var e=Object(me.a)(["\n"]);return Ee=function(){return e},e}function be(){var e=Object(me.a)(["\n"]);return be=function(){return e},e}function he(){var e=Object(me.a)(["\noverflow: auto;\n"]);return he=function(){return e},e}function Ne(){var e=Object(me.a)(["\n"]);return Ne=function(){return e},e}var ge=ue.a.div(Ne()),ve=ue.a.div(he()),ye=ue.a.img(be()),Te=ue.a.input(Ee()),we=ue.a.textarea(fe()),Oe=ue.a.select(pe()),ke=ue.a.label(de()),Be=function(e){var t=e.title,a=e.onPress,n=e.type,c=e.className,o=e.style;return r.createElement("input",{type:"button",className:"btn "+(n||"btn-primary")+(c?" "+c:""),value:t,onClick:function(){return a()},style:Object(d.a)({},o)})},je=function(e){return e.visible?r.createElement(ge,{id:"loader"},r.createElement(ge,{className:"bg"}),r.createElement(ge,{className:"spinner"})):null},Ce=function e(){Object(_.a)(this,e)};Ce.logo=x+"logo.png",Ce.workInProgress=x+"work-in-progress.png",Ce.username=x+"username.png",Ce.password=x+"password.png",Ce.mobile=x+"mobile.png",Ce.email=x+"email.png",Ce.loading=x+"loading.gif",Ce.avatarMale=x+"avatar-male.png",Ce.avatarFemale=x+"avatar-female.gif";var Ae=function e(){Object(_.a)(this,e)};Ae.success=function(e){i.ToastsStore.success(e)},Ae.fail=function(e){i.ToastsStore.error(e)},Ae.warn=function(e){i.ToastsStore.warning(e)},Ae.info=function(e){i.ToastsStore.info(e)},Ae.show=function(e,t,a){i.ToastsStore.info(e)};var Se=Ae,Ue=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,o=e.className,l=z();return r.createElement("span",{className:"mR-10 "+(o||"")},r.createElement("input",{type:"radio",id:l,key:c,checked:t,onClick:n||function(){}}),K(a)&&r.createElement("label",{htmlFor:l,className:"mL-5 va-m"},a))},_e=function(e){var t=Object(r.useState)(""),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(0),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(ie.a)(w,2),k=O[0],B=O[1],j=Object(r.useState)(""),C=Object(ie.a)(j,2),A=C[0],S=C[1],U=Object(r.useState)(""),_=Object(ie.a)(U,2),I=_[0],x=_[1],D=Object(r.useState)("TENANT"),P=Object(ie.a)(D,2),L=P[0],R=P[1],M=Object(r.useState)("USER"),F=Object(ie.a)(M,2),V=F[0],H=F[1];return c.a.createElement(ge,null,c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",className:"form-control",placeholder:"App Code",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",className:"form-control",placeholder:"User Id / Number",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",className:"form-control",placeholder:"Name",value:h,onChange:function(e){return N(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"number",className:"form-control",placeholder:"Age",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"M"===k,text:"Male",onPress:function(){return B("M")}}),c.a.createElement(Ue,{isActive:"F"===k,text:"Female",onPress:function(){return B("F")}}),c.a.createElement(Ue,{isActive:"O"===k,text:"Other",onPress:function(){return B("O")}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",className:"form-control",placeholder:"Mobile Number",value:A,onChange:function(e){return S(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",className:"form-control",placeholder:"Email ID",value:I,onChange:function(e){return x(e.target.value)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SUBMIT",onPress:function(){if(K(i)&&K(p)&&K(h)&&y>0&&K(k)&&K(A)&&K(I)){var t={_id:n,number:p,name:h,age:y,gender:k,mobileNo:A,emailId:I?I.toLowerCase():"",type:L,role:V};e.onSignUp(t,i,function(e){!0===e&&(o(""),m(""),f(""),N(""),T(0),B(""),S(""),x(""),R("TENANT"),H("USER"))})}else Se.warn("Please fill all the required fields before Submit.")}})))},Ie={txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11}},xe=Object(s.b)(function(e,t){return{}},function(e){return{onLogin:function(t,a,n){return e(function(e,t,a){return function(n){var r=localStorage.getItem("fcm_token");(new Z).post("account/login",function(e,t){if(W(e)&&W(e.data)&&K(e.data.token)&&K(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(r){}n(ee(!0)),a(!0,"")}else a(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:r,os:"web",osVersion:"web"})}}(t,a,n))},onForgetPassword:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).post("account/resetpassword",function(e,t){W(e)&&W(e.data)&&W(e.data.data)?!0===e.data.data?a(!0,""):a(!1,e.data.message):a(!1,t)},{mobileNo:e,emailId:t})}}(t,a,n))},onSignUp:function(t,a,n){return e(function(e,t,a){return function(n){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new Z).post("account/signup",function(e,t){W(e)&&W(e.data)&&e.data.length>0?a(!0,""):a(!1,t)},e)}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(!1),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(!1),O=Object(ie.a)(w,2),k=O[0],B=O[1],j=Object(r.useState)(""),C=Object(ie.a)(j,2),A=C[0],S=C[1],U=Object(r.useState)(""),_=Object(ie.a)(U,2),I=_[0],x=_[1],D=function(){K(i)&&K(p)?(N(""),o(!0),e.onLogin(i,p,function(e,t){o(!1),N(!0===e?"":t)})):Se.warn("Enter Mobile Number and Password to continue.")},P=function(){K(A)&&K(I)?(N(""),o(!0),e.onForgetPassword(A,I.toLowerCase(),function(e,t){o(!1),!0===e?(Se.success("Password reset success. Login with New password sent to your Email. Change password after login."),N(""),T(!1),B(!1),m(""),f("")):N(t)})):Se.warn("Enter Mobile Number and Email to continue.")};return c.a.createElement(ge,{className:"container bgc-white",style:{maxWidth:"270px"}},c.a.createElement(ge,{className:"ta-c ai-c jc-c mB-30 mT-5"},c.a.createElement(ye,{src:Ce.logo,style:{width:150,height:150}})),y&&c.a.createElement(ge,{className:"ai-c jc-c"},c.a.createElement(ge,{className:"col-12 mB-25"},c.a.createElement(ye,{className:"pos-a",src:Ce.mobile,style:Ie.txtIcon}),c.a.createElement(Te,{type:"text",className:"form-control pL-25",placeholder:"Registered Mobile Number",value:A,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){X(e,P)}})),c.a.createElement(ge,{className:"col-12 mB-25"},c.a.createElement(ye,{className:"pos-a",src:Ce.email,style:Ie.txtIcon}),c.a.createElement(Te,{type:"text",className:"form-control pL-25",placeholder:"Registered Email",value:I,onChange:function(e){return x(e.target.value)},onKeyPress:function(e){X(e,P)}})),c.a.createElement(ge,{className:"ta-c"},c.a.createElement(Be,{title:!1===n?"Reset my password":"Loading...",onPress:P}),c.a.createElement(ke,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},h)),c.a.createElement(ge,{className:"mT-5 ta-c"},c.a.createElement(ke,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),B(!1),S(""),x(""),N("")}},"Go back to Login."))),k&&c.a.createElement(c.a.Fragment,null,c.a.createElement(_e,{onSignUp:function(t,a,n){N(""),o(!0),e.onSignUp(t,a,function(e,t){o(!1),!0===e?(T(!1),B(!1),N(""),Se.success("Sign Up success. Please wait till Manager approves then you can access your account."),n(!0)):(Se.fail(K(t)?t:"Failed to Sign Up."),n(!1))})}}),c.a.createElement(ge,{className:"mT-15 ta-c"},c.a.createElement(ke,{className:"cur-p mB-5 ta-c c-blue-500",onClick:function(){T(!1),B(!1),S(""),x(""),N("")}},"Go back to Login."))),!y&&!k&&c.a.createElement(ge,{className:"ai-c jc-c"},c.a.createElement(ge,{className:"col-12 mB-25"},c.a.createElement(ye,{className:"pos-a",src:Ce.username,style:Ie.txtIcon}),c.a.createElement(Te,{type:"text",className:"form-control pL-25",placeholder:"Mobile Number",value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){X(e,D)}})),c.a.createElement(ge,{className:"col-12 mB-15"},c.a.createElement(ye,{className:"pos-a",src:Ce.password,style:Ie.txtIcon}),c.a.createElement(Te,{type:"password",className:"form-control pL-25",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){X(e,D)}})),c.a.createElement(ge,{className:"ta-c"},c.a.createElement(ke,{className:"col-12 cur-p mB-15 ta-r c-blue-500",onClick:function(){T(!0),B(!1),S(""),x(""),N("")}},"Forgot Password?"),c.a.createElement(Be,{title:!1===n?"LOGIN":"Loading...",onPress:D}),c.a.createElement(ke,{className:"col-12 ta-c mT-5"+(n?"":" c-red-600")},h)),c.a.createElement(ge,{className:"col-12 mT-5 ai-c jc-c"},c.a.createElement(ke,{className:"col-12 mB-5 ta-c"},"Dont have an account?"),c.a.createElement(ge,{className:"col ai-c jc-c cur-p bd p-0",style:{borderRadius:"15px"}},c.a.createElement(ke,{className:"ta-c m-0 p-15 cur-p",onClick:function(){T(!1),B(!0),S(""),x(""),N("")}},"CREATE / JOIN YOUR FLAT")))),c.a.createElement(je,{visible:n,text:""}))}),De=a(26),Pe=a(6),Le=function(e){return r.createElement("div",{className:"header navbar"},r.createElement("div",{className:"header-container"},r.createElement("ul",{className:"nav-left"},r.createElement("li",null,r.createElement("a",{id:"sidebar-toggle",className:"sidebar-toggle",href:"javascript:void(0);"},r.createElement("i",{className:"ti-menu"}))),r.createElement("li",{className:"search-box"},r.createElement("a",{className:"search-toggle no-pdd-right",href:"javascript:void(0);"},r.createElement("i",{className:"search-icon ti-search pdd-right-10"}),r.createElement("i",{className:"search-icon-close ti-close pdd-right-10"}))),r.createElement("li",{className:"search-input"},r.createElement("input",{className:"form-control",type:"text",placeholder:"Search..."}))),r.createElement("ul",{className:"nav-right"},e.appUser.role===R&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.homes.length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"fa fa-home"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"fa fa-home pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"House(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.homes.map(function(t,a){return r.createElement("li",{key:"h"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed",onClick:function(){return t=a,void e.onHomeChange(t,function(e){});var t}},r.createElement("span",null,r.createElement("span",{className:e.appUser.homeIndex===a?"fw-500":"c-grey-600"},""+t.number)))))}))))),e.user.role.indexOf(",")>0&&r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},e.user.role.split(",").length),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-user"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-user pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Role(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},e.user.role.split(",").map(function(t,a){return r.createElement("li",{key:"r"+a},r.createElement("a",{href:"javascript:void(0);",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"tt-c "+(e.appUser.role===t?"fw-500":"c-grey-600")},""+t.toLowerCase())))))}))),r.createElement("li",{className:"pX-20 pY-15 ta-c bdT"},r.createElement("span",null,r.createElement(se.b,{className:"c-grey-600 cH-blue fsz-sm td-n",to:"my-role"},"Change Role ",r.createElement("i",{className:"ti-angle-right fsz-xs mL-10"})))))),r.createElement("li",{className:"notifications dropdown"},r.createElement("span",{className:"counter bgc-red"},"0"),r.createElement("a",{href:"",className:"dropdown-toggle no-after","data-toggle":"dropdown"},r.createElement("i",{className:"ti-bell"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("li",{className:"pX-20 pY-15 bdB"},r.createElement("i",{className:"ti-bell pR-10"}),r.createElement("span",{className:"fsz-sm fw-600 c-grey-900"},"Notification(s)")),r.createElement("li",null,r.createElement("ul",{className:"ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm"},r.createElement("li",null,r.createElement("a",{href:"",className:"peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100"},r.createElement("div",{className:"peer peer-greed"},r.createElement("span",null,r.createElement("span",{className:"c-grey-600"},"No notification found."))))))))),r.createElement("li",{className:"dropdown"},r.createElement("a",{href:"",className:"dropdown-toggle no-after peers fxw-nw ai-c lh-1","data-toggle":"dropdown"},r.createElement("div",{className:"peer mR-10"},r.createElement(ye,{className:"w-2r bdrs-50p",src:K(e.user.image)?e.user.image:"F"===e.user.gender.toLocaleUpperCase()?Ce.avatarFemale:Ce.avatarMale,alt:""})),r.createElement("div",{className:"peer"},r.createElement("span",{className:"fsz-sm c-grey-900"},e.user.name))),r.createElement("ul",{className:"dropdown-menu fsz-sm"},r.createElement("li",null,r.createElement(se.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-profile"},r.createElement("i",{className:"fa fa-user mR-10"}),r.createElement("span",null,"Profile"))),r.createElement("li",null,r.createElement(se.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-documents"},r.createElement("i",{className:"fa fa-file-text mR-10"}),r.createElement("span",null,"Documents"))),e.user.role.indexOf(",")>0&&r.createElement("li",null,r.createElement(se.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"my-role"},r.createElement("i",{className:"ti-user mR-10"}),r.createElement("span",null,"Role"))),r.createElement("li",null,r.createElement(se.b,{className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",to:"change-password"},r.createElement("i",{className:"fa fa-key mR-10"}),r.createElement("span",null,"Password"))),r.createElement("li",{role:"separator",className:"divider"}),r.createElement("li",null,r.createElement("a",{href:"#",className:"d-b td-n pY-5 bgcH-grey-100 c-grey-700",onClick:function(){Object(Pe.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){e.onLogout(function(e){!0===e?Se.success("Logout Success!"):Se.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})}},r.createElement("i",{className:"ti-power-off mR-10"}),r.createElement("span",null,"Logout"))))))))},Re=[{title:"Home",icon:"c-blue-500 ti-home",path:"/"},{title:"Blocks",icon:"c-brown-500 fa fa-building",path:"/blocks",roles:[M]},{title:"Houses",icon:"c-blue-700 fa fa-home",path:"/homes",roles:[M]},{title:"Users",icon:"c-deep-purple-500 fa fa-users",path:"/users",roles:[M]},{title:"Members",icon:"c-brown-500 fa fa-users",path:"/members",roles:[R]},{title:"Vehicles",icon:"c-indigo-500 fa fa-car",path:"/vehicles",roles:[R]},{title:"Servants",icon:"c-deep-purple-500 fa fa-female",path:"/servants",roles:[R]},{title:"Tickets",icon:"c-orange-500 ti-headphone-alt",path:"/tickets",roles:[R,M,V]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/visitors",roles:[R]},{title:"Visitors",icon:"c-pink-500 fa fa-id-card-o",path:"/all-visitors",roles:[M,V,F]},{title:"Door Locks",icon:"c-indigo-800 ti-lock",path:"/outings"},{title:"Notification",icon:"c-red-500 ti-bell",path:"/notification",roles:[M,V]},{title:"Ads",icon:"c-teal-500 fa fa-bullhorn",path:"/ads",roles:[M,V]},{title:"Payment",icon:"c-indigo-500 fa fa-credit-card",path:"/payment",hasPayment:!0,roles:[M,V]},{title:"Notice",icon:"c-blue-a400 ti-notepad",path:"/notice"},{title:"Settings",icon:"c-deep-orange-500 ti-settings",child:[{title:"My Profile",path:"/my-profile"},{title:"My Role",path:"/my-role",hasMRole:!0},{title:"My Documents",path:"/my-documents"},{title:"Change Password",path:"/change-password"}]},{title:"Info",icon:"c-deep-purple-a700 ti-info-alt",path:"/info"}],Me=function(e){return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar-inner"},c.a.createElement("div",{className:"sidebar-logo"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement(se.b,{className:"sidebar-link td-n",to:"/"},c.a.createElement("div",{className:"peers ai-c fxw-nw"},c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"logo"},c.a.createElement(ye,{src:Ce.logo,className:"",style:{width:70,height:65,padding:"13px 15px"},alt:""}))),c.a.createElement("div",{className:"peer peer-greed"},c.a.createElement("h5",{className:"lh-1 mB-0 logo-text"},"Nest"))))),c.a.createElement("div",{className:"peer"},c.a.createElement("div",{className:"mobile-toggle sidebar-toggle"},c.a.createElement("a",{href:"",className:"td-n"},c.a.createElement("i",{className:"ti-arrow-circle-left"})))))),Re&&Re.length>0&&c.a.createElement("ul",{className:"sidebar-menu scrollable pos-r"},Re.map(function(t,a){if((K(t.path)||K(t.child))&&(!K(t.roles)||t.roles.indexOf(e.appUser.role)>=0)&&(!t.hasMRole||e.user.role.indexOf(",")>0)&&(!t.hasPayment||e.user.client.config.hasPayment))return c.a.createElement("li",{key:"nav-item-"+a,className:"nav-item"+(K(t.child)?" dropdown":"")+(0===a?" mT-30":"")},c.a.createElement(se.b,{className:K(t.child)?"dropdown-toggle":"sidebar-link",to:K(t.path)?t.path:"#"},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:t.icon})),c.a.createElement("span",{className:"title"},t.title),K(t.child)&&c.a.createElement("span",{className:"arrow"},c.a.createElement("i",{className:"ti-angle-right"}))),K(t.child)&&c.a.createElement("ul",{className:"dropdown-menu"},t.child.map(function(e,t){return c.a.createElement("li",{key:"sub-nav-item-"+t},c.a.createElement(se.b,{className:"sidebar-link",to:K(e.path)?e.path:"#"},e.title))})))}))))},Fe=function(){return r.createElement("footer",{className:"bdT ta-c p-30 lh-0 fsz-sm c-grey-600"},r.createElement("span",null,"Copyright \xa9 Nest. All rights reserved."))},Ve=function(e,t,a,n){return function(e){(new Z).get("payments"+(K(t)?"/"+t:""),function(e,t){W(e)&&W(e.data)?a(e.data):n(K(t)?t:"Failed to load Payments.")})}},He=function(e){return{type:n.LOAD_USER,payload:e}},Ye=function(e,t,a,n,r){return function(e){(new Z).get("visitors"+(K(t)?"/"+t:"")+"/"+a,function(e,t){W(e)&&W(e.data)?n(e.data):r(e&&K(e.message)?e.message:"Failed to load Visitors.")})}},Ge=function(e,t,a,n,r,c){return function(a){t&&K(t._id)?(new Z).put("visitor/"+t._id,function(e,t){W(e)&&W(e.data)&&e.data._id.length>0?r(e.data):c(e&&K(e.message)?e.message:"Failed to load Visitors.")},t):(new Z).post("visitor/"+e,function(e,t){W(e)&&W(e.data)&&e.data._id.length>0?r(e.data):c(e&&K(e.message)?e.message:"Failed to load Visitors.")},t)}},Ke=function(e,t,a){return function(n){(new Z).get("visitor/search/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Visitors.")})}},We=function(e,t){return function(a){(new Z).upload("upload",function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0,""):t(!1,a)},e)}},qe=function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=(a[1],Object(r.useState)({paymentId:"",amount:0,transactionRef:""})),l=Object(ie.a)(o,2),s=(l[0],l[1]);return c.a.createElement(ge,null,c.a.createElement(ge,{className:"m-5"},c.a.createElement(ke,{className:"mT-2 fw-600"},"Total Due Amount: Rs "+function(){var t=0;return e.home.payments.map(function(e,a){var n=0;return e.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),t+=e.amount-n,1}),t}())),c.a.createElement(ve,null,K(e.home.payments)?e.home.payments.filter(function(e,t){var a=0;return K(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<e.amount}).map(function(t,a){var n=0;return K(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<t.amount?c.a.createElement(ge,{key:"my-due"+a,className:"m-7"+(0===a?"":" pL-15 bdL")},c.a.createElement(ge,{className:"mT-4"},c.a.createElement(ke,null,"Due for: "+G.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(ge,{className:"mT-4 mB-3"},c.a.createElement(ke,null,"Rs "+(t.amount-n))),c.a.createElement(ge,null,c.a.createElement(ke,null,"Due Date: 15/"+G.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),c.a.createElement(ge,{className:"mT-4"},c.a.createElement(Be,{title:"PAY NOW",onPress:function(){return function(t,a){if(t&&t.length>0&&a&&a>0)if(K(e.user.client.upi.id)&&K(e.user.client.upi.name)){var n=z();s({paymentId:t,amount:a,transactionRef:n}),Se.warn("Payment is in progress. Please contact administrator.")}else Se.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else Se.warn("Amount should be more then 0 to proceed payment.")}(t._id,t.amount-n)}}))):null}):c.a.createElement(ke,{className:"p-20"},"No due found.")),c.a.createElement(je,{visible:n}))},ze=a(34),Je=a.n(ze);function Xe(e,t){try{return W(e)?("string"!=typeof e&&e.toString(),K(t)||(t=P),Je()(e).format(t)):""}catch(a){return J(a,"convert.toDateString"),""}}function Ze(e,t){try{return Xe(e,L)}catch(a){return J(a,"convert.toDateTimeString"),""}}var Qe=function(e){return r.createElement(ve,null,K(e.home.payments.filter(function(e,t){return K(e.transactions)&&K(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?e.home.payments.filter(function(e,t){return K(e.transactions)&&K(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var a=0,n=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount,0===t&&(n=e.createdAt),1}),r.createElement(ge,{key:"my-his"+t,className:"m-7"+(0===t?"":" pL-15 bdL")},r.createElement(ge,{className:"mT-4"},r.createElement(ke,null,"Paid for: "+G.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),r.createElement(ge,{className:"mT-4 mB-3"},r.createElement(ke,null,"Rs "+a)),r.createElement(ge,null,r.createElement(ke,null,"Paid On: "+Xe(n))))}):r.createElement(ke,null,"No history found!"))},$e=function(e){var t=e.data,a=e.message;return K(t)?t.map(function(e,t){return r.createElement(ge,{className:"bdB pB-3"},r.createElement(ge,null,r.createElement(ke,{key:t,className:"fw-600"},e.title)),r.createElement(ge,null,r.createElement(ke,{key:t},e.description)))}):K(a)?r.createElement(ke,null,a):null},et=function(e){return r.createElement(ge,{className:"col-md-3"},r.createElement(ge,{className:"layers bd bgc-white p-20 cur-p",onClick:e.onClick},r.createElement(ge,{className:"layer w-100 mB-10"},r.createElement("h6",{className:"lh-1"},e.title)),r.createElement(ge,{className:"layer w-100"},r.createElement(ge,{className:"peers ai-sb fxw-nw"},r.createElement(ge,{className:"peer peer-greed"},r.createElement("span",{className:"icon-holder"},r.createElement("i",{className:e.icon+" "+e.color+" fa-2x"}))),r.createElement(ge,{className:"peer"},e.hasCount?r.createElement("span",{className:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 "+e.color+" "+e.bgColor},e.count):r.createElement("span",{className:"d-ib lh-0 va-m "+e.color},"View all"))))))},tt=function(e){var t=Object(r.useState)(1),a=Object(ie.a)(t,2),n=a[0],o=a[1];return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item w-100"},c.a.createElement(ge,{className:"row gap-20"},c.a.createElement(et,{title:"Member(s)",icon:"fa fa-users",color:"c-brown-500",bgColor:"bgc-brown-50",hasCount:!0,count:e.home.members?e.home.members.length+"":"0",onClick:function(){return e.history.push("members")}}),c.a.createElement(et,{title:"Vehicle(s)",icon:"fa fa-car",color:"c-indigo-500",bgColor:"bgc-indigo-50",hasCount:!0,count:e.home.vehicles?e.home.vehicles.length+"":"0",onClick:function(){return e.history.push("vehicles")}}),c.a.createElement(et,{title:"Servant(s)",icon:"fa fa-female",color:"c-deep-purple-500",onClick:function(){return e.history.push("servants")}}),c.a.createElement(et,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-500",onClick:function(){return e.history.push("tickets")}})),c.a.createElement(ge,{className:"row gap-20"},c.a.createElement(et,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-500",onClick:function(){return e.history.push("visitors")}}),c.a.createElement(et,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-800",onClick:function(){return e.history.push("outings")}}))),e.user.client.config.hasPayment&&c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(ge,{className:"tab-bar bgc-white p-20"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"MY DUES"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"ADVANCE"),c.a.createElement("span",{className:"tab"+(3===n?" active":""),onClick:function(){return o(3)}},"HISTORY")),c.a.createElement(ge,{className:"bgc-white p-20"},1===n?c.a.createElement(qe,{history:e.history,user:e.user,home:e.home,onPaymentUpload:e.onPaymentUpload,onPaymentUpdate:e.onPaymentUpdate}):2===n?c.a.createElement($e,{data:[],message:"No advance found!"}):3===n?c.a.createElement(Qe,{history:e.history,home:e.home}):4===n?c.a.createElement($e,{data:[],message:"Work in progress"}):[]))))},at=function(e){return r.createElement(ge,{id:"mainContent"},r.createElement(ge,{className:"row gap-20 masonry pos-r"},r.createElement(ge,{className:"masonry-item w-100"},r.createElement(ge,{className:"row gap-20"},r.createElement(et,{title:"Ticket(s)",icon:"ti-headphone-alt",color:"c-orange-500",onClick:function(){return e.history.push("tickets")}}),r.createElement(et,{title:"Visitor(s)",icon:"fa fa-id-card-o",color:"c-pink-500",onClick:function(){return e.history.push("all-visitors")}}),r.createElement(et,{title:"ads",icon:"fa fa-bullhorn",color:"c-teal-500",onClick:function(){return e.history.push("ads")}}),r.createElement(et,{title:"Notification",icon:"ti-bell",color:"c-red-500",onClick:function(){return e.history.push("notification")}})),r.createElement(ge,{className:"row gap-20"},r.createElement(et,{title:"Door Lock(s)",icon:"ti-lock",color:"c-indigo-800",onClick:function(){return e.history.push("outings")}}),e.appUser.role===M&&r.createElement(r.Fragment,null,r.createElement(et,{title:"Block(s)",icon:"fa fa-building",color:"c-brown-500",bgColor:"bgc-brown-50",hasCount:!0,count:e.blocks.isUpToDate?e.blocks.isError?"0":e.blocks.data.length+"":"Loading",onClick:function(){return e.history.push("blocks")}}),r.createElement(et,{title:"House(s)",icon:"fa fa-home",color:"c-blue-700",bgColor:"bgc-blue-50",hasCount:!0,count:e.homes.isUpToDate?e.homes.isError?"0":e.homes.data.length+"":"Loading",onClick:function(){return e.history.push("homes")}}),r.createElement(et,{title:"User(s)",icon:"fa fa-users",color:"c-deep-purple-500",bgColor:"bgc-deep-purple-50",hasCount:!0,count:e.users.isUpToDate?e.users.isError?"0":e.users.data.length+"":"Loading",onClick:function(){return e.history.push("users")}})),e.appUser.role!==M&&e.user.client.config.hasPayment&&r.createElement(et,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-500",onClick:function(){return e.history.push("payment")}})),e.appUser.role===M&&e.user.client.config.hasPayment&&r.createElement(ge,{className:"row gap-20"},r.createElement(et,{title:"Payment",icon:"fa fa-credit-card",color:"c-indigo-500",onClick:function(){return e.history.push("payment")}})))))},nt=a(13),rt=a(16),ct=a.n(rt),ot=a(79),lt=a.n(ot),st=function(e){var t=e.isActive,a=e.text,n=e.onPress,c=e.key,o=e.className,l=z();return r.createElement("span",{className:"mR-10 "+(o||"")},r.createElement("input",{type:"checkbox",id:l,key:c||l,checked:t,className:"va-m",onClick:n||function(){}}),r.createElement("label",{htmlFor:l,className:"mL-5 va-m mB-0"},a))},it=function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=K(p)?p.toLowerCase():p,b=K(E)&&K(e.data)?e.data.filter(function(e,t){return e.homeNumber.toLowerCase().indexOf(E)>=0||e.passCode.toLowerCase().indexOf(E)>=0||e.name.toLowerCase().indexOf(E)>=0}):e.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ge,{className:"bdB mT-5"},c.a.createElement(ke,null,"No of "+(e.isActive?"Active":"")+" Visitors: "+e.data.length),!e.isSearch&&e.appUser.role!==F&&c.a.createElement(st,{isActive:e.isActive,text:"Only Active Visitors",onPress:e.onActiveChange,className:"fl-r"})),K(e.data)&&c.a.createElement(ge,{className:"mT-10 mB-5"},c.a.createElement(Te,{type:"text",placeholder:"Enter passcode to search",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"p-10 mB-10"},K(b)?b.map(function(t,a){return c.a.createElement(ge,{key:a,className:"card m-1 d-ib"},K(t.image)&&c.a.createElement(ge,{className:"ta-c mB-5"},c.a.createElement(ye,{src:D+t.image,className:"cur-p m-0",style:{height:"25vh",borderRadius:"50%"},onClick:function(){o(!0),m(t.image)}})),c.a.createElement(ge,{className:"container"},K(t.passCode)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.passCode)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.name+" ["+t.type+"]")),(t.age>0||K(t.gender))&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,(t.age>0?t.age:"")+(t.age>0&&K(t.gender)?", ":"")+(K(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},"To ",c.a.createElement(ke,{className:"fw-600"},t.homeNumber)," on ",c.a.createElement(ke,{className:"fw-600"},Ze(t.createdAt))),!t.isEntered&&!t.isExit&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.emailId)),t.personCount>0&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.personCount+" Person"+(t.personCount>1?"s":"")+("WALK"===t.vehicleType?" by WALK":" in "+t.vehicleType+(K(t.vehicleNo)?" "+t.vehicleNo:"")))),!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"c-blue-500"},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:t.isApproved?"c-green-600":"c-red-600"},t.isApproved?"APPROVED":"REJECTED"),c.a.createElement(ge,null,"By "+t.approvedBy),c.a.createElement(ge,null,"On "+Ze(t.approvedAt))),t.isEntered&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),c.a.createElement(ge,null,"On "+Ze(t.enteredAt))),t.isApproved&&!t.isEntered&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"c-red-600"},"NOT ENTERED")),!t.isRejected&&t.isExit&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),c.a.createElement(ge,null,"On "+Ze(t.exitAt))),t.isEntered&&!t.isExit&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"c-red-600"},"STAYING IN")),!t.isEntered&&t.passCode&&t.arriveAt&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600 c-red-600"},"Expected Arrival "+Ze(t.arriveAt))),!e.isSearch&&e.appUser.role===F&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2 ta-c"},!t.isEntered&&!t.isRejected&&(!t.arriveAt||new Date(t.arriveAt).getDate()===Je()().toDate().getDate())&&c.a.createElement(Be,{title:"Enter",onPress:function(){e.onEnter&&e.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&c.a.createElement(Be,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.onExit&&e.onExit(t._id)}})),!e.isSearch&&e.appUser.role===R&&!t.isApproved&&!t.isRejected&&!t.isEntered&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Be,{title:"Approve",className:"mR-10",onPress:function(){e.onApprove&&e.onApprove(t._id)}}),c.a.createElement(Be,{title:"Reject",onPress:function(){e.onReject&&e.onReject(t._id)}})),!e.isSearch&&e.appUser.role===R&&K(t.passCode)&&!t.isEntered&&!t.isRejected&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Be,{title:"Remove",onPress:function(){e.onRemove&&e.onRemove(t._id)}})),e.isSearch&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2 ta-c"},c.a.createElement(Be,{title:"Select",onPress:function(){e.onSelect&&e.onSelect(t)}}))))}):c.a.createElement(ke,{className:"p-20"},"No visitor found.")),c.a.createElement(nt.a,{open:n,onClose:function(){o(!1)}},c.a.createElement(ge,{className:"ta-c"},c.a.createElement(ye,{src:D+i,style:{height:"50%",width:"50%"}}))))},mt=function(e){var t=Object(r.useState)(""),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""}),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!1),p=Object(ie.a)(u,2),f=p[0],E=p[1],b=Object(r.useState)(""),h=Object(ie.a)(b,2),N=h[0],g=h[1],v=Object(r.useState)([]),y=Object(ie.a)(v,2),T=y[0],w=y[1],O=Object(r.useState)(!1),k=Object(ie.a)(O,2),B=k[0],j=k[1];Object(r.useEffect)(function(){e.appUser.role===R&&o(e.user.homes[e.appUser.homeIndex]._id)},[]);var C=function(){o(e.appUser.role===R?n:""),m(Object(d.a)({},i,{id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",arriveAt:new Date,arriveAtTime:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:""})),E(!1),g(""),w([]),j(!1)},A=function(){i.mobileNo.length>2&&(e.onToggleLoading(!0),e.onSearch(i.mobileNo,function(t){e.onToggleLoading(!1),j(!0),w(t)},function(t){e.onToggleLoading(!1),Se.fail(t),j(!1),w([])}))};return c.a.createElement(ge,null,e.appUser.role===F&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Enter House Number",className:"form-control",value:N,onChange:function(e){E(!0),g(e.target.value)}})),e.appUser.role===F&&f&&K(N)&&e.homes&&e.homes.data.length>0&&c.a.createElement(ve,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(N.toLowerCase())>=0}).map(function(e,t){return c.a.createElement(ke,{className:"cur-p m-3 p-5 bgc-blue-50",key:"ho"+t,onClick:function(){g(e.number),o(e._id),E(!1)}},e.number)})),e.appUser.role===F&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"VISITOR"===i.type,text:"Visitor",onPress:function(){return m(Object(d.a)({},i,{type:"VISITOR"}))}}),c.a.createElement(Ue,{isActive:"DELIVERY"===i.type,text:"Delivery",onPress:function(){return m(Object(d.a)({},i,{type:"DELIVERY"}))}}),c.a.createElement(Ue,{isActive:"SERVICE"===i.type,text:"Service",onPress:function(){return m(Object(d.a)({},i,{type:"SERVICE"}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))},onKeyPress:function(e){X(e,A)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:A},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),e.appUser.role===R&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,null,"Arrival At \xa0"),c.a.createElement(ct.a,{minDate:Je()().toDate(),maxDate:Je()().add(2,"d").toDate(),onChange:function(e){m(Object(d.a)({},i,{arriveAt:e}))},value:i.arriveAt}),c.a.createElement(ke,null,"\xa0"),c.a.createElement(lt.a,{value:i.arriveAtTime,onChange:function(e){m(Object(d.a)({},i,{arriveAtTime:e}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"number",placeholder:"Age",className:"form-control w-a d-ib mR-10",maxLength:3,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(ge,{className:"d-ib w-a"},c.a.createElement(Ue,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(Ue,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}}))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"number",placeholder:"People Count",className:"form-control w-a d-ib mR-10",value:i.personCount>0?i.personCount+"":"",onChange:function(e){return m(Object(d.a)({},i,{personCount:+e.target.value.replace(/[^0-9]/g,"")}))}}),c.a.createElement(Oe,{className:"form-control w-a d-ib mR-10",value:i.vehicleType,onChange:function(e){return m(Object(d.a)({},i,{vehicleType:e.target.value}))}},c.a.createElement("option",{value:"WALK"},"WALK"),c.a.createElement("option",{value:"CYCLE"},"CYCLE"),c.a.createElement("option",{value:"BIKE"},"BIKE"),c.a.createElement("option",{value:"CAR"},"CAR"),c.a.createElement("option",{value:"VAN"},"VAN"),c.a.createElement("option",{value:"JEEP"},"JEEP"),c.a.createElement("option",{value:"TEMPO"},"TEMPO"),c.a.createElement("option",{value:"BUS"},"BUS"),c.a.createElement("option",{value:"TRUCK"},"TRUCK")),c.a.createElement(Te,{type:"text",placeholder:"Vehicle No",className:"form-control w-a d-ib",value:i.vehicleNo,onChange:function(e){return m(Object(d.a)({},i,{vehicleNo:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=z();r+="."+n[n.length-1],m(Object(d.a)({},i,{fileName:r}));var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){e||Se.fail(t||"Failed to upload file.")})}}}}),K(i.fileName)&&c.a.createElement(ke,{className:"mL-15"},i.fileName)),c.a.createElement(ge,{className:"ta-c mT-5 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:function(){if((e.appUser.role===R||K(e.gateNo))&&(e.appUser.role!==R||W(i.arriveAt))&&!1===f&&n.length>0&&K(i.name)&&i.personCount>0&&K(i.fileName)){var t=i.arriveAt;if(W(t)){var a=[];W(i.arriveAt)&&K(i.arriveAtTime)&&(a=i.arriveAtTime.split(":")),K(a)&&a.length>1?t.setHours(parseInt(a[0]),parseInt(a[1]),0,0):t.setHours(0,0,0,0)}var r={_id:"",type:i.type,name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:"",arriveAt:t,personCount:i.personCount,vehicleType:i.vehicleType,vehicleNo:i.vehicleNo,image:i.fileName,passCode:"",gateNo:e.gateNo};r=Object.assign(r,{isUser:e.appUser.role===R}),e.onToggleLoading(!0),e.onSave(n,r,e.user,e.appUser,function(t){C(),e.onToggleLoading(!1),e.appUser.role===R?Se.success("Visitor Request created successfully. Please share the passcode("+t.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."):Se.success("Visitor created successfully. Notification sent to the house members for approval. If this visitor got approved from house member then allow him/her inside.")},function(t){e.onToggleLoading(!1),Se.fail("Failed to save visitor "+r.name+".")})}else Se.warn("Please fill Gate Number, House, Name, People count and Image before "+(i.id.length>0?"Update":"Save")+".")},className:"mR-10"}),c.a.createElement(Be,{title:"CLEAR",onPress:C})),B&&c.a.createElement(nt.a,{open:B,onClose:function(){return j(!1)}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(it,{user:e.user,appUser:e.appUser,data:T,isActive:!1,isSearch:!0,onSelect:function(e){j(!1),w([]),m(Object(d.a)({},i,{name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,vehicleType:e.vehicleType,vehicleNo:e.vehicleNo,fileName:e.image}))}}))))},ut=function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){m(e.gateNo)},[e.gateNo]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:""},c.a.createElement(Te,{type:"text",placeholder:"Gate Number",className:"form-control w-a",value:i,onChange:function(e){return m(e.target.value)},onBlur:function(){return e.onGateNoChanged(i)}}),c.a.createElement(ke,{className:"fl-r c-blue-700 fw-600 cur-p",onClick:function(){K(i)?e.history.push("all-takeways"):Se.warn("Please enter Gate Number to view this page.")}},"View all Active Takeaways"),c.a.createElement(ke,{className:"fl-r c-blue-700 fw-600 cur-p mR-20",onClick:function(){K(i)?e.history.push("all-visitors"):Se.warn("Please enter Gate Number to view this page.")}},"View all Active Visitors")),c.a.createElement(mt,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:i,onToggleLoading:function(e){return o(e)},onSave:e.onSaveVisitor,onUpload:e.onUpload,onSearch:e.onSearchVisitor}),c.a.createElement(je,{visible:n})))))},dt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t($(e))}}(t))},onPaymentUpload:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new Z).post("paymentupload",function(e,r){W(e)&&W(e.data)&&e.data.approvalid>0?(t(He(a)),n(!0)):n(!1)},e)}}(t,0,n,r))},onPaymentUpdate:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new Z).post("payment/transaction/"+e,function(o,l){if(W(o)&&W(o.data)&&o.data.length>0){t._id=o.data;var s=n.homes[a].payments.findIndex(function(t){return t._id===e});n.homes[a].payments[s].transactions||(n.homes[a].payments[s].transactions=[]),n.homes[a].payments[s].transactions.push(t),c(He(n)),r(!0)}else r(!1)},t)}}(t,a,n,r,c))},onSaveVisitor:function(t,a,n,r,c,o){return e(Ge(t,a,0,0,c,o))},onUpload:function(t,a){return e(We(t,a))},onSearchVisitor:function(t,a,n){return e(Ke(t,a,n))}}})(function(e){return e.appUser.role===R?e.appUser.homeIndex>=0&&K(e.user.homes)?r.createElement(tt,{history:e.history,user:e.user,home:e.user.homes[e.appUser.homeIndex],onPaymentUpload:function(t,a,n){return e.onPaymentUpload(t,a,e.user,n)},onPaymentUpdate:function(t,a,n){return e.onPaymentUpdate(t,a,e.appUser.homeIndex,e.user,n)}}):r.createElement(ge,{id:"mainContent"},r.createElement(ke,{className:"m-20"},"No house assigned to you. Please contact administrator/manager.")):e.appUser.role===M||e.appUser.role===V?r.createElement(at,{history:e.history,appUser:e.appUser,user:e.user,users:e.users,homes:e.homes,blocks:e.blocks}):e.appUser.role===F?r.createElement(ut,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onGateNoChanged:e.onGateNoChanged,onSaveVisitor:e.onSaveVisitor,onUpload:e.onUpload,onSearchVisitor:e.onSearchVisitor}):r.createElement(ge,{id:"mainContent"},r.createElement(ke,{className:"m-20"},"No role assigned to you. Please contact administrator/manager."))}),pt=function(e,t,a,n){return function(r){e&&e._id&&e._id.length>0?(new Z).put("member/"+e._id,function(c,o){if(W(c)&&W(c.data)&&c.data.length>0){var l=t.homes[a].members,s=l.findIndex(function(e){return e._id===c.data});l[s]._id=c.data,l[s].number=e.number,l[s].name=e.name,l[s].age=e.age,l[s].gender=e.gender,l[s].mobileNo=e.mobileNo,l[s].emailId=e.emailId,l[s].type=e.type,t.homes[a].members=l,r(ft(t)),n(!0,"")}else n(!1,o)},e):(e=Object.assign(e,{password:e.mobileNo}),(new Z).post("member/"+t.homes[a]._id,function(c,o){if(W(c)&&W(c.data)&&c.data.length>0){e._id=c.data,e.createdBy=t.name;var l=t.homes[a].members;l.push(e),t.homes[a].members=l,r(ft(t)),n(!0,"")}else n(!1,o)},e))}},ft=function(e){return{type:n.LOAD_USER,payload:e}},Et=function(e,t,a,r){return{type:n.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},bt=function(e){return r.createElement("div",{className:"mB-10"},r.createElement(se.b,{to:""},"Home"),e.data.map(function(t,a){return r.createElement(r.Fragment,null,r.createElement("span",{key:"bd"+a,className:"mL-10 mR-10"},"/"),a===e.data.length-1?r.createElement("span",{key:"bc"+a},t.title):r.createElement(se.b,{key:"bc"+a,to:"/"+t.link},t.title))}))},ht=Object(s.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(pt(t,a,n,r))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new Z).delete("member/"+e,function(o,l){W(o)&&W(o.data)&&!0===o.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(ft(a)),n&&!0===n.isUpToDate&&!1===n.isError&&K(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(Et(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",role:"USER"}),p=Object(ie.a)(u,2),f=p[0],E=p[1],b=function(){if(K(f.name)&&f.age>0&&K(f.gender)&&K(f.type)){o(!0);var t={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",type:f.type,role:f.role};e.onSave(t,e.user,e.homeIndex,function(e,t){o(!1),!0===e?(m(!1),E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",role:"USER"}),Se.success("Member saved successfully.")):Se.fail(K(t)?t:"Failed to save member.")})}else Se.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Members",link:"members"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-member")}},"Add New")),K(e.user.homes[e.homeIndex].members)?e.user.homes[e.homeIndex].members.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(ge,{key:a,className:"bdB mT-5"},e.user.client.config.appType==Y&&K(t.number)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Number: "+t.number)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ue,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(Ue,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:b},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",role:"USER"}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(ge,{key:a,className:"bdB mT-5"},e.user.client.config.appType==Y&&K(t.number)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Number: "+t.number)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.emailId)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.homeIndex,e.user,e.users,function(e){o(!1),!0===e?Se.success("Member removed successfully."):Se.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},"No member found."),c.a.createElement(je,{visible:n})))))}),Nt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(pt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",role:"USER"}),s=Object(ie.a)(l,2),i=s[0],m=s[1];return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:i.name,onChange:function(e){return m(Object(d.a)({},i,{name:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:i.age>0?i.age+"":"",onChange:function(e){return m(Object(d.a)({},i,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"M"===i.gender,text:"Male",onPress:function(){return m(Object(d.a)({},i,{gender:"M"}))}}),c.a.createElement(Ue,{isActive:"F"===i.gender,text:"Female",onPress:function(){return m(Object(d.a)({},i,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===i.gender,text:"Other",onPress:function(){return m(Object(d.a)({},i,{gender:"O"}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:i.mobileNo,onChange:function(e){return m(Object(d.a)({},i,{mobileNo:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",value:i.emailId,onChange:function(e){return m(Object(d.a)({},i,{emailId:e.target.value}))}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:function(){if(K(i.name)&&i.age>0&&K(i.gender)&&K(i.type)){o(!0);var t={_id:i.id,number:"",name:i.name,age:i.age,gender:i.gender,mobileNo:i.mobileNo,emailId:i.emailId?i.emailId.toLowerCase():"",type:i.type,role:i.role};e.onSave(t,e.user,e.homeIndex,function(e,t){o(!1),!0===e?(m({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",role:"USER"}),Se.success("Member saved successfully.")):Se.fail(K(t)?t:"Failed to save member.")})}else Se.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(je,{visible:n}))))}),gt=function(e,t,a,n){return function(r){e&&K(e._id)?(new Z).put("vehicle/"+e._id,function(c,o){if(W(c)&&K(c.data)){var l=t.homes[a].vehicles,s=l.findIndex(function(e){return e._id===c.data});l[s]._id=c.data,l[s].number=e.number,l[s].type=e.type,t.homes[a].vehicles=l,r(vt(t)),n(!0)}else n(!1)},e):(new Z).post("vehicle/"+t.homes[a]._id,function(c,o){if(W(c)&&K(c.data)){e._id=c.data,e.createdBy=t.name;var l=t.homes[a].vehicles;l.push(e),t.homes[a].vehicles=l,r(vt(t)),n(!0)}else n(!1)},e)}},vt=function(e){return{type:n.LOAD_USER,payload:e}},yt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(gt(t,a,n,r))},onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new Z).delete("vehicle/"+e,function(c,o){W(c)&&W(c.data)&&!0===c.data?(t.homes[a].vehicles=t.homes[a].vehicles.filter(function(t,a){return t._id!==e}),r(vt(t)),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(""),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=function(){if(K(h)&&K(y)){o(!0);var t={_id:p,number:h,type:y};e.onSave(t,e.user,e.homeIndex,function(e){o(!1),!0===e?(m(!1),f(""),N(""),T(""),Se.success("Vehicle saved successfully.")):Se.fail("Failed to save vehicle.")})}else Se.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Vehicles",link:"vehicles"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-vehicle")}},"Add New")),K(e.user.homes[e.homeIndex].vehicles)?e.user.homes[e.homeIndex].vehicles.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ue,{isActive:"TWO WHEELER"===y,text:"Two Wheeler",onPress:function(){return T("TWO WHEELER")}}),c.a.createElement(Ue,{isActive:"FOUR WHEELER"===y,text:"Four Wheeler",onPress:function(){return T("FOUR WHEELER")}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",value:h,onChange:function(e){return N(e.target.value)}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:w},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.type)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.number)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.number),T(t.type)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.homeIndex,function(e){o(!1),!0===e?Se.success("Vehicle removed successfully."):Se.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},"No vehicle found."),c.a.createElement(je,{visible:n})))))}),Tt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n,r){return e(gt(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1];return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"TWO WHEELER"===h,text:"Two Wheeler",onPress:function(){return N("TWO WHEELER")}}),c.a.createElement(Ue,{isActive:"FOUR WHEELER"===h,text:"Four Wheeler",onPress:function(){return N("FOUR WHEELER")}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:function(){if(K(p)&&K(h)){o(!0);var t={_id:i,number:p,type:h};e.onSave(t,e.user,e.homeIndex,function(e){o(!1),!0===e?(m(""),f(""),N(""),Se.success("Vehicle saved successfully.")):Se.fail("Failed to save vehicle.")})}else Se.warn("Please fill all the required fields before Save.")}}))),c.a.createElement(je,{visible:n}))))}),wt=function(e,t,a){return function(n){(new Z).get("servants/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Servants.")})}},Ot=function(e,t,a){return function(n){t&&K(t._id)?(new Z).put("servant/"+t._id,function(e,t){W(e)&&K(e.data)?a(!0):a(!1)},t):(new Z).post("servant/"+e,function(e,t){W(e)&&K(e.data)?a(!0):a(!1)},t)}},kt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onLoad:function(t,a,n){return e(wt(t,a,n))},onSave:function(t,a,n){return e(Ot(t,a,n))},onRemove:function(t,a){return e(function(e,t){return function(a){(new Z).delete("servant/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onCreateTakeaway:function(t,a,n,r){return e(function(e,t,a,n){return function(r){K(t._id)?(new Z).put("servant/takeaway/"+t._id,function(e,t){W(e)&&K(e.data)?a(e.data):n(e&&K(e.message)?e.message:"Failed to update takeaway.")},t):(new Z).post("servant/takeaway/"+e,function(e,t){W(e)&&K(e.data)?a(e.data):n(e&&K(e.message)?e.message:"Failed to create Takeaway.")},t)}}(t,a,n,r))},onRemoveTakeaway:function(t,a){return e(function(e,t){return function(a){(new Z).delete("servant/takeaway/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({data:[],id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),p=Object(ie.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){o(!1),E(Object(d.a)({},f,{data:e}))},function(e){o(!1),Se.fail(e)})},[]);var b=function(){if(K(f.name)&&f.age>0&&K(f.gender)){o(!0);var t={_id:f.id,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){if(o(!1),!0===e){var t=f.data,a=t.findIndex(function(e){return e._id===f.id});t[a].name=f.name,t[a].age=f.age,t[a].gender=f.gender,t[a].mobileNo=f.mobileNo,t[a].emailId=f.emailId,m(!1),E(Object(d.a)({},f,{data:t,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),Se.success("Servant saved successfully.")}else Se.fail("Failed to save servant.")})}else Se.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Servants",link:"servants"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-servant")}},"Add New")),K(f.data)?f.data.map(function(t,a){return!0===i&&f.id===t._id?c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Ue,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(Ue,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:b},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.emailId)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{data:f.data.filter(function(e,t){return e._id!==a}),viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),Se.success("Servant removed successfully.")):Se.fail("Failed to remove servant.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement("span",{onClick:function(){var e,a;e=t._id,a=t.takeaways,f.viewId===e?E(Object(d.a)({},f,{viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})):E(Object(d.a)({},f,{viewId:e,takeaways:a,takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement(ke,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Takeaways"))),f.viewId===t._id&&c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},"Takeaways")),c.a.createElement(ge,{className:"p-15"},c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(Te,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.takeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{takeawayTitle:e.target.value}))}}),c.a.createElement(we,{placeholder:"Takeaway Description",className:"form-control bd",value:f.takeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{takeawayDesc:e.target.value}))}}),c.a.createElement(ge,{className:"mT-5"},c.a.createElement(Be,{title:"ADD NEW TAKEAWAY",onPress:function(){return a=t._id,void(K(f.takeawayTitle)&&K(f.takeawayDesc)?(o(!0),e.onCreateTakeaway(a,{_id:"",title:f.takeawayTitle,description:f.takeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){o(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a});n[r].takeaways.unshift({_id:t,title:f.takeawayTitle,description:f.takeawayDesc,createdAt:new Date,createdBy:e.user.name,updatedBy:e.user._id,updatedAt:new Date}),E(Object(d.a)({},f,{data:n,takeawayTitle:"",takeawayDesc:""})),Se.success("Takeayway added successfully.")},function(e){o(!1),Se.fail("Failed to add takeaway.")})):Se.warn("Please fill Takeaway title & description before Add."));var a}}))),K(f.takeaways)?f.takeaways.map(function(a,n){return c.a.createElement(ge,{key:"tkycmt"+n,className:"pL-3 pR-3 pT-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},a.createdBy+" on "+Ze(a.updatedAt))),c.a.createElement(ge,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(ke,null,a.title):c.a.createElement(Te,{type:"text",placeholder:"Takeaway Title",className:"form-control mB-10",value:f.editTakeawayTitle,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayTitle:e.target.value}))}})),c.a.createElement(ge,null,f.editTakeawayId!==a._id||a.isExit?c.a.createElement(ke,null,a.description):c.a.createElement(we,{placeholder:"Takeaway Description",className:"form-control bd",value:f.editTakeawayDesc,onChange:function(e){return E(Object(d.a)({},f,{editTakeawayDesc:e.target.value}))}})),a.isExit?c.a.createElement(ge,null,c.a.createElement(ke,{className:"c-green-600"},"Exit by "+a.exitBy+" in Gate "+a.exitGateNo+" on "+Ze(a.exitAt))):c.a.createElement(ge,null,c.a.createElement(ke,{className:"c-red-600"},"Still not exit.")),!a.isExit&&c.a.createElement(c.a.Fragment,null,f.editTakeawayId===a._id?c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(K(f.editTakeawayTitle)&&K(f.editTakeawayDesc)?(o(!0),e.onCreateTakeaway(a,{_id:f.editTakeawayId,title:f.editTakeawayTitle,description:f.editTakeawayDesc,createdBy:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},function(t){o(!1);var n=f.data,r=n.findIndex(function(e){return e._id===a}),c=n[r].takeaways.findIndex(function(e){return e._id===f.editTakeawayId});n[r].takeaways[c].title=f.editTakeawayTitle,n[r].takeaways[c].description=f.editTakeawayDesc,n[r].takeaways[c].updatedBy=e.user.name,n[r].takeaways[c].updatedAt=new Date,E(Object(d.a)({},f,{data:n,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})),Se.success("Takeayway updated successfully.")},function(e){o(!1),Se.fail("Failed to update takeaway.")})):Se.warn("Please fill Takeaway title & description before Add."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editTakeawayId:a._id,editTakeawayTitle:a.title,editTakeawayDesc:a.description}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this takeaway?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemoveTakeaway(n,function(e){o(!1);var t=f.data,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e,t){return e._id!==n}),!0===e?(E(Object(d.a)({},f,{data:t,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewId:""})),Se.success("Takeaway removed successfully.")):Se.fail("Failed to remove takeaway.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(ke,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(ke,{className:"p-20"},"No servant found."),c.a.createElement(je,{visible:n})))))}),Bt=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("servant/takeaways/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Takeaways.")})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).post("servant/exittakeaway/"+e,function(e,t){W(e)&&W(e.data)&&!0===e.data?a(!0):a(!1)},{gateNo:t})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(ie.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),m(e)},function(e){o(!1),Se.fail(e)})},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Takeaways",link:"all-takeaways"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},K(i)&&K(i.filter(function(e){return e.takeaways&&e.takeaways.length>0}))?i.filter(function(e){return e.takeaways&&e.takeaways.length>0}).map(function(t,a){return c.a.createElement(ge,{key:a,className:"mT-5 bdB"},c.a.createElement(ge,{className:"mB-3"},c.a.createElement(ke,{className:"fw-600"},t.createdBy+" on "+Ze(t.createdAt))),c.a.createElement(ge,{className:"mB-3"},c.a.createElement(ke,null,t.name)),c.a.createElement(ge,{className:"mB-3"},c.a.createElement(ke,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mB-3"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mB-3"},c.a.createElement(ke,null,t.emailId)),c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},"Takeaways")),c.a.createElement(ge,{className:"pL-15 pR-15 pB-15 pT-3"},K(t.takeaways)?t.takeaways.map(function(a,n){return c.a.createElement(ge,{key:"tkycmt"+n,className:"pT-5 pB-5 pR-3 pL-3"+(0===n?"":" bdB")},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},a.createdBy+" on "+Ze(a.updatedAt))),c.a.createElement(ge,null,c.a.createElement(ke,null,a.title)),c.a.createElement(ge,null,c.a.createElement(ke,null,a.description)),e.appUser.role===F&&c.a.createElement(ge,{className:"mT-10"},!a.isExit&&c.a.createElement(Be,{title:"Exit",onPress:function(){var n,r;n=a._id,r=t._id,Object(Pe.confirmAlert)({title:"Confirm to Exit Servant with Takeaway",message:"Are you sure you wish to exit the servant with this takeaway things?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onExit(n,e.gateNo,function(e){if(!0===e){var t=i,a=t.findIndex(function(e){return e._id===r});t[a].takeaways=t[a].takeaways.filter(function(e){return e._id!==n}),m(t),o(!1),Se.success("Servant exit with takeaway successfully.")}else o(!1),Se.fail("Failed to exit servant with takeaway.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(ke,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(ke,null,"No data found."),c.a.createElement(je,{visible:n})))))}),jt=Object(s.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,a,n){return e(Ot(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(0),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(""),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(ie.a)(w,2),k=O[0],B=O[1],j=Object(r.useState)(""),C=Object(ie.a)(j,2),A=C[0],S=C[1],U=function(){if(K(p)&&h>0&&K(y)){o(!0);var t={_id:i,name:p,age:h,gender:y,mobileNo:k,emailId:A?A.toLowerCase():""};e.onSave(e.user.homes[e.homeIndex]._id,t,function(e){o(!1),!0===e?(m(""),f(""),N(0),T(""),B(""),S(""),Se.success("Servant saved successfully.")):Se.fail("Failed to save servant.")})}else Se.warn("Please fill all the required fields before Save.")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Servants",link:"servants"},{title:"New Servant",link:"new-servant"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,value:h>0?h+"":"",onChange:function(e){return N(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"M"===y,text:"Male",onPress:function(){return T("M")}}),c.a.createElement(Ue,{isActive:"F"===y,text:"Female",onPress:function(){return T("F")}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===y,text:"Other",onPress:function(){return T("O")}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:k,onChange:function(e){return B(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",value:A,onChange:function(e){return S(e.target.value)},onKeyPress:function(e){X(e,U)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:U}))),c.a.createElement(je,{visible:n}))))}),Ct=function(e,t,a,n,r){return function(c){e&&e._id&&e._id.length>0?(new Z).put("ticket/"+e._id,function(a,o){if(W(a)&&K(a.data)){if(K(n.data)){var l=[],s=(l=n.data).findIndex(function(e){return e._id===a.data});l[s]._id=a.data,l[s].category=e.category,l[s].title=e.title,l[s].description=e.description,l[s].status=e.status,l[s].updatedBy=t.name,c(At(l,!0,!1,""))}r(!0)}else r(!1)},e):(new Z).post("ticket/"+t.homes[a]._id,function(o,l){if(W(o)&&K(o.data)){var s=[];K(n.data)&&((s=n.data).unshift({_id:o.data,_homeId:t.homes[a].number,category:e.category,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),c(At(s,!0,!1,""))),r(!0)}else r(!1)},e)}},At=function(e,t,a,r){return{type:n.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},St=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(At([],!1,!1,"")),(new Z).get("tickets"+(K(t)?"/"+t:""),function(t,n){W(t)?(e(At(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onSave:function(t,a,n,r,c){return e(Ct(t,a,n,r,c))},onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new Z).delete("ticket/"+e,function(a,c){W(a)&&W(a.data)&&!0===a.data?(K(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(At(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onResolve:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new Z).delete("ticket/resolve/"+e,function(a,c){W(a)&&W(a.data)&&!0===a.data?(K(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),t(At(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,0,0,r,c))},onStart:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(t){(new Z).put("ticket/start/"+e,function(a,c){if(W(a)&&W(a.data)&&!0===a.data){if(K(n.data)){var o=[],l=(o=n.data).findIndex(function(t){return t._id===e});o[l].status="IN-PROGRESS",t(At(o,!0,!1,""))}r(!0)}else r(!1)},{status:"IN-PROGRESS"})}}(t,0,0,r,c))},onAddComment:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){K(t._id)?(new Z).put("ticket/comment/"+t._id,function(n,o){if(W(n)&&K(n.data)){t.createdAt=new Date;var l=[];if(K(r.data)){var s=(l=r.data).findIndex(function(t){return t._id===e}),i=l[s].comments.findIndex(function(e){return e._id===t._id});l[s].comments[i].comment=t.comment,l[s].comments[i].updatedBy=t.updatedBy,l[s].comments[i].updatedAt=t.updatedAt,a(At(l,!0,!1,""))}c(!0)}else c(!1)},t):(new Z).post("ticket/comment/"+e,function(n,o){if(W(n)&&K(n.data)){t._id=n.data,t.createdAt=new Date;var l=[];if(K(r.data)){var s=(l=r.data).findIndex(function(t){return t._id===e});l[s].comments.unshift(t),a(At(l,!0,!1,""))}c(!0)}else c(!1)},t)}}(t,a,0,0,c,o))},onRemoveComment:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){(new Z).delete("ticket/comment/"+e,function(n,o){if(W(n)&&W(n.data)&&!0===n.data){if(K(r.data)){var l=r.data.findIndex(function(e){return e._id===t});r.data[l].comments=r.data[l].comments.filter(function(t,a){return t._id!==e}),a(At(r.data,!0,!1,""))}c(!0)}else c(!1)})}}(t,a,0,0,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({data:[],id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),p=Object(ie.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,e.appUser.role===M||e.appUser.role===V?"":e.user.homes[e.appUser.homeIndex]._id,function(e){o(!1),e||Se.fail("Failed to load Tickets.")})},[]);var b=function(){if(K(f.category)&&K(f.title)&&K(f.description)){o(!0);var t={_id:f.id,category:f.category,title:f.title,description:f.description,status:f.status};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),Se.success("Ticket saved successfully.")):Se.fail("Failed to save ticket.")})}else Se.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Tickets",link:"tickets"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},e.appUser.role===R&&c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("new-ticket")}},"Add New")),W(e.tickets)&&e.tickets.isUpToDate&&!e.tickets.isError&&K(e.tickets.data)?e.tickets.data.map(function(t,a){return c.a.createElement(ge,{key:"tkt"+a,className:"bdB mT-5"},c.a.createElement(ge,{className:"fw-600 mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.createdBy+" from "+t._homeId+" on "+Ze(t.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(Oe,{className:"form-control",value:f.category,onChange:function(e){return E(Object(d.a)({},f,{category:e.target.value}))}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),K(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance")):c.a.createElement(ke,{className:"fw-600"},t.category)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:f.title,onChange:function(e){return E(Object(d.a)({},f,{title:e.target.value}))}}):c.a.createElement(ke,null,t.title)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},i&&f.id===t._id?c.a.createElement(we,{placeholder:"Description",className:"form-control",value:f.description,onChange:function(e){return E(Object(d.a)({},f,{description:e.target.value}))}}):c.a.createElement(ke,null,t.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.status)),i&&f.id===t._id?c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:b},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),E(Object(d.a)({},f,{id:"",category:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},e.appUser.role===R&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),E(Object(d.a)({},f,{id:t._id,category:t.category,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),e.appUser.role===R&&c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?Se.success("Ticket removed successfully."):Se.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),e.appUser.role===R&&c.a.createElement("span",{className:"m-25",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onResolve(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?Se.success("Ticket resolved successfully."):Se.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(ke,{className:"cur-p c-blue-500"},"RESOLVE")),(e.appUser.role===M||e.appUser.role===V)&&"INIT"===t.status&&c.a.createElement("span",{className:"mR-25",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onStart(a,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})),!0===e?Se.success("Ticket started successfully."):Se.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement(ke,{className:"cur-p c-blue-500"},"START")),c.a.createElement("span",{onClick:function(){var e,a;e=t._id,a=t.comments,f.viewId===e?E(Object(d.a)({},f,{viewId:"",comments:[],comment:"",editCommentId:"",editComment:""})):E(Object(d.a)({},f,{viewId:e,comments:a,comment:"",editCommentId:"",editComment:""}))}},c.a.createElement(ke,{className:"cur-p c-blue-500"},(f.viewId===t._id?"Hide":"View")+" Comments"))),f.viewId===t._id&&c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},"Comments")),c.a.createElement(ge,{className:"p-15"},c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(we,{placeholder:"Comment Text",className:"form-control bd",value:f.comment,onChange:function(e){return E(Object(d.a)({},f,{comment:e.target.value}))}}),c.a.createElement(ge,{className:"mT-5"},c.a.createElement(Be,{title:"ADD COMMENT",onPress:function(){return a=t._id,void(K(f.comment)?(o(!0),e.onAddComment(a,{_id:"",comment:f.comment,createdBy:e.user._id,createdByName:e.user.name,createdAt:new Date,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{comment:""})),Se.success("Comment added successfully.")):Se.fail("Failed to add comment.")})):Se.warn("Please fill comment before Add."));var a}}))),K(f.comments)?f.comments.map(function(a,n){return c.a.createElement(ge,{key:"tktcmt"+n,className:"pL-3 pR-3 pt-5 pB-5"+(0===n?"":" bdT")},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},a.createdByName+" on "+Ze(a.updatedAt))),c.a.createElement(ge,null,f.editCommentId===a._id?c.a.createElement(we,{placeholder:"Comment Text",className:"form-control bd",value:f.editComment,onChange:function(e){return E(Object(d.a)({},f,{editComment:e.target.value}))}}):c.a.createElement(ke,null,a.comment)),a.createdBy===e.user._id&&c.a.createElement(c.a.Fragment,null,f.editCommentId===a._id?c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){return a=t._id,void(K(f.editCommentId)&&K(f.editComment)?(o(!0),e.onAddComment(a,{_id:f.editCommentId,comment:f.editComment,updatedBy:e.user._id,updatedAt:new Date},e.appUser,e.user,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:""})),Se.success("Comment updated successfully.")):Se.fail("Failed to update comment.")})):Se.warn("Please fill comment before update."));var a}},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:"",editComment:""}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"}))):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){E(Object(d.a)({},f,{editCommentId:a._id,editComment:a.comment}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var n,r;n=a._id,r=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this comment?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemoveComment(n,r,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(E(Object(d.a)({},f,{editCommentId:"",editComment:"",viewId:""})),Se.success("Comment removed successfully.")):Se.fail("Failed to remove comment.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})))))}):c.a.createElement(ke,{className:"p-20"},"No comment found."))))}):c.a.createElement(ke,{className:"p-20"},e.tickets.isUpToDate?e.tickets.isError?e.tickets.errorMessage:"No ticket found.":"Loading..."),c.a.createElement(je,{visible:n})))))}),Ut=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,a,n,r,c){return e(Ct(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(""),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)("INIT"),O=Object(ie.a)(w,2),k=O[0],B=O[1],j=function(){if(K(p)&&K(h)&&K(y)){o(!0);var t={_id:i,category:p,title:h,description:y,status:k};e.onSave(t,e.user,e.appUser.homeIndex,e.tickets,function(e){o(!1),!0===e?(m(""),f(""),N(""),T(""),B("INIT"),Se.success("Ticket saved successfully.")):Se.fail("Failed to save ticket.")})}else Se.warn("Please fill all the required fields before Save.")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),e.appUser.role===R?c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Oe,{className:"form-control",value:p,onChange:function(e){return f(e.target.value)}},c.a.createElement("option",{key:"ticketcat-1",value:""},"Select Ticket Category"),K(e.user.client.config.ticketCategories)?e.user.client.config.ticketCategories.map(function(e,t){return c.a.createElement("option",{key:"ticketcat"+t,value:e},e)}):c.a.createElement("option",{key:"ticketcat0",value:"Maintenance"},"Maintenance"))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:h,onChange:function(e){return N(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)},onKeyPress:function(e){X(e,j)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:j}))):c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings -> My Role and try again."))),c.a.createElement(je,{visible:n}))))}),_t=a(48),It=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(Ye(0,a,n,r,c))},onApprove:function(t,a){return e(function(e,t){return function(a){(new Z).get("visitor/approve/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new Z).get("visitor/reject/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onRemove:function(t,a){return e(function(e,t){return function(a){(new Z).delete("visitor/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,o){return e(Ge(t,a,0,0,c,o))},onUpload:function(t,a){return e(We(t,a))},onSearch:function(t,a,n){return e(Ke(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!0),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(!1),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(""),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=function(){o(!0),e.onLoad(e.user.client._id,e.user.homes[e.appUser.homeIndex]._id,p,function(e){o(!1),m(e)},function(e){o(!1),Se.fail(e)})};Object(r.useEffect)(function(){w()},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Visitors",link:"visitors"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},e.appUser.role===R&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5 ta-r"},c.a.createElement(ke,{className:"cur-p c-blue-500 fw-600 ta-r",onClick:function(){return N(!h)}},h?"< Back to Visitors":"Request for a New Visitor")),!h&&c.a.createElement(it,{data:i,isActive:p,user:e.user,appUser:e.appUser,onActiveChange:function(){f(!p),w()},onApprove:function(t){Object(Pe.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onApprove(t,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isApproved=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),Se.success("Visitor approved successfully.")}else Se.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onReject:function(t){Object(Pe.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReject(t,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isRejected=!0,n[r].approvedBy=e.user.name,n[r].approvedAt=new Date,m(n),Se.success("Visitor rejected successfully.")}else Se.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},onRemove:function(t){Object(Pe.confirmAlert)({title:"Confirm to Remove Visitor",message:"Are you sure you wish to remove visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(t,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),Se.success("Visitor removed successfully.")):Se.fail("Failed to remove visitor.")})}},{label:"No",onClick:function(){}}]})}}),h&&c.a.createElement(mt,{appUser:e.appUser,user:e.user,homes:e.homes,gateNo:e.gateNo,onToggleLoading:function(e){return o(e)},onSave:function(t,a,n,r,c,o){e.onSave(t,a,n,r,function(e){c(e),m([e].concat(Object(_t.a)(i))),T(e.passCode),N(!1)},function(e){o(e)})},onUpload:e.onUpload,onSearch:e.onSearch}),K(y)&&c.a.createElement(nt.a,{open:K(y),onClose:function(){return T("")}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},"Visitor Request created successfully. Please share the passcode("+y+") to yor visitor and ask him/her to show it to the security in the gate while entering."),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5 ta-c fw-600 c-blue-600",style:{fontSize:30}},y))),c.a.createElement(je,{visible:n})))))}),xt=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new Z).post("account/changepassword/"+e,function(e,t){W(e)&&W(e.data)&&!0===e.data?n(!0,""):n(!1,e&&e.message?e.message:t)},{password:t,newPassword:a})}}(t,a,n,r))},onLogout:function(t){return e(Q(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=function(){if(K(i)&&K(p)&&K(h))if(p===h){var t=function(e){var t=/[A-Z]/,a=/[a-z]/,n=/[0-9]/,r=/[!|@|#|$|%|^|&|*|(|)|-|_]/,c="";if(e.length<6)return c="New Password not long enough!";for(var o=0,l=0,s=0,i=0,m=0;m<e.length;m++)t.test(e[m])?o++:a.test(e[m])?l++:n.test(e[m])?s++:r.test(e[m])&&i++;return o<1||l<1||s<1||i<1?c="New Password dose not match with password policy!":c}(p);t.length<1?(o(!0),e.onUpdate(e.user._id,i,p,function(t,a){o(!1),!0===t?(Se.success("Password updated successfully. Please login with your new password."),e.onLogout(function(e){})):Se.fail(a)})):Se.warn(t)}else Se.warn("New Password and Confirm New Password not matchs.");else Se.warn("Please fill all the fields before Update.")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Change Password",link:"change-password"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"password",placeholder:"Password",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"password",placeholder:"New Password",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"password",placeholder:"Confirm New Password",className:"form-control",value:h,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){X(e,g)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"UPDATE",onPress:g})),c.a.createElement(ge,{className:"mT-7"},c.a.createElement(ke,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),c.a.createElement(je,{visible:n}))))}),Dt=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(o){(new Z).put("account/profile/"+e,function(e,l){W(e)&&W(e.data)&&!0===e.data?(r.name=t,r.mobileNo=a,r.emailId=n,o(ne(r)),c(!0,"")):c(!1,l)},{name:t,mobileNo:a,emailId:n})}}(t,a,n,r,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1];Object(r.useEffect)(function(){m(e.user.name),f(e.user.mobileNo),N(e.user.emailId)},[]);var g=function(){K(i)&&K(p)&&K(h)?(o(!0),e.onUpdate(e.user._id,i,p,h?h.toLowerCase():"",e.user,function(e,t){o(!1),!0===e?Se.success("Profile updated successfully."):Se.fail(t)})):Se.warn("Please fill all the fields before Update.")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"My Profile",link:"my-profile"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Email Id",className:"form-control",value:h,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){X(e,g)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"UPDATE",onPress:g}))),c.a.createElement(je,{visible:n}))))}),Pt=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,a){return e(function(e,t){return function(a){a(te(e)),t(!0,"")}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){m(e.appUser.role)},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"My Role",link:"my-role"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Oe,{className:"form-control",value:i,onChange:function(e){return m(e.target.value)}},e.user.role.split(",").map(function(e,t){return c.a.createElement("option",{key:"role"+t,value:e},e)}))),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"UPDATE",onPress:function(){K(i)?(o(!0),e.onUpdate(i,function(t,a){o(!1),!0===t?(Se.success("Role updated successfully."),e.history.push("/")):Se.fail(a)})):Se.warn("Please select role before Update.")}}))),c.a.createElement(je,{visible:n}))))}),Lt=function(e,t){return function(a){a(Mt([],!1,!1,"")),(new Z).get("ads/"+e,function(e,n){W(e)&&W(e.data)?(a(Mt(e.data,!0,!1,"")),t(!0)):t(!1)})}},Rt=function(e,t,a,n,r){return function(c){t&&K(t._id)?(new Z).put("ad/"+t._id,function(e,a){if(W(e)&&K(e.data)){var o=n.findIndex(function(t){return t._id===e.data});n[o]._id=e.data,n[o].title=t.title,n[o].description=t.description,c(Mt(n,!0,!1,"")),r(!0)}else r(!1)},t):(new Z).post("ad/"+e,function(e,o){W(e)&&K(e.data)?(n.unshift({_id:e.data,title:t.title,description:t.description,createdBy:a.name,createdAt:new Date}),c(Mt(n,!0,!1,"")),r(!0)):r(!1)},t)}},Mt=function(e,t,a,r){return{type:n.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Ft=Object(s.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,a){return e(Lt(t,a))},onSave:function(t,a,n,r,c){return e(Rt(t,a,n,r,c))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).delete("ad/"+e,function(r,c){W(r)&&W(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(Mt(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(""),v=Object(ie.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),e||Se.fail("Failed to load Ads.")})},[]);var w=function(){if(K(h)&&K(y)){o(!0);var t={_id:p,title:h,description:y};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){o(!1),!0===e?(m(!1),f(""),N(""),T(""),Se.success("Ad saved successfully.")):Se.fail("Failed to save ad.")})}else Se.warn("Please fill all the required fields before "+(p.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Ads",link:"ads"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p mB-3 c-blue-500",onClick:function(){return e.history.push("new-ad")}},"Add New")),e.ads.isUpToDate&&!e.ads.isError&&K(e.ads.data)?e.ads.data.map(function(t,a){return!0===i&&p===t._id?c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.createdBy+" on "+Xe(t.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:h,onChange:function(e){return N(e.target.value)}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:y,onChange:function(e){return T(e.target.value)}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:w},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){m(!1),f(""),N(""),T("")}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.createdBy+" on "+Xe(t.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.title)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0),f(t._id),N(t.title),T(t.description)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.ads.data,function(e){o(!1),!0===e?Se.success("Ad removed successfully."):Se.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No ad found.":"Loading..."),c.a.createElement(je,{visible:n})))))}),Vt=Object(s.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,a,n,r,c){return e(Rt(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=function(){if(K(p)&&K(h)){o(!0);var t={_id:i,title:p,description:h};e.onSave(e.user.client._id,t,e.user,e.ads.data,function(e){o(!1),!0===e?(m(""),f(""),N(""),Se.success("Ad saved successfully.")):Se.fail("Failed to save ad.")})}else Se.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:h,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){X(e,g)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:g}))),c.a.createElement(je,{visible:n}))))}),Ht=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){(new Z).delete("member/"+e,function(o,l){W(o)&&W(o.data)&&!0===o.data?(a.homes[t].members=a.homes[t].members.filter(function(t,a){return t._id!==e}),c(ft(a)),n&&!0===n.isUpToDate&&!1===n.isError&&K(n.data)&&(n.data=n.data.filter(function(t,a){return t._id!==e}),c(Et(n.data,!0,!1,""))),r(!0)):r(!1)})}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=function(){if(K(i)&&e.users.isUpToDate&&!e.users.isError&&K(e.users.data)){var t=i.toLowerCase(),a=e.homes.data.filter(function(e){return e.number.toLowerCase()===t});f(e.users.data.filter(function(e){return(e.name+"").toLowerCase().indexOf(t)>=0||(e.mobileNo+"").toLowerCase().indexOf(t)>=0||(e.emailId+"").toLowerCase().indexOf(t)>=0||(e.number+"").toLowerCase().indexOf(t)>=0||K(a.filter(function(t){return t.memberIds.indexOf(e._id)>=0}))})),N(10)}else f([]),N(10)};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Users",link:"users"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500",onClick:function(){return e.history.push("edit-user/0/false")}},"Add New"),c.a.createElement(ke,{className:"fl-r cur-p c-blue-500 mR-15",onClick:function(){return e.history.push("approve-users")}},"View Users Waiting for Approval")),c.a.createElement(ge,{className:"mB-3 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Search User",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){X(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),K(p)?p.slice(0,h).map(function(t,a){return c.a.createElement(ge,{key:"usr"+a,className:"bdB mT-5"},e.user.client.config.appType==Y&&K(t.number)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Number: "+t.number)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Name: "+(K(t.name)?t.name:""))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Mobile No: "+t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Email: "+t.emailId)),t._id!==e.user._id&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-user/"+t._id+"/false")}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.appUser.homeIndex,e.user,e.users,function(e){o(!1),!0===e?(g(),Se.success("User removed successfully.")):Se.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},"No user match with your search."),p.length>h&&c.a.createElement(ge,{className:"bdB mT-5"},c.a.createElement(ge,{className:"p-10"},c.a.createElement(ke,{className:"c-blue-500 fw-600",onClick:function(){N(h+10)}},"Show More"))),c.a.createElement(je,{visible:n})))))}),Yt=function(e,t,a){return function(n){(new Z).get("home/"+e,function(e,n){W(e)&&W(e.data)&&K(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):a(e&&K(e.message)?e.message:"Failed to load Home.")})}},Gt=function(e){return{type:n.LOAD_USER,payload:e}},Kt=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},Wt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new Z).delete("home/"+e,function(c,o){W(c)&&W(c.data)&&!0===c.data?(t.homes=t.homes.filter(function(t,a){return t._id!==e}),a.data=a.data.filter(function(t,a){return t._id!==e}),r(Gt(t)),r(Kt(a.data,!0,!1,"")),n(!0)):n(!1)})}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=function(){K(i)&&e.homes.isUpToDate&&!e.homes.isError&&K(e.homes.data)?(f(e.homes.data.filter(function(e){return(e.number+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Houses",link:"homes"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500 mB-3",onClick:function(){return e.history.push("edit-home/0")}},"Add New")),c.a.createElement(ge,{className:"mB-3 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Search House",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){X(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),K(p)?p.slice(0,h).map(function(t,a){return c.a.createElement(ge,{key:"home"+a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Number: "+t.number)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("view-home/"+t._id)}},c.a.createElement("i",{className:"c-orange-500 fa fa-eye"})),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-home/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.user,e.homes,function(e){o(!1),!0===e?(g(),Se.success("House removed successfully.")):Se.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},"No house match with your search."),p.length>h&&c.a.createElement(ge,{className:"bdB mT-5"},c.a.createElement(ge,{className:"p-10"},c.a.createElement(ke,{className:"fw-600 c-blue-500",onClick:function(){N(h+10)}},"Show More"))),c.a.createElement(je,{visible:n})))))}),qt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("member/"+e,function(e,n){W(e)&&W(e.data)&&W(e.data.member)&&K(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):a(e&&K(e.message)?e.message:"Failed to load Member.")})}}(t,a,n))},onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:r}))&&K(e._id)?(new Z).put("member/"+e._id,function(t,r){if(W(t)&&W(t.data)&&t.data.length>0){if(n.isUpToDate&&!n.isError&&K(n.data)){var o=n.data.findIndex(function(e){return e._id===t.data});o>=0?(n.data[o]._id=t.data,n.data[o].name=e.name):n.data.push({_id:t.data,name:e.name}),a(Et(n.data,!0,!1,""))}c(!0,"")}else c(!1,r)},e):(new Z).post("member/0",function(t,r){W(t)&&W(t.data)&&t.data.length>0?(n.isUpToDate&&!n.isError&&K(n.data)&&(n.data.push({_id:t.data,name:e.name}),a(Et(n.data,!0,!1,""))),c(!0,"")):c(!1,r)},e)}}(t,a,0,r,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),p=Object(ie.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(o(!0),e.onLoad(t,function(e,t){o(!1),e&&K(e._id)?E({id:e._id,number:e.number,name:e.name,age:e.age,gender:e.gender,mobileNo:e.mobileNo,emailId:e.emailId,type:e.type,homeIds:t,role:{isAdmin:(","+e.role+",").indexOf(","+M+",")>=0,isManager:(","+e.role+",").indexOf(","+V+",")>=0,isGatekeeper:(","+e.role+",").indexOf(","+F+",")>=0,isUser:(","+e.role+",").indexOf(","+R+",")>=0}}):Se.fail("Failed to load User.")},function(e){o(!1),Se.fail(K(e)?e:"Failed to load User.")}))},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},e.user.client.config.appType==Y&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"User Id / Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:f.name,onChange:function(e){return E(Object(d.a)({},f,{name:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,value:f.age>0?f.age+"":"",onChange:function(e){return E(Object(d.a)({},f,{age:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"M"===f.gender,text:"Male",onPress:function(){return E(Object(d.a)({},f,{gender:"M"}))}}),c.a.createElement(Ue,{isActive:"F"===f.gender,text:"Female",onPress:function(){return E(Object(d.a)({},f,{gender:"F"}))}}),e.user.client.config.hasOtherGender&&c.a.createElement(Ue,{isActive:"O"===f.gender,text:"Other",onPress:function(){return E(Object(d.a)({},f,{gender:"O"}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Mobile Number",className:"form-control",value:f.mobileNo,onChange:function(e){return E(Object(d.a)({},f,{mobileNo:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Email ID",className:"form-control",value:f.emailId,onChange:function(e){return E(Object(d.a)({},f,{emailId:e.target.value}))}})),e.user.client.config.appType==H&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:"OWNER"===f.type,text:"Owner",onPress:function(){return E(Object(d.a)({},f,{type:"OWNER"}))}}),c.a.createElement(Ue,{isActive:"TENANT"===f.type,text:"Tenant",onPress:function(){return E(Object(d.a)({},f,{type:"TENANT"}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-10"},"Role: "),c.a.createElement(st,{isActive:f.role.isAdmin,text:M,onPress:function(){var e=f.role;e.isAdmin=!f.role.isAdmin,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(st,{isActive:f.role.isManager,text:V,onPress:function(){var e=f.role;e.isManager=!f.role.isManager,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(st,{isActive:f.role.isGatekeeper,text:F,onPress:function(){var e=f.role;e.isGatekeeper=!f.role.isGatekeeper,E(Object(d.a)({},f,{role:e}))}}),c.a.createElement(st,{isActive:f.role.isUser,text:R,onPress:function(){var e=f.role;e.isUser=!f.role.isUser,E(Object(d.a)({},f,{role:e}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-5"},"House(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(ke,null,function(){var t="";return K(f.homeIds)&&e.homes.isUpToDate&&!e.homes.isError&&K(e.homes.data)&&e.homes.data.filter(function(e){return f.homeIds.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.number}),t}())),e.homes.isUpToDate&&!e.homes.isError&&K(e.homes.data)&&c.a.createElement(nt.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(ve,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.homes.data.map(function(e,t){return c.a.createElement(ke,{key:"home"+t,className:"cur-p bdB p-3 mB-1"+(f.homeIds.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.homeIds.indexOf(e._id)>=0)E(Object(d.a)({},f,{homeIds:f.homeIds.filter(function(t){return t!==e._id})}));else{var t=f.homeIds;t.push(e._id),E(Object(d.a)({},f,{homeIds:t}))}}},e.number)})))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"true"===e.match.params.isApprove?"Approve":"SAVE",onPress:function(){if((e.user.client.config.appType!==Y||K(f.number))&&K(f.name)&&f.age>0&&K(f.gender)){var t="";f.role.isAdmin&&(t=M),f.role.isManager&&(t+=(t.length>0?",":"")+V),f.role.isGatekeeper&&(t+=(t.length>0?",":"")+F),f.role.isUser&&(t+=(t.length>0?",":"")+R),o(!0);var a={_id:f.id,number:f.number,name:f.name,age:f.age,gender:f.gender,mobileNo:f.mobileNo,emailId:f.emailId?f.emailId.toLowerCase():"",type:f.type,role:t};e.onSave(a,f.homeIds,e.user,e.users,"true"===e.match.params.isApprove,function(e,t){o(!1),!0===e?(E({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"TENANT",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),Se.success("User saved successfully.")):Se.fail(K(t)?t:"Failed to save user.")})}else Se.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(je,{visible:n}))))}),zt=Object(s.b)(function(e,t){return{}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){(new Z).get("account/wfausers",function(a,n){W(a)&&W(a.data)?e(a.data):t(W(a)&&K(a.message)?a.message:"Failed to load Members.")})}}(t,a))},onReject:function(t,a){return e(function(e,t){return function(a){(new Z).delete("account/rejectuser/"+e,function(e,a){W(e)&&W(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(ie.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){o(!0),e.onLoad(function(e){o(!1),m(e)},function(e){o(!1),Se.fail(e)})},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},K(i)?i.map(function(t,a){return c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.name)),(t.age>0||K(t.gender))&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,(t.age>0?t.age:"")+(t.age>0&&K(t.gender)?", ":"")+(K(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},"On ",c.a.createElement(ke,{className:"fw-600"},Ze(t.createdAt))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.emailId)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Be,{title:"Approve",className:"mR-10",onPress:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){e.history.push("edit-user/"+a+"/true")}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(Be,{title:"Reject",onPress:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReject(a,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==a})),Se.success("User rejected successfully.")):Se.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(ke,{className:"p-20"},"No user found."),c.a.createElement(je,{visible:n})))))}),Jt=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(Yt(t,a,n))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(t){e&&K(e._id)?(new Z).put("home/"+e._id,function(r,c){if(W(r)&&W(r.data)&&r.data.length>0){if(a.isUpToDate&&!a.isError&&K(a.data)){var o=a.data.findIndex(function(e){return e._id===r.data});a.data[o]._id=r.data,a.data[o].number=e.number,t(Kt(a.data,!0,!1,""))}n(!0,"")}else n(!1,c)},e):(new Z).post("home/0",function(r,c){W(r)&&W(r.data)&&r.data.length>0?(a.isUpToDate&&!a.isError&&K(a.data)&&(a.data.push({_id:r.data,number:e.number}),t(Kt(a.data,!0,!1,""))),n(!0,"")):n(!1,c)},e)}}(t,0,n,r))},onCheckNumberAvail:function(t,a,n){return e(function(e,t,a){return function(e){(new Z).get("home/checkno/"+t,function(e,t){W(e)&&W(e.data)&&!0===e.data?a(!0):a(!1)})}}(0,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),p=Object(ie.a)(u,2),f=p[0],E=p[1];Object(r.useEffect)(function(){var t=e.match.params.id;t.length>0&&"0"!==t&&(o(!0),e.onLoad(t,function(e){o(!1),e&&K(e._id)?E(Object(d.a)({},f,{id:e._id,blockId:e._blockId,number:e.number,address:e.address,bedRoom:e.bedRoom,parking:e.parking,description:e.description,members:e.memberIds})):Se.fail("Failed to load house.")},function(e){o(!1),Se.fail(K(e)?e:"Failed to load house.")}))},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Houses",link:"homes"},{title:"Edit House",link:"edit-home/0"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Oe,{className:"form-control",value:f.blockId,onChange:function(e){return E(Object(d.a)({},f,{blockId:e.target.value}))}},c.a.createElement("option",{key:"block0",value:""},"Select Block"),e.blocks&&e.blocks.isUpToDate&&!e.blocks.isError&&K(e.blocks.data)&&e.blocks.data.map(function(e,t){return c.a.createElement("option",{key:"block"+t,value:e._id},e.name)}))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Number",className:"form-control",value:f.number,onChange:function(e){return E(Object(d.a)({},f,{number:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Address",className:"form-control",value:f.address,onChange:function(e){return E(Object(d.a)({},f,{address:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,null,"No of bed rooms: ")),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Ue,{isActive:1===f.bedRoom,text:"1",onPress:function(){return E(Object(d.a)({},f,{bedRoom:1}))}}),c.a.createElement(Ue,{isActive:2===f.bedRoom,text:"2",onPress:function(){return E(Object(d.a)({},f,{bedRoom:2}))}}),c.a.createElement(Ue,{isActive:3===f.bedRoom,text:"3",onPress:function(){return E(Object(d.a)({},f,{bedRoom:3}))}}),c.a.createElement(Ue,{isActive:4===f.bedRoom,text:"4",onPress:function(){return E(Object(d.a)({},f,{bedRoom:4}))}}),c.a.createElement(Ue,{isActive:5===f.bedRoom,text:"5",onPress:function(){return E(Object(d.a)({},f,{bedRoom:5}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Parking",className:"form-control",value:f.parking,onChange:function(e){return E(Object(d.a)({},f,{parking:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Description",className:"form-control",value:f.description,onChange:function(e){return E(Object(d.a)({},f,{description:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-5"},"User(s):"),c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){m(!0)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement(ke,null,function(){var t="";return K(f.members)&&e.users.isUpToDate&&!e.users.isError&&K(e.users.data)&&e.users.data.filter(function(e){return f.members.indexOf(e._id)>=0}).map(function(e,a){return t+=(t.length>0?", ":"")+e.name+(K(e.number)?"("+e.number+")":"")}),t}())),e.users.isUpToDate&&!e.users.isError&&K(e.users.data)&&c.a.createElement(nt.a,{open:i,onClose:function(){m(!1)}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(ve,{className:"bd bdc-blue-500",style:{height:"50%",maxHeight:"50%"}},e.users.data.map(function(e,t){return c.a.createElement(ke,{key:"user"+t,className:"cur-p bdB p-3 mB-1"+(f.members.indexOf(e._id)>=0?" bgc-blue-500 c-white":""),onClick:function(){if(f.members.indexOf(e._id)>=0)E(Object(d.a)({},f,{members:f.members.filter(function(t){return t!==e._id})}));else{var t=f.members;t.push(e._id),E(Object(d.a)({},f,{members:t}))}}},e.name+(e.number?"("+e.number+")":""))})))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:function(){if(K(f.blockId)&&K(f.number)){o(!0);var t={_id:f.id,_blockId:f.blockId,number:f.number,address:f.address,bedRoom:f.bedRoom,parking:f.parking,description:f.description,memberIds:f.members};e.onSave(t,e.user,e.homes,function(e,t){o(!1),!0===e?(E({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),Se.success("House saved successfully.")):Se.fail(K(t)?t:"Failed to save house.")})}else Se.warn("Please fill all the required fields before "+(f.id.length>0?"Update":"Save")+".")}}))),c.a.createElement(je,{visible:n})))))}),Xt=Object(s.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,a,n,r,c){return e(Ye(0,a,n,r,c))},onEnter:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("visitor/enter/"+e+"/"+t,function(e,t){W(e)&&W(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))},onExit:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("visitor/exit/"+e+"/"+t,function(e,t){W(e)&&W(e.data)&&!0===e.data?a(!0):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(!0),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=function(){o(!0),e.onLoad(e.user.client._id,"",p,function(e){o(!1),m(e)},function(e){o(!1),Se.fail(e)})};Object(r.useEffect)(function(){E()},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Visitors",link:"all-visitors"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(it,{user:e.user,appUser:e.appUser,data:i,isActive:p,onActiveChange:function(){f(!p),E()},onEnter:function(t){Object(Pe.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onEnter(t,e.gateNo,function(a){if(o(!1),!0===a){var n=i,r=n.findIndex(function(e){return e._id===t});n[r].isEntered=!0,n[r].enteredBy=e.user.name,n[r].enteredAt=new Date,m(n),Se.success("Visitor entered successfully.")}else Se.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},onExit:function(t){Object(Pe.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onExit(t,e.gateNo,function(e){o(!1),!0===e?(m(i.filter(function(e){return e._id!==t})),Se.success("Visitor exit successfully.")):Se.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})}}),c.a.createElement(je,{visible:n})))))}),Zt=Object(s.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("notifications/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Notification.")})}}(t,a,n))},onPush:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new Z).post("notification/"+e,function(e,r){W(e)&&K(e.data)?n({_id:e.data,title:t.title,body:t.body,createdBy:a.name,createdAt:new Date}):n(null)},t)}}(t,a,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,function(e){o(!1),m(e)},function(e){o(!1),Se.fail(e)})},[]);var g=function(){K(p)&&K(h)?Object(Pe.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){o(!0);var t={title:p,body:h};e.onPush(e.user.client._id,t,e.user,function(e){o(!1),W(e)?(m([e].concat(Object(_t.a)(i))),f(""),N(""),Se.success("Notification pushed successfully.")):Se.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):Se.warn("Please fill all the required fields before Push.")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Notification",link:"notification"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},K(e.user.client.config.notificationTypes)&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},e.user.client.config.notificationTypes.map(function(e,t){return c.a.createElement(Ue,{isActive:e===p,text:e,onPress:function(){return f(e)}})}),c.a.createElement(Ue,{isActive:!K(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),text:"Other",onPress:function(){return f("")}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:p,disabled:K(e.user.client.config.notificationTypes.filter(function(e,t){return e===p})),onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Body",className:"form-control",value:h,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){X(e,g)}})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"mR-10",title:"PUSH",onPress:g}),c.a.createElement(Be,{title:"CLEAR",onPress:function(){f(""),N("")}})),K(i)?i.map(function(e,t){return c.a.createElement(ge,{key:t,className:"mT-5"+(0===t?"":" bdT")},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.title)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.body)),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"Duplicate",onPress:function(){f(e.title),N(e.body)}})))}):c.a.createElement(ke,{className:"p-20"},"No notification found."),c.a.createElement(je,{visible:n})))))}),Qt=function(e,t,a,r){return{type:n.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},$t=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,data:e.Outings}},function(e){return{onLoad:function(t,a,n){return e(function(e,t,a){return function(e){e(Qt([],!1,!1,"")),(new Z).get("outings"+(K(t)?"/"+t:""),function(t,n){W(t)&&W(t.data)?(e(Qt(t.data,!0,!1,"")),a(!0)):a(!1)})}}(0,a,n))},onReturnBack:function(t,a,n,r){return e(function(e,t,a,n){return function(t){(new Z).delete("outing/return/"+e,function(r,c){if(W(r)&&W(r.data)&&!0===r.data){var o=a.data.findIndex(function(t){return t._id===e});a.data[o].isReturned=!0,a.data[o].returnedAt=new Date,t(Qt(a.data,!0,!1,"")),n(!0)}else n(!1)})}}(t,0,n,r))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.client._id,e.appUser.role===R?e.user.homes[e.appUser.homeIndex]._id:"",function(e){o(!1),e||Se.fail("Failed to load Door Locks.")})},[]);return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Door Locks",link:"outings"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},e.appUser.role===R&&(!W(e.data)||!K(e.data.data.filter(function(e){return!0!==e.isReturned})))&&c.a.createElement(ge,{className:"ta-r"},c.a.createElement(Be,{title:"Lock The Door",onPress:function(){e.history.push("new-outing")}})),W(e.data)&&e.data.isUpToDate&&!e.data.isError&&K(e.data.data)?e.data.data.map(function(t,a){return c.a.createElement(ge,{key:"o"+t._id,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t._homeId+" by "+t.createdBy+" on "+Ze(t.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},Ze(t.fromDate)+" to "+Ze(t.toDate))),K(t.place)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.place)),K(t.address)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.address)),t.isReturned&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Returned on "+Ze(t.returnedAt))),e.appUser.role!==R&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,null,"No one in the home")),e.appUser.role===R&&!0!==t.isReturned&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"Open The Door",onPress:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to open the door",message:"Are you sure? You want to open the door?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onReturnBack(a,e.user,e.data,function(e){o(!1),e?Se.success("Successfully opened the door."):Se.fail("Failed to open the door.")})}},{label:"No",onClick:function(){}}]})}})))}):c.a.createElement(ke,{className:"p-20"},e.data.isUpToDate?e.data.isError?e.data.errorMessage:"No door lock found.":"Loading..."),c.a.createElement(je,{visible:n})))))}),ea=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){e&&K(e._id)?r(!1):(new Z).post("outing/"+t,function(t,o){console.log("result:",t),W(t)&&K(t.data)?(e._id=t.data,e.createdBy=a.name,n.data.unshift(e),c(Qt(n.data,!0,!1,"")),r(!0)):r(!1)},e)}}(t,a,n,r,c))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),s=Object(ie.a)(l,2),i=s[0],m=s[1];return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Notice",link:"notice"},{title:"New Outing",link:"new-outing"}]}),c.a.createElement(ge,{className:"bgc-white p-20",style:{minHeight:450}},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"w-100"},"From Date: "),c.a.createElement(ct.a,{onChange:function(e){m(Object(d.a)({},i,{fromDate:e}))},value:i.fromDate})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"w-100"},"To Date: "),c.a.createElement(ct.a,{onChange:function(e){m(Object(d.a)({},i,{toDate:e}))},value:i.toDate})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SUBMIT",onPress:function(){if(W(i.fromDate)&&W(i.toDate)){o(!0);var t={_homeId:e.user.homes[e.appUser.homeIndex].number,fromDate:i.fromDate,toDate:i.toDate,place:i.place,address:i.address,isReturned:!1,createdBy:e.user.name,createdAt:new Date};e.onSave(t,e.user.homes[e.appUser.homeIndex]._id,e.user,e.outings,function(e){o(!1),!0===e?(m({fromDate:new Date,toDate:new Date,place:"",address:"",datePickerType:"",datePickerDate:new Date}),Se.success("Outing submitted successfully.")):Se.fail("Failed to submit Outing.")})}else Se.warn("Please fill all the required fields before submit Outing.")}}))),c.a.createElement(je,{visible:n}))))}),ta=function(e,t,a,r){return{type:n.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},aa=Object(s.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,a){return e(function(e,t){return function(a){a(ta([],!1,!1,"")),(new Z).get("documents/"+e,function(e,n){W(e)&&W(e.data)?(a(ta(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,a))},onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(a){t&&K(t._id)?(new Z).put("document/"+t._id,function(e,n){if(W(e)&&K(e.data)){var o=r.findIndex(function(t){return t._id===e.data._id});r[o]._id=e.data._id,r[o].title=t.title,r[o].description=t.description,r[o].file=t.file,a(ta(r,!0,!1,"")),c(!0)}else c(!1)},t):(new Z).post("document/"+e,function(e,o){W(e)&&K(e.data)?(r.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:n.name,createdAt:new Date}),a(ta(r,!0,!1,"")),c(!0)):c(!1)},t)}}(t,a,0,r,c,o))},onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).delete("document/"+e,function(r,c){W(r)&&W(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(ta(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))},onUpload:function(t,a){return e(We(t,a))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(ie.a)(l,2),i=(s[0],s[1]),m=Object(r.useState)({id:"",homeId:K(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}),u=Object(ie.a)(m,2),p=u[0],f=u[1];Object(r.useEffect)(function(){o(!0),e.onLoad(e.user.homes[e.homeIndex]._id,function(e){o(!1),e||Se.fail("Failed to load Documents.")})},[]);var E=function(){f(Object(d.a)({},p,{id:"",homeId:K(e.user.homes)?e.user.homes[0]._id:"",title:"",description:"",fileName:""}))};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"My Documents",link:"my-documents"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Title",className:"form-control",value:p.title,onChange:function(e){return f(Object(d.a)({},p,{title:e.target.value}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:p.description,onChange:function(e){return f(Object(d.a)({},p,{description:e.target.value}))}})),K(e.user.homes)&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-10"},"House:"),e.user.homes.map(function(e,t){return c.a.createElement(Ue,{isActive:e._id===p.homeId,text:e.number,key:"home"+t,onPress:function(){return f(Object(d.a)({},p,{homeId:e._id}))}})})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:function(t){var a=t.target.files[0];if(a&&a.name){var n=a.name.split(".");if(n&&n.length>1){var r=z();r+="."+n[n.length-1],o(!0);var c={file:a,type:a.type,name:r};e.onUpload(c,function(e,t){o(!1),e?f(Object(d.a)({},p,{fileName:r})):Se.fail(t||"Failed to upload file.")})}}}}),K(p.fileName)&&c.a.createElement(ke,{className:"mL-15"},p.fileName)),c.a.createElement(ge,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"mR-10",title:"SAVE",onPress:function(){if(K(p.title)&&K(p.fileName)){o(!0);var t={_id:p.id,title:p.title,description:p.description,file:p.fileName,createdBy:e.user.name,createdAt:new Date};e.onSave(p.homeId,t,e.homeIndex,e.user,e.documents.data,function(e){o(!1),!0===e?(i(!1),E(),Se.success("Document saved successfully.")):Se.fail("Failed to save document.")})}else Se.warn("Please fill all the required fields before "+(p.id.length>0?"Update":"Save")+".")}}),c.a.createElement(Be,{title:"CLEAR",onPress:E})),e.documents.isUpToDate&&!e.documents.isError&&K(e.documents.data)?e.documents.data.map(function(t,a){return c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.createdBy+" on "+Xe(t.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.title)),K(t.description)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.description)),K(e.user.homes.filter(function(e){return e._id===t._id}))&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"House: "+e.user.homes.filter(function(e){return e._id===t._id})[0].number)),K(t.file)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:D+t.file},t.file)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(!0),e.onRemove(a,e.documents.data,function(e){o(!1),!0===e?Se.success("Document removed successfully."):Se.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},e.documents.isUpToDate?"No document found.":e.documents.isError?e.documents.errorMessage:"No document found."),c.a.createElement(je,{visible:n})))))}),na=function(e,t,a,r){return{type:n.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ra=function(e,t,a,r){return{type:n.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}},ca=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onRemove:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).delete("block/"+e,function(r,c){W(r)&&W(r.data)&&!0===r.data?(t=t.filter(function(t,a){return t._id!==e}),n(na(t,!0,!1,"")),a(!0)):a(!1)})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(10),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=function(){K(i)&&e.blocks.isUpToDate&&!e.blocks.isError&&K(e.blocks.data)?(f(e.blocks.data.filter(function(e){return(e.name+"").toLocaleLowerCase().indexOf(i.toLowerCase())>=0})),N(10)):(f([]),N(10))};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Blocks",link:"blocks"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500 mB-3",onClick:function(){return e.history.push("edit-block/0")}},"Add New")),c.a.createElement(ge,{className:"mB-3 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Search Block",className:"form-control mR-10 d-i",style:{width:"calc(100% - 40px)"},value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){X(e,g)}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:g},c.a.createElement("i",{className:"ti-search pdd-right-10 fw-900"}))),K(p)?p.slice(0,h).map(function(t,a){return c.a.createElement(ge,{key:"block"+a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Name: "+t.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Description: "+(K(t.description)?t.description:""))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"mR-10"},"Houses: "),K(e.homes.data)&&K(e.homes.data.filter(function(e){return e._blockId===t._id}))?e.homes.data.filter(function(e){return e._blockId===t._id}).map(function(e,t){return c.a.createElement(se.b,{to:"edit-home/"+e._id,className:"mR-10"},e.number)}):c.a.createElement(ke,null,"No house assigned under this block.")),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){e.history.push("edit-block/"+t._id)}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){var t=K(e.homes.data)?e.homes.data.filter(function(e){return e._blockId===a}):[];if(K(t)){var n="";t.map(function(e){n+=(n.length>0?", ":"")+e.number}),n=t.length>1?"Houses "+n+" are assigned under this block. Please move these houses to other block and try to delete":"House "+n+" is assigned under this block. Please move this house to other block and try to delete.",Se.fail(n)}else o(!0),e.onRemove(a,e.blocks.data,function(e){o(!1),!0===e?(g(),Se.success("House removed successfully.")):Se.fail("Failed to remove house.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"}))))}):c.a.createElement(ke,{className:"p-20"},"No block match with your search."),p.length>h&&c.a.createElement(ge,{className:"bdB mT-5"},c.a.createElement(ge,{className:"p-10"},c.a.createElement(ke,{className:"fw-600 c-blue-500",onClick:function(){N(h+10)}},"Show More"))),c.a.createElement(je,{visible:n})))))}),oa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onSave:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(o){t&&K(t._id)?(new Z).put("block/"+t._id,function(e,a){if(W(e)&&K(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].name=t.name,n[r].description=t.description,o(na(n,!0,!1,"")),c(!0,"")}else c(!1,a)},t):(new Z).post("block/"+e,function(e,l){W(e)&&W(e.data)&&K(e.data.blockId)?(n.unshift({_id:e.data.blockId,name:t.name,description:t.description,createdBy:a.name}),o(na(n,!0,!1,"")),K(e.data.homes)&&(e.data.homes.forEach(function(e){e.memberIds=e.members,delete e.members}),r=r.concat(e.data.homes),o(ra(r,!0,!1,""))),c(!0,"")):c(!1,l)},t)}}(t,a,n,r,c,o))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)(""),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)(0),v=Object(ie.a)(g,2),y=v[0],T=v[1];Object(r.useEffect)(function(){var t=e.match.params.id;if(t.length>0&&"0"!==t&&e.blocks&&K(e.blocks.data)){var a=e.blocks.data.filter(function(e,a){return e._id===t});K(a)&&(m(a[0]._id),f(a[0].name),N(a[0].description))}},[]);var w=function(){if(K(p)&&(K(i)||y>0))if(K(e.blocks.data)&&K(e.blocks.data.filter(function(e){return e.name===p})))Se.fail("Block with same name already exists. Please give different name.");else{o(!0);var t={_id:i,name:p,description:h};t=Object.assign(t,{homeCount:y}),e.onSave(e.user.client._id,t,e.user,e.blocks&&e.blocks.data?e.blocks.data:[],e.homes&&e.homes.data?e.homes.data:[],function(e,t){o(!1),!0===e?(m(""),f(""),N(""),T(0),Se.success(K(i)?"Block saved successfully.":"Block saved and house(s) created successfully.")):Se.fail(K(t)?t:"Failed to save block.")})}else Se.warn("Please fill all the required fields before "+(i.length>0?"Update":"Save")+".")};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Name",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Description",className:"form-control",value:h,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){X(e,w)}})),!K(i)&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"number",placeholder:"Number of houses in this block",className:"form-control",value:y>0?y+"":"",onChange:function(e){return T(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SAVE",onPress:w}))),c.a.createElement(je,{visible:n}))))}),la=function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(0),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(""),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)((new Date).getMonth()),b=Object(ie.a)(E,2),h=b[0],N=b[1],g=Object(r.useState)((new Date).getFullYear()),v=Object(ie.a)(g,2),y=v[0],T=v[1],w=Object(r.useState)(""),O=Object(ie.a)(w,2),k=O[0],B=O[1],j=Object(r.useState)(!1),C=Object(ie.a)(j,2),A=C[0],S=C[1],U=Object(r.useState)(!1),_=Object(ie.a)(U,2),I=_[0],x=_[1],D=Object(r.useState)([]),P=Object(ie.a)(D,2),L=P[0],R=P[1],M=function(){m(0),f(""),N((new Date).getMonth()),T((new Date).getFullYear()),B(""),S(!1),x(!1),R([])};return c.a.createElement(ge,{className:"pL-15 pR-15"},c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Amount",className:"form-control",value:i>0?i+"":"",onChange:function(e){return m(+e.target.value.replace(/[^0-9]/g,""))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mT-15"},"Payment for "+y+" "),c.a.createElement(Oe,{className:"form-control",value:h,onChange:function(e){return N(e.target.value)}},G.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return c.a.createElement("option",{key:"month"+t,value:e.value},e.title)}))),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-15"},"Apply to House(s): "+(I?"":L.length)),c.a.createElement(st,{isActive:I,text:"All Homes",onPress:function(){return x(!I)}})),!I&&c.a.createElement(ve,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},L.map(function(e,t){return c.a.createElement(ke,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){R(L.filter(function(t,a){return t._id!==e._id}))}},e.number)})),!I&&c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:k,onChange:function(e){S(!0),B(e.target.value)}})),!I&&A&&K(k)&&e.homes&&e.homes.data.length>0&&c.a.createElement(ve,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(k.toLowerCase())>=0&&L.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(ke,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=L;t.push(e),R(t)}},e.number)})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"mR-10",title:"SAVE",onPress:function(){if(i>0&&(I||L.length>0)){var t=[];L.map(function(e,a){return t.push(e._id)});var a={amount:i,description:p,month:h,year:y,isAllHome:I,homes:t};o(!0),e.onSave(e.user.client._id,a,e.user,function(e,t){o(!1),!0===e?(M(),Se.success("Payment saved successfully.")):Se.fail(t||"Failed to save payment.")})}else Se.warn("Please fill all required fields before Save.")}}),c.a.createElement(Be,{title:"CLEAR",onPress:M})),c.a.createElement(je,{visible:n}))},sa=function(e){var t=Object(r.useState)({isLoading:!1,isShowSearch:!0,fromDate:new Date,toDate:new Date,datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}),a=Object(ie.a)(t,2),n=a[0],o=a[1];return c.a.createElement(ge,{className:"pL-15 pR-15"},n.isShowSearch?c.a.createElement(ge,null,c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(ke,{className:"mR-15"},"House(s): "+(n.homes.length>0?n.homes.length:"All"))),c.a.createElement(ve,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},n.homes.map(function(e,t){return c.a.createElement(ke,{className:"cur-p mR-6 c-blue-500",key:"ho"+t,onClick:function(){o(Object(d.a)({},n,{homes:n.homes.filter(function(t,a){return t._id!==e._id})}))}},e.number)})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Enter House Number",className:"form-control p-6 bd bdrs-5",value:n.searchText,onChange:function(e){return o(Object(d.a)({},n,{showHomes:!0,searchText:e.target.value}))}})),n.showHomes&&K(n.searchText)&&e.homes&&e.homes.data.length>0&&c.a.createElement(ve,{className:"mT-3 mB-3 pT-5 pB-5 ov-s"},e.homes.data.filter(function(e,t){return e.number.toLowerCase().indexOf(n.searchText.toLowerCase())>=0&&n.homes.filter(function(t){return t._id===e._id}).length<1}).map(function(e,t){return c.a.createElement(ke,{className:"cur-p mR-6",key:"ho"+t,onClick:function(){var t=n.homes;t.push(e),o(Object(d.a)({},n,{homes:t}))}},e.number)})),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"SEARCH",onPress:function(){if(n.fromDate&&n.toDate){var t=[];n.homes.map(function(e,a){return t.push(e._id)});var a={fromDate:n.fromDate,toDate:n.toDate,homes:t};o(Object(d.a)({},n,{isLoading:!0})),e.onSearch(e.user.client._id,a,e.user,function(e){o(Object(d.a)({},n,{isLoading:!1,isShowSearch:!1,data:e}))},function(e){o(Object(d.a)({},n,{isLoading:!1})),Se.fail(e||"Failed to load payment.")})}else Se.warn("Please fill all required fields before Search.")}}))):c.a.createElement(ge,null,c.a.createElement(ke,{className:"fl-r cur-p c-blue-500 fw-600 ta-c",onClick:function(){o(Object(d.a)({},n,{isShowSearch:!0}))}},"Show Search")),c.a.createElement(ge,null,K(n.data)?n.data.map(function(e,t){return c.a.createElement(ge,{key:t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e._homeId+" by "+e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},"Rs."+e.amount+" for "+G.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(K(e.mode)?" "+e.mode:"")+(K(e.type)?" "+e.type:""))),K(e.description)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.description)),c.a.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{title:"Update",onPress:function(){o(Object(d.a)({},n,{isShowUpdateModel:!0,uPaymentId:e._id,uAmount:e.amount,uDescription:e.description}))}})))}):c.a.createElement(ke,{className:"p-20"},"No payment found.")),c.a.createElement(nt.a,{open:n.isShowUpdateModel,onClose:function(){o(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""}))}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15"},c.a.createElement(ge,null,c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Te,{type:"text",placeholder:"Amount",className:"form-control",value:n.uAmount>0?n.uAmount+"":"",onChange:function(e){return o(Object(d.a)({},n,{uAmount:+e.target.value.replace(/[^0-9]/g,"")}))}})),c.a.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:n.uDescription,onChange:function(e){return o(Object(d.a)({},n,{uDescription:e.target.value}))}})),c.a.createElement(ge,{className:"cur-p mT-3 mB-3 pT-5 pB-5"},c.a.createElement(Be,{className:"mR-10",title:"SAVE",onPress:function(){if(K(n.uPaymentId)&&n.uAmount>0){var t={amount:n.uAmount,description:n.uDescription};o(Object(d.a)({},n,{isLoading:!0})),e.onUpdate(n.uPaymentId,t,e.user,function(e,t){if(o(Object(d.a)({},n,{isLoading:!1})),!0===e){var a=n.data,r=a.findIndex(function(e){return e._id===n.uPaymentId});a[r].amount=n.uAmount,a[r].description=n.uDescription,o(Object(d.a)({},n,{isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a})),Se.success("Payment updated successfully.")}else Se.fail(t||"Failed to update payment.")})}else Se.warn("Please fill all required fields before update.")}}),c.a.createElement(Be,{title:"CLEAR",onPress:function(){o(Object(d.a)({},n,{uAmount:0,uDescription:""}))}}))))),c.a.createElement(je,{visible:n.isLoading}))},ia=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,a,n,r){return e(Ve(0,a,n,r))},onSave:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new Z).post("payment/"+e,function(e,t){W(e)&&W(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to save Payment.")},t)}}(t,a,0,r))},onSearch:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(a){(new Z).post("payments/"+e,function(e,t){W(e)?n(e.data):r(K(t)?t:"Failed to load Payments.")},t)}}(t,a,0,r,c))},onUpdate:function(t,a,n,r){return e(function(e,t,a,n){return function(a){(new Z).put("payment/"+e,function(e,t){W(e)&&W(e.data)&&!0===e.data?n(!0,""):n(!1,t||"Failed to update Payment.")},t)}}(t,a,0,r))}}})(function(e){var t=Object(r.useState)(1),a=Object(ie.a)(t,2),n=a[0],o=a[1];return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Payment",link:"payment"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"NEW"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"HISTORY")),c.a.createElement(ge,{className:"tab-content p-15"},1===n?c.a.createElement(la,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSave:e.onSave}):c.a.createElement(sa,{history:e.history,appUser:e.appUser,user:e.user,homes:e.homes,onSearch:e.onSearch,onUpdate:e.onUpdate}))))))}),ma=function(e){var t=e.blocks,a=e.data,n="";if(a&&K(a._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var c=t.data.filter(function(e,t){return e._id===a._blockId});c&&c.length>0&&(n=c[0].name)}return a&&K(a._id)?r.createElement(ge,null,r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Block: "+n)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Number: "+a.number)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Address: "+a.address)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"No of bed room(s): "+a.bedRoom)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Parking: "+a.parking)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Description: "+a.description))):r.createElement(ke,null,"No data found.")},ua=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Members.")}))},[]),c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Members")),K(n)?n.map(function(t,a){return c.a.createElement(ge,{key:a,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},(K(t.createdBy)?t.createdBy:"")+" on "+Xe(t.createdAt))),e.user.client.config.appType==Y&&K(t.number)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),K(t.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.mobileNo)),K(t.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.emailId)),e.user.client.config.appType==H&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.type)))}):c.a.createElement(ke,null,"No data found."))},da=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Vehicles")),K(n)?n.map(function(e,t){return c.a.createElement(ge,{key:t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.type)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.number)))}):c.a.createElement(ke,null,"No data found."))},pa=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Servants.")}))},[]);return c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Servants")),K(n)?n.map(function(e,t){return c.a.createElement(ge,{key:t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Ze(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.name)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.age+", "+("M"===e.gender?"Male":"F"===e.gender?"Female":"Other"))),K(e.mobileNo)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.mobileNo)),K(e.emailId)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.emailId)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.takeaways,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(ke,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Takeaways"))),i===e._id&&c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},"Takeaways")),c.a.createElement(ge,{className:"p-15"},K(p)?p.map(function(e,t){return c.a.createElement(ge,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Ze(e.updatedAt))),c.a.createElement(ge,null,c.a.createElement(ke,null,e.title)),c.a.createElement(ge,null,c.a.createElement(ke,null,e.description)),e.isExit?c.a.createElement(ge,null,c.a.createElement(ke,{className:"c-green-600"},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+Ze(e.exitAt))):c.a.createElement(ge,null,c.a.createElement(ke,{className:"c-red-600"},"Still not exit.")))}):c.a.createElement(ke,{className:"p-20"},"No takeaway found."))))}):c.a.createElement(ke,null,"No data found."))},fa=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Vehicles.")}))},[]);return c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Tickets")),K(n)?n.map(function(e,t){return c.a.createElement(ge,{key:"tkt"+t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" from "+e._homeId+" on "+Ze(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.title)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.status)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.comments,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(ke,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Comments"))),i===e._id&&c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},"Comments")),c.a.createElement(ge,{className:"p-15"},K(p)?p.map(function(e,t){return c.a.createElement(ge,{key:"tkycmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(ge,null,c.a.createElement(ke,{className:"fw-600"},e.createdByName+" on "+Ze(e.updatedAt))),c.a.createElement(ge,null,c.a.createElement(ke,null,e.comment)))}):c.a.createElement(ke,{className:"p-20"},"No comment found."))))}):c.a.createElement(ke,null,"No data found."))},Ea=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!0),s=Object(ie.a)(l,2),i=s[0],m=s[1];Object(r.useEffect)(function(){u()},[]);var u=function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,i,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Visitors.")}))};return c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Visitors")),c.a.createElement(it,{data:n,isActive:i,user:e.user,appUser:e.appUser,onActiveChange:function(){m(!i),u()}}))},ba=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)([]),d=Object(ie.a)(u,2),p=d[0],f=d[1];Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Payments.")}))},[]);return c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Payments")),K(n)?n.map(function(e,t){return c.a.createElement(ge,{key:t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Rs. "+e.amount+" for "+G.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear+(K(e.mode)?" "+e.mode:"")+(K(e.type)?" "+e.type:""))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Amount Paid Rs. "+function(e){var t=0;return K(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,a){return t+=e.amount}),t}(e.transactions))),K(e.description)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){var t,a;t=e._id,a=e.transactions,i===t?(m(""),f([])):(m(t),f(a))}},c.a.createElement(ke,{className:"cur-p c-blue-500"},(i===e._id?"Hide":"View")+" Transactions"))),i===e._id&&c.a.createElement(ge,{className:"mT-5 mB-5"},c.a.createElement(ge,{className:"bdB"},c.a.createElement(ke,{className:"fw-600"},"Transactions")),c.a.createElement(ge,{className:"mT-3"},K(p)?p.map(function(e,t){return c.a.createElement(ge,{key:"tktcmt"+t,className:"pL-3 pR-3 pT-5 pB-5"+(0===t?"":" bdT")},c.a.createElement(ge,{className:"fw-600"},c.a.createElement(ke,null,e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,null,c.a.createElement(ke,null,"Ref Id: "+e.txnRef)),c.a.createElement(ge,null,c.a.createElement(ke,null,"Txn Id: "+e.txnId)),c.a.createElement(ge,null,c.a.createElement(ke,null,"Amount: "+e.amount)),c.a.createElement(ge,null,c.a.createElement(ke,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),K(e.reason)&&c.a.createElement(ge,null,c.a.createElement(ke,null,"Reason: "+e.reason)))}):c.a.createElement(ke,{className:"p-20"},"No transaction found."))))}):c.a.createElement(ke,null,"No data found."))},ha=function(e){var t=Object(r.useState)([]),a=Object(ie.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)(function(){e.homeId.length>0&&(e.onToggleLoading(!0),e.onLoad(e.homeId,function(t){e.onToggleLoading(!1),o(t)},function(t){e.onToggleLoading(!1),Se.fail(K(t)?t:"Failed to load Vehicles.")}))},[]),c.a.createElement(ge,null,c.a.createElement(ge,{className:"ta-c mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"c-blue-700 fw-600 mB-10"},"Documents")),K(n)?n.map(function(e,t){return c.a.createElement(ge,{key:t,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.createdBy+" on "+Xe(e.createdAt))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},e.title)),K(e.description)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.description)),K(e.file)&&c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:D+e.file},e.file)))}):c.a.createElement(ke,null,"No data found."))},Na=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,a,n){return e(Yt(t,a,n))},onLoadMembers:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("members/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadVehicles:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("vehicles/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Members.")})}}(t,a,n))},onLoadServants:function(t,a,n){return e(wt(t,a,n))},onLoadTickets:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("tickets/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Tickets.")})}}(t,a,n))},onLoadVisitors:function(t,a,n,r){return e(Ye(0,t,a,n,r))},onLoadPayments:function(t,a,n){return e(Ve(0,t,a,n))},onLoadDocuments:function(t,a,n){return e(function(e,t,a){return function(n){(new Z).get("documents/"+e,function(e,n){W(e)&&W(e.data)?t(e.data):a(e&&K(e.message)?e.message:"Failed to load Documents.")})}}(t,a,n))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(ie.a)(l,2),i=s[0],m=s[1],u=Object(r.useState)(1),d=Object(ie.a)(u,2),p=d[0],f=d[1],E=Object(r.useState)({}),b=Object(ie.a)(E,2),h=b[0],N=b[1];Object(r.useEffect)(function(){var t=e.match.params.id;m(t),t.length>0&&(o(!0),e.onLoad(t,function(e){o(!1),e&&K(e._id)?N(e):Se.fail("Failed to load house.")},function(e){o(!1),Se.fail(K(e)?e:"Failed to load house.")}))},[]);var g=function(e){o(e)};return c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Houses",link:"homes"},{title:"View House",link:"view-home"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"tab-bar"},c.a.createElement("span",{className:"tab"+(1===p?" active":""),onClick:function(){return f(1)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-a700 ti-info-alt"}))),c.a.createElement("span",{className:"tab"+(2===p?" active":""),onClick:function(){return f(2)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-brown-500 fa fa-users"}))),c.a.createElement("span",{className:"tab"+(3===p?" active":""),onClick:function(){return f(3)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-car"}))),c.a.createElement("span",{className:"tab"+(4===p?" active":""),onClick:function(){return f(4)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-deep-purple-500 fa fa-female"}))),c.a.createElement("span",{className:"tab"+(5===p?" active":""),onClick:function(){return f(5)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-orange-500 ti-headphone-alt"}))),c.a.createElement("span",{className:"tab"+(6===p?" active":""),onClick:function(){return f(6)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-pink-500 fa fa-id-card-o"}))),e.user.client.config.hasPayment&&c.a.createElement("span",{className:"tab"+(7===p?" active":""),onClick:function(){return f(7)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-indigo-500 fa fa-credit-card"}))),c.a.createElement("span",{className:"tab"+(8===p?" active":""),onClick:function(){return f(8)}},c.a.createElement("span",{className:"icon-holder"},c.a.createElement("i",{className:"c-blue-500 fa fa-file-text"})))),c.a.createElement(ge,{className:"p-15"},1===p?c.a.createElement(ma,{blocks:e.blocks,data:h}):2===p?c.a.createElement(ua,{user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadMembers}):3===p?c.a.createElement(da,{homeId:i,onToggleLoading:g,onLoad:e.onLoadVehicles}):4===p?c.a.createElement(pa,{homeId:i,onToggleLoading:g,onLoad:e.onLoadServants}):5===p?c.a.createElement(fa,{homeId:i,onToggleLoading:g,onLoad:e.onLoadTickets}):6===p?c.a.createElement(Ea,{appUser:e.appUser,user:e.user,homeId:i,onToggleLoading:g,onLoad:e.onLoadVisitors}):7===p?c.a.createElement(ba,{homeId:i,onToggleLoading:g,onLoad:e.onLoadPayments}):c.a.createElement(ha,{homeId:i,onToggleLoading:g,onLoad:e.onLoadDocuments}))),c.a.createElement(je,{visible:n}))))}),ga=function(e,t,a,r){return{type:n.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:a,errorMessage:r}}};function va(e,t){try{return t>0?100*e/t:0}catch(a){return J(a,"calc.percentage"),0}}var ya=function(e){var t=Object(r.useState)({isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=function(){if(K(n.topic)&&K(n.description)&&W(n.fromDate)&&W(n.toDate)&&K(n.pollOption.filter(function(e){return K(e)}))){o(Object(d.a)({},n,{isLoading:!0}));var t={_id:n.id,topic:n.topic,description:n.description,isAllowMultiple:n.isAllowMultiple,isOneVotePerFlat:n.isOneVotePerFlat,isAnonymous:n.isAnonymous,fromDate:n.fromDate,toDate:n.toDate,options:n.pollOption.filter(function(e){return K(e)})};e.onSave(e.user.client._id,t,e.polls.data,e.user,function(e){o(Object(d.a)({},n,{isLoading:!1})),!0===e?(o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})),Se.success("Poll saved successfully.")):Se.fail("Failed to save pol.")})}else Se.warn("Please fill all the required fields before "+(n.id.length>0?"Update":"Save")+".")};return c.a.createElement(ge,null,!1===n.isEdit&&c.a.createElement(ge,{className:"bdB mT-5 pB-5"},c.a.createElement(Be,{title:"ADD NEW",onPress:function(){o(Object(d.a)({},n,{isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}))}})),!0===n.isEdit&&0===n.id.length?c.a.createElement(ge,{key:"p0",className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return o(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return o(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return o(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return o(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return o(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Options: ")),K(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(ge,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,o(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],o(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"No option found.")),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!K(n.pollOption.filter(function(e){return!K(e)}))){var e=n.pollOption;e.push(""),o(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(ke,null,"Add More +"))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:l},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):[],W(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&K(e.polls.data)?e.polls.data.map(function(t,a){return!0===n.isEdit&&n.id===t._id?c.a.createElement(ge,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",placeholder:"Topic",className:"form-control",value:n.topic,onChange:function(e){return o(Object(d.a)({},n,{topic:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(we,{placeholder:"Description",className:"form-control",value:n.description,onChange:function(e){return o(Object(d.a)({},n,{description:e.target.value}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{fromDate:e}))},value:n.fromDate})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ct.a,{onChange:function(e){o(Object(d.a)({},n,{toDate:e}))},value:n.toDate})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return o(Object(d.a)({},n,{isAllowMultiple:!n.isAllowMultiple}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return o(Object(d.a)({},n,{isOneVotePerFlat:!n.isOneVotePerFlat}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:n.isAnonymous,text:"Anonymous Voting",onPress:function(){return o(Object(d.a)({},n,{isAnonymous:!n.isAnonymous}))}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Options: ")),K(n.pollOption)?n.pollOption.map(function(e,t){return c.a.createElement(ge,{key:"pop"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(Te,{type:"text",key:"popt"+t,placeholder:"Option"+(t+1),className:"form-control",value:e,onChange:function(e){var a=n.pollOption;a[t]=e.target.value,o(Object(d.a)({},n,{pollOption:a}))}}),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){var e=n.pollOption;delete e[t],o(Object(d.a)({},n,{pollOption:e}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))}):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"No option found.")),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{onClick:function(){if(!K(n.pollOption.filter(function(e){return!K(e)}))){var e=n.pollOption;e.push(""),o(Object(d.a)({},n,{pollOption:e}))}}},c.a.createElement(ke,null,"Add More +"))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:l},c.a.createElement("i",{className:"c-green-500 fa fa-check"})),c.a.createElement("span",{className:"icon-holder cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]}))}},c.a.createElement("i",{className:"c-red-500 fa fa-times"})))):c.a.createElement(ge,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.topic)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,Xe(t.fromDate)+" to "+Xe(t.toDate))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAllowMultiple?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(ke,{className:!0===t.isAllowMultiple?"c-white":""},"Allow Multiple Votes"))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isOneVotePerFlat?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(ke,{className:!0===t.isOneVotePerFlat?"c-white":""},"One Vote per Flat"))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ge,{className:"bd pT-3 pB-3 pL-5 pR-5 "+(!0===t.isAnonymous?"bgc-blue-600 bdc-blue-600":"mL-5")},c.a.createElement(ke,{className:!0===t.isAnonymous?"c-white":""},"Anonymous Voting"))),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,"Options: ")),K(t.options)?t.options.map(function(e,t){return c.a.createElement(ge,{key:"po"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{key:"pot"+t},e))}):c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"p-10"},"No option found.")),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},t.fromDate>new Date&&c.a.createElement("span",{className:"icon-holder mR-10 cur-p",onClick:function(){o(Object(d.a)({},n,{isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:K(t.options)?t.options:[]}))}},c.a.createElement("i",{className:"c-blue-500 fa fa-pencil"})),c.a.createElement("span",{className:"icon-holder mR-25 cur-p",onClick:function(){var a;a=t._id,Object(Pe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){o(Object(d.a)({},n,{isLoading:!0})),e.onRemove(a,e.polls.data,e.user._id,function(e){o(Object(d.a)({},n,{isLoading:!1})),!0===e?Se.success("Poll removed successfully."):Se.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})}},c.a.createElement("i",{className:"c-red-500 fa fa-trash"})),c.a.createElement(ke,{className:"cur-p c-blue-500",onClick:function(){o(Object(d.a)({},n,{showVotePoll:t}))}},"View Votes")))}):c.a.createElement(ke,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No poll found.":"Loading..."),c.a.createElement(nt.a,{open:W(n.showVotePoll)&&n.showVotePoll._id.length>0,onClose:function(){return o(Object(d.a)({},n,{showVotePoll:{_id:""}}))}},c.a.createElement(ge,{className:"mT-30 mB-25 mL-15 mR-15",style:{height:"80%"}},c.a.createElement(ge,null,function(){if(W(n.showVotePoll)&&n.showVotePoll._id.length>0){var e=[];return n.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),c.a.createElement(ge,{className:"p-15"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},n.showVotePoll.topic)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,n.showVotePoll.description)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},"Votes: "+n.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return c.a.createElement(ge,{key:"pvo"+t,className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,e.votes+" ("+va(e.votes,n.showVotePoll.votes.length)+"%) - "+e.option))}))}return""}()))),c.a.createElement(je,{visible:n.isLoading}))},Ta=function(e){var t=new Date,a=Object(r.useState)(!1),n=Object(ie.a)(a,2),o=n[0],l=n[1],s=Object(r.useState)(""),i=Object(ie.a)(s,2),m=i[0],u=i[1],d=Object(r.useState)([]),p=Object(ie.a)(d,2),f=p[0],E=p[1],b=Object(r.useState)(new Date(t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear())),h=Object(ie.a)(b,2),N=h[0];h[1];return c.a.createElement(ge,null,W(e.polls)&&e.polls.isUpToDate&&!e.polls.isError&&K(e.polls.data.filter(function(e){return K(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}))?e.polls.data.filter(function(e){return K(e.options)&&new Date(e.fromDate)<=new Date&&new Date(e.toDate)>=N}).map(function(t,a){return c.a.createElement(ge,{key:"p"+t._id,className:"bdB mT-5"},c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},t.topic)),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.description)),(!0!==t.isOneVotePerFlat||!K(t.votes)||!K(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&t.options.map(function(a,n){return c.a.createElement(ge,{key:"popt"+n,className:"mT-1 mB-3 p-2"},c.a.createElement(st,{isActive:m===t._id&&K(f.filter(function(e){return e.option===n})),text:a,onPress:function(){return function(t,a){if(m===t._id)if(K(f.filter(function(e){return e.option===a})))E(f.filter(function(e){return e.option!==a}));else{var n=[];t.isAllowMultiple&&(n=f),n.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),E(n)}else{var r=[];r.push({_homeId:e.user.homes[e.appUser.homeIndex]._id,_memberId:e.user._id,option:a,isActive:!0,createdBy:e.user._id}),u(t._id),E(r)}}(t,n)}}))}),(!0!==t.isOneVotePerFlat||!K(t.votes)||!K(t.votes.filter(function(t){return t._homeId===e.user.homes[e.appUser.homeIndex]._id})))&&c.a.createElement(ge,{className:"mT-5"},c.a.createElement(Be,{title:"Vote",onPress:function(){return a=t._id,void(m===a&&K(f)?(l(!0),e.onVote(a,f,e.polls,e.user,e.appUser,function(e){l(!1),!0===e?(u(""),E([]),Se.success("Your vote saved successfully.")):Se.fail("Failed to save your vote.")})):Se.warn("Please select any option to vote."));var a}})),c.a.createElement(ge,{className:"mT-1 mB-3 p-2"},c.a.createElement(ke,{className:"fw-600"},"Your Votes:")),K(t.options)&&function(e){var t=[];return e.options.map(function(a,n){return t.push({option:a,votes:e.votes.filter(function(e){return e.option===n}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,a){return c.a.createElement(ge,{key:"pvo"+a,className:"mT-1 mB-3 p-2"},c.a.createElement(ke,null,t.votes+" ("+va(t.votes,e.votes.length)+"%) - "+t.option))})}(t))}):c.a.createElement(ke,{className:"p-20"},e.polls.isUpToDate?e.polls.isError?e.polls.errorMessage:"No active poll found.":"Loading..."),c.a.createElement(je,{visible:o}))},wa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,a){return e(Lt(t,a))},onLoadPoll:function(t,a,n){return e(function(e,t,a){return function(t){t(ga([],!1,!1,"")),(new Z).get("polls/"+e,function(e,n){W(e)&&W(e.data)?(t(ga(e.data,!0,!1,"")),a(!0)):a(!1)})}}(t,0,n))},onSavePoll:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){t&&K(t._id)?(new Z).put("poll/"+t._id,function(e,n){if(W(e)&&K(e.data)){var o=a.findIndex(function(t){return t._id===e.data});a[o]._id=e.data,a[o].topic=t.topic,a[o].description=t.description,a[o].isAllowMultiple=t.isAllowMultiple,a[o].isOneVotePerFlat=t.isOneVotePerFlat,a[o].isAnonymous=t.isAnonymous,a[o].fromDate=t.fromDate,a[o].toDate=t.toDate,a[o].options=t.options,c(ga(W(a)?a:[],!0,!1,"")),r(!0)}else r(!1)},t):(new Z).post("poll/"+e,function(e,o){W(e)&&K(e.data)?(t._id=e.data,t.createdBy=n.name,a.unshift(t),c(ga(W(a)?a:[],!0,!1,"")),r(!0)):r(!1)},t)}}(t,a,n,r,c))},onRemovePoll:function(t,a,n,r){return e(function(e,t,a,n){return function(r){(new Z).delete("poll/"+e,function(a,c){W(a)&&W(a.data)&&!0===a.data?(t=t.filter(function(t,a){return t._id!==e}),r(ga(W(t)?t:[],!0,!1,"")),n(!0)):n(!1)},{Id:e,UserId:a})}}(t,a,n,r))},onVote:function(t,a,n,r,c,o){return e(function(e,t,a,n,r,c){return function(n){(new Z).post("poll/vote/"+e,function(t,r){if(W(t)&&K(t.data)){var o=a.data.findIndex(function(t){return t._id===e});if(a.data[o].votes=t.data,n(ga(a.data,!0,!1,"")),a.isUpToDate&&!a.isError&&K(a.data)){var l=a.data,s=l.findIndex(function(t){return t._id===e});l[s].votes=t.data,n(ga(l,!0,!1,""))}c(!0)}else c(!1)},{votes:t})}}(t,a,n,0,0,o))}}})(function(e){var t=Object(r.useState)(!W(e.user)||e.appUser.role!==M&&e.appUser.role!==V?2:1),a=Object(ie.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(W(e.user)&&(e.appUser.role===M||e.appUser.role===V||e.appUser.role===R&&e.appUser.homeIndex>=0)),s=Object(ie.a)(l,2),i=s[0];s[1];return Object(r.useEffect)(function(){e.onLoadAds(e.user.client._id,function(e){e||Se.fail("Failed to load Ads.")}),i&&e.onLoadPoll(e.user.client._id,e.appUser.role,function(e){e||Se.fail("Failed to load Poll.")})},[]),c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ge,{className:"row gap-20 masonry pos-r"},c.a.createElement(ge,{className:"masonry-item col-12"},c.a.createElement(bt,{data:[{title:"Notice",link:"notice"}]}),c.a.createElement(ge,{className:"bgc-white p-20"},c.a.createElement(ge,{className:"tab-bar"},i&&c.a.createElement("span",{className:"tab"+(1===n?" active":""),onClick:function(){return o(1)}},"POLL"),c.a.createElement("span",{className:"tab"+(2===n?" active":""),onClick:function(){return o(2)}},"ADS")),c.a.createElement(ge,{className:"p-15"},1===n?e.appUser.role===M||e.appUser.role===V?c.a.createElement(ya,{appUser:e.appUser,user:e.user,polls:e.polls,onSave:e.onSavePoll,onRemove:e.onRemovePoll}):c.a.createElement(Ta,{appUser:e.appUser,user:e.user,polls:e.polls,onVote:e.onVote}):2===n?c.a.createElement($e,{data:e.ads.isUpToDate?e.ads.data:[],message:e.ads.isUpToDate?e.ads.isError?e.ads.errorMessage:"No data found.":"Loading..."}):c.a.createElement($e,{data:4===n?e.remainders:e.complaints,message:"No data found."}))))))}),Oa=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(function(e){return r.createElement(ge,{id:"mainContent"},r.createElement(ge,{className:"row gap-20 masonry pos-r"},r.createElement(ge,{className:"masonry-item col-12"},r.createElement(bt,{data:[{title:"Info",link:"info"}]}),r.createElement(ge,{className:"bgc-white p-20"},r.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"c-blue-500 fw-600 ta-c"},e.user.client.name)),r.createElement(ge,{className:"ta-c mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"c-blue-500 fw-600 ta-c"},e.user.client.description)),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"House users")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Maintenance Admin Payment")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Receive real-time notifications")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Visitor management")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Lodge any complaint related to your apartment and track")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,null,"Admin Users")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Create polls and gather the opinion of all Apartment residents")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"All details of your flat, staff who work in your flat, visitors coming to your flat")),r.createElement(ge,{className:"mT-3 mB-3 pT-5 pB-5"},r.createElement(ke,{className:"mL-15"},"Accounts  and much more..."))))))}),ka=function(){return r.createElement(ge,{id:"mainContent"},r.createElement(ge,{className:"row gap-20 masonry pos-r"},r.createElement(ge,{className:"masonry-item col-12"},r.createElement(ge,{className:"bgc-white p-20"},r.createElement(ke,null,"Page not found.")))))},Ba=a(10),ja=function(){Ba(".sidebar .sidebar-menu li a").on("click",function(){var e=Ba(this);e.parent().hasClass("open")?e.parent().children(".dropdown-menu").slideUp(200,function(){e.parent().removeClass("open")}):(e.parent().parent().children("li.open").children(".dropdown-menu").slideUp(200),e.parent().parent().children("li.open").children("a").removeClass("open"),e.parent().parent().children("li.open").removeClass("open"),e.parent().children(".dropdown-menu").slideDown(200,function(){e.parent().addClass("open")}))}),Ba(".sidebar").find(".sidebar-link").each(function(e,t){Ba(t).removeClass("active")}).filter(function(){var e=Ba(this).attr("href");return("/"===e[0]?e.substr(1):e)===window.location.pathname.substr(1)}).addClass("active"),Ba(".sidebar-toggle").on("click",function(e){Ba(".app").toggleClass("is-collapsed"),e.preventDefault()}),Ba("#sidebar-toggle").click(function(e){e.preventDefault(),setTimeout(function(){window.dispatchEvent(window.EVENT)},300)})},Ca=a(80),Aa=function(){var e=Ba(".scrollable");e.length>0&&e.each(function(e,t){new Ca.a(t)})},Sa=(a(153),function(){Ba('[data-toggle="popover"]').popover(),Ba('[data-toggle="tooltip"]').tooltip()}),Ua=Object(s.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new Z).get("account/profile",function(a,n){if(W(a)&&W(a.data)&&K(a.data._id)){t(ne(a.data)),t(ae(K(a.data.homes)?0:-1));var r=a.data.role.split(",");K(r)&&t(te(r[0])),(r.indexOf(M)>=0||r.indexOf(V)>=0)&&((new Z).get("members",function(e,a){W(e)&&K(e.data)&&t(re(e.data,!0,!1,""))}),(new Z).get("blocks/"+a.data.client._id,function(e,a){W(e)&&K(e.data)&&t(oe(e.data,!0,!1,""))})),(r.indexOf(M)>=0||r.indexOf(V)>=0||r.indexOf(F)>=0)&&(new Z).get("homes/"+a.data.client._id,function(e,a){W(e)&&K(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(ce(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,n)})}}(t))},onHomeChange:function(t,a){return e(function(e,t){return function(a){a(ae(e)),t(!0)}}(t,a))},onLogout:function(t){return e(Q(t))}}})(function(e){var t=Object(r.useState)(!1),a=Object(ie.a)(t,2),n=a[0],o=a[1];Object(r.useEffect)(function(){W(e.user)&&K(e.user._id)||(o(!0),e.getProfile(function(e,t){o(!1),!0!==e&&Se.fail("Failed to load Profile: "+t)}))},[]),Object(r.useEffect)(function(){ja(),Aa(),Sa()});var l=function(){return e.appUser.role===R},s=function(){return e.appUser.role===M},i=function(){return e.appUser.role===V},m=function(){return e.appUser.role===F};return n?c.a.createElement(je,{visible:n,text:"Loading..."}):c.a.createElement(ge,null,c.a.createElement(Me,{appUser:e.appUser,user:e.user}),c.a.createElement(ge,{className:"page-container"},c.a.createElement(Le,{appUser:e.appUser,user:e.user,onHomeChange:e.onHomeChange,onLogout:e.onLogout}),c.a.createElement("main",{className:"main-content bgc-grey-100"},K(e.appUser.role)&&!l()||K(e.user.homes)?c.a.createElement(De.c,null,c.a.createElement(De.a,{path:"/",exact:!0,component:dt}),l()&&c.a.createElement(De.a,{path:"/members",exact:!0,component:ht}),l()&&c.a.createElement(De.a,{path:"/new-member",exact:!0,component:Nt}),l()&&c.a.createElement(De.a,{path:"/vehicles",exact:!0,component:yt}),l()&&c.a.createElement(De.a,{path:"/new-vehicle",exact:!0,component:Tt}),l()&&c.a.createElement(De.a,{path:"/servants",exact:!0,component:kt}),l()&&c.a.createElement(De.a,{path:"/new-servant",exact:!0,component:jt}),(l()||s()||i())&&c.a.createElement(De.a,{path:"/tickets",exact:!0,component:St}),l()&&c.a.createElement(De.a,{path:"/new-ticket",exact:!0,component:Ut}),l()&&c.a.createElement(De.a,{path:"/visitors",exact:!0,component:It}),c.a.createElement(De.a,{path:"/outings",exact:!0,component:$t}),l()&&c.a.createElement(De.a,{path:"/new-outing",exact:!0,component:ea}),(s()||i())&&c.a.createElement(De.a,{path:"/ads",exact:!0,component:Ft}),(s()||i())&&c.a.createElement(De.a,{path:"/new-ad",exact:!0,component:Vt}),(s()||i())&&c.a.createElement(De.a,{path:"/notification",exact:!0,component:Zt}),s()&&c.a.createElement(De.a,{path:"/users",exact:!0,component:Ht}),s()&&c.a.createElement(De.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:qt}),s()&&c.a.createElement(De.a,{path:"/approve-users",exact:!0,component:zt}),s()&&c.a.createElement(De.a,{path:"/homes",exact:!0,component:Wt}),s()&&c.a.createElement(De.a,{path:"/view-home/:id",exact:!0,component:Na}),s()&&c.a.createElement(De.a,{path:"/edit-home/:id",exact:!0,component:Jt}),s()&&c.a.createElement(De.a,{path:"/blocks",exact:!0,component:ca}),s()&&c.a.createElement(De.a,{path:"/edit-block/:id",exact:!0,component:oa}),(s()||i()&&e.user.client.config.hasPayment)&&c.a.createElement(De.a,{path:"/payment",exact:!0,component:ia}),(s()||i()||m())&&c.a.createElement(De.a,{path:"/all-visitors",exact:!0,component:Xt}),(s()||i()||m())&&c.a.createElement(De.a,{path:"/all-takeways",exact:!0,component:Bt}),c.a.createElement(De.a,{path:"/notice",exact:!0,component:wa}),c.a.createElement(De.a,{path:"/my-profile",exact:!0,component:Dt}),e.user.role.indexOf(",")>0&&c.a.createElement(De.a,{path:"/my-role",exact:!0,component:Pt}),c.a.createElement(De.a,{path:"/my-documents",exact:!0,component:aa}),c.a.createElement(De.a,{path:"/change-password",exact:!0,component:xt}),c.a.createElement(De.a,{path:"/info",exact:!0,component:Oa}),c.a.createElement(De.a,{component:ka})):c.a.createElement(ge,{id:"mainContent"},c.a.createElement(ke,{className:"m-20"},"You are not authorized to view this content. Please contact administrator/manager."))),c.a.createElement(Fe,null)))}),_a=Object(s.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(ee(e))}}(t))}}})(function(e){return Object(r.useEffect)(function(){K(sessionStorage.getItem("auth_token"))&&e.setLogin(!0)},[]),e.appUser.isLoggedIn?c.a.createElement(se.a,null,c.a.createElement(Ua,null)):c.a.createElement(xe,null)}),Ia=a(81);a(158),a(156),function(){var e=document.createEvent("UIEvents");window.EVENT=e,e.initUIEvent("resize",!0,!1,window,0),window.addEventListener("load",function(){window.dispatchEvent(e)}),Ba("a").filter('[href^="http"], [href^="//"]').not('[href*="'.concat(window.location.host,'"]')).attr("rel","noopener noreferrer").attr("target","_blank"),document.addEventListener("click",function(){window.dispatchEvent(window.EVENT)})}(),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),l.a.render(c.a.createElement(function(){return Object(r.useEffect)(function(){!function(){try{var e=Ia.initializeApp({apiKey:"AIzaSyCrGumtbn2McvNXzZdhShhLaW0QsIFZxOk",authDomain:"nest-df0a7.firebaseapp.com",databaseURL:"https://nest-df0a7.firebaseio.com",projectId:"nest-df0a7",storageBucket:"nest-df0a7.appspot.com",messagingSenderId:"422026408390",appId:"1:422026408390:web:cf0e6a945e7f1ec0d602c7"}).messaging();e.usePublicVapidKey("BExnmgKfYLBd44lIqI5xRAD55I5Qhsaa7sI_wJ19zcIuq05y2Z1AtuaNBChU--UhjFxpA2XLR2lI02otUje4Rkk"),e.requestPermission().then(Object(U.a)(S.a.mark(function t(){var a;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:a=t.sent,localStorage.setItem("fcm_token",a);case 4:case"end":return t.stop()}},t)}))).catch(function(e){console.log("Unable to get permission to notify.",e)})}catch(t){console.log("FCM ERROR: ",t)}}()},[]),c.a.createElement(s.a,{store:C},c.a.createElement(_a,null),c.a.createElement(i.ToastsContainer,{store:i.ToastsStore,position:i.ToastsContainerPosition.TOP_RIGHT}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(157)}},[[85,1,2]]]);
//# sourceMappingURL=main.239d770c.chunk.js.map