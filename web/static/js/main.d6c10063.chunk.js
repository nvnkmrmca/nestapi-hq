(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),r=n(21),i=n.n(r),l=n(3),c=n(4),m=n(7),u=n(5),d=n(6),p=n(10),h=n(22),f=n(28),g=n(64),y=n(1);!function(e){e[e.SET_LOGIN_STATUS=0]="SET_LOGIN_STATUS",e[e.SET_ROLE=1]="SET_ROLE",e[e.SET_HOME_INDEX=2]="SET_HOME_INDEX",e[e.LOAD_USER=3]="LOAD_USER",e[e.LOAD_ADS=4]="LOAD_ADS",e[e.LOAD_POLLS=5]="LOAD_POLLS",e[e.LOAD_OUTINGS=6]="LOAD_OUTINGS",e[e.LOAD_DOCUMENTS=7]="LOAD_DOCUMENTS",e[e.LOAD_USERS=8]="LOAD_USERS",e[e.LOAD_HOMES=9]="LOAD_HOMES",e[e.LOAD_USERHOMES=10]="LOAD_USERHOMES",e[e.LOAD_TICKETS=11]="LOAD_TICKETS",e[e.SAVE_MEMBER=12]="SAVE_MEMBER",e[e.LOAD_BLOCKS=13]="LOAD_BLOCKS",e[e.SET_GATE_NO=14]="SET_GATE_NO",e[e.RESET=15]="RESET"}(a||(a={}));var E=function(e,t){return Object(y.a)({},e,{isLoggedIn:t})},b=function(e,t){return Object(y.a)({},e,{role:t})},v=function(e,t){return Object(y.a)({},e,{homeIndex:t})},w=function(e,t){return Object(y.a)({},e,{_id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role,image:t.image,createdBy:t.createdBy,updatedBy:t.updatedBy,homes:t.homes,client:t.client})},S=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},O=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},k=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},j=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},C=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},N=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},A=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},x=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},T=function(e,t){return Object(y.a)({},e,{data:t.data,isUpToDate:t.isUpToDate,isError:t.isError,errorMessage:t.errorMessage})},I=function(e,t){return t},U=Object(f.c)({AppUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,role:"",homeIndex:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_LOGIN_STATUS:return E(e,t.payload);case a.SET_ROLE:return b(e,t.payload);case a.SET_HOME_INDEX:return v(e,t.payload);case a.RESET:e={isLoggedIn:!1,role:"",homeIndex:-1}}return e},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USER:return w(e,t.payload);case a.RESET:e={_id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"",role:"",image:"",createdBy:"",updatedBy:"",homes:[],client:{_id:"",name:"",description:"",address:"",upi:{id:"",name:""},rep:{name:"",mobileNo:"",emailId:"",repType:""}}}}return e},Ads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_ADS:return S(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_POLLS:return O(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Outings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_OUTINGS:return k(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_DOCUMENTS:return j(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERS:return C(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Homes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_HOMES:return N(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},UserHomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_USERHOMES:return A(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_TICKETS:return x(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},Blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isUpToDate:!1,isError:!1,errorMessage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_BLOCKS:return T(e,t.payload);case a.RESET:e={data:[],isUpToDate:!1,isError:!1,errorMessage:""}}return e},GateNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_GATE_NO:return I(e,t.payload)}return e}}),L=Object(f.e)(U,Object(f.d)(Object(f.a)(g.a))),D=n(23),R=n.n(D),_=n(34),P="https://nestadmin.herokuapp.com/",M="DD/MMM/YYYY",B="DD/MMM/YYYY hh:mm A",F=P+"image/",W=P+"file/",H="#0078d7",V="#0067b9",G="#FFFFFF",K="#FF0000",Y="#008000",q="#cce1f1",z="#e1e1e1",Z="#000000",J="#FFFFFF",X={USER:"USER",ADMIN:"ADMIN",GATEKEEPER:"GATEKEEPER",MANAGER:"MANAGER"},Q=[{title:"JAN",value:0},{title:"FEB",value:1},{title:"MAR",value:2},{title:"APR",value:3},{title:"MAY",value:4},{title:"JUN",value:5},{title:"JUL",value:6},{title:"AUG",value:7},{title:"SEP",value:8},{title:"OCT",value:9},{title:"NOV",value:10},{title:"DEC",value:11}];function $(e){return ee(e)&&e.length>0}function ee(e){return null!==e&&void 0!==e}function te(e){try{return ee(e)?JSON.stringify(e):""}catch(t){return ae(t,"JSON2String"),""}}function ne(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function ae(e,t){console.log("Error:"+t+":"+e)}function oe(e,t){13===(e.keyCode?e.keyCode:e.which)&&"function"===typeof t&&t()}var se=function e(){var t=this;Object(l.a)(this,e),this.url="https://nestadmin.herokuapp.com/",this.get=function(e,n){t.fetch(e,"GET",n)},this.post=function(e,n,a){t.fetch(e,"POST",n,a)},this.delete=function(e,n,a){t.fetch(e,"DELETE",n,a)},this.patch=function(e,n,a){t.fetch(e,"PATCH",n,a)},this.put=function(e,n,a){t.fetch(e,"PUT",n,a)},this.upload=function(){var e=Object(_.a)(R.a.mark(function e(n,a,o){var s,r,i,l;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return s=e.sent,e.next=5,t.getAS("client_id");case 5:return r=e.sent,e.next=8,t.getAS("user_id");case 8:i=e.sent,(l=new FormData).append("file",o.file,o.name),l.append("name",o.name),fetch(t.url+n,{method:"POST",headers:{Accept:"application/json","x-access-token":$(s)?"Bearer "+s:"","client-id":$(r)?""+r:"","user-id":$(i)?""+i:""},body:l}).then(function(e){return e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(a,e,"Some problem occurs. Please contact administrator."):t.callback(a,null,e.message):t.callback(a,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(a,null,e.toString())});case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.getAS=function(){var e=Object(_.a)(R.a.mark(function e(t){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sessionStorage.getItem(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","");case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(_.a)(R.a.mark(function e(n,a,o,s){var r,i,l;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAS("auth_token");case 2:return r=e.sent,e.next=5,t.getAS("client_id");case 5:return i=e.sent,e.next=8,t.getAS("user_id");case 8:l=e.sent,fetch(t.url+n,{method:a,headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":$(r)?"Bearer "+r:"","client-id":$(i)?""+i:"","user-id":$(l)?""+l:""},body:ee(s)?te(s):null}).then(function(e){return e.json()}).then(function(e){ee(e)?ee(e.data)?t.callback(o,e,"Some problem occurs. Please contact administrator."):t.callback(o,null,e.message):t.callback(o,null,"Some problem occurs. Please contact administrator.")}).catch(function(e){console.log("err",e),t.callback(o,null,e.toString())});case 10:case"end":return e.stop()}},e)}));return function(t,n,a,o){return e.apply(this,arguments)}}(),this.callback=function(e,t,n){ee(e)&&"function"==typeof e&&e(t,n)}},re=function(e){return function(t){try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("client_id"),t(le(!1)),t(me(-1)),t(fe()),e(!0)}catch(n){e(!1)}}},ie=function(e){return{type:a.SET_GATE_NO,payload:e}},le=function(e){return{type:a.SET_LOGIN_STATUS,payload:e}},ce=function(e){return{type:a.SET_ROLE,payload:e}},me=function(e){return{type:a.SET_HOME_INDEX,payload:e}},ue=function(e){return{type:a.LOAD_USER,payload:e}},de=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},pe=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},he=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},fe=function(){return{type:a.RESET}},ge=n(17),ye=n(2),Ee=n(26),be=n(27);function ve(){var e=Object(Ee.a)(["\n"]);return ve=function(){return e},e}function we(){var e=Object(Ee.a)(["\n"]);return we=function(){return e},e}function Se(){var e=Object(Ee.a)(["\n"]);return Se=function(){return e},e}function Oe(){var e=Object(Ee.a)(["\n"]);return Oe=function(){return e},e}function ke(){var e=Object(Ee.a)(["\n"]);return ke=function(){return e},e}function je(){var e=Object(Ee.a)(["\n"]);return je=function(){return e},e}function Ce(){var e=Object(Ee.a)(["\noverflow: auto;\n"]);return Ce=function(){return e},e}function Ne(){var e=Object(Ee.a)(["\n"]);return Ne=function(){return e},e}var Ae=be.a.div(Ne()),xe=be.a.div(Ce()),Te=be.a.img(je()),Ie=be.a.input(ke()),Ue=be.a.textarea(Oe()),Le=be.a.select(Se()),De=be.a.label(we()),Re=be.a.span(ve()),_e=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("input",{type:"button",className:"btn",value:this.props.title,onClick:function(){return e.props.onPress()},style:Object(y.a)({},Pe.btn,this.props.style)})}}]),t}(o.Component);_e.defaultProps={title:"",onPress:function(){},style:{}};var Pe={btn:{backgroundColor:H,borderColor:H,color:J,cursor:"pointer"}},Me=function e(){Object(l.a)(this,e)};Me.logo=F+"logo.png",Me.logoInv=F+"logo-inv.png",Me.icon=F+"icon.png",Me.logout=F+"logout.png",Me.homeIcon=F+"home-icon.png",Me.homeIconInv=F+"home-icon-inv.png",Me.homeIconWhite=F+"home-icon-white.png",Me.notification=F+"notification.png",Me.notificationInv=F+"notification-inv.png",Me.notificationWhite=F+"notification-white.png",Me.setting=F+"setting.png",Me.settingInv=F+"setting-inv.png",Me.settingWhite=F+"setting-white.png",Me.info=F+"info.png",Me.infoInv=F+"info-inv.png",Me.infoWhite=F+"info-white.png",Me.workInProgress=F+"work-in-progress.png",Me.members=F+"members.png",Me.membersInv=F+"members-inv.png",Me.vehicle=F+"vehicle.png",Me.vehicleInv=F+"vehicle-inv.png",Me.username=F+"username.png",Me.password=F+"password.png",Me.support=F+"support.png",Me.supportInv=F+"support-inv.png",Me.visitors=F+"visitors.png",Me.visitorsInv=F+"visitors-inv.png",Me.visitorsWhite=F+"visitors-white.png",Me.servant=F+"servant.png",Me.servantInv=F+"servant-inv.png",Me.add=F+"add.png",Me.edit=F+"edit.png",Me.delete=F+"delete.png",Me.close=F+"close.png",Me.tick=F+"tick.png",Me.cancel=F+"cancel.png",Me.mobile=F+"mobile.png",Me.email=F+"email.png",Me.addvertise=F+"addvertise.png",Me.reminder=F+"reminder.png",Me.users=F+"users.png",Me.homes=F+"homes.png",Me.blocks=F+"blocks.png",Me.search=F+"search.png",Me.datePicker=F+"date-picker.png",Me.money=F+"money.png",Me.moneyInv=F+"money-inv.png",Me.view=F+"view.png",Me.document=F+"document.png",Me.documentInv=F+"document-inv.png",Me.menu=F+"menu.png",Me.loading=F+"loading.gif";var Be=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.visible&&o.createElement(Ae,null,o.createElement(Ae,{className:"loader-overlay"}),o.createElement(Ae,{className:"loader"},o.createElement(Te,{className:"",src:Me.loading,style:{width:"50px",height:"50px"}}),o.createElement(Ae,{style:{color:V,fontWeight:"bold",marginTop:5}},this.props.text)))}}]),t}(o.Component);Be.defaultProps={visible:!1,text:"Loading..."};var Fe={},We=function e(){Object(l.a)(this,e)};We.success=function(e){h.ToastsStore.success(e)},We.fail=function(e){h.ToastsStore.error(e)},We.warn=function(e){h.ToastsStore.warning(e)},We.info=function(e){h.ToastsStore.info(e)},We.show=function(e,t,n){h.ToastsStore.info(e)};var He=We,Ve=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=ne();return o.createElement("span",{style:Ge.container},o.createElement("input",{type:"radio",id:e,key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),$(this.props.text)&&o.createElement("label",{htmlFor:e,style:Ge.text},this.props.text))}}]),t}(o.Component);Ve.defaultProps={isActive:!1,text:"",key:"",onPress:function(){}};var Ge={container:{marginRight:10},circle:{height:24,width:24,borderRadius:12,borderWidth:2,borderColor:H,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,borderRadius:6,backgroundColor:H},text:{marginLeft:5}},Ke={container:{},head:{flexDirection:"row",alignContent:"flex-start",backgroundColor:H,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},title:{flex:15,alignSelf:"flex-start",width:"auto","font-weight":"bold",fontSize:20,color:J},close:{flex:1,alignSelf:"flex-end",marginBottom:5},row:{marginTop:3,marginBottom:3,paddingTop:5,paddingBottom:5},ele:{flex:1,width:"100%"},radio:{borderColor:z,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioText:{},radioActive:{backgroundColor:H,borderColor:H,borderWidth:1,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5,display:"inline"},radioActiveText:{color:J},saveBtn:{marginTop:5,marginBottom:3,paddingTop:5,paddingBottom:5}},Ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.clientCode)&&$(n.state.name)&&n.state.age>0&&$(n.state.gender)&&$(n.state.mobileNo)&&$(n.state.emailId)){var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSignUp(e,n.state.clientCode,function(e){!0===e&&n.setState({id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})})}else He.warn("Please fill all the required fields before Submit.")},n.state={id:"",clientCode:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,{style:{flex:1}},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"App Code",style:Object(y.a)({},Fe,Ke.ele),value:this.state.clientCode,onChange:function(t){return e.setState({clientCode:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Name",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"number",className:"form-control",placeholder:"Age",style:Object(y.a)({},Fe,Ke.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},Fe,Ke.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Email ID",style:Object(y.a)({},Fe,Ke.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(Ve,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SUBMIT",onPress:this.onSave})))}}]),t}(o.Component),qe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onLogin=function(){$(n.state.userName)&&$(n.state.password)?(n.setState({message:"",isLoading:!0}),n.props.onLogin(n.state.userName,n.state.password,function(e,t){!0===e?n.setState({isLoading:!1,message:""}):n.setState({message:t,isLoading:!1})})):He.warn("Enter Mobile Number and Password to continue.")},n.onForgetPassword=function(){n.setState({isForgetPass:!0,isSignUp:!1,mobileNumber:"",email:"",message:""})},n.onForgetPassSubmit=function(){$(n.state.mobileNumber)&&$(n.state.email)?(n.setState({message:"",isLoading:!0}),n.props.onForgetPassword(n.state.mobileNumber,n.state.email.toLowerCase(),function(e,t){!0===e?(He.success("Password reset success. Login with New password sent to your Email. Change password after login."),n.setState({isLoading:!1,message:"",isForgetPass:!1,isSignUp:!1,userName:"",password:""})):n.setState({message:t,isLoading:!1})})):He.warn("Enter Mobile Number and Email to continue.")},n.onCreateAccount=function(){n.setState({isForgetPass:!1,isSignUp:!0,mobileNumber:"",email:"",message:""})},n.onSignUp=function(e,t,a){n.setState({message:"",isLoading:!0}),n.props.onSignUp(e,t,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isForgetPass:!1,isSignUp:!1,message:""}),He.success("Sign Up success. Please wait till Manager approves then you can access your account."),a(!0)):(He.fail($(t)?t:"Failed to Sign Up."),a(!1))})},n.state={userName:"",password:"",message:"",isLoading:!1,isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:""},n.onLogin=n.onLogin.bind(Object(ye.a)(n)),n.onForgetPassword=n.onForgetPassword.bind(Object(ye.a)(n)),n.onForgetPassSubmit=n.onForgetPassSubmit.bind(Object(ye.a)(n)),n.onCreateAccount=n.onCreateAccount.bind(Object(ye.a)(n)),n.onSignUp=n.onSignUp.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,{className:"container",style:{backgroundColor:G,maxWidth:"270px"}},o.createElement(Ae,{className:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30,marginTop:5}},o.createElement(Te,{src:Me.logo,style:{width:150,height:150}})),this.state.isForgetPass&&o.createElement(Ae,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Ae,{className:"col-12",style:ze.row},o.createElement(Te,{className:"absolute",src:Me.mobile,style:ze.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Registered Mobile Number",value:this.state.mobileNumber,style:Object(y.a)({},Fe,ze.txt),onChange:function(t){return e.setState({mobileNumber:t.target.value})},onKeyPress:function(t){oe(t,e.onForgetPassSubmit)}})),o.createElement(Ae,{className:"col-12",style:Object(y.a)({},ze.row,{marginBottom:40})},o.createElement(Te,{className:"absolute",src:Me.email,style:ze.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Registered Email",value:this.state.email,style:Object(y.a)({},Fe,ze.txt),onChange:function(t){return e.setState({email:t.target.value})},onKeyPress:function(t){oe(t,e.onForgetPassSubmit)}})),o.createElement(_e,{title:!1===this.state.isLoading?"Reset my password":"Loading...",onPress:this.onForgetPassSubmit}),o.createElement(De,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Z:K}},this.state.message),o.createElement(Ae,{style:{marginTop:15}},o.createElement(De,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:V}},"Go back to Login."))),this.state.isSignUp&&o.createElement(o.Fragment,null,o.createElement(Ye,{onSignUp:this.onSignUp}),o.createElement(Ae,{style:{marginTop:15,textAlign:"center"}},o.createElement(De,{className:"pointer",onClick:function(){e.setState({isForgetPass:!1,isSignUp:!1,mobileNumber:"",email:"",message:""})},style:{marginBottom:5,textAlign:"center",color:V}},"Go back to Login."))),!this.state.isForgetPass&&!this.state.isSignUp&&o.createElement(Ae,{className:"row",style:{flex:1,alignItems:"center",justifyContent:"center"}},o.createElement(Ae,{className:"col-12",style:ze.row},o.createElement(Te,{className:"absolute",src:Me.username,style:ze.txtIcon}),o.createElement(Ie,{type:"text",className:"form-control",placeholder:"Mobile Number",style:Object(y.a)({},Fe,ze.txt),value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})},onKeyPress:function(t){oe(t,e.onLogin)}})),o.createElement(Ae,{className:"col-12",style:Object(y.a)({},ze.row,{marginBottom:15})},o.createElement(Te,{className:"absolute",src:Me.password,style:ze.txtIcon}),o.createElement(Ie,{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,style:Object(y.a)({},Fe,ze.txt),onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:function(t){oe(t,e.onLogin)}})),o.createElement(De,{className:"col-12 pointer",onClick:this.onForgetPassword,style:{marginBottom:15,textAlign:"right",color:V}},"Forgot Password?"),o.createElement(_e,{title:!1===this.state.isLoading?"LOGIN":"Loading...",onPress:this.onLogin}),o.createElement(De,{className:"col-12 center",style:{marginTop:5,color:this.state.isLoading?Z:K}},this.state.message),o.createElement(Ae,{className:"col-12",style:{marginTop:15,alignItems:"center",justifyContent:"center"}},o.createElement(De,{className:"col-12",style:{marginBottom:5,textAlign:"center"}},"Dont have an account?"),o.createElement(Ae,{className:"col",style:{float:"left",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#000000",borderStyle:"solid",borderRadius:10}},o.createElement(De,{style:{textAlign:"center",margin:"7px",cursor:"pointer"},onClick:this.onCreateAccount},"CREATE / JOIN YOUR FLAT")))),o.createElement(Be,{visible:this.state.isLoading,text:""}))}}]),t}(o.Component),ze={row:{marginBottom:25},txtIcon:{marginLeft:6,height:15,width:15,resizeMode:"stretch",alignItems:"center",top:11},txt:{flex:1,paddingLeft:25}},Ze=Object(p.b)(function(e,t){return{}},function(e){return{onLogin:function(t,n,a){return e(function(e,t,n){return function(a){var o=localStorage.getItem("fcm_token");(new se).post("account/login",function(e,t){if(ee(e)&&ee(e.data)&&$(e.data.token)&&$(e.data.userId)){try{sessionStorage.setItem("auth_token",e.data.token),sessionStorage.setItem("client_id",e.data.clientId),sessionStorage.setItem("user_id",e.data.userId)}catch(o){}a(le(!0)),n(!0,"")}else n(!1,t)},{userName:e,password:t,rememberMe:!1,fcmToken:o,os:"web",osVersion:"web"})}}(t,n,a))},onForgetPassword:function(t,n,a){return e(function(e,t,n){return function(a){(new se).post("account/resetpassword",function(e,t){ee(e)&&ee(e.data)&&ee(e.data.data)?!0===e.data.data?n(!0,""):n(!1,e.data.message):n(!1,t)},{mobileNo:e,emailId:t})}}(t,n,a))},onSignUp:function(t,n,a){return e(function(e,t,n){return function(a){e=Object.assign(e,{clientCode:t,password:e.mobileNo}),(new se).post("account/signup",function(e,t){ee(e)&&ee(e.data)&&e.data.length>0?n(!0,""):n(!1,t)},e)}}(t,n,a))}}})(qe),Je=n(29),Xe=n(14),Qe=n(11),$e={container:{height:"80%",marginTop:30,marginBottom:25,marginLeft:15,marginRight:15},head:{alignContent:"center"},title:{flex:1,alignContent:"center",color:Z},close:{width:20,flex:1,justifyContent:"flex-end",alignContent:"flex-end",alignSelf:"flex-end"},content:{}},et=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleHomeModel=function(e){n.setState({isShowHomeModel:e})},n.onHomeChange=function(e){n.props.onHomeChange(e,function(e){!0===e&&n.onToggleHomeModel(!1)})},n.logout=function(){Object(Qe.confirmAlert)({title:"Confirm to logout",message:"Are you sure you wish to logout?",buttons:[{label:"Yes",onClick:function(){n.props.onLogout(function(e){!0===e?He.success("Logout Success!"):He.fail("Failed to logout!")})}},{label:"No",onClick:function(){}}]})},n.state={isShowHomeModel:!1},n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ye.a)(n)),n.onHomeChange=n.onHomeChange.bind(Object(ye.a)(n)),n.logout=n.logout.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("header",{className:"center",style:tt.titleBar},o.createElement(ge.b,{className:"fl",to:""},o.createElement(Te,{src:Me.logoInv,className:"",style:{width:22,height:22}})),this.props.appUser.role===X.USER?o.createElement(De,{className:"pointer",style:tt.titleText,onClick:function(){return e.onToggleHomeModel(!0)}},$(this.props.user.homes)&&this.props.appUser.homeIndex>=0?this.props.user.homes[this.props.appUser.homeIndex].number:""):o.createElement(De,{style:tt.titleText},this.props.appUser.role===X.ADMIN?"Admin":this.props.appUser.role===X.MANAGER?"Manager":this.props.appUser.role===X.GATEKEEPER?"Gate Keeper":this.props.appUser.role),o.createElement("span",{className:"fr pointer",onClick:this.logout,style:{flex:1}},o.createElement(Te,{src:Me.logout,style:{width:20,height:20}})),$(this.props.user.homes)&&o.createElement(Xe.a,{open:this.state.isShowHomeModel,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Ae,{style:$e.container},this.props.user.homes.map(function(t,n){return o.createElement(De,{className:"col-12 pointer",key:"h"+n,onClick:function(){return e.onHomeChange(n)},style:e.props.appUser.homeIndex===n?Object(y.a)({},tt.homeList,tt.activeHome):Object(y.a)({},tt.homeList,tt.inActiveHome)},""+t.number)}))))}}]),t}(o.Component),tt={titleBar:{backgroundColor:H,width:"100%",padding:7},titleText:{flex:15,color:J,fontSize:15},homeList:{padding:15,borderBottomWidth:1,borderBottomColor:H,"border-bottom-style":"solid"},inActiveHome:{color:Z},activeHome:{color:H,fontSize:20}},nt=[{title:"Home",image:"homeIconWhite",path:"/"},{title:"Manage",image:"visitorsWhite",roles:[X.USER,X.ADMIN,X.MANAGER],child:[{title:"Members",path:"members",roles:[X.USER]},{title:"Vehicles",path:"vehicles",roles:[X.USER]},{title:"Servants",path:"servants",roles:[X.USER]},{title:"Tickets",path:"tickets",roles:[X.USER,X.ADMIN,X.MANAGER]},{title:"Visitors",path:"visitors",roles:[X.USER]},{title:"Ads",path:"ads",roles:[X.ADMIN,X.MANAGER]},{title:"Notification",path:"notification",roles:[X.ADMIN,X.MANAGER]},{title:"Users",path:"users",roles:[X.ADMIN]},{title:"Homes",path:"homes",roles:[X.ADMIN]},{title:"Blocks",path:"blocks",roles:[X.ADMIN]},{title:"Visitors",path:"all-visitors",roles:[X.ADMIN,X.MANAGER,X.GATEKEEPER]},{title:"Payment",path:"payment",roles:[X.ADMIN,X.MANAGER]}]},{title:"Notice",image:"notificationWhite",path:"notice"},{title:"Settings",image:"settingWhite",child:[{title:"My Profile",path:"my-profile"},{title:"My Role",path:"my-role",isMRole:!0},{title:"My Documents",path:"my-documents"},{title:"Change Password",path:"change-password"}]},{title:"Info",image:"infoWhite",path:"info"}],at=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getImage=function(e){switch(e){case"homeIconWhite":return Me.homeIconWhite;case"visitorsWhite":return Me.visitorsWhite;case"notificationWhite":return Me.notificationWhite;case"settingWhite":return Me.settingWhite;case"infoWhite":return Me.infoWhite;default:return""}},n.loadNav=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(ye.a)(n);return o.createElement("ul",{className:"navbar-nav"+(a||n.state.activeTopMenu===t?"":" hide"),style:a?{}:ot.inner},e.map(function(e,t){return($(e.path)||$(e.child))&&(!$(e.roles)||e.roles.indexOf(n.props.appUser.role)>=0)&&(!e.isMRole||n.props.user.role.indexOf(",")>0)?o.createElement("li",{key:"nav-item"+t,className:"nav-item",title:e.title},o.createElement(ge.b,{className:"nav-link"+(n.state.activeMenu===e.title||e.child&&$(e.child.filter(function(e){return e.title===n.state.activeMenu}))?" active":""),to:$(e.path)?e.path:"#",onClick:function(){n.state.activeTopMenu===e.title?n.setState({activeTopMenu:""}):a&&(n.setState({activeTopMenu:e.title}),$(e.child)&&n.setState({isExpand:!0})),$(e.path)&&n.setState({activeMenu:e.title,activeTopMenu:"",isExpand:!1})}},!n.state.isExpand&&$(e.image)?o.createElement(Te,{src:n.getImage(e.image),className:"",style:{width:26,height:22}}):o.createElement("span",null,e.title)),$(e.child)&&s.loadNav(e.child,e.title)):null}))},n.onToggleMenu=function(){n.setState({isExpand:!n.state.isExpand})},n.state={isExpand:!1,activeMenu:"Home",activeTopMenu:""},n.loadNav=n.loadNav.bind(Object(ye.a)(n)),n.onToggleMenu=n.onToggleMenu.bind(Object(ye.a)(n)),n.getImage=n.getImage.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("nav",{style:Object(y.a)({},ot.nav,{width:this.state.isExpand?"250px":"44px"})},this.loadNav(nt,"",!0))}}]),t}(o.Component),ot={nav:{backgroundColor:V,color:G},inner:{backgroundColor:H,paddingLeft:20}},st=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("footer",{style:rt.tabBar},o.createElement(Ae,{className:"center"},"\xa9 Nest"))}}]),t}(o.Component),rt={tabBar:{flex:1,borderTopColor:z,borderTopWidth:1,"border-top-style":"solid",width:"100%",marginTop:25,paddingTop:15,paddingBottom:15},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},tabImage:{width:20,height:20},activeTab:{backgroundColor:G}},it=function(e,t,n,a){return function(e){(new se).get("payments"+($(t)?"/"+t:""),function(e,t){ee(e)&&ee(e.data)?n(e.data):a($(t)?t:"Failed to load Payments.")})}},lt=function(e){return{type:a.LOAD_USER,payload:e}},ct=function(e,t,n,a,o){return function(e){(new se).get("visitors"+($(t)?"/"+t:"")+"/"+n,function(e,t){ee(e)&&ee(e.data)?a(e.data):o(e&&$(e.message)?e.message:"Failed to load Visitors.")})}},mt=function(e,t,n,a,o,s){return function(n){t&&$(t._id)?(new se).put("visitor/"+t._id,function(e,t){ee(e)&&ee(e.data)&&e.data._id.length>0?o(e.data):s(e&&$(e.message)?e.message:"Failed to load Visitors.")},t):(new se).post("visitor/"+e,function(e,t){ee(e)&&ee(e.data)&&e.data._id.length>0?o(e.data):s(e&&$(e.message)?e.message:"Failed to load Visitors.")},t)}},ut=function(e,t,n){return function(a){(new se).get("visitor/search/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Visitors.")})}},dt=function(e,t){return function(n){(new se).upload("upload",function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0,""):t(!1,n)},e)}},pt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getTotalDue=function(){var e=0;return n.props.home.payments.map(function(t,n){var a=0;return t.transactions.filter(function(e,t){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),e+=t.amount-a,1}),e},n.payNow=function(e,t){if(e&&e.length>0&&t&&t>0)if($(n.props.user.client.upi.id)&&$(n.props.user.client.upi.name)){var a=ne();n.setState({payment:{paymentId:e,amount:t,transactionRef:a}}),He.warn("Payment is in progress. Please contact administrator.")}else He.warn("Please update UPI ID and UPI Name to app administrator to proceed further.");else He.warn("Amount should be more then 0 to proceed payment.")},n.successCallback=function(e){if(console.log("Payment Success...",e),e&&e.Status)if("SUCCESS"===e.Status&&e.responseCode&&"00"===e.responseCode){n.setState({isLoading:!0});var t={txnRef:e.txnRef,txnId:e.txnId,amount:n.state.payment.amount,status:"PAID",isSuccess:!0,reason:""};n.props.onPaymentUpdate(n.state.payment.paymentId,t,function(e){n.setState({isLoading:!1}),n.clearTxn(),!0===e?He.success("Payment success."):He.fail("Payment failed.")})}else n.txnFailure(e);else n.txnFailure(e)},n.failureCallback=function(e){n.txnFailure(e)},n.txnFailure=function(e){console.log("Payment Failure...",e);var t="";t=e&&e.Status?"FAILURE"===e.Status&&e.responseCode&&"ZM"===e.responseCode?"Payment failed because of wrong pin.":"FAILURE"===e.Status&&e.message&&e.message.length>0?"Payment failed because "+e.message:"Payment failed.":"Payment failed.",He.fail(t),n.setState({isLoading:!0});var a={txnRef:n.state.payment.transactionRef,txnId:"",amount:n.state.payment.amount,status:"FAIL",isSuccess:!1,reason:t};n.props.onPaymentUpdate(n.state.payment.paymentId,a,function(e){n.setState({isLoading:!1}),n.clearTxn()})},n.clearTxn=function(){n.setState({payment:{paymentId:"",amount:0,transactionRef:""}})},n.state={isLoading:!1,payment:{paymentId:"",amount:0,transactionRef:""}},n.getTotalDue=n.getTotalDue.bind(Object(ye.a)(n)),n.payNow=n.payNow.bind(Object(ye.a)(n)),n.clearTxn=n.clearTxn.bind(Object(ye.a)(n)),n.txnFailure=n.txnFailure.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,null,o.createElement(Ae,{style:{margin:5}},o.createElement(De,{style:{marginTop:2,fontWeight:"bold",fontSize:17}},"Total Due Amount: Rs "+this.getTotalDue())),o.createElement(xe,null,$(this.props.home.payments)?this.props.home.payments.filter(function(e,t){var n=0;return $(e.transactions)&&e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount}),n<e.amount}).map(function(t,n){var a=0;return $(t.transactions)&&t.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return a+=e.amount}),a<t.amount?o.createElement(Ae,{key:"my-due"+n,style:0===n?ht.myDueFirst:ht.myDue},o.createElement(Ae,{style:{marginTop:4}},o.createElement(De,null,"Due for: "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Ae,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(De,{style:{fontSize:17}},"Rs "+(t.amount-a))),o.createElement(Ae,{style:{width:"100%"}},o.createElement(De,null,"Due Date: 15/"+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear)),o.createElement(Ae,{style:{marginTop:4}},o.createElement(_e,{title:"PAY NOW",onPress:function(){return e.payNow(t._id,t.amount-a)}}))):null}):o.createElement(De,{style:{padding:20}},"No Dues found!!!")),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),ht={myDue:{margin:7,paddingLeft:15,borderLeftColor:z,borderLeftWidth:1},myDueFirst:{margin:7}},ft=n(71),gt=n.n(ft);function yt(e,t){try{return ee(e)?("string"!=typeof e&&e.toString(),$(t)||(t=M),gt()(e).format(t)):""}catch(n){return ae(n,"convert.toDateString"),""}}function Et(e,t){try{return yt(e,B)}catch(n){return ae(n,"convert.toDateTimeString"),""}}var bt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(xe,{style:{}},$(this.props.home.payments.filter(function(e,t){return $(e.transactions)&&$(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}))?this.props.home.payments.filter(function(e,t){return $(e.transactions)&&$(e.transactions.filter(function(e,t){return!0===e.isSuccess}))}).slice(0,3).map(function(e,t){var n=0,a=null;return e.transactions.filter(function(e){return!0===e.isSuccess}).map(function(e,t){return n+=e.amount,0===t&&(a=e.createdAt),1}),o.createElement(Ae,{key:"my-his"+t,style:0===t?vt.myDueFirst:vt.myDue},o.createElement(Ae,{style:{marginTop:4}},o.createElement(De,{style:{}},"Paid for: "+Q.filter(function(t){return t.value===e.forMonth})[0].title+"/"+e.forYear)),o.createElement(Ae,{style:{width:"100%",marginTop:4,marginBottom:3}},o.createElement(De,{style:{fontSize:17}},"Rs "+n)),o.createElement(Ae,{style:{width:"100%"}},o.createElement(De,null,"Paid On: "+yt(a))))}):o.createElement(De,{style:{padding:20}},"No History found"))}}]),t}(o.Component),vt={myDue:{margin:7,paddingLeft:15,borderLeftColor:z,borderLeftWidth:1},myDueFirst:{margin:7}},wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return $(this.props.data)?this.props.data.map(function(e,t){return o.createElement(Ae,{style:{flex:1,borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid",paddingBottom:3}},o.createElement(Ae,null,o.createElement(De,{key:t,style:{flex:1,fontWeight:"bold"}},e.title)),o.createElement(Ae,null,o.createElement(De,{key:t,style:{flex:1}},e.description)))}):o.createElement(De,null,this.props.message)}}]),t}(o.Component),St={container:{flex:1,width:"100%",padding:10,marginBottom:10,borderBottomColor:z,borderBottomWidth:1,"border-bottom-style":"solid"},row:{flex:1},card:{flex:1,justifyContent:"center",alignItems:"center",borderRadius:10,padding:5,margin:7},inner:{margin:5,padding:"0px 10px"},txt:{flex:1,paddingTop:7,paddingBottom:5,fontSize:14},img:{width:"10vw",height:"10vw",maxWidth:"75px",maxHeight:"75px",margin:5}},Ot=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:kt.content},o.createElement(Ae,{className:"fl",style:St.container},o.createElement(Ae,{style:St.row},o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("members")}},o.createElement(Te,{src:Me.members,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},(this.props.home.members?this.props.home.members.length+"":"")+" MEMBER"+(0===this.props.home.members.length||this.props.home.members.length>1?"S":""))),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("vehicles")}},o.createElement(Te,{src:Me.vehicle,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},(this.props.home.vehicles?this.props.home.vehicles.length+"":"")+" VEHICLE"+(0===this.props.home.vehicles.length||this.props.home.vehicles.length>1?"S":""))),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("servants")}},o.createElement(Te,{src:Me.servant,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"SERVANT(S)")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(Te,{src:Me.support,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"TICKET(S)")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("visitors")}},o.createElement(Te,{src:Me.visitors,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"VISITOR(S)")))),o.createElement(Ae,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Re,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},kt.tab,kt.activeTab):kt.tab,onClick:function(){return e.setState({activeTab:1})}},"MY DUES"),o.createElement(Re,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},kt.tab,kt.activeTab):kt.tab,onClick:function(){return e.setState({activeTab:2})}},"ADVANCE"),o.createElement(Re,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},kt.tab,kt.activeTab):kt.tab,onClick:function(){return e.setState({activeTab:3})}},"HISTORY")),o.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},1===this.state.activeTab?o.createElement(pt,{history:this.props.history,user:this.props.user,home:this.props.home,onPaymentUpload:this.props.onPaymentUpload,onPaymentUpdate:this.props.onPaymentUpdate}):2===this.state.activeTab?o.createElement(wt,{data:[],message:"No advance found!"}):3===this.state.activeTab?o.createElement(bt,{history:this.props.history,home:this.props.home}):4===this.state.activeTab?o.createElement(wt,{data:[],message:"Work in progress"}):[])))}}]),t}(o.Component),kt={content:{flex:1,width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:H,borderBottomStyle:"solid",color:H}},jt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Ct.content},o.createElement(Ae,{className:"fl",style:St.container},o.createElement(Ae,{style:St.row},o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("tickets")}},o.createElement(Te,{src:Me.support,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"TICKET")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("ads")}},o.createElement(Te,{src:Me.addvertise,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"ADS")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("notification")}},o.createElement(Te,{src:Me.reminder,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"NOTIFICATION")),this.props.appUser.role===X.ADMIN&&o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("users")}},o.createElement(Te,{src:Me.users,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},this.props.users.isUpToDate?(this.props.users.isError?0:this.props.users.data.length)+" USER"+(this.props.users.isError||0===this.props.users.data.length||this.props.users.data.length>1?"S":""):"Loading")),this.props.appUser.role===X.ADMIN&&o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("homes")}},o.createElement(Te,{src:Me.homes,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},this.props.homes.isUpToDate?(this.props.homes.isError?0:this.props.homes.data.length)+" HOME"+(this.props.homes.isError||0===this.props.homes.data.length||this.props.homes.data.length>1?"S":""):"Loading")),this.props.appUser.role===X.ADMIN&&o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("blocks")}},o.createElement(Te,{src:Me.blocks,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},this.props.blocks.isUpToDate?(this.props.blocks.isError?0:this.props.blocks.data.length)+" BLOCK"+(this.props.blocks.isError||0===this.props.blocks.data.length||this.props.blocks.data.length>1?"S":""):"Loading")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("all-visitors")}},o.createElement(Te,{src:Me.visitors,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"VISITOR(S)")),o.createElement(Ae,{className:"fl pointer",style:Object(y.a)({},St.inner,{textAlign:"center"}),onClick:function(){return e.props.history.push("payment")}},o.createElement(Te,{src:Me.money,style:St.img}),o.createElement(Ae,{className:"pointer",style:St.txt},"PAYMENT")))))}}]),t}(o.Component),Ct={content:{flex:1,width:"100%"}},Nt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=ne();return o.createElement("span",{className:this.props.className,style:At.container},o.createElement("input",{type:"checkbox",id:e,key:this.props.key,checked:this.props.isActive,onClick:this.props.onPress}),o.createElement("label",{htmlFor:e,style:At.text},this.props.text))}}]),t}(o.Component);Nt.defaultProps={isActive:!1,text:"",key:"",className:"",onPress:function(){}};var At={container:{marginRight:10},circle:{height:24,width:24,borderWidth:2,borderColor:H,alignItems:"center",justifyContent:"center"},dot:{height:12,width:12,backgroundColor:H},text:{marginLeft:5}},xt={content:{backgroundColor:G},row:{alignItems:"flex-start",borderBottomColor:z,borderBottomWidth:1,"border-bottom-style":"solid",marginTop:5},ele:{alignItems:"flex-start",marginTop:1,marginBottom:3,padding:2}},Tt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onToggleZoomImage=function(e){n.setState({isZoomImage:e})},n.state={isZoomImage:!1,zoomImage:"",searchText:""},n.onToggleZoomImage=n.onToggleZoomImage.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.searchText;t=$(t)?t.toLowerCase():t;var n=$(t)&&$(this.props.data)?this.props.data.filter(function(e,n){return e.homeNumber.toLowerCase().indexOf(t)>=0||e.passCode.toLowerCase().indexOf(t)>=0||e.name.toLowerCase().indexOf(t)>=0}):this.props.data;return o.createElement(o.Fragment,null,o.createElement(Ae,{style:xt.row},o.createElement(De,null,"No of "+(this.props.isActive?"Active":"")+" Visitors: "+this.props.data.length),!this.props.isSearch&&this.props.appUser.role!==X.GATEKEEPER&&o.createElement(Nt,{isActive:this.props.isActive,text:"Only Active Visitors",onPress:this.props.onActiveChange,className:"fr"})),$(this.props.data)&&o.createElement(Ae,{style:{width:"100%",marginTop:10,marginBottom:5}},o.createElement(Ie,{type:"text",placeholder:"Enter Search Text",className:"form-control",style:Object(y.a)({},Fe,Ke.ele,{display:"inline",width:"100%"}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}})),o.createElement(Ae,{className:"fl",style:It.cardContainer},$(n)?n.map(function(t,n){return o.createElement(Ae,{key:n,className:"fl",style:It.card},$(t.image)&&o.createElement(Ae,{className:"center"},o.createElement(Te,{src:W+t.image,className:"pointer",style:It.img,onClick:function(){return e.setState({isZoomImage:!0,zoomImage:t.image})}})),o.createElement(Ae,{style:It.content},$(t.passCode)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,{className:"bold"},t.passCode)),o.createElement(Ae,{style:xt.ele},o.createElement(De,{className:"bold"},t.name+" ["+t.type+"]")),(t.age>0||$(t.gender))&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,(t.age>0?t.age:"")+(t.age>0&&$(t.gender)?", ":"")+($(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),o.createElement(Ae,{style:xt.ele},"To ",o.createElement(De,{className:"bold"},t.homeNumber)," on ",o.createElement(De,{className:"bold"},Et(t.createdAt))),!t.isEntered&&!t.isExit&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,(t.gateNo?"In gate "+t.gateNo+" by ":"By ")+t.createdBy)),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),t.personCount>0&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.personCount+" Person"+(t.personCount>1?"s":"")+("WALK"===t.vehicleType?" by WALK":" in "+t.vehicleType+($(t.vehicleNo)?" "+t.vehicleNo:"")))),!t.isApproved&&!t.isRejected&&!t.isEntered&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:{color:H}},"WAITING FOR APPROVAL")),(t.isApproved||t.isRejected)&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:{color:t.isApproved?Y:K}},t.isApproved?"APPROVED":"REJECTED"),o.createElement(Ae,null,"By "+t.approvedBy),o.createElement(Ae,null,"On "+Et(t.approvedAt))),t.isEntered&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,null,"Entry By "+t.enteredBy+" in gate "+t.gateNo),o.createElement(Ae,null,"On "+Et(t.enteredAt))),t.isApproved&&!t.isEntered&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:{color:K}},"NOT ENTERED")),!t.isRejected&&t.isExit&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,null,"Exit By "+t.exitBy+" in gate "+t.exitGateNo),o.createElement(Ae,null,"On "+Et(t.exitAt))),t.isEntered&&!t.isExit&&o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:{color:K}},"STAYING IN")),!e.props.isSearch&&e.props.appUser.role===X.GATEKEEPER&&o.createElement(Ae,{style:xt.ele,className:"center"},!t.isEntered&&!t.isRejected&&o.createElement(_e,{title:"Enter",onPress:function(){e.props.onEnter(t._id)}}),(t.isEntered||t.isRejected)&&!t.isExit&&o.createElement(_e,{title:t.isRejected?"Remove":"Exit",onPress:function(){e.props.onExit(t._id)}})),!e.props.isSearch&&e.props.appUser.role===X.USER&&!t.isApproved&&!t.isRejected&&!t.isEntered&&o.createElement(Ae,{style:xt.ele,className:"center"},o.createElement(_e,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.props.onApprove(t._id)}}),o.createElement(_e,{title:"Reject",onPress:function(){e.props.onReject(t._id)}})),e.props.isSearch&&o.createElement(Ae,{style:xt.ele,className:"center"},o.createElement(_e,{title:"Select",onPress:function(){e.props.onSelect(t)}}))))}):o.createElement(De,{style:{padding:20}},"No Visitor found!!!")),o.createElement(Xe.a,{open:this.state.isZoomImage,onClose:function(){return e.onToggleZoomImage(!1)}},o.createElement(Ae,{className:"center"},o.createElement(Te,{src:W+this.state.zoomImage,style:{height:"50%",width:"50%"}}))))}}]),t}(o.Component);Tt.defaultProps={isSearch:!1,onActiveChange:function(){},onEnter:function(){},onExit:function(){},onApprove:function(){},onReject:function(){},onSelect:function(){}};var It={cardContainer:{flex:1,width:"100%",padding:10,marginBottom:10},card:{flex:1,margin:15},img:{height:"25vh",margin:0,borderRadius:"50%",marginBottom:"-25px"},content:{flex:1,padding:10,paddingTop:"25px",borderColor:z,borderWidth:1,borderStyle:"solid",borderRadius:10}},Ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onImageSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=ne();o+="."+a[a.length-1],n.setState({fileName:o});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){e||He.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if((n.props.appUser.role===X.USER||$(n.props.gateNo))&&!1===n.state.showHomes&&n.state.homeId.length>0&&$(n.state.name)&&n.state.personCount>0&&$(n.state.fileName)){var e={_id:"",type:n.state.type,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:"",personCount:n.state.personCount,vehicleType:n.state.vehicleType,vehicleNo:n.state.vehicleNo,image:n.state.fileName,passCode:"",gateNo:n.props.gateNo};e=Object.assign(e,{isUser:n.props.appUser.role===X.USER}),n.props.onToggleLoading(!0),n.props.onSave(n.state.homeId,e,n.props.user,n.props.appUser,function(e){n.onClear(),n.props.onToggleLoading(!1),n.props.appUser.role===X.USER?He.success("Visitor Request created successfully. Please share the passcode("+e.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."):He.success("Visitor created successfully. Notification sent to the home members for approval. If this visitor got approved from home member then allow him/her inside.")},function(t){n.props.onToggleLoading(!1),He.fail("Failed to save visitor "+e.name+".")})}else He.warn("Please fill Gate Number, Home, Name, People count and Image before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({homeId:n.props.appUser.role===X.USER?n.state.homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:"",showHomes:!1,homeSearchText:"",searchResult:[],isShowSearch:!1})},n.onSearch=function(){n.state.mobileNo.length>2&&(n.props.onToggleLoading(!0),n.props.onSearch(n.state.mobileNo,function(e){n.props.onToggleLoading(!1),n.setState({isShowSearch:!0,searchResult:e})},function(e){n.props.onToggleLoading(!1),He.fail(e),n.setState({isShowSearch:!1,searchResult:[]})}))},n.state={homeId:"",id:"",type:"VISITOR",name:"",age:0,gender:"",mobileNo:"",personCount:1,vehicleType:"BIKE",vehicleNo:"",fileName:"",showHomes:!1,homeSearchText:"",searchResult:[],isShowSearch:!1},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onClear=n.onClear.bind(Object(ye.a)(n)),n.onImageSelect=n.onImageSelect.bind(Object(ye.a)(n)),n.onSearch=n.onSearch.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.appUser.role===X.USER&&this.setState({homeId:this.props.user.homes[this.props.appUser.homeIndex]._id})}},{key:"render",value:function(){var e=this;return o.createElement(Ae,{style:Lt.container},this.props.appUser.role===X.GATEKEEPER&&o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ke.ele,Lt.ele,{flexDirection:"row",padding:12,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.homeSearchText,onChange:function(t){return e.setState({showHomes:!0,homeSearchText:t.target.value})}})),this.props.appUser.role===X.GATEKEEPER&&this.state.showHomes&&$(this.state.homeSearchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ke.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.homeSearchText.toLowerCase())>=0}).map(function(t,n){return o.createElement(De,{className:"pointer",key:"ho"+n,style:Object(y.a)({},Lt.ele,{flexDirection:"column",margin:3,padding:6,backgroundColor:q}),onClick:function(){e.setState({homeSearchText:t.number,homeId:t._id,showHomes:!1})}},t.number)})),this.props.appUser.role===X.GATEKEEPER&&o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"VISITOR"===this.state.type,text:"Visitor",onPress:function(){return e.setState({type:"VISITOR"})}}),o.createElement(Ve,{isActive:"DELIVERY"===this.state.type,text:"Delivery",onPress:function(){return e.setState({type:"DELIVERY"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Lt.ele,Fe,Ke.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})},onKeyPress:function(t){oe(t,e.onSearch)}}),o.createElement(Re,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Te,{className:"pointer",src:Me.search,style:{width:30,height:30}}))),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Lt.ele,Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"number",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},Lt.ele,Fe,Ke.ele,{width:"auto",display:"inline-block",marginRight:10}),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}}),o.createElement(Ae,{style:{display:"inline-block",width:"auto"}},o.createElement(Ve,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}}))),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"number",placeholder:"People Count",className:"form-control",style:Object(y.a)({},Lt.ele,Fe,Ke.ele,{width:"auto",display:"inline-block",marginRight:10}),value:this.state.personCount>0?this.state.personCount+"":"",onChange:function(t){return e.setState({personCount:+t.target.value.replace(/[^0-9]/g,"")})}}),o.createElement(Le,{className:"form-control",value:this.state.vehicleType,style:Object(y.a)({},Lt.ele,Fe,Ke.ele,{display:"inline-block",width:"auto",marginRight:10}),onChange:function(t){return e.setState({vehicleType:t.target.value})}},o.createElement("option",{value:"WALK"},"WALK"),o.createElement("option",{value:"CYCLE"},"CYCLE"),o.createElement("option",{value:"BIKE"},"BIKE"),o.createElement("option",{value:"CAR"},"CAR"),o.createElement("option",{value:"VAN"},"VAN"),o.createElement("option",{value:"JEEP"},"JEEP"),o.createElement("option",{value:"TEMPO"},"TEMPO"),o.createElement("option",{value:"BUS"},"BUS"),o.createElement("option",{value:"TRUCK"},"TRUCK")),o.createElement(Ie,{type:"text",placeholder:"Vehicle No",className:"form-control",style:Object(y.a)({},Lt.ele,Fe,Ke.ele,{display:"inline-block",width:"auto"}),value:this.state.vehicleNo,onChange:function(t){return e.setState({vehicleNo:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement("input",{type:"file",name:"image",placeholder:"SELECT IMAGE",onChange:this.onImageSelect}),$(this.state.fileName)&&o.createElement(De,{style:Object(y.a)({},Lt.ele,{marginLeft:15})},this.state.fileName)),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{title:"SAVE",onPress:this.onSave,style:Object(y.a)({},Lt.ele,{marginRight:10})}),o.createElement(_e,{title:"CLEAR",onPress:this.onClear,style:Lt.ele})),this.state.isShowSearch&&o.createElement(Xe.a,{open:this.state.isShowSearch,onClose:function(){return e.setState({isShowSearch:!1})}},o.createElement(Ae,{style:$e.container},o.createElement(Tt,{user:this.props.user,appUser:this.props.appUser,data:this.state.searchResult,isActive:!1,isSearch:!0,onSelect:function(t){e.setState({isShowSearch:!1,searchResult:[],name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,vehicleType:t.vehicleType,vehicleNo:t.vehicleNo,fileName:t.image})}}))))}}]),t}(o.Component),Lt={container:{width:"100%",paddingLeft:15,paddingRight:15},ele:{fontSize:17}},Dt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).viewAllVisitors=function(){$(n.state.gateNo)?n.props.history.push("all-visitors"):He.warn("Please enter Gate Number to view this page.")},n.viewAllTakeaways=function(){$(n.state.gateNo)?n.props.history.push("all-takeways"):He.warn("Please enter Gate Number to view this page.")},n.state={gateNo:"",isLoading:!1},n.viewAllVisitors=n.viewAllVisitors.bind(Object(ye.a)(n)),n.viewAllTakeaways=n.viewAllTakeaways.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({gateNo:this.props.gateNo})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Rt.content},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Gate Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele,{width:"auto"}),value:this.state.gateNo,onChange:function(t){return e.setState({gateNo:t.target.value})},onBlur:function(){return e.props.onGateNoChanged(e.state.gateNo)}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,{className:"fr pointer",onClick:this.viewAllTakeaways,style:Object(y.a)({},Rt.ele,{color:V,fontWeight:"bold",textAlign:"right"})},"View all Active Takeaways"),o.createElement(De,{className:"fr pointer",onClick:this.viewAllVisitors,style:Object(y.a)({},Rt.ele,{color:V,fontWeight:"bold",textAlign:"right",marginRight:20})},"View all Active Visitors")),o.createElement(Ut,{appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.state.gateNo,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.props.onSaveVisitor,onUpload:this.props.onUpload,onSearch:this.props.onSearchVisitor}),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Rt={content:{flex:1,width:"100%"},ele:{fontSize:17}},_t=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.appUser.role===X.USER?this.props.appUser.homeIndex>=0&&$(this.props.user.homes)?o.createElement(Ot,{history:this.props.history,user:this.props.user,home:this.props.user.homes[this.props.appUser.homeIndex],onPaymentUpload:function(t,n,a){return e.props.onPaymentUpload(t,n,e.props.user,a)},onPaymentUpdate:function(t,n,a){return e.props.onPaymentUpdate(t,n,e.props.appUser.homeIndex,e.props.user,a)}}):o.createElement(De,{style:{margin:20,padding:15,paddingLeft:59}},"No home assigned to you. Please contact administrator/manager."):this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?o.createElement(jt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,ads:this.props.ads,users:this.props.users,homes:this.props.homes,tickets:this.props.tickets,blocks:this.props.blocks}):this.props.appUser.role===X.GATEKEEPER?o.createElement(Dt,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.props.gateNo,onGateNoChanged:this.props.onGateNoChanged,onSaveVisitor:this.props.onSaveVisitor,onUpload:this.props.onUpload,onSearchVisitor:this.props.onSearchVisitor}):o.createElement(De,{style:{margin:20,padding:15,paddingLeft:59}},"No role assigned to you. Please contact administrator/manager.")}}]),t}(o.Component),Pt=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,outings:e.Outings,users:e.Users,homes:e.Homes,tickets:e.Tickets,blocks:e.Blocks,gateNo:e.GateNo}},function(e){return{onGateNoChanged:function(t){return e(function(e){return function(t){t(ie(e))}}(t))},onPaymentUpload:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new se).post("paymentupload",function(e,o){ee(e)&&ee(e.data)&&e.data.approvalid>0?(t(lt(n)),a(!0)):a(!1)},e)}}(t,0,a,o))},onPaymentUpdate:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new se).post("payment/transaction/"+e,function(r,i){if(ee(r)&&ee(r.data)&&r.data.length>0){t._id=r.data;var l=a.homes[n].payments.findIndex(function(t){return t._id===e});a.homes[n].payments[l].transactions||(a.homes[n].payments[l].transactions=[]),a.homes[n].payments[l].transactions.push(t),s(lt(a)),o(!0)}else o(!1)},t)}}(t,n,a,o,s))},onSaveVisitor:function(t,n,a,o,s,r){return e(mt(t,n,0,0,s,r))},onUpload:function(t,n){return e(dt(t,n))},onSearchVisitor:function(t,n,a){return e(ut(t,n,a))}}})(_t),Mt=function(e,t,n,a){return function(o){e&&e._id&&e._id.length>0?(new se).put("member/"+e._id,function(s,r){if(ee(s)&&ee(s.data)&&s.data.length>0){var i=t.homes[n].members,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].name=e.name,i[l].age=e.age,i[l].gender=e.gender,i[l].mobileNo=e.mobileNo,i[l].emailId=e.emailId,i[l].type=e.type,t.homes[n].members=i,o(Bt(t)),a(!0,"")}else a(!1,r)},e):(e=Object.assign(e,{password:e.mobileNo}),(new se).post("member/"+t.homes[n]._id,function(s,r){if(ee(s)&&ee(s.data)&&s.data.length>0){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].members;i.push(e),t.homes[n].members=i,o(Bt(t)),a(!0,"")}else a(!1,r)},e))}},Bt=function(e){return{type:a.LOAD_USER,payload:e}},Ft=function(e,t,n,o){return{type:a.LOAD_USERS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Wt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{style:Ht.cnr},o.createElement(ge.b,{to:"",style:Ht.link},"Home"),this.props.data.map(function(t,n){return o.createElement(o.Fragment,null,o.createElement("span",{key:"bd"+n,style:Ht.sep},"/"),n===e.props.data.length-1?o.createElement("span",{key:"bc"+n,style:Ht.link},t.title):o.createElement(ge.b,{key:"bc"+n,to:"/"+t.link},t.title))}))}}]),t}(o.Component);Wt.defaultProps={data:[]};var Ht={cnr:{width:"100%",MarginTop:10,marginBottom:10},sep:{marginRight:10,marginLeft:10},link:{}},Vt={addIcon:{width:20,height:20,cursor:"pointer"},editIcon:{width:20,height:20,cursor:"pointer"},deleteIcon:{width:18,height:20,cursor:"pointer"},closeIcon:{width:17,height:17,cursor:"pointer"},datePicker:{width:20,height:23,cursor:"pointer"}},Gt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.name)&&n.state.age>0&&$(n.state.gender)&&$(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),He.success("Member saved successfully.")):He.fail($(t)?t:"Failed to save member.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?He.success("Member removed successfully."):He.fail("Failed to remove member.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Members",link:"members"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("new-member")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),$(this.props.user.homes[this.props.homeIndex].members)?this.props.user.homes[this.props.homeIndex].members.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Fe,Ke.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ve,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===e.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ve,{isActive:"OWNER"===e.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(Ve,{isActive:"TENANT"===e.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.type)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,role:t.role})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},"No Member found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Kt=Object(p.b)(function(e,t){return{user:e.User,users:e.Users,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Mt(t,n,a,o))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new se).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(Bt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&$(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(Ft(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(Gt),Yt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.name)&&n.state.age>0&&$(n.state.gender)&&$(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:n.state.role};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"}),He.success("Member saved successfully.")):He.fail($(t)?t:"Failed to save member.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",role:"USER"},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Members",link:"members"},{title:"New Member",link:"new-member"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Fe,Ke.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(Ve,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),qt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(Mt(t,n,a,o))}}})(Yt),zt=function(e,t,n,a){return function(o){e&&$(e._id)?(new se).put("vehicle/"+e._id,function(s,r){if(ee(s)&&$(s.data)){var i=t.homes[n].vehicles,l=i.findIndex(function(e){return e._id===s.data});i[l]._id=s.data,i[l].number=e.number,i[l].type=e.type,t.homes[n].vehicles=i,o(Zt(t)),a(!0)}else a(!1)},e):(new se).post("vehicle/"+t.homes[n]._id,function(s,r){if(ee(s)&&$(s.data)){e._id=s.data,e.createdBy=t.name;var i=t.homes[n].vehicles;i.push(e),t.homes[n].vehicles=i,o(Zt(t)),a(!0)}else a(!1)},e)}},Zt=function(e){return{type:a.LOAD_USER,payload:e}},Jt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.number)&&$(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",number:"",type:""}),He.success("Vehicle saved successfully.")):He.fail("Failed to save vehicle.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?He.success("Vehicle removed successfully."):He.fail("Failed to remove vehicle.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Vehicles",link:"vehicles"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("new-vehicle")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),$(this.props.user.homes[this.props.homeIndex].vehicles)?this.props.user.homes[this.props.homeIndex].vehicles.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(Ve,{isActive:"TWO WHEELER"===e.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(Ve,{isActive:"FOUR WHEELER"===e.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",number:"",type:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.type)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.number)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,number:t.number,type:t.type})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},"No Vehicle found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Xt=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(zt(t,n,a,o))},onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new se).delete("vehicle/"+e,function(s,r){ee(s)&&ee(s.data)&&!0===s.data?(t.homes[n].vehicles=t.homes[n].vehicles.filter(function(t,n){return t._id!==e}),o(Zt(t)),a(!0)):a(!1)})}}(t,n,a,o))}}})(Jt),Qt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.number)&&$(n.state.type)){n.setState({isLoading:!0});var e={_id:n.state.id,number:n.state.number,type:n.state.type};n.props.onSave(e,n.props.user,n.props.homeIndex,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",type:""}),He.success("Vehicle saved successfully.")):He.fail("Failed to save vehicle.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",number:"",type:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Vehicles",link:"vehicles"},{title:"New Vehicle",link:"new-vehicle"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"TWO WHEELER"===this.state.type,text:"Two Wheeler",onPress:function(){return e.setState({type:"TWO WHEELER"})}}),o.createElement(Ve,{isActive:"FOUR WHEELER"===this.state.type,text:"Four Wheeler",onPress:function(){return e.setState({type:"FOUR WHEELER"})}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),$t=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a,o){return e(zt(t,n,a,o))}}})(Qt),en=function(e,t,n){return function(a){(new se).get("servants/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Servants.")})}},tn=function(e,t,n){return function(a){t&&$(t._id)?(new se).put("servant/"+t._id,function(e,t){ee(e)&&$(e.data)?n(!0):n(!1)},t):(new se).post("servant/"+e,function(e,t){ee(e)&&$(e.data)?n(!0):n(!1)},t)}},nn={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{},cmntsHdrTxt:{},cmntsCnt:{padding:15,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:z,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntHdr:{},cmntCnt:{},addCmntCnt:{marginTop:5,marginBottom:5},newCmnt:{width:"100%",borderWidth:1,borderColor:z},saveBtn:{marginTop:5}},an=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.name)&&n.state.age>0&&$(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(n.props.user.homes[n.props.homeIndex]._id,e,function(e){if(n.setState({isLoading:!1}),!0===e){var t=n.state.data.findIndex(function(e){return e._id===n.state.id});n.state.data[t].name=n.state.name,n.state.data[t].age=n.state.age,n.state.data[t].gender=n.state.gender,n.state.data[t].mobileNo=n.state.mobileNo,n.state.data[t].emailId=n.state.emailId,n.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),He.success("Servant saved successfully.")}else He.fail("Failed to save servant.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,function(t){!0===t?(n.setState({isLoading:!1,data:n.state.data.filter(function(t,n){return t._id!==e}),viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),He.success("Servant removed successfully.")):(n.setState({isLoading:!1}),He.fail("Failed to remove servant."))})}},{label:"No",onClick:function(){}}]})},n.onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}):n.setState({viewId:e,takeaways:t,takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})},n.onCreateTakeaway=function(e){$(n.state.takeawayTitle)&&$(n.state.takeawayDesc)?(n.setState({isLoading:!0}),n.props.onCreateTakeaway(e,{_id:"",title:n.state.takeawayTitle,description:n.state.takeawayDesc,createdBy:n.props.user.name,createdAt:new Date,updatedBy:n.props.user._id,updatedAt:new Date},function(t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].takeaways.unshift({_id:t,title:n.state.takeawayTitle,description:n.state.takeawayDesc,createdAt:new Date,createdBy:n.props.user.name,updatedBy:n.props.user._id,updatedAt:new Date}),n.setState({isLoading:!1,takeawayTitle:"",takeawayDesc:""}),He.success("Takeayway added successfully.")},function(e){n.setState({isLoading:!1}),He.fail("Failed to add takeaway.")})):He.warn("Please fill Takeaway title & description before Add.")},n.onUpdateTakeaway=function(e){$(n.state.editTakeawayTitle)&&$(n.state.editTakeawayDesc)?(n.setState({isLoading:!0}),n.props.onCreateTakeaway(e,{_id:n.state.editTakeawayId,title:n.state.editTakeawayTitle,description:n.state.editTakeawayDesc,createdBy:n.props.user.name,createdAt:new Date,updatedBy:n.props.user._id,updatedAt:new Date},function(t){var a=n.state.data.findIndex(function(t){return t._id===e}),o=n.state.data[a].takeaways.findIndex(function(e){return e._id===n.state.editTakeawayId});n.state.data[a].takeaways[o].title=n.state.editTakeawayTitle,n.state.data[a].takeaways[o].description=n.state.editTakeawayDesc,n.state.data[a].takeaways[o].updatedBy=n.props.user.name,n.state.data[a].takeaways[o].updatedAt=new Date,n.setState({isLoading:!1,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""}),He.success("Takeayway updated successfully.")},function(e){n.setState({isLoading:!1}),He.fail("Failed to update takeaway.")})):He.warn("Please fill Takeaway title & description before Add.")},n.onRemoveTakeaway=function(e,t){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this takeaway?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemoveTakeaway(e,function(a){var o=n.state.data.findIndex(function(e){return e._id===t});n.state.data[o].takeaways=n.state.data[o].takeaways.filter(function(t,n){return t._id!==e}),!0===a?(n.setState({isLoading:!1,editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:"",viewId:""}),He.success("Takeaway removed successfully.")):(n.setState({isLoading:!1}),He.fail("Failed to remove takeaway."))})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1,isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n.onView=n.onView.bind(Object(ye.a)(n)),n.onCreateTakeaway=n.onCreateTakeaway.bind(Object(ye.a)(n)),n.onUpdateTakeaway=n.onUpdateTakeaway.bind(Object(ye.a)(n)),n.onRemoveTakeaway=n.onRemoveTakeaway.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Servants",link:"servants"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("new-servant")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),$(this.state.data)?this.state.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Fe,Ke.ele),value:e.state.age>0?e.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ve,{isActive:"M"===e.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===e.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===e.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,viewId:"",takeaways:[],takeawayTitle:"",takeawayDesc:"",editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon})),o.createElement(Re,{style:{},onClick:function(){e.onView(t._id,t.takeaways)}},o.createElement(De,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Takeaways"))),e.state.viewId===t._id&&o.createElement(Ae,{style:nn.cmntsCnr},o.createElement(Ae,{style:nn.cmntsHdr},o.createElement(De,{className:"bold",style:nn.cmntsHdrTxt},"Takeaways")),o.createElement(Ae,{style:nn.cmntsCnt},o.createElement(Ae,{style:nn.addCmntCnt},o.createElement(Ie,{type:"text",placeholder:"Takeaway Title",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt,{marginBottom:10}),value:e.state.takeawayTitle,onChange:function(t){return e.setState({takeawayTitle:t.target.value})}}),o.createElement(Ue,{placeholder:"Takeaway Description",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt),value:e.state.takeawayDesc,onChange:function(t){return e.setState({takeawayDesc:t.target.value})}}),o.createElement(Ae,{style:nn.saveBtn},o.createElement(_e,{title:"ADD NEW TAKEAWAY",onPress:function(){return e.onCreateTakeaway(t._id)}}))),$(e.state.takeaways)?e.state.takeaways.map(function(n,a){return o.createElement(Ae,{key:"tkycmt"+a,style:0===a?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ae,{style:nn.cmntHdr},o.createElement(De,{className:"bold"},n.createdBy+" on "+Et(n.updatedAt))),o.createElement(Ae,{style:nn.cmntCnt},e.state.editTakeawayId!==n._id||n.isExit?o.createElement(De,null,n.title):o.createElement(Ie,{type:"text",placeholder:"Takeaway Title",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt,{marginBottom:10}),value:e.state.editTakeawayTitle,onChange:function(t){return e.setState({editTakeawayTitle:t.target.value})}})),o.createElement(Ae,{style:nn.cmntCnt},e.state.editTakeawayId!==n._id||n.isExit?o.createElement(De,null,n.description):o.createElement(Ue,{placeholder:"Takeaway Description",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt),value:e.state.editTakeawayDesc,onChange:function(t){return e.setState({editTakeawayDesc:t.target.value})}})),n.isExit?o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,{style:{color:Y}},"Exit by "+n.exitBy+" in Gate "+n.exitGateNo+" on "+Et(n.exitAt))):o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,{style:{color:K}},"Still not exit.")),!n.isExit&&o.createElement(o.Fragment,null,e.state.editTakeawayId===n._id?o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){return e.onUpdateTakeaway(t._id)}},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({editTakeawayId:"",editTakeawayTitle:"",editTakeawayDesc:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon}))):o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({editTakeawayId:n._id,editTakeawayTitle:n.title,editTakeawayDesc:n.description})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onRemoveTakeaway(n._id,t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon})))))}):o.createElement(De,{style:{padding:20}},"No takeaways found!!!"))))}):o.createElement(De,{style:{padding:20}},"No Servant found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),on=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onLoad:function(t,n,a){return e(en(t,n,a))},onSave:function(t,n,a){return e(tn(t,n,a))},onRemove:function(t,n){return e(function(e,t){return function(n){(new se).delete("servant/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))},onCreateTakeaway:function(t,n,a,o){return e(function(e,t,n,a){return function(o){$(t._id)?(new se).put("servant/takeaway/"+t._id,function(e,t){ee(e)&&$(e.data)?n(e.data):a(e&&$(e.message)?e.message:"Failed to update takeaway.")},t):(new se).post("servant/takeaway/"+e,function(e,t){ee(e)&&$(e.data)?n(e.data):a(e&&$(e.message)?e.message:"Failed to create Takeaway.")},t)}}(t,n,a,o))},onRemoveTakeaway:function(t,n){return e(function(e,t){return function(n){(new se).delete("servant/takeaway/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))}}})(an),sn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onExit=function(e,t){Object(Qe.confirmAlert)({title:"Confirm to Exit Servant with Takeaway",message:"Are you sure you wish to exit the servant with this takeaway things?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onExit(e,n.props.gateNo,function(a){if(!0===a){var o=n.state.data.findIndex(function(e){return e._id===t});n.state.data[o].takeaways=n.state.data[o].takeaways.filter(function(t){return t._id!==e}),n.setState({isLoading:!1}),He.success("Servant exit with takeaway successfully.")}else n.setState({isLoading:!1}),He.fail("Failed to exit servant with takeaway.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1},n.onExit=n.onExit.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Takeaways",link:"all-takeaways"}]}),$(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{className:"bold"},t.createdBy+" on "+Et(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),o.createElement(Ae,{style:nn.cmntsCnr},o.createElement(Ae,{style:nn.cmntsHdr},o.createElement(De,{className:"bold",style:nn.cmntsHdrTxt},"Takeaways")),o.createElement(Ae,{style:nn.cmntsCnt},$(t.takeaways)?t.takeaways.map(function(n,a){return o.createElement(Ae,{key:"tkycmt"+a,style:0===a?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ae,{style:nn.cmntHdr},o.createElement(De,{className:"bold"},n.createdBy+" on "+Et(n.updatedAt))),o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,null,n.title)),o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,null,n.description)),e.props.appUser.role===X.GATEKEEPER&&o.createElement(Ae,{style:Object(y.a)({},nn.cmntCnt,{marginTop:10})},!n.isExit&&o.createElement(_e,{title:"Exit",onPress:function(){e.onExit(n._id,t._id)}})))}):o.createElement(De,{style:{padding:20}},"No takeaways found!!!"))))}):o.createElement(De,null,"No data found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),rn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,gateNo:e.GateNo}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("servant/takeaways/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Takeaways.")})}}(t,n,a))},onExit:function(t,n,a){return e(function(e,t,n){return function(a){(new se).post("servant/exittakeaway/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)},{gateNo:t})}}(t,n,a))}}})(sn),ln=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.name)&&n.state.age>0&&$(n.state.gender)){n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():""};n.props.onSave(n.props.user.homes[n.props.homeIndex]._id,e,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""}),He.success("Servant saved successfully.")):He.fail("Failed to save servant.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",name:"",age:0,gender:"",mobileNo:"",emailId:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Servants",link:"servants"},{title:"New Servant",link:"new-servant"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:3,style:Object(y.a)({},Fe,Ke.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},onKeyPress:function(t){oe(t,e.onSave)}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),cn=Object(p.b)(function(e,t){return{user:e.User,homeIndex:e.AppUser.homeIndex}},function(e){return{onSave:function(t,n,a){return e(tn(t,n,a))}}})(ln),mn=function(e,t,n,a,o){return function(s){e&&e._id&&e._id.length>0?(new se).put("ticket/"+e._id,function(n,r){if(ee(n)&&$(n.data)){if($(a.data)){var i=[],l=(i=a.data).findIndex(function(e){return e._id===n.data});i[l]._id=n.data,i[l].title=e.title,i[l].description=e.description,i[l].status=e.status,i[l].updatedBy=t.name,s(un(i,!0,!1,""))}o(!0)}else o(!1)},e):(new se).post("ticket/"+t.homes[n]._id,function(r,i){if(ee(r)&&$(r.data)){var l=[];$(a.data)&&((l=a.data).unshift({_id:r.data,_homeId:t.homes[n].number,title:e.title,description:e.description,status:e.status,createdBy:t.name,updatedBy:"",createdAt:new Date,comments:[]}),s(un(l,!0,!1,""))),o(!0)}else o(!1)},e)}},un=function(e,t,n,o){return{type:a.LOAD_TICKETS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},dn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.title)&&$(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),He.success("Ticket saved successfully.")):He.fail("Failed to save ticket.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?He.success("Ticket removed successfully."):He.fail("Failed to remove ticket.")})}},{label:"No",onClick:function(){}}]})},n.onResolve=function(e){Object(Qe.confirmAlert)({title:"Confirm to resolve ticket",message:"Are you sure you wish to resolve this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onResolve(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?He.success("Ticket resolved successfully."):He.fail("Failed to resolve ticket.")})}},{label:"No",onClick:function(){}}]})},n.onStart=function(e){Object(Qe.confirmAlert)({title:"Confirm to start ticket",message:"Are you sure you wish to start this ticket?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onStart(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1,viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}),!0===e?He.success("Ticket started successfully."):He.fail("Failed to start ticket.")})}},{label:"No",onClick:function(){}}]})},n.onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[],comment:"",editCommentId:"",editComment:""}):n.setState({viewId:e,comments:t,comment:"",editCommentId:"",editComment:""})},n.onAddComment=function(e){$(n.state.comment)?(n.setState({isLoading:!0}),n.props.onAddComment(e,{_id:"",comment:n.state.comment,createdBy:n.props.user._id,createdByName:n.props.user.name,createdAt:new Date,updatedBy:n.props.user._id,updatedAt:new Date},n.props.appUser,n.props.user,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({comment:""}),He.success("Comment added successfully.")):He.fail("Failed to add comment.")})):He.warn("Please fill comment before Add.")},n.onUpdateComment=function(e){$(n.state.editCommentId)&&$(n.state.editComment)?(n.setState({isLoading:!0}),n.props.onAddComment(e,{_id:n.state.editCommentId,comment:n.state.editComment,updatedBy:n.props.user._id,updatedAt:new Date},n.props.appUser,n.props.user,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({editCommentId:"",editComment:""}),He.success("Comment updated successfully.")):He.fail("Failed to update comment.")})):He.warn("Please fill comment before update.")},n.onRemoveComment=function(e,t){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete this comment?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemoveComment(e,t,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){!0===e?(n.setState({isLoading:!1,editCommentId:"",editComment:"",viewId:""}),He.success("Comment removed successfully.")):(n.setState({isLoading:!1}),He.fail("Failed to remove comment."))})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,data:[],isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:"",editCommentId:"",editComment:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n.onResolve=n.onResolve.bind(Object(ye.a)(n)),n.onStart=n.onStart.bind(Object(ye.a)(n)),n.onView=n.onView.bind(Object(ye.a)(n)),n.onAddComment=n.onAddComment.bind(Object(ye.a)(n)),n.onUpdateComment=n.onUpdateComment.bind(Object(ye.a)(n)),n.onRemoveComment=n.onRemoveComment.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?"":this.props.user.homes[this.props.appUser.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Tickets.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Tickets",link:"tickets"}]}),this.props.appUser.role===X.USER&&o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ticket")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),ee(this.props.tickets)&&this.props.tickets.isUpToDate&&!this.props.tickets.isError&&$(this.props.tickets.data)?this.props.tickets.data.map(function(t,n){return o.createElement(Ae,{key:"tkt"+n,style:xt.row},o.createElement(Ae,{className:"bold",style:xt.ele},o.createElement(De,{className:"bold"},t.createdBy+" from "+t._homeId+" on "+Et(t.createdAt))),o.createElement(Ae,{style:xt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}}):o.createElement(De,null,t.title)),o.createElement(Ae,{style:xt.ele},e.state.isEdit&&e.state.id===t._id?o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}}):o.createElement(De,null,t.description)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.status)),e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:"",status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon}))):o.createElement(Ae,{style:xt.ele},e.props.appUser.role===X.USER&&o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description,status:"INIT",viewId:"",comments:[],comment:""})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),e.props.appUser.role===X.USER&&o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon})),e.props.appUser.role===X.USER&&o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onResolve(t._id)}},o.createElement(De,{className:"pointer",style:{color:V}},"RESOLVE")),(e.props.appUser.role===X.ADMIN||e.props.appUser.role===X.MANAGER)&&"INIT"===t.status&&o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onStart(t._id)}},o.createElement(De,{className:"pointer",style:{color:V}},"START")),o.createElement(Re,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(De,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Ae,{style:nn.cmntsCnr},o.createElement(Ae,{style:nn.cmntsHdr},o.createElement(De,{className:"bold",style:nn.cmntsHdrTxt},"Comments")),o.createElement(Ae,{style:nn.cmntsCnt},o.createElement(Ae,{style:nn.addCmntCnt},o.createElement(Ue,{placeholder:"Comment Text",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt),value:e.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),o.createElement(Ae,{style:nn.saveBtn},o.createElement(_e,{title:"ADD COMMENT",onPress:function(){return e.onAddComment(t._id)}}))),$(e.state.comments)?e.state.comments.map(function(n,a){return o.createElement(Ae,{key:"tktcmt"+a,style:0===a?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ae,{style:nn.cmntHdr},o.createElement(De,{className:"bold"},n.createdByName+" on "+Et(n.updatedAt))),o.createElement(Ae,{style:nn.cmntCnt},e.state.editCommentId===n._id?o.createElement(Ue,{placeholder:"Comment Text",className:"form-control",style:Object(y.a)({},Fe,nn.newCmnt),value:e.state.editComment,onChange:function(t){return e.setState({editComment:t.target.value})}}):o.createElement(De,null,n.comment)),n.createdBy===e.props.user._id&&o.createElement(o.Fragment,null,e.state.editCommentId===n._id?o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){return e.onUpdateComment(t._id)}},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({editCommentId:"",editComment:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon}))):o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({editCommentId:n._id,editComment:n.comment})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onRemoveComment(n._id,t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon})))))}):o.createElement(De,{style:{padding:20}},"No Comments found!!!"))))}):o.createElement(De,{style:{padding:20}},this.props.tickets.isUpToDate?this.props.tickets.isError?this.props.tickets.errorMessage:"No Ticket found!!!":"Loading..."),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),pn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(e){e(un([],!1,!1,"")),(new se).get("tickets"+($(t)?"/"+t:""),function(t,a){ee(t)?(e(un(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onSave:function(t,n,a,o,s){return e(mn(t,n,a,o,s))},onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new se).delete("ticket/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?($(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(un(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onResolve:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new se).delete("ticket/resolve/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?($(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),t(un(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,0,0,o,s))},onStart:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(t){(new se).put("ticket/start/"+e,function(n,s){if(ee(n)&&ee(n.data)&&!0===n.data){if($(a.data)){var r=[],i=(r=a.data).findIndex(function(t){return t._id===e});r[i].status="IN-PROGRESS",t(un(r,!0,!1,""))}o(!0)}else o(!1)},{status:"IN-PROGRESS"})}}(t,0,0,o,s))},onAddComment:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){$(t._id)?(new se).put("ticket/comment/"+t._id,function(a,r){if(ee(a)&&$(a.data)){t.createdAt=new Date;var i=[];if($(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e}),c=i[l].comments.findIndex(function(e){return e._id===t._id});i[l].comments[c].comment=t.comment,i[l].comments[c].updatedBy=t.updatedBy,i[l].comments[c].updatedAt=t.updatedAt,n(un(i,!0,!1,""))}s(!0)}else s(!1)},t):(new se).post("ticket/comment/"+e,function(a,r){if(ee(a)&&$(a.data)){t._id=a.data,t.createdAt=new Date;var i=[];if($(o.data)){var l=(i=o.data).findIndex(function(t){return t._id===e});i[l].comments.unshift(t),n(un(i,!0,!1,""))}s(!0)}else s(!1)},t)}}(t,n,0,0,s,r))},onRemoveComment:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){(new se).delete("ticket/comment/"+e,function(a,r){if(ee(a)&&ee(a.data)&&!0===a.data){if($(o.data)){var i=o.data.findIndex(function(e){return e._id===t});o.data[i].comments=o.data[i].comments.filter(function(t,n){return t._id!==e}),n(un(o.data,!0,!1,""))}s(!0)}else s(!1)})}}(t,n,0,0,s,r))}}})(dn),hn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.title)&&$(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,status:n.state.status};n.props.onSave(e,n.props.user,n.props.appUser.homeIndex,n.props.tickets,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:"",status:"INIT"}),He.success("Ticket saved successfully.")):He.fail("Failed to save ticket.")})}else He.warn("Please fill all the required fields before Save.")},n.state={isLoading:!1,id:"",title:"",description:"",status:"INIT"},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Tickets",link:"tickets"},{title:"New Ticket",link:"new-ticket"}]}),this.props.appUser.role===X.USER?o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){oe(t,e.onSave)}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))):o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Only User can Add New Ticket. If you have USER role and you want to add new ticket change your role to User from settings->My Role and try again."))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),fn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,tickets:e.Tickets}},function(e){return{onSave:function(t,n,a,o,s){return e(mn(t,n,a,o,s))}}})(hn),gn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){n.setState({isLoading:!0}),n.props.onLoad(n.props.user.client._id,n.props.user.homes[n.props.appUser.homeIndex]._id,n.state.isActive,function(e){n.setState({isLoading:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e)})},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.onApprove=function(e){Object(Qe.confirmAlert)({title:"Confirm to Approve Visitor Entry",message:"Are you sure you wish to Approve the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onApprove(e,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isApproved=!0,n.state.data[a].approvedBy=n.props.user.name,n.state.data[a].approvedAt=new Date,n.setState({}),He.success("Visitor approved successfully.")}else He.fail("Failed to approve the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},n.onReject=function(e){Object(Qe.confirmAlert)({title:"Confirm to Reject Visitor Entry",message:"Are you sure you wish to reject visitor?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReject(e,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isRejected=!0,n.state.data[a].approvedBy=n.props.user.name,n.state.data[a].approvedAt=new Date,n.setState({}),He.success("Visitor rejected successfully.")}else He.fail("Failed to reject visitor.")})}},{label:"No",onClick:function(){}}]})},n.onSave=function(e,t,a,o,s,r){n.props.onSave(e,t,a,o,function(e){s(e),n.state.data.unshift(e),n.setState({passCode:e.passCode,isRequestNew:!1})},function(e){r(e)})},n.state={data:[],isActive:!0,isRequestNew:!1,isLoading:!1,passCode:""},n.loadData=n.loadData.bind(Object(ye.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ye.a)(n)),n.onApprove=n.onApprove.bind(Object(ye.a)(n)),n.onReject=n.onReject.bind(Object(ye.a)(n)),n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Visitors",link:"visitors"}]}),this.props.appUser.role===X.USER&&o.createElement(Ae,{style:Object(y.a)({},Ke.row,{textAlign:"right"})},o.createElement(De,{className:"pointer",onClick:function(){return e.setState({isRequestNew:!e.state.isRequestNew})},style:{color:V,fontWeight:"bold",textAlign:"right"}},this.state.isRequestNew?"< Back to Visitors":"Request for a New Visitor")),!this.state.isRequestNew&&o.createElement(Tt,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange,onApprove:this.onApprove,onReject:this.onReject}),this.state.isRequestNew&&o.createElement(Ut,{appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,gateNo:this.props.gateNo,onToggleLoading:function(t){return e.setState({isLoading:t})},onSave:this.onSave,onUpload:this.props.onUpload,onSearch:this.props.onSearch}),$(this.state.passCode)&&o.createElement(Xe.a,{open:$(this.state.passCode),onClose:function(){return e.setState({passCode:""})}},o.createElement(Ae,{style:$e.container},o.createElement(Ae,{style:Ke.row},"Visitor Request created successfully. Please share the passcode("+this.state.passCode+") to yor visitor and ask him/her to show it to the security in the gate while entering."),o.createElement(Ae,{style:Object(y.a)({},Ke.row,{textAlign:"center",fontSize:30,fontWeight:"bold",color:V})},this.state.passCode))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),yn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,n,a,o,s){return e(ct(0,n,a,o,s))},onApprove:function(t,n){return e(function(e,t){return function(n){(new se).get("visitor/approve/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))},onReject:function(t,n){return e(function(e,t){return function(n){(new se).get("visitor/reject/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))},onSave:function(t,n,a,o,s,r){return e(mt(t,n,0,0,s,r))},onUpload:function(t,n){return e(dt(t,n))},onSearch:function(t,n,a){return e(ut(t,n,a))}}})(gn),En=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).passwordPolicyCheck=function(e){var t=/[A-Z]/,n=/[a-z]/,a=/[0-9]/,o=/[!|@|#|$|%|^|&|*|(|)|-|_]/,s="";if(e.length<6)return s="New Password not long enough!";for(var r=0,i=0,l=0,c=0,m=0;m<e.length;m++)t.test(e[m])?r++:n.test(e[m])?i++:a.test(e[m])?l++:o.test(e[m])&&c++;return r<1||i<1||l<1||c<1?s="New Password dose not match with password policy!":s},n.onUpdate=function(){if($(n.state.password)&&$(n.state.newPassword)&&$(n.state.confirmNewPassword))if(n.state.newPassword===n.state.confirmNewPassword){var e=n.passwordPolicyCheck(n.state.newPassword);e.length<1?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.password,n.state.newPassword,function(e,t){n.setState({isLoading:!1}),!0===e?(He.success("Password updated successfully. Please login with your new password."),n.props.onLogout(function(e){})):He.fail(t)})):He.warn(e)}else He.warn("New Password and Confirm New Password not matchs.");else He.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,password:"",newPassword:"",confirmNewPassword:""},n.passwordPolicyCheck=n.passwordPolicyCheck.bind(Object(ye.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1})},o.createElement(Wt,{data:[{title:"Change Password",link:"change-password"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"password",placeholder:"Password",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"password",placeholder:"New Password",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"password",placeholder:"Confirm New Password",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.confirmNewPassword,onChange:function(t){return e.setState({confirmNewPassword:t.target.value})},onKeyPress:function(t){oe(t,e.onUpdate)}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"UPDATE",onPress:this.onUpdate})),o.createElement(Ae,{style:{marginTop:7}},o.createElement(De,null,"Note: Password should contain adleast one uppercase, one lowercase, one number and one special character."))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),bn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new se).post("account/changepassword/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t)},{password:t,newPassword:n})}}(t,n,a,o))},onLogout:function(t){return e(re(t))}}})(En),vn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){$(n.state.name)&&$(n.state.mobileNo)&&$(n.state.emailId)?(n.setState({isLoading:!0}),n.props.onUpdate(n.props.user._id,n.state.name,n.state.mobileNo,n.state.emailId?n.state.emailId.toLowerCase():"",n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?He.success("Profile updated successfully."):He.fail(t)})):He.warn("Please fill all the fields before Update.")},n.state={isLoading:!1,name:"",mobileNo:"",emailId:""},n.onUpdate=n.onUpdate.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.user.name,mobileNo:this.props.user.mobileNo,emailId:this.props.user.emailId})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1})},o.createElement(Wt,{data:[{title:"My Profile",link:"my-profile"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Email Id",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},onKeyPress:function(t){oe(t,e.onUpdate)}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),wn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onUpdate:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(r){(new se).put("account/profile/"+e,function(e,i){ee(e)&&ee(e.data)&&!0===e.data?(o.name=t,o.mobileNo=n,o.emailId=a,r(ue(o)),s(!0,"")):s(!1,i)},{name:t,mobileNo:n,emailId:a})}}(t,n,a,o,s,r))}}})(vn),Sn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(){$(n.state.role)?(n.setState({isLoading:!0}),n.props.onUpdate(n.state.role,function(e,t){n.setState({isLoading:!1}),!0===e?(He.success("Role updated successfully."),n.props.history.push("my-role")):He.fail(t)})):He.warn("Please select role before Update.")},n.state={isLoading:!1,role:""},n.onUpdate=n.onUpdate.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({role:this.props.appUser.role})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1})},o.createElement(Wt,{data:[{title:"My Role",link:"my-role"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Le,{className:"form-control",value:this.state.role,style:Ke.ele,onChange:function(t){return e.setState({role:t.target.value})}},this.props.user.role.split(",").map(function(e,t){return o.createElement("option",{key:"role"+t,value:e},e)}))),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"UPDATE",onPress:this.onUpdate}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),On=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser}},function(e){return{onUpdate:function(t,n){return e(function(e,t){return function(n){n(ce(e)),t(!0,"")}}(t,n))}}})(Sn),kn=function(e,t){return function(n){n(Cn([],!1,!1,"")),(new se).get("ads/"+e,function(e,a){ee(e)&&ee(e.data)?(n(Cn(e.data,!0,!1,"")),t(!0)):t(!1)})}},jn=function(e,t,n,a,o){return function(s){t&&$(t._id)?(new se).put("ad/"+t._id,function(e,n){if(ee(e)&&$(e.data)){var r=a.findIndex(function(t){return t._id===e.data});a[r]._id=e.data,a[r].title=t.title,a[r].description=t.description,s(Cn(a,!0,!1,"")),o(!0)}else o(!1)},t):(new se).post("ad/"+e,function(e,r){ee(e)&&$(e.data)?(a.unshift({_id:e.data,title:t.title,description:t.description,createdBy:n.name,createdAt:new Date}),s(Cn(a,!0,!1,"")),o(!0)):o(!1)},t)}},Cn=function(e,t,n,o){return{type:a.LOAD_ADS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Nn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.title)&&$(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",title:"",description:""}),He.success("Ad saved successfully.")):He.fail("Failed to save ad.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?He.success("Ad removed successfully."):He.fail("Failed to remove ad.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Ads.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Ads",link:"ads"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("new-ad")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),this.props.ads.isUpToDate&&!this.props.ads.isError&&$(this.props.ads.data)?this.props.ads.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",title:"",description:""})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.title)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,title:t.title,description:t.description})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No Ad found!!!":"Loading..."),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),An=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onLoad:function(t,n){return e(kn(t,n))},onSave:function(t,n,a,o,s){return e(jn(t,n,a,o,s))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new se).delete("ad/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(Cn(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(Nn),xn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.title)&&$(n.state.description)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description};n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.ads.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",title:"",description:""}),He.success("Ad saved successfully.")):He.fail("Failed to save ad.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",title:"",description:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Ads",link:"ads"},{title:"New Ad",link:"new-ad"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){oe(t,e.onSave)}})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Tn=Object(p.b)(function(e,t){return{user:e.User,ads:e.Ads}},function(e){return{onSave:function(t,n,a,o,s){return e(jn(t,n,a,o,s))}}})(xn),In=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(e){var t="";if(n.props.homes.isUpToDate&&!n.props.homes.isError&&$(n.props.homes.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&$(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.userId===e}).map(function(e,t){return a.push(e.homeId)}),n.props.homes.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.number})}return t},n.onSearch=function(){if($(n.state.searchText)&&n.props.users.isUpToDate&&!n.props.users.isError&&$(n.props.users.data)){var e=n.state.searchText.toLocaleLowerCase(),t=n.props.homes.data.filter(function(t){return t.number.toLocaleLowerCase()===e});n.setState({searchResult:n.props.users.data.filter(function(n){return(n.name+"").toLocaleLowerCase().indexOf(e)>=0||(n.mobileNo+"").toLocaleLowerCase().indexOf(e)>=0||(n.emailId+"").toLocaleLowerCase().indexOf(e)>=0||(n.number+"").toLocaleLowerCase().indexOf(e)>=0||$(t.filter(function(e){return e.memberIds.indexOf(n._id)>=0}))}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.appUser.homeIndex,n.props.user,n.props.users,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("User removed successfully.")):He.fail("Failed to remove user.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getHomes=n.getHomes.bind(Object(ye.a)(n)),n.onSearch=n.onSearch.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Users",link:"users"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-user/0/false")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New"),o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("approve-users")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right",marginRight:15})},"View Users Waiting for Approval")),o.createElement(Ae,{style:Object(y.a)({},Ke.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search User",className:"form-control",style:Object(y.a)({},Fe,Ke.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){oe(t,e.onSearch)}}),o.createElement(Re,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Te,{className:"pointer",src:Me.search,style:{width:30,height:30}}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ae,{key:"usr"+n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Name: "+($(t.name)?t.name:""))),t._id!==e.props.user._id&&o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-user/"+t._id+"/false")}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},"No user match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ae,{style:xt.row},o.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(De,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Un=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){(new se).delete("member/"+e,function(r,i){ee(r)&&ee(r.data)&&!0===r.data?(n.homes[t].members=n.homes[t].members.filter(function(t,n){return t._id!==e}),s(Bt(n)),a&&!0===a.isUpToDate&&!1===a.isError&&$(a.data)&&(a.data=a.data.filter(function(t,n){return t._id!==e}),s(Ft(a.data,!0,!1,""))),o(!0)):o(!1)})}}(t,n,a,o,s))}}})(In),Ln=function(e,t,n){return function(a){(new se).get("home/"+e,function(e,a){ee(e)&&ee(e.data)&&$(e.data._id)?(e.data.memberIds=e.data.members,delete e.data.members,t(e.data)):n(e&&$(e.message)?e.message:"Failed to load Home.")})}},Dn=function(e){return{type:a.LOAD_USER,payload:e}},Rn=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},_n=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(e){var t="";if(n.props.users.isUpToDate&&!n.props.users.isError&&$(n.props.users.data)&&n.props.userHomes.isUpToDate&&!n.props.userHomes.isError&&$(n.props.userHomes.data)){var a=[];n.props.userHomes.data.filter(function(t){return t.homeId===e}).map(function(e,t){return a.push(e.userId)}),n.props.users.data.filter(function(e){return a.indexOf(e._id)>=0}).map(function(e,n){return t+=(t.length>0?", ":"")+e.name})}return t},n.onSearch=function(){if($(n.state.searchText)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&$(n.props.homes.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.homes.data.filter(function(t){return(t.number+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.user,n.props.homes,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("Home removed successfully.")):He.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.getUsers=n.getUsers.bind(Object(ye.a)(n)),n.onSearch=n.onSearch.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Homes",link:"homes"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-home/0")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),o.createElement(Ae,{style:Object(y.a)({},Ke.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search Home",className:"form-control",style:Object(y.a)({},Fe,Ke.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){oe(t,e.onSearch)}}),o.createElement(Re,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Te,{className:"pointer",src:Me.search,style:{width:30,height:30}}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ae,{key:"home"+n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Number: "+t.number)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.props.history.push("view-home/"+t._id)}},o.createElement(Te,{src:Me.view,style:Vt.editIcon})),o.createElement(Re,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-home/"+t._id)}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},"No home match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ae,{style:xt.row},o.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(De,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Pn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onRemove:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new se).delete("home/"+e,function(s,r){ee(s)&&ee(s.data)&&!0===s.data?(t.homes=t.homes.filter(function(t,n){return t._id!==e}),n.data=n.data.filter(function(t,n){return t._id!==e}),o(Dn(t)),o(Rn(n.data,!0,!1,"")),a(!0)):a(!1)})}}(t,n,a,o))}}})(_n),Mn={mListCnr:{borderColor:V,borderWidth:1,height:"50%"},mListActiveRow:{padding:3,backgroundColor:V,color:J,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"},mListRow:{padding:3,borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid",width:"100%",marginBottom:"1px"}},Bn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getHomes=function(){var e="";return $(n.state.homeIds)&&n.props.homes.isUpToDate&&!n.props.homes.isError&&$(n.props.homes.data)&&n.props.homes.data.filter(function(e){return n.state.homeIds.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.number}),e},n.onSave=function(){if($(n.state.name)&&n.state.age>0&&$(n.state.gender)){var e="";n.state.role.isAdmin&&(e=X.ADMIN),n.state.role.isManager&&(e+=(e.length>0?",":"")+X.MANAGER),n.state.role.isGatekeeper&&(e+=(e.length>0?",":"")+X.GATEKEEPER),n.state.role.isUser&&(e+=(e.length>0?",":"")+X.USER),n.setState({isLoading:!0});var t={_id:n.state.id,number:"",name:n.state.name,age:n.state.age,gender:n.state.gender,mobileNo:n.state.mobileNo,emailId:n.state.emailId?n.state.emailId.toLowerCase():"",type:n.state.type,role:e};n.props.onSave(t,n.state.homeIds,n.props.user,n.props.users,"true"===n.props.match.params.isApprove,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1}}),He.success("User saved successfully.")):He.fail($(t)?t:"Failed to save user.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleHomeModel=function(e){n.setState({isShowHomes:e})},n.state={isLoading:!1,id:"",number:"",name:"",age:0,gender:"",mobileNo:"",emailId:"",type:"OWNER",homeIds:[],role:{isAdmin:!1,isManager:!1,isGatekeeper:!1,isUser:!1},isShowHomes:!1},n.getHomes=n.getHomes.bind(Object(ye.a)(n)),n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onToggleHomeModel=n.onToggleHomeModel.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t,n){t&&$(t._id)?e.setState({isLoading:!1,id:t._id,number:t.number,name:t.name,age:t.age,gender:t.gender,mobileNo:t.mobileNo,emailId:t.emailId,type:t.type,homeIds:n,role:{isAdmin:(","+t.role+",").indexOf(","+X.ADMIN+",")>=0,isManager:(","+t.role+",").indexOf(","+X.MANAGER+",")>=0,isGatekeeper:(","+t.role+",").indexOf(","+X.GATEKEEPER+",")>=0,isUser:(","+t.role+",").indexOf(","+X.USER+",")>=0}}):He.fail("Failed to load User.")},function(e){He.fail($(e)?e:"Failed to load User.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Users",link:"users"},{title:"Edit User",link:"edit-user/0"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Age",className:"form-control",maxLength:2,style:Object(y.a)({},Fe,Ke.ele),value:this.state.age>0?this.state.age+"":"",onChange:function(t){return e.setState({age:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"M"===this.state.gender,text:"Male",onPress:function(){return e.setState({gender:"M"})}}),o.createElement(Ve,{isActive:"F"===this.state.gender,text:"Female",onPress:function(){return e.setState({gender:"F"})}}),o.createElement(Ve,{isActive:"O"===this.state.gender,text:"Other",onPress:function(){return e.setState({gender:"O"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Mobile Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.mobileNo,onChange:function(t){return e.setState({mobileNo:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Email ID",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:"OWNER"===this.state.type,text:"Owner",onPress:function(){return e.setState({type:"OWNER"})}}),o.createElement(Ve,{isActive:"TENANT"===this.state.type,text:"Tenant",onPress:function(){return e.setState({type:"TENANT"})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Role: ")),o.createElement(Ae,{style:Ke.row},o.createElement(Nt,{isActive:this.state.role.isAdmin,text:X.ADMIN,onPress:function(){e.state.role.isAdmin=!e.state.role.isAdmin,e.setState({})}}),o.createElement(Nt,{isActive:this.state.role.isManager,text:X.MANAGER,onPress:function(){e.state.role.isManager=!e.state.role.isManager,e.setState({})}}),o.createElement(Nt,{isActive:this.state.role.isGatekeeper,text:X.GATEKEEPER,onPress:function(){e.state.role.isGatekeeper=!e.state.role.isGatekeeper,e.setState({})}}),o.createElement(Nt,{isActive:this.state.role.isUser,text:X.USER,onPress:function(){e.state.role.isUser=!e.state.role.isUser,e.setState({})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Home(s): "+this.getHomes())),o.createElement(Ae,{style:Ke.row},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isShowHomes:!0})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon}))),this.props.homes.isUpToDate&&!this.props.homes.isError&&$(this.props.homes.data)&&o.createElement(Xe.a,{open:this.state.isShowHomes,onClose:function(){return e.onToggleHomeModel(!1)}},o.createElement(Ae,{style:$e.container},o.createElement(xe,{style:Object(y.a)({},Mn.mListCnr,{maxHeight:"50%"})},this.props.homes.data.map(function(t,n){return o.createElement(De,{key:"home"+n,style:e.state.homeIds.indexOf(t._id)>=0?Mn.mListActiveRow:Mn.mListRow,onClick:function(){e.state.homeIds.indexOf(t._id)>=0?e.setState({homeIds:e.state.homeIds.filter(function(e){return e!==t._id})}):(e.state.homeIds.push(t._id),e.setState({}))}},t.number)})))),o.createElement(Ae,{style:Ke.saveBtn},o.createElement(_e,{title:"true"===this.props.match.params.isApprove?"Approve":"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Fn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,userHomes:e.UserHomes}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("member/"+e,function(e,a){ee(e)&&ee(e.data)&&ee(e.data.member)&&$(e.data.member._id)?t(e.data.member,e.data.homeIds?e.data.homeIds:[]):n(e&&$(e.message)?e.message:"Failed to load Member.")})}}(t,n,a))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){(e=Object.assign(e,{isAM:!0,homeIds:t,isApprove:o}))&&$(e._id)?(new se).put("member/"+e._id,function(t,o){if(ee(t)&&ee(t.data)&&t.data.length>0){if(a.isUpToDate&&!a.isError&&$(a.data)){var r=a.data.findIndex(function(e){return e._id===t.data});r>=0?(a.data[r]._id=t.data,a.data[r].name=e.name):a.data.push({_id:t.data,name:e.name}),n(Ft(a.data,!0,!1,""))}s(!0,"")}else s(!1,o)},e):(new se).post("member/0",function(t,o){ee(t)&&ee(t.data)&&t.data.length>0?(a.isUpToDate&&!a.isError&&$(a.data)&&(a.data.push({_id:t.data,name:e.name}),n(Ft(a.data,!0,!1,""))),s(!0,"")):s(!1,o)},e)}}(t,n,0,o,s,r))}}})(Bn),Wn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onApprove=function(e){Object(Qe.confirmAlert)({title:"Confirm to Approve",message:"You want to Approve the user?",buttons:[{label:"Yes",onClick:function(){n.props.history.push("edit-user/"+e+"/true")}},{label:"No",onClick:function(){}}]})},n.onReject=function(e){Object(Qe.confirmAlert)({title:"Confirm to Reject",message:"You want to Reject the user?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReject(e,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),He.success("User rejected successfully.")):He.fail("Failed to reject the user.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isLoading:!1},n.onApprove=n.onApprove.bind(Object(ye.a)(n)),n.onReject=n.onReject.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Users",link:"users"},{title:"Users Waiting for Approval",link:"approve-users"}]}),$(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.name)),(t.age>0||$(t.gender))&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,(t.age>0?t.age:"")+(t.age>0&&$(t.gender)?", ":"")+($(t.gender)?"M"===t.gender?"Male":"F"===t.gender?"Female":"Other":""))),o.createElement(Ae,{style:xt.ele},"On ",o.createElement(De,{style:{fontWeight:"bold"}},Et(t.createdAt))),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),o.createElement(Ae,{style:xt.ele},o.createElement(_e,{title:"Approve",style:{marginRight:"10px"},onPress:function(){e.onApprove(t._id)}}),o.createElement(_e,{title:"Reject",onPress:function(){e.onReject(t._id)}})))}):o.createElement(De,{style:{padding:20}},"No users found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Hn=Object(p.b)(function(e,t){return{}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){(new se).get("account/wfausers",function(n,a){ee(n)&&ee(n.data)?e(n.data):t(ee(n)&&$(n.message)?n.message:"Failed to load Members.")})}}(t,n))},onReject:function(t,n){return e(function(e,t){return function(n){(new se).delete("account/rejectuser/"+e,function(e,n){ee(e)&&ee(e.data)&&!0===e.data?t(!0):t(!1)})}}(t,n))}}})(Wn),Vn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUsers=function(){var e="";return $(n.state.members)&&n.props.users.isUpToDate&&!n.props.users.isError&&$(n.props.users.data)&&n.props.users.data.filter(function(e){return n.state.members.indexOf(e._id)>=0}).map(function(t,n){return e+=(e.length>0?", ":"")+t.name+($(t.number)?"("+t.number+")":"")}),e},n.onSave=function(){if($(n.state.blockId)&&$(n.state.number)){n.setState({isLoading:!0});var e={_id:n.state.id,_blockId:n.state.blockId,number:n.state.number,address:n.state.address,bedRoom:n.state.bedRoom,parking:n.state.parking,description:n.state.description,memberIds:n.state.members};n.props.onSave(e,n.props.user,n.props.homes,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[]}),He.success("Home saved successfully.")):He.fail($(t)?t:"Failed to save home.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onToggleUserModel=function(e){n.setState({isShowUsers:e})},n.state={isLoading:!1,id:"",blockId:"",number:"",address:"",bedRoom:1,parking:"",description:"",members:[],isShowUsers:!1},n.getUsers=n.getUsers.bind(Object(ye.a)(n)),n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onToggleUserModel=n.onToggleUserModel.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t.length>0&&"0"!==t&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){t&&$(t._id)?e.setState({isLoading:!1,id:t._id,blockId:t._blockId,number:t.number,address:t.address,bedRoom:t.bedRoom,parking:t.parking,description:t.description,members:t.memberIds}):He.fail("Failed to load Home.")},function(e){He.fail($(e)?e:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Homes",link:"homes"},{title:"Edit Home",link:"edit-home/0"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Le,{className:"form-control",value:this.state.blockId,style:Ke.ele,onChange:function(t){return e.setState({blockId:t.target.value})}},o.createElement("option",{key:"block0",value:""},"Select Block"),this.props.blocks&&this.props.blocks.isUpToDate&&!this.props.blocks.isError&&$(this.props.blocks.data)&&this.props.blocks.data.map(function(e,t){return o.createElement("option",{key:"block"+t,value:e._id},e.name)}))),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Number",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Address",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"No of bed rooms: ")),o.createElement(Ae,{style:Ke.row},o.createElement(Ve,{isActive:1===this.state.bedRoom,text:"1",onPress:function(){return e.setState({bedRoom:1})}}),o.createElement(Ve,{isActive:2===this.state.bedRoom,text:"2",onPress:function(){return e.setState({bedRoom:2})}}),o.createElement(Ve,{isActive:3===this.state.bedRoom,text:"3",onPress:function(){return e.setState({bedRoom:3})}}),o.createElement(Ve,{isActive:4===this.state.bedRoom,text:"4",onPress:function(){return e.setState({bedRoom:4})}}),o.createElement(Ve,{isActive:5===this.state.bedRoom,text:"5",onPress:function(){return e.setState({bedRoom:5})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Parking",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.parking,onChange:function(t){return e.setState({parking:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"User(s): "+this.getUsers())),o.createElement(Ae,{style:Ke.row},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isShowUsers:!0})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon}))),this.props.users.isUpToDate&&!this.props.users.isError&&$(this.props.users.data)&&o.createElement(Xe.a,{open:this.state.isShowUsers,onClose:function(){return e.onToggleUserModel(!1)}},o.createElement(Ae,{style:$e.container},o.createElement(xe,{style:Object(y.a)({},Mn.mListCnr,{maxHeight:"50%"})},this.props.users.data.map(function(t,n){return o.createElement(De,{key:"user"+n,style:e.state.members.indexOf(t._id)>=0?Mn.mListActiveRow:Mn.mListRow,onClick:function(){e.state.members.indexOf(t._id)>=0?e.setState({members:e.state.members.filter(function(e){return e!==t._id})}):(e.state.members.push(t._id),e.setState({}))}},t.name+(t.number?"("+t.number+")":""))})))),o.createElement(Ae,{style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Gn=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(Ln(t,n,a))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(t){e&&$(e._id)?(new se).put("home/"+e._id,function(o,s){if(ee(o)&&ee(o.data)&&o.data.length>0){if(n.isUpToDate&&!n.isError&&$(n.data)){var r=n.data.findIndex(function(e){return e._id===o.data});n.data[r]._id=o.data,n.data[r].number=e.number,t(Rn(n.data,!0,!1,""))}a(!0,"")}else a(!1,s)},e):(new se).post("home/0",function(o,s){ee(o)&&ee(o.data)&&o.data.length>0?(n.isUpToDate&&!n.isError&&$(n.data)&&(n.data.push({_id:o.data,number:e.number}),t(Rn(n.data,!0,!1,""))),a(!0,"")):a(!1,s)},e)}}(t,0,a,o))},onCheckNumberAvail:function(t,n,a){return e(function(e,t,n){return function(e){(new se).get("home/checkno/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(0,n,a))}}})(Vn),Kn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){n.setState({isLoading:!0}),n.props.onLoad(n.props.user.client._id,"",n.state.isActive,function(e){n.setState({isLoading:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e)})},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.onEnter=function(e){Object(Qe.confirmAlert)({title:"Confirm to Allow Visitor Entry",message:"Are you sure you wish to Allow the visitor to Enter?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onEnter(e,n.props.gateNo,function(t){if(n.setState({isLoading:!1}),!0===t){var a=n.state.data.findIndex(function(t){return t._id===e});n.state.data[a].isEntered=!0,n.state.data[a].enteredBy=n.props.user.name,n.state.data[a].enteredAt=new Date,n.setState({}),He.success("Visitor entered successfully.")}else He.fail("Failed to allow the entry of visitor.")})}},{label:"No",onClick:function(){}}]})},n.onExit=function(e){Object(Qe.confirmAlert)({title:"Confirm to Exit Visitor",message:"Are you sure you wish to exit visitor?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onExit(e,n.props.gateNo,function(t){n.setState({isLoading:!1}),!0===t?(n.setState({data:n.state.data.filter(function(t){return t._id!==e})}),He.success("Visitor exit successfully.")):He.fail("Failed to exit visitor.")})}},{label:"No",onClick:function(){}}]})},n.state={data:[],isActive:!0,isLoading:!1},n.loadData=n.loadData.bind(Object(ye.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ye.a)(n)),n.onEnter=n.onEnter.bind(Object(ye.a)(n)),n.onExit=n.onExit.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Visitors",link:"all-visitors"}]}),o.createElement(Tt,{user:this.props.user,appUser:this.props.appUser,data:this.state.data,isActive:this.state.isActive,onActiveChange:this.onActiveChange,onEnter:this.onEnter,onExit:this.onExit}),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Yn=Object(p.b)(function(e,t){return{user:e.User,appUser:e.AppUser,homes:e.Homes,gateNo:e.GateNo}},function(e){return{onLoad:function(t,n,a,o,s){return e(ct(0,n,a,o,s))},onEnter:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("visitor/enter/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,n,a))},onExit:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("visitor/exit/"+e+"/"+t,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?n(!0):n(!1)})}}(t,n,a))}}})(Kn),qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onPush=function(){$(n.state.title)&&$(n.state.body)?Object(Qe.confirmAlert)({title:"Confirm to send push notification",message:"Are you sure? This notification will send to all users using this app in your Appartment. Are you sure you want to Push?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0});var e={title:n.state.title,body:n.state.body};n.props.onPush(n.props.user.client._id,e,n.props.user,function(e){if(n.setState({isLoading:!1}),ee(e)){var t=n.state.data;t.unshift(e),n.setState({data:t,title:"",body:""}),He.success("Notification pushed successfully.")}else He.fail("Failed to push Notification.")})}},{label:"No",onClick:function(){}}]}):He.warn("Please fill all the required fields before Push.")},n.state={isLoading:!1,data:[],title:"",body:""},n.onPush=n.onPush.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.client._id,function(t){e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),He.fail(t)})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Notification",link:"notification"}]}),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Body",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})},onKeyPress:function(t){oe(t,e.onPush)}})),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{style:{marginRight:10},title:"PUSH",onPress:this.onPush}),o.createElement(_e,{title:"CLEAR",onPress:function(){e.setState({title:"",body:""})}})),$(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.title)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.body)),o.createElement(Ae,{style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{title:"Duplicate",onPress:function(){e.setState({title:t.title,body:t.body})}})))}):o.createElement(De,{style:{padding:20}},"No Nofification found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),zn=Object(p.b)(function(e,t){return{user:e.User}},function(e){return{onLoad:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("notifications/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Notification.")})}}(t,n,a))},onPush:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new se).post("notification/"+e,function(e,o){ee(e)&&$(e.data)?a({_id:e.data,title:t.title,body:t.body,createdBy:n.name,createdAt:new Date}):a(null)},t)}}(t,n,a,o))}}})(qn),Zn=function(e,t,n,o){return{type:a.LOAD_OUTINGS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},Jn=n(19),Xn=n.n(Jn),Qn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(ee(n.state.fromDate)&&ee(n.state.toDate)){n.setState({isLoading:!0});var e={_homeId:n.props.user.homes[n.props.appUser.homeIndex].number,fromDate:n.state.fromDate,toDate:n.state.toDate,place:n.state.place,address:n.state.address,isReturned:!1,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(e,n.props.user.homes[n.props.appUser.homeIndex]._id,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date}),He.success("Outing submitted successfully.")):He.fail("Failed to submit Outing.")})}else He.warn("Please fill all the required fields before submit Outing.")},n.state={isLoading:!1,fromDate:"",toDate:"",place:"",address:"",datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Notice",link:"notice"},{title:"New Outing",link:"new-outing"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Xn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ae,{style:Ke.row},o.createElement(Xn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ae,{className:"center",style:Ke.saveBtn},o.createElement(_e,{title:"SUBMIT",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),$n=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,outings:e.Outings}},function(e){return{onSave:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){e&&$(e._id)?o(!1):(new se).post("outing/"+t,function(t,r){console.log("result:",t),ee(t)&&$(t.data)?(e._id=t.data,e.createdBy=n.name,a.data.unshift(e),s(Zn(a.data,!0,!1,"")),o(!0)):o(!1)},e)}}(t,n,a,o,s))}}})(Qn),ea=function(e,t,n,o){return{type:a.LOAD_DOCUMENTS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},ta=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onFileSelect=function(e){var t=e.target.files[0];if(t&&t.name){var a=t.name.split(".");if(a&&a.length>1){var o=ne();o+="."+a[a.length-1],n.setState({isLoading:!0});var s={file:t,type:t.type,name:o};n.props.onUpload(s,function(e,t){n.setState({isLoading:!1}),e?n.setState({fileName:o}):He.fail(t||"Failed to upload file.")})}}},n.onSave=function(){if($(n.state.title)&&$(n.state.fileName)){n.setState({isLoading:!0});var e={_id:n.state.id,title:n.state.title,description:n.state.description,file:n.state.fileName,createdBy:n.props.user.name,createdAt:new Date};n.props.onSave(n.state.homeId,e,n.props.homeIndex,n.props.user,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",homeId:$(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""}),He.success("Document saved successfully.")):He.fail("Failed to save document.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onClear=function(){n.setState({id:"",homeId:$(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""})},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.documents.data,function(e){n.setState({isLoading:!1}),!0===e?He.success("Document removed successfully."):He.fail("Failed to remove document.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,id:"",homeId:$(n.props.user.homes)?n.props.user.homes[0]._id:"",title:"",description:"",fileName:""},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n.onClear=n.onClear.bind(Object(ye.a)(n)),n.onFileSelect=n.onFileSelect.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.props.onLoad(this.props.user.homes[this.props.homeIndex]._id,function(t){e.setState({isLoading:!1}),t||He.fail("Failed to load Documents.")})}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"My Documents",link:"my-documents"}]}),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Title",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),$(this.props.user.homes)&&o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:{marginRight:10}},"Home:"),this.props.user.homes.map(function(t,n){return o.createElement(Ve,{isActive:t._id===e.state.homeId,text:t.number,key:"home"+n,onPress:function(){return e.setState({homeId:t._id})}})})),o.createElement(Ae,{style:Ke.row},o.createElement("input",{type:"file",name:"file",placeholder:"Select Document",onChange:this.onFileSelect}),$(this.state.fileName)&&o.createElement(De,{style:{marginLeft:15}},this.state.fileName)),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(_e,{title:"CLEAR",onPress:this.onClear})),this.props.documents.isUpToDate&&!this.props.documents.isError&&$(this.props.documents.data)?this.props.documents.data.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.title)),$(t.description)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),$(e.props.user.homes.filter(function(e){return e._id===t._id}))&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Home: "+e.props.user.homes.filter(function(e){return e._id===t._id})[0].number)),$(t.file)&&o.createElement(Ae,{style:xt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:W+t.file},t.file)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},this.props.documents.isUpToDate?"No Documents found!!!":this.props.documents.isError?this.props.documents.errorMessage:"No Documents found!!!"),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),na=Object(p.b)(function(e,t){return{homeIndex:e.AppUser.homeIndex,user:e.User,documents:e.Documents}},function(e){return{onLoad:function(t,n){return e(function(e,t){return function(n){n(ea([],!1,!1,"")),(new se).get("documents/"+e,function(e,a){ee(e)&&ee(e.data)?(n(ea(e.data,!0,!1,"")),t(!0)):t(!1)})}}(t,n))},onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(n){t&&$(t._id)?(new se).put("document/"+t._id,function(e,a){if(ee(e)&&$(e.data)){var r=o.findIndex(function(t){return t._id===e.data._id});o[r]._id=e.data._id,o[r].title=t.title,o[r].description=t.description,o[r].file=t.file,n(ea(o,!0,!1,"")),s(!0)}else s(!1)},t):(new se).post("document/"+e,function(e,r){ee(e)&&$(e.data)?(o.unshift({_id:e.data._id,title:t.title,description:t.description,file:t.file,createdBy:a.name,createdAt:new Date}),n(ea(o,!0,!1,"")),s(!0)):s(!1)},t)}}(t,n,0,o,s,r))},onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new se).delete("document/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(ea(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))},onUpload:function(t,n){return e(dt(t,n))}}})(ta),aa=function(e,t,n,o){return{type:a.LOAD_BLOCKS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},oa=function(e,t,n,o){return{type:a.LOAD_HOMES,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}},sa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if($(n.state.searchText)&&n.props.blocks.isUpToDate&&!n.props.blocks.isError&&$(n.props.blocks.data)){var e=n.state.searchText.toLocaleLowerCase();n.setState({searchResult:n.props.blocks.data.filter(function(t){return(t.name+"").toLocaleLowerCase().indexOf(e)>=0}),searchResultIndex:10})}else n.setState({searchResult:[],searchResultIndex:10})},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){var t=$(n.props.homes.data)?n.props.homes.data.filter(function(t){return t._blockId===e}):[];if($(t)){var a="";t.map(function(e){a+=(a.length>0?", ":"")+e.number}),a=t.length>1?"Homes "+a+" are assigned under this block. Please move these homes to other block and try to delete":"Home "+a+" is assigned under this block. Please move this home to other block and try to delete.",He.fail(a)}else n.setState({isLoading:!0}),n.props.onRemove(e,n.props.blocks.data,function(e){n.setState({isLoading:!1}),!0===e?(n.onSearch(),He.success("Home removed successfully.")):He.fail("Failed to remove home.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1,isEdit:!1,searchText:"",searchResult:[],searchResultIndex:10},n.onSearch=n.onSearch.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:xt.content},o.createElement(Wt,{data:[{title:"Blocks",link:"blocks"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},o.createElement(De,{className:"fr pointer",onClick:function(){return e.props.history.push("edit-block/0")},style:Object(y.a)({},xt.ele,{color:V,textAlign:"right"})},"Add New")),o.createElement(Ae,{style:Object(y.a)({},Ke.row,{marginTop:0,paddingTop:0})},o.createElement(Ie,{type:"text",placeholder:"Search Block",className:"form-control",style:Object(y.a)({},Fe,Ke.ele,{display:"inline",width:"calc(100% - 40px)",marginRight:10}),value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){oe(t,e.onSearch)}}),o.createElement(Re,{style:{height:30,marginTop:13},onClick:this.onSearch},o.createElement(Te,{className:"pointer",src:Me.search,style:{width:30,height:30}}))),$(this.state.searchResult)?this.state.searchResult.slice(0,this.state.searchResultIndex).map(function(t,n){return o.createElement(Ae,{key:"block"+n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Name: "+t.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Description: "+($(t.description)?t.description:""))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{marginRight:10}},"Homes: "),$(e.props.homes.data)&&$(e.props.homes.data.filter(function(e){return e._blockId===t._id}))?e.props.homes.data.filter(function(e){return e._blockId===t._id}).map(function(e,t){return o.createElement(ge.b,{to:"edit-home/"+e._id,style:{marginRight:10}},e.number)}):o.createElement(De,null,"No homes assigned under this block.")),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:function(){e.props.history.push("edit-block/"+t._id)}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon}))))}):o.createElement(De,{style:{padding:20}},"No block match with your search!!!"),this.state.searchResult.length>this.state.searchResultIndex&&o.createElement(Ae,{style:xt.row},o.createElement(Ae,{style:{flex:1,flexDirection:"row",padding:10}},o.createElement(De,{style:{color:V,fontWeight:"bold"},onClick:function(){return e.setState({searchResultIndex:e.state.searchResultIndex+10})}},"Show More"))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),ra=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onRemove:function(t,n,a){return e(function(e,t,n){return function(a){(new se).delete("block/"+e,function(o,s){ee(o)&&ee(o.data)&&!0===o.data?(t=t.filter(function(t,n){return t._id!==e}),a(aa(t,!0,!1,"")),n(!0)):n(!1)})}}(t,n,a))}}})(sa),ia=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.name)&&($(n.state.id)||n.state.homeCount>0))if($(n.props.blocks.data)&&$(n.props.blocks.data.filter(function(e){return e.name===n.state.name})))He.fail("Block with same name already exists. Please give different name.");else{n.setState({isLoading:!0});var e={_id:n.state.id,name:n.state.name,description:n.state.description};e=Object.assign(e,{homeCount:n.state.homeCount}),n.props.onSave(n.props.user.client._id,e,n.props.user,n.props.blocks&&n.props.blocks.data?n.props.blocks.data:[],n.props.homes&&n.props.homes.data?n.props.homes.data:[],function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({id:"",name:"",description:"",homeCount:0}),He.success($(n.state.id)?"Block saved successfully.":"Block saved and home(s) created successfully.")):He.fail($(t)?t:"Failed to save block.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.state={isLoading:!1,id:"",name:"",description:"",homeCount:0},n.onSave=n.onSave.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;if(e.length>0&&"0"!==e&&this.props.blocks&&$(this.props.blocks.data)){var t=this.props.blocks.data.filter(function(t,n){return t._id===e});$(t)&&this.setState({id:t[0]._id,name:t[0].name,description:t[0].description})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Object(y.a)({},xt.content,{flex:1,backgroundColor:G})},o.createElement(Wt,{data:[{title:"Blocks",link:"blocks"},{title:"Edit Block",link:"edit-block/0"}]}),o.createElement(Ae,{style:Ke.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Name",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyPress:function(t){oe(t,e.onSave)}})),!$(this.state.id)&&o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"number",placeholder:"Number of houses in this block",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.homeCount>0?this.state.homeCount+"":"",onChange:function(t){return e.setState({homeCount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.saveBtn},o.createElement(_e,{title:"SAVE",onPress:this.onSave}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),la=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,blocks:e.Blocks,homes:e.Homes}},function(e){return{onSave:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(r){t&&$(t._id)?(new se).put("block/"+t._id,function(e,n){if(ee(e)&&$(e.data)){var o=a.findIndex(function(t){return t._id===e.data});a[o]._id=e.data,a[o].name=t.name,a[o].description=t.description,r(aa(a,!0,!1,"")),s(!0,"")}else s(!1,n)},t):(new se).post("block/"+e,function(e,i){ee(e)&&ee(e.data)&&$(e.data.blockId)?(a.unshift({_id:e.data.blockId,name:t.name,description:t.description,createdBy:n.name}),r(aa(a,!0,!1,"")),$(e.data.homes)&&(e.data.homes.forEach(function(e){e.memberIds=e.members,delete e.members}),o=o.concat(e.data.homes),r(oa(o,!0,!1,""))),s(!0,"")):s(!1,i)},t)}}(t,n,a,o,s,r))}}})(ia),ca=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if(n.state.amount>0&&(n.state.isAllHome||n.state.homes.length>0)){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={amount:n.state.amount,description:n.state.description,month:n.state.month,year:n.state.year,isAllHome:n.state.isAllHome,homes:e};n.setState({isLoading:!0}),n.props.onSave(n.props.user.client._id,t,n.props.user,function(e,t){n.setState({isLoading:!1}),!0===e?(n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]}),He.success("Payment saved successfully.")):He.fail(t||"Failed to save payment.")})}else He.warn("Please fill all required fields before Save.")},n.onClear=function(){n.setState({amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]})},n.state={isLoading:!1,amount:0,description:"",month:(new Date).getMonth(),year:(new Date).getFullYear(),searchText:"",showHomes:!1,isAllHome:!1,homes:[]},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onClear=n.onClear.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Ae,{style:ma.container},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.amount>0?this.state.amount+"":"",onChange:function(t){return e.setState({amount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:{marginTop:15}},"Payment for "+this.state.year+" "),o.createElement(Le,{className:"form-control",value:this.state.month,style:Ke.ele,onChange:function(t){return e.setState({month:t.target.value})}},Q.filter(function(e,t){return e.value<=(new Date).getMonth()}).map(function(e,t){return o.createElement("option",{key:"month"+t,value:e.value},e.title)}))),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:{marginRight:15}},"Apply to Home(s): "+(this.state.isAllHome?"":this.state.homes.length)),o.createElement(Nt,{isActive:this.state.isAllHome,text:"All Homes",onPress:function(){return e.setState({isAllHome:!e.state.isAllHome})}})),!this.state.isAllHome&&o.createElement(xe,{style:Object(y.a)({},Ke.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(De,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:V},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),!this.state.isAllHome&&o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ke.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),!this.state.isAllHome&&this.state.showHomes&&$(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ke.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(De,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{style:{marginRight:10},title:"SAVE",onPress:this.onSave}),o.createElement(_e,{title:"CLEAR",onPress:this.onClear})),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),ma={container:{width:"100%",paddingLeft:15,paddingRight:15}},ua=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(){if(n.state.fromDate&&n.state.toDate){var e=[];n.state.homes.map(function(t,n){return e.push(t._id)});var t={fromDate:n.state.fromDate,toDate:n.state.toDate,homes:e};n.setState({isLoading:!0}),n.props.onSearch(n.props.user.client._id,t,n.props.user,function(e){n.setState({isLoading:!1,isShowSearch:!1,data:e})},function(e){n.setState({isLoading:!1}),He.fail(e||"Failed to load payment.")})}else He.warn("Please fill all required fields before Search.")},n.onUpdate=function(){if($(n.state.uPaymentId)&&n.state.uAmount>0){var e={amount:n.state.uAmount,description:n.state.uDescription};n.setState({isLoading:!0}),n.props.onUpdate(n.state.uPaymentId,e,n.props.user,function(e,t){if(n.setState({isLoading:!1}),!0===e){var a=n.state.data,o=a.findIndex(function(e){return e._id===n.state.uPaymentId});a[o].amount=n.state.uAmount,a[o].description=n.state.uDescription,n.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:"",data:a}),He.success("Payment updated successfully.")}else He.fail(t||"Failed to update payment.")})}else He.warn("Please fill all required fields before update.")},n.state={isLoading:!1,isShowSearch:!0,fromDate:"",toDate:"",datePickerType:"",datePickerDate:new Date,homes:[],searchText:"",showHomes:!1,data:[],isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""},n.onSearch=n.onSearch.bind(Object(ye.a)(n)),n.onUpdate=n.onUpdate.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(Ae,{style:da.container},this.state.isShowSearch?o.createElement(Ae,null,o.createElement(Ae,{style:Ke.row},o.createElement(Xn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ae,{style:Ke.row},o.createElement(Xn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:{marginRight:15}},"Home(s): "+(this.state.homes.length>0?this.state.homes.length:"All"))),o.createElement(xe,{style:Object(y.a)({},Ke.row,{width:"100%",overflow:"scroll"})},this.state.homes.map(function(t,n){return o.createElement(De,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6,color:V},onClick:function(){e.setState({homes:e.state.homes.filter(function(e,n){return e._id!==t._id})})}},t.number)})),o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Enter Home Number",className:"form-control",style:Object(y.a)({},Ke.ele,{flexDirection:"row",padding:6,borderWidth:1,borderColor:z,borderRadius:5}),value:this.state.searchText,onChange:function(t){return e.setState({showHomes:!0,searchText:t.target.value})}})),this.state.showHomes&&$(this.state.searchText)&&this.props.homes&&this.props.homes.data.length>0&&o.createElement(xe,{style:Object(y.a)({},Ke.row,{width:"100%",overflow:"scroll"})},this.props.homes.data.filter(function(t,n){return t.number.toLowerCase().indexOf(e.state.searchText.toLowerCase())>=0&&e.state.homes.filter(function(e){return e._id===t._id}).length<1}).map(function(t,n){return o.createElement(De,{className:"pointer",key:"ho"+n,style:{flexDirection:"column",marginRight:6},onClick:function(){var n=e.state.homes;n.push(t),e.setState({homes:n})}},t.number)})),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{title:"SEARCH",onPress:this.onSearch}))):o.createElement(Ae,null,o.createElement(De,{className:"fr pointer",style:{color:V,fontWeight:"bold",textAlign:"right"},onClick:function(){e.setState({isShowSearch:!0})}},"Show Search")),o.createElement(Ae,null,$(this.state.data)?this.state.data.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},"Rs."+t.amount+" for "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+($(t.mode)?" "+t.mode:"")+($(t.type)?" "+t.type:""))),$(t.description)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),o.createElement(Ae,{style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{title:"Update",onPress:function(){e.setState({isShowUpdateModel:!0,uPaymentId:t._id,uAmount:t.amount,uDescription:t.description})}})))}):o.createElement(De,{style:{padding:20}},"No Payment found!!!")),o.createElement(Xe.a,{open:this.state.isShowUpdateModel,onClose:function(){e.setState({isShowUpdateModel:!1,uPaymentId:"",uAmount:0,uDescription:""})}},o.createElement(Ae,{style:$e.container},o.createElement(Ae,{style:$e.content},o.createElement(Ae,{style:Ke.row},o.createElement(Ie,{type:"text",placeholder:"Amount",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.uAmount>0?this.state.uAmount+"":"",onChange:function(t){return e.setState({uAmount:+t.target.value.replace(/[^0-9]/g,"")})}})),o.createElement(Ae,{style:Ke.row},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.uDescription,onChange:function(t){return e.setState({uDescription:t.target.value})}})),o.createElement(Ae,{className:"center",style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{style:{marginRight:10},title:"SAVE",onPress:this.onUpdate}),o.createElement(_e,{title:"CLEAR",onPress:function(){e.setState({uAmount:0,uDescription:""})}}))))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),da={container:{width:"100%",paddingLeft:15,paddingRight:15}},pa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:1,history:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:ha.content},o.createElement(Wt,{data:[{title:"Payment",link:"payment"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Re,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},ha.tab,ha.activeTab):ha.tab,onClick:function(){return e.setState({activeTab:1})}},"NEW"),o.createElement(Re,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},ha.tab,ha.activeTab):ha.tab,onClick:function(){return e.setState({activeTab:2})}},"HISTORY")),o.createElement(Ae,{className:"tab-content",style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?o.createElement(ca,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSave:this.props.onSave}):o.createElement(ua,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,homes:this.props.homes,onSearch:this.props.onSearch,onUpdate:this.props.onUpdate}))))}}]),t}(o.Component),ha={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:H,borderBottomStyle:"solid",color:H}},fa=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,homes:e.Homes}},function(e){return{onLoad:function(t,n,a,o){return e(it(0,n,a,o))},onSave:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new se).post("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to save Payment.")},t)}}(t,n,0,o))},onSearch:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(n){(new se).post("payments/"+e,function(e,t){ee(e)?a(e.data):o($(t)?t:"Failed to load Payments.")},t)}}(t,n,0,o,s))},onUpdate:function(t,n,a,o){return e(function(e,t,n,a){return function(n){(new se).put("payment/"+e,function(e,t){ee(e)&&ee(e.data)&&!0===e.data?a(!0,""):a(!1,t||"Failed to update Payment.")},t)}}(t,n,0,o))}}})(pa),ga=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,homeId:"",data:{}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.blocks,n=e.data,a="";if(n&&$(n._id)&&t&&t.isUpToDate&&!t.isError&&t.data){var s=t.data.filter(function(e,t){return e._id===n._blockId});s&&s.length>0&&(a=s[0].name)}return n&&$(n._id)?o.createElement(Ae,null,o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Block: "+a)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Number: "+n.number)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Address: "+n.address)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"No of bed room(s): "+n.bedRoom)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Parking: "+n.parking)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Description: "+n.description))):o.createElement(De,null,"No data found!!!")}}]),t}(o.Component),ya=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Members.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Members")),$(e)?e.map(function(e,t){return o.createElement(Ae,{key:t,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},($(e.createdBy)?e.createdBy:"")+" on "+yt(e.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.age+", "+("M"===e.gender?"Male":"F"===e.gender?"Female":"Other"))),$(e.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.mobileNo)),$(e.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.emailId)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.type)))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),Ea=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Vehicles")),$(e)?e.map(function(e,t){return o.createElement(Ae,{key:t,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},e.createdBy+" on "+yt(e.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.type)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.number)))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),ba=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",takeaways:[]}):n.setState({viewId:e,takeaways:t})},n.state={data:[],viewId:"",takeaways:[]},n.onView=n.onView.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Servants.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Servants")),$(t)?t.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{className:"bold"},t.createdBy+" on "+Et(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.name)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.age+", "+("M"===t.gender?"Male":"F"===t.gender?"Female":"Other"))),$(t.mobileNo)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.mobileNo)),$(t.emailId)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.emailId)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{},onClick:function(){e.onView(t._id,t.takeaways)}},o.createElement(De,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Takeaways"))),e.state.viewId===t._id&&o.createElement(Ae,{style:nn.cmntsCnr},o.createElement(Ae,{style:nn.cmntsHdr},o.createElement(De,{className:"bold",style:nn.cmntsHdrTxt},"Takeaways")),o.createElement(Ae,{style:nn.cmntsCnt},$(e.state.takeaways)?e.state.takeaways.map(function(e,t){return o.createElement(Ae,{key:"tkycmt"+t,style:0===t?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ae,{style:nn.cmntHdr},o.createElement(De,{className:"bold"},e.createdBy+" on "+Et(e.updatedAt))),o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,null,e.title)),o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,null,e.description)),e.isExit?o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,{style:{color:Y}},"Exit by "+e.exitBy+" in Gate "+e.exitGateNo+" on "+Et(e.exitAt))):o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,{style:{color:K}},"Still not exit.")))}):o.createElement(De,{style:{padding:20}},"No takeaways found!!!"))))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),va=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",comments:[]}):n.setState({viewId:e,comments:t})},n.state={data:[],viewId:"",comments:[]},n.onView=n.onView.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Tickets")),$(t)?t.map(function(t,n){return o.createElement(Ae,{key:"tkt"+n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{className:"bold"},t.createdBy+" from "+t._homeId+" on "+Et(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.title)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.status)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{},onClick:function(){e.onView(t._id,t.comments)}},o.createElement(De,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Comments"))),e.state.viewId===t._id&&o.createElement(Ae,{style:nn.cmntsCnr},o.createElement(Ae,{style:nn.cmntsHdr},o.createElement(De,{className:"bold",style:nn.cmntsHdrTxt},"Comments")),o.createElement(Ae,{style:nn.cmntsCnt},$(e.state.comments)?e.state.comments.map(function(e,t){return o.createElement(Ae,{key:"tkycmt"+t,style:0===t?nn.cmntCnrFst:nn.cmntCnr},o.createElement(Ae,{style:nn.cmntHdr},o.createElement(De,{className:"bold"},e.createdByName+" on "+Et(e.updatedAt))),o.createElement(Ae,{style:nn.cmntCnt},o.createElement(De,null,e.comment)))}):o.createElement(De,{style:{padding:20}},"No Comments found!!!"))))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),wa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadData=function(){n.props.homeId.length>0&&(n.props.onToggleLoading(!0),n.props.onLoad(n.props.homeId,n.state.isActive,function(e){n.props.onToggleLoading(!1),n.setState({data:e})},function(e){n.props.onToggleLoading(!1),He.fail($(e)?e:"Failed to load Visitors.")}))},n.onActiveChange=function(){n.setState({isActive:!n.state.isActive},n.loadData)},n.state={data:[],isActive:!0},n.loadData=n.loadData.bind(Object(ye.a)(n)),n.onActiveChange=n.onActiveChange.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Visitors")),o.createElement(Tt,{data:this.state.data,isActive:this.state.isActive,user:this.props.user,appUser:this.props.appUser,onActiveChange:this.onActiveChange}))}}]),t}(o.Component),Sa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onView=function(e,t){n.state.viewId===e?n.setState({viewId:"",transactions:[]}):n.setState({viewId:e,transactions:t})},n.getAmountPaid=function(e){var t=0;return $(e)&&e.filter(function(e,t){return!0===e.isSuccess}).map(function(e,n){return t+=e.amount}),t},n.state={data:[],viewId:"",transactions:[]},n.onView=n.onView.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Payments.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Payments")),$(t)?t.map(function(t,n){return o.createElement(Ae,{key:n,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.createdBy+" on "+yt(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Rs. "+t.amount+" for "+Q.filter(function(e){return e.value===t.forMonth})[0].title+"/"+t.forYear+($(t.mode)?" "+t.mode:"")+($(t.type)?" "+t.type:""))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Amount Paid Rs. "+e.getAmountPaid(t.transactions))),$(t.description)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{},onClick:function(){e.onView(t._id,t.transactions)}},o.createElement(De,{className:"pointer",style:{color:V}},(e.state.viewId===t._id?"Hide":"View")+" Transactions"))),e.state.viewId===t._id&&o.createElement(Ae,{style:Oa.cmntsCnr},o.createElement(Ae,{style:Oa.cmntsHdr},o.createElement(De,{style:Oa.cmntsHdrTxt},"Transactions")),o.createElement(Ae,{style:Oa.cmntsCnt},$(e.state.transactions)?e.state.transactions.map(function(e,t){return o.createElement(Ae,{key:"tktcmt"+t,style:0===t?Oa.cmntCnrFst:Oa.cmntCnr},o.createElement(Ae,{style:Oa.cmntHdr},o.createElement(De,null,e.createdBy+" on "+yt(e.createdAt))),o.createElement(Ae,{style:Oa.cmntCnt},o.createElement(De,null,"Ref Id: "+e.txnRef)),o.createElement(Ae,{style:Oa.cmntCnt},o.createElement(De,null,"Txn Id: "+e.txnId)),o.createElement(Ae,{style:Oa.cmntCnt},o.createElement(De,null,"Amount: "+e.amount)),o.createElement(Ae,{style:Oa.cmntCnt},o.createElement(De,null,"Status: "+(e.isSuccess?"SUCCESS":"FAILED"))),$(e.reason)&&o.createElement(Ae,{style:Oa.cmntCnt},o.createElement(De,null,"Reason: "+e.reason)))}):o.createElement(De,{style:{padding:20}},"No transactions found!!!"))))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),Oa={cmntsCnr:{width:"100%",marginTop:5,marginBottom:5},cmntsHdr:{borderBottomWidth:1,borderBottomColor:z,"border-bottom-style":"solid"},cmntsHdrTxt:{},cmntsCnt:{marginTop:3,width:"100%"},cmntCnr:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,borderTopWidth:.5,borderTopColor:z},cmntCnrFst:{width:"100%",paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},cmntHdr:{},cmntCnt:{}},ka=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.homeId.length>0&&(this.props.onToggleLoading(!0),this.props.onLoad(this.props.homeId,function(t){e.props.onToggleLoading(!1),e.setState({data:t})},function(t){e.props.onToggleLoading(!1),He.fail($(t)?t:"Failed to load Vehicles.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.data;return o.createElement(Ae,null,o.createElement(Ae,{className:"center",style:xt.ele},o.createElement(De,{style:{color:H,fontWeight:"bold",fontSize:17,marginBottom:10}},"Documents")),$(e)?e.map(function(e,t){return o.createElement(Ae,{key:t,style:xt.row},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},e.createdBy+" on "+yt(e.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},e.title)),$(e.description)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,e.description)),$(e.file)&&o.createElement(Ae,{style:xt.ele},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:W+e.file},e.file)))}):o.createElement(De,null,"No data found!!!"))}}]),t}(o.Component),ja=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleLoading=function(e){n.setState({isLoading:e})},n.state={isLoading:!1,homeId:"",activeTab:1,data:{}},n.toggleLoading=n.toggleLoading.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({homeId:t}),t.length>0&&(this.setState({isLoading:!0}),this.props.onLoad(t,function(t){e.setState({isLoading:!1}),t&&$(t._id)?e.setState({data:t}):He.fail("Failed to load Home.")},function(t){e.setState({isLoading:!1}),He.fail($(t)?t:"Failed to load Home.")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return o.createElement("main",{style:Ca.content},o.createElement(Wt,{data:[{title:"Homes",link:"homes"},{title:"View Home",link:"view-home"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},o.createElement(Re,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:1})}},o.createElement(Te,{src:1===t?Me.infoInv:Me.info,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:2})}},o.createElement(Te,{src:2===t?Me.membersInv:Me.members,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:3})}},o.createElement(Te,{src:3===t?Me.vehicleInv:Me.vehicle,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:4===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:4})}},o.createElement(Te,{src:4===t?Me.servantInv:Me.servant,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:5===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:5})}},o.createElement(Te,{src:5===t?Me.supportInv:Me.support,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:6===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:6})}},o.createElement(Te,{src:6===t?Me.visitorsInv:Me.visitors,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:7===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:7})}},o.createElement(Te,{src:7===t?Me.moneyInv:Me.money,style:Ca.tabImage})),o.createElement(Re,{className:"tab",style:8===this.state.activeTab?Object(y.a)({},Ca.tab,Ca.activeTab):Ca.tab,onClick:function(){return e.setState({activeTab:8})}},o.createElement(Te,{src:8===t?Me.documentInv:Me.document,style:Ca.tabImage}))),o.createElement(Ae,{style:{flex:1,flexDirection:"column",padding:15}},1===t?o.createElement(ga,{blocks:this.props.blocks,data:this.state.data}):2===t?o.createElement(ya,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadMembers}):3===t?o.createElement(Ea,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVehicles}):4===t?o.createElement(ba,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadServants}):5===t?o.createElement(va,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadTickets}):6===t?o.createElement(wa,{appUser:this.props.appUser,user:this.props.user,homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadVisitors}):7===t?o.createElement(Sa,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadPayments}):o.createElement(ka,{homeId:this.state.homeId,onToggleLoading:this.toggleLoading,onLoad:this.props.onLoadDocuments}))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Ca={content:{width:"100%"},tab:{flex:1,paddingTop:10,paddingBottom:10,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:H,borderBottomStyle:"solid",color:H},tabImage:{width:20,height:20}},Na=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,users:e.Users,homes:e.Homes,blocks:e.Blocks}},function(e){return{onLoad:function(t,n,a){return e(Ln(t,n,a))},onLoadMembers:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("members/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadVehicles:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("vehicles/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Members.")})}}(t,n,a))},onLoadServants:function(t,n,a){return e(en(t,n,a))},onLoadTickets:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("tickets/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Tickets.")})}}(t,n,a))},onLoadVisitors:function(t,n,a,o){return e(ct(0,t,n,a,o))},onLoadPayments:function(t,n,a){return e(it(0,t,n,a))},onLoadDocuments:function(t,n,a){return e(function(e,t,n){return function(a){(new se).get("documents/"+e,function(e,a){ee(e)&&ee(e.data)?t(e.data):n(e&&$(e.message)?e.message:"Failed to load Documents.")})}}(t,n,a))}}})(ja),Aa=function(e,t,n,o){return{type:a.LOAD_POLLS,payload:{data:e,isUpToDate:t,isError:n,errorMessage:o}}};function xa(e,t){try{return t>0?100*e/t:0}catch(n){return ae(n,"calc.percentage"),0}}var Ta=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onSave=function(){if($(n.state.topic)&&$(n.state.description)&&ee(n.state.fromDate)&&ee(n.state.toDate)&&$(n.state.pollOption.filter(function(e){return $(e)}))){n.setState({isLoading:!0});var e={_id:n.state.id,topic:n.state.topic,description:n.state.description,isAllowMultiple:n.state.isAllowMultiple,isOneVotePerFlat:n.state.isOneVotePerFlat,isAnonymous:n.state.isAnonymous,fromDate:n.state.fromDate,toDate:n.state.toDate,options:n.state.pollOption.filter(function(e){return $(e)})};n.props.onSave(n.props.user.client._id,e,n.props.polls.data,n.props.user,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date}),He.success("Poll saved successfully.")):He.fail("Failed to save pol.")})}else He.warn("Please fill all the required fields before "+(n.state.id.length>0?"Update":"Save")+".")},n.onRemove=function(e){Object(Qe.confirmAlert)({title:"Confirm to delete",message:"Are you sure you wish to delete?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onRemove(e,n.props.polls.data,n.props.user._id,function(e){n.setState({isLoading:!1}),!0===e?He.success("Poll removed successfully."):He.fail("Failed to remove poll.")})}},{label:"No",onClick:function(){}}]})},n.loadVotes=function(){if(ee(n.state.showVotePoll)&&n.state.showVotePoll._id.length>0){var e=[];return n.state.showVotePoll.options.map(function(t,a){return e.push({option:t,votes:n.state.showVotePoll.votes.filter(function(e){return e.option===a}).length})}),o.createElement(Ae,{style:{padding:15}},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},n.state.showVotePoll.topic)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,n.state.showVotePoll.description)),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},"Votes: "+n.state.showVotePoll.votes.length)),e.sort(function(e,t){return t.votes-e.votes}).map(function(e,t){return o.createElement(Ae,{key:"pvo"+t,style:xt.ele},o.createElement(De,null,e.votes+" ("+xa(e.votes,n.state.showVotePoll.votes.length)+"%) - "+e.option))}))}return""},n.state={isEdit:!1,isLoading:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date},n.onSave=n.onSave.bind(Object(ye.a)(n)),n.onRemove=n.onRemove.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,null,!1===this.state.isEdit&&o.createElement(Ae,{style:xt.row},o.createElement(_e,{title:"ADD NEW",onPress:function(){e.setState({isEdit:!0,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[],showVotePoll:{_id:""},datePickerType:"",datePickerDate:new Date})}})),!0===this.state.isEdit&&0===this.state.id.length?o.createElement(Ae,{key:"p0",style:Object(y.a)({},xt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Xn.a,{onChange:function(t){e.setState({fromDate:t})},value:this.state.fromDate})),o.createElement(Ae,{style:xt.ele},o.createElement(Xn.a,{onChange:function(t){e.setState({toDate:t})},value:this.state.toDate})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:this.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:this.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:this.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Options: ")),$(this.state.pollOption)?this.state.pollOption.map(function(t,n){return o.createElement(Ae,{key:"pop"+n,style:xt.ele},o.createElement(Ie,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Re,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))}):o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"No Option found!!!")),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{onClick:function(){if(!$(e.state.pollOption.filter(function(e){return!$(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(De,null,"Add More +"))),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:this.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):[],ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&$(this.props.polls.data)?this.props.polls.data.map(function(t,n){return!0===e.state.isEdit&&e.state.id===t._id?o.createElement(Ae,{key:"p"+t._id,style:Object(y.a)({},xt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ae,{style:xt.ele},o.createElement(Ie,{type:"text",placeholder:"Topic",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.topic,onChange:function(t){return e.setState({topic:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Ue,{placeholder:"Description",className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:e.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Xn.a,{onChange:function(t){e.setState({fromDate:t})},value:e.state.fromDate})),o.createElement(Ae,{style:xt.ele},o.createElement(Xn.a,{onChange:function(t){e.setState({toDate:t})},value:e.state.toDate})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:e.state.isAllowMultiple,text:"Allow Multiple Votes",onPress:function(){return e.setState({isAllowMultiple:!e.state.isAllowMultiple})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:e.state.isOneVotePerFlat,text:"One Vote per Flat",onPress:function(){return e.setState({isOneVotePerFlat:!e.state.isOneVotePerFlat})}})),o.createElement(Ae,{style:xt.ele},o.createElement(Nt,{isActive:e.state.isAnonymous,text:"Anonymous Voting",onPress:function(){return e.setState({isAnonymous:!e.state.isAnonymous})}})),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Options: ")),$(e.state.pollOption)?e.state.pollOption.map(function(t,n){return o.createElement(Ae,{key:"pop"+n,style:xt.ele},o.createElement(Ie,{type:"text",key:"popt"+n,placeholder:"Option"+(n+1),className:"form-control",style:Object(y.a)({},Fe,Ke.ele),value:t,onChange:function(t){var a=e.state.pollOption;a[n]=t.target.value,e.setState({pollOption:a})}}),o.createElement(Re,{style:{},onClick:function(){var t=e.state.pollOption;delete t[n],e.setState({pollOption:t})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))}):o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"No Option found!!!")),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{onClick:function(){if(!$(e.state.pollOption.filter(function(e){return!$(e)}))){var t=e.state.pollOption;t.push(""),e.setState({pollOption:t})}}},o.createElement(De,null,"Add More +"))),o.createElement(Ae,{style:xt.ele},o.createElement(Re,{style:{marginRight:25},onClick:e.onSave},o.createElement(Te,{src:Me.tick,style:Vt.editIcon})),o.createElement(Re,{style:{},onClick:function(){e.setState({isEdit:!1,id:"",topic:"",description:"",isAllowMultiple:!1,isOneVotePerFlat:!1,isAnonymous:!1,fromDate:new Date,toDate:new Date,pollOption:[]})}},o.createElement(Te,{src:Me.cancel,style:Vt.deleteIcon})))):o.createElement(Ae,{key:"p"+t._id,style:Object(y.a)({},xt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,yt(t.fromDate)+" to "+yt(t.toDate))),o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:!0===t.isAllowMultiple?Ke.radioActive:Object(y.a)({},Ke.radio,{marginLeft:5})},o.createElement(De,{style:!0===t.isAllowMultiple?Object(y.a)({},Ke.radioActiveText):Object(y.a)({},Ke.radioText)},"Allow Multiple Votes"))),o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Ke.radioActive):Object(y.a)({},Ke.radio,{marginLeft:5})},o.createElement(De,{style:!0===t.isOneVotePerFlat?Object(y.a)({},Ke.radioActiveText):Object(y.a)({},Ke.radioText)},"One Vote per Flat"))),o.createElement(Ae,{style:xt.ele},o.createElement(Ae,{style:!0===t.isAnonymous?Object(y.a)({},Ke.radioActive):Object(y.a)({},Ke.radio,{marginLeft:5})},o.createElement(De,{style:!0===t.isAnonymous?Object(y.a)({},Ke.radioActiveText):Object(y.a)({},Ke.radioText)},"Anonymous Voting"))),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Options: ")),$(t.options)?t.options.map(function(e,t){return o.createElement(Ae,{key:"po"+t,style:xt.ele},o.createElement(De,{key:"pot"+t,style:{width:"100%"}},e))}):o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{padding:10}},"No Option found!!!")),o.createElement(Ae,{style:xt.ele},t.fromDate>new Date&&o.createElement(Re,{style:{marginRight:25},onClick:function(){e.setState({isEdit:!0,id:t._id,topic:t.topic,description:t.description,isAllowMultiple:t.isAllowMultiple,isOneVotePerFlat:t.isOneVotePerFlat,isAnonymous:t.isAnonymous,fromDate:t.fromDate,toDate:t.toDate,pollOption:$(t.options)?t.options:[]})}},o.createElement(Te,{src:Me.edit,style:Vt.editIcon})),o.createElement(Re,{style:{marginRight:25},onClick:function(){e.onRemove(t._id)}},o.createElement(Te,{src:Me.delete,style:Vt.deleteIcon})),o.createElement(De,{className:"pointer",style:{color:V},onClick:function(){e.setState({showVotePoll:t})}},"View Votes")))}):o.createElement(De,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No poll found!!!":"Loading..."),o.createElement(Xe.a,{open:ee(this.state.showVotePoll)&&this.state.showVotePoll._id.length>0,onClose:function(){return e.setState({showVotePoll:{_id:""}})}},o.createElement(Ae,{style:$e.container},o.createElement(Ae,{style:$e.content},this.loadVotes()))),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Ia=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadVotes=function(e){var t=[];return e.options.map(function(n,a){return t.push({option:n,votes:e.votes.filter(function(e){return e.option===a}).length})}),t.sort(function(e,t){return t.votes-e.votes}).map(function(t,n){return o.createElement(Ae,{key:"pvo"+n,style:xt.ele},o.createElement(De,null,t.votes+" ("+xa(t.votes,e.votes.length)+"%) - "+t.option))})},n.onSelectOption=function(e,t){if(n.state.votePollId===e._id)if($(n.state.votes.filter(function(e){return e.option===t})))n.setState({votes:n.state.votes.filter(function(e){return e.option!==t})});else{var a=[];e.isAllowMultiple&&(a=n.state.votes),a.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votes:a})}else{var o=[];o.push({_homeId:n.props.user.homes[n.props.appUser.homeIndex]._id,_memberId:n.props.user._id,option:t,isActive:!0,createdBy:n.props.user._id}),n.setState({votePollId:e._id,votes:o})}},n.onVote=function(e){n.state.votePollId===e&&$(n.state.votes)?(n.setState({isLoading:!0}),n.props.onVote(e,n.state.votes,n.props.polls,n.props.user,n.props.appUser,function(e){n.setState({isLoading:!1}),!0===e?(n.setState({votePollId:"",votes:[]}),He.success("Your vote saved successfully.")):He.fail("Failed to save your vote.")})):He.warn("Please select any option to vote.")};var a=new Date;return n.state={isLoading:!1,votePollId:"",votes:[],currentDate:new Date(a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear())},n.loadVotes=n.loadVotes.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,null,ee(this.props.polls)&&this.props.polls.isUpToDate&&!this.props.polls.isError&&$(this.props.polls.data.filter(function(t){return $(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}))?this.props.polls.data.filter(function(t){return $(t.options)&&new Date(t.fromDate)<=new Date&&new Date(t.toDate)>=e.state.currentDate}).map(function(t,n){return o.createElement(Ae,{key:"p"+t._id,style:Object(y.a)({},xt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.topic)),o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.description)),(!0!==t.isOneVotePerFlat||!$(t.votes)||!$(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&t.options.map(function(n,a){return o.createElement(Ae,{key:"popt"+a,style:xt.ele},o.createElement(Nt,{isActive:e.state.votePollId===t._id&&$(e.state.votes.filter(function(e){return e.option===a})),text:n,onPress:function(){return e.onSelectOption(t,a)}}))}),(!0!==t.isOneVotePerFlat||!$(t.votes)||!$(t.votes.filter(function(t){return t._homeId===e.props.user.homes[e.props.appUser.homeIndex]._id})))&&o.createElement(Ae,{style:{marginTop:5,width:"100%"}},o.createElement(_e,{title:"Vote",onPress:function(){return e.onVote(t._id)},style:{width:"100%"}})),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},"Your Votes:")),$(t.options)&&e.loadVotes(t))}):o.createElement(De,{style:{padding:20}},this.props.polls.isUpToDate?this.props.polls.isError?this.props.polls.errorMessage:"No active poll found!!!":"Loading..."),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),Ua=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).onReturnBack=function(e){Object(Qe.confirmAlert)({title:"Confirm to return back from outing",message:"Are you sure? You return back from this outing?",buttons:[{label:"Yes",onClick:function(){n.setState({isLoading:!0}),n.props.onReturnBack(e,n.props.user,n.props.outings,function(e){n.setState({isLoading:!1}),e?He.success("Successfully returned back."):He.fail("Failed to Return back.")})}},{label:"No",onClick:function(){}}]})},n.state={isLoading:!1},n.onReturnBack=n.onReturnBack.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement(Ae,null,this.props.appUser.role===X.USER&&(!ee(this.props.outings)||!$(this.props.outings.data.filter(function(e){return!0!==e.isReturned})))&&o.createElement(Ae,{style:xt.row},o.createElement(_e,{title:"Go Outing",onPress:function(){e.props.history.push("new-outing")}})),ee(this.props.outings)&&this.props.outings.isUpToDate&&!this.props.outings.isError&&$(this.props.outings.data)?this.props.outings.data.map(function(t,n){return o.createElement(Ae,{key:"o"+t._id,style:Object(y.a)({},xt.row,{borderBottomWidth:1,borderBottomColor:z,borderBottomStyle:"solid"})},o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t._homeId+" by "+t.createdBy+" on "+Et(t.createdAt))),o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},Et(t.fromDate)+" to "+Et(t.toDate))),$(t.place)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,{style:{fontWeight:"bold"}},t.place)),$(t.address)&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,t.address)),t.isReturned&&o.createElement(Ae,{style:xt.ele},o.createElement(De,null,"Returned on "+Et(t.returnedAt))),e.props.appUser.role!==X.USER&&o.createElement(Ae,{style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(De,null,"No one in the home")),e.props.appUser.role===X.USER&&!0!==t.isReturned&&o.createElement(Ae,{style:Object(y.a)({},Ke.saveBtn,{flexDirection:"row"})},o.createElement(_e,{title:"Return to Home",onPress:function(){e.onReturnBack(t._id)}})))}):o.createElement(De,{style:{padding:20}},this.props.outings.isUpToDate?this.props.outings.isError?this.props.outings.errorMessage:"No Outings found!!!":"Loading..."),o.createElement(Be,{visible:this.state.isLoading}))}}]),t}(o.Component),La=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:!ee(n.props.user)||n.props.appUser.role!==X.ADMIN&&n.props.appUser.role!==X.MANAGER?2:1,isShowPoll:ee(n.props.user)&&(n.props.appUser.role===X.ADMIN||n.props.appUser.role===X.MANAGER||n.props.appUser.role===X.USER&&n.props.appUser.homeIndex>=0)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoadAds(this.props.user.client._id,function(e){e||He.fail("Failed to load Ads.")}),this.state.isShowPoll&&this.props.onLoadPoll(this.props.user.client._id,this.props.appUser.role,function(e){e||He.fail("Failed to load Poll.")}),this.props.onLoadOuting(this.props.user.client._id,this.props.appUser.role===X.USER?this.props.user.homes[this.props.appUser.homeIndex]._id:"",function(e){e||He.fail("Failed to load Outing.")})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.createElement("main",{style:Da.content},o.createElement(Wt,{data:[{title:"Notice",link:"notice"}]}),o.createElement(Ae,{style:{flex:1,flexDirection:"column",width:"100%",marginBottom:2}},o.createElement(Ae,{className:"tab-bar",style:{flex:1,flexDirection:"row"}},this.state.isShowPoll&&o.createElement(Re,{className:"tab",style:1===this.state.activeTab?Object(y.a)({},Da.tab,Da.activeTab):Da.tab,onClick:function(){return e.setState({activeTab:1})}},"POLL"),o.createElement(Re,{className:"tab",style:2===this.state.activeTab?Object(y.a)({},Da.tab,Da.activeTab):Da.tab,onClick:function(){return e.setState({activeTab:2})}},"ADS"),o.createElement(Re,{className:"tab",style:3===this.state.activeTab?Object(y.a)({},Da.tab,Da.activeTab):Da.tab,onClick:function(){return e.setState({activeTab:3})}},"OUTING")),o.createElement(Ae,{style:{flex:1,flexDirection:"column",padding:15}},1===this.state.activeTab?this.props.appUser.role===X.ADMIN||this.props.appUser.role===X.MANAGER?o.createElement(Ta,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onSave:this.props.onSavePoll,onRemove:this.props.onRemovePoll}):o.createElement(Ia,{appUser:this.props.appUser,user:this.props.user,polls:this.props.polls,onVote:this.props.onVote}):2===this.state.activeTab?o.createElement(wt,{data:this.props.ads.isUpToDate?this.props.ads.data:[],message:this.props.ads.isUpToDate?this.props.ads.isError?this.props.ads.errorMessage:"No data found!!!":"Loading..."}):3===this.state.activeTab?o.createElement(Ua,{history:this.props.history,appUser:this.props.appUser,user:this.props.user,outings:this.props.outings,onReturnBack:this.props.onReturnBack}):o.createElement(wt,{data:4===this.state.activeTab?this.props.remainders:this.props.complaints,message:"No data found!!!"}))))}}]),t}(o.Component),Da={content:{width:"100%"},tab:{flex:1,paddingTop:5,paddingBottom:5,alignItems:"center"},activeTab:{borderBottomWidth:1,borderBottomColor:H,borderBottomStyle:"solid",color:H}},Ra=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User,ads:e.Ads,polls:e.Polls,outings:e.Outings,remainders:[],complaints:[]}},function(e){return{onLoadAds:function(t,n){return e(kn(t,n))},onLoadPoll:function(t,n,a){return e(function(e,t,n){return function(t){t(Aa([],!1,!1,"")),(new se).get("polls/"+e,function(e,a){ee(e)&&ee(e.data)?(t(Aa(e.data,!0,!1,"")),n(!0)):n(!1)})}}(t,0,a))},onSavePoll:function(t,n,a,o,s){return e(function(e,t,n,a,o){return function(s){t&&$(t._id)?(new se).put("poll/"+t._id,function(e,a){if(ee(e)&&$(e.data)){var r=n.findIndex(function(t){return t._id===e.data});n[r]._id=e.data,n[r].topic=t.topic,n[r].description=t.description,n[r].isAllowMultiple=t.isAllowMultiple,n[r].isOneVotePerFlat=t.isOneVotePerFlat,n[r].isAnonymous=t.isAnonymous,n[r].fromDate=t.fromDate,n[r].toDate=t.toDate,n[r].options=t.options,s(Aa(ee(n)?n:[],!0,!1,"")),o(!0)}else o(!1)},t):(new se).post("poll/"+e,function(e,r){ee(e)&&$(e.data)?(t._id=e.data,t.createdBy=a.name,n.unshift(t),s(Aa(ee(n)?n:[],!0,!1,"")),o(!0)):o(!1)},t)}}(t,n,a,o,s))},onRemovePoll:function(t,n,a,o){return e(function(e,t,n,a){return function(o){(new se).delete("poll/"+e,function(n,s){ee(n)&&ee(n.data)&&!0===n.data?(t=t.filter(function(t,n){return t._id!==e}),o(Aa(ee(t)?t:[],!0,!1,"")),a(!0)):a(!1)},{Id:e,UserId:n})}}(t,n,a,o))},onVote:function(t,n,a,o,s,r){return e(function(e,t,n,a,o,s){return function(a){(new se).post("poll/vote/"+e,function(t,o){if(ee(t)&&$(t.data)){var r=n.data.findIndex(function(t){return t._id===e});if(n.data[r].votes=t.data,a(Aa(n.data,!0,!1,"")),n.isUpToDate&&!n.isError&&$(n.data)){var i=n.data,l=i.findIndex(function(t){return t._id===e});i[l].votes=t.data,a(Aa(i,!0,!1,""))}s(!0)}else s(!1)},{votes:t})}}(t,n,a,0,0,r))},onLoadOuting:function(t,n,a){return e(function(e,t,n){return function(e){e(Zn([],!1,!1,"")),(new se).get("outings"+($(t)?"/"+t:""),function(t,a){ee(t)&&ee(t.data)?(e(Zn(t.data,!0,!1,"")),n(!0)):n(!1)})}}(0,n,a))},onReturnBack:function(t,n,a,o){return e(function(e,t,n,a){return function(t){(new se).delete("outing/return/"+e,function(o,s){if(ee(o)&&ee(o.data)&&!0===o.data){var r=n.data.findIndex(function(t){return t._id===e});n.data[r].isReturned=!0,n.data[r].returnedAt=new Date,t(Zn(n.data,!0,!1,"")),a(!0)}else a(!1)})}}(t,0,a,o))}}})(La),_a=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement("main",{style:Pa.content},o.createElement(Wt,{data:[{title:"Info",link:"info"}]}),o.createElement(Ae,{style:Object(y.a)({},Ke.container,{paddingLeft:10,paddingRight:10})},o.createElement(Ae,{className:"center",style:Ke.row},o.createElement(De,{style:{color:V,fontWeight:"bold",textAlign:"center"}},this.props.user.client.name)),o.createElement(Ae,{className:"center",style:Ke.row},o.createElement(De,{style:{color:V,fontWeight:"bold",textAlign:"center"}},this.props.user.client.description)),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Apartment Residents & Apartment Owners need a common platform through which they can connect with association, get to know & discuss common issues of the neighborhood")),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Home users")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Maintenance Admin Payment")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Receive real-time notifications")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Visitor management")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Lodge any complaint related to your apartment and track")),o.createElement(Ae,{style:Ke.row},o.createElement(De,null,"Admin Users")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Create polls and gather the opinion of all Apartment residents")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"All details of your flat, staff who work in your flat, visitors coming to your flat")),o.createElement(Ae,{style:Ke.row},o.createElement(De,{style:Pa.listItem},"Accounts  and much more..."))))}}]),t}(o.Component),Pa={content:{flex:1,width:"100%"},listItem:{marginLeft:15}},Ma=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{}})(_a),Ba=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.createElement(Ae,{style:{flex:1,backgroundColor:G,padding:15,paddingLeft:59}},o.createElement(De,null,"Page not found!!!"))}}]),t}(o.Component),Fa=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).isUser=function(){return n.props.appUser.role===X.USER},n.isAdmin=function(){return n.props.appUser.role===X.ADMIN},n.isManager=function(){return n.props.appUser.role===X.MANAGER},n.isGateKeeper=function(){return n.props.appUser.role===X.GATEKEEPER},n.state={isLoading:!1},n.isUser=n.isUser.bind(Object(ye.a)(n)),n.isAdmin=n.isAdmin.bind(Object(ye.a)(n)),n.isManager=n.isManager.bind(Object(ye.a)(n)),n.isGateKeeper=n.isGateKeeper.bind(Object(ye.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ee(this.props.user)&&$(this.props.user._id)||(this.setState({isLoading:!0}),this.props.getProfile(function(t,n){e.setState({isLoading:!1}),!0!==t&&He.fail("Failed to load Profile: "+n)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return!this.state.isLoading&&o.createElement(Ae,{style:Wa.container},o.createElement(et,{appUser:this.props.appUser,user:this.props.user,onHomeChange:this.props.onHomeChange,onLogout:this.props.onLogout}),o.createElement(at,{appUser:this.props.appUser,user:this.props.user}),$(this.props.appUser.role)&&!this.isUser()||$(this.props.user.homes)?o.createElement(Je.c,null,o.createElement(Je.a,{path:"/",exact:!0,component:Pt}),this.isUser()&&o.createElement(Je.a,{path:"/members",exact:!0,component:Kt}),this.isUser()&&o.createElement(Je.a,{path:"/new-member",exact:!0,component:qt}),this.isUser()&&o.createElement(Je.a,{path:"/vehicles",exact:!0,component:Xt}),this.isUser()&&o.createElement(Je.a,{path:"/new-vehicle",exact:!0,component:$t}),this.isUser()&&o.createElement(Je.a,{path:"/servants",exact:!0,component:on}),this.isUser()&&o.createElement(Je.a,{path:"/new-servant",exact:!0,component:cn}),(this.isUser()||this.isAdmin()||this.isManager())&&o.createElement(Je.a,{path:"/tickets",exact:!0,component:pn}),this.isUser()&&o.createElement(Je.a,{path:"/new-ticket",exact:!0,component:fn}),this.isUser()&&o.createElement(Je.a,{path:"/visitors",exact:!0,component:yn}),this.isUser()&&o.createElement(Je.a,{path:"/new-outing",exact:!0,component:$n}),(this.isAdmin()||this.isManager())&&o.createElement(Je.a,{path:"/ads",exact:!0,component:An}),(this.isAdmin()||this.isManager())&&o.createElement(Je.a,{path:"/new-ad",exact:!0,component:Tn}),(this.isAdmin()||this.isManager())&&o.createElement(Je.a,{path:"/notification",exact:!0,component:zn}),this.isAdmin()&&o.createElement(Je.a,{path:"/users",exact:!0,component:Un}),this.isAdmin()&&o.createElement(Je.a,{path:"/edit-user/:id/:isApprove",exact:!0,component:Fn}),this.isAdmin()&&o.createElement(Je.a,{path:"/approve-users",exact:!0,component:Hn}),this.isAdmin()&&o.createElement(Je.a,{path:"/homes",exact:!0,component:Pn}),this.isAdmin()&&o.createElement(Je.a,{path:"/view-home/:id",exact:!0,component:Na}),this.isAdmin()&&o.createElement(Je.a,{path:"/edit-home/:id",exact:!0,component:Gn}),this.isAdmin()&&o.createElement(Je.a,{path:"/blocks",exact:!0,component:ra}),this.isAdmin()&&o.createElement(Je.a,{path:"/edit-block/:id",exact:!0,component:la}),(this.isAdmin()||this.isManager())&&o.createElement(Je.a,{path:"/payment",exact:!0,component:fa}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&o.createElement(Je.a,{path:"/all-visitors",exact:!0,component:Yn}),(this.isAdmin()||this.isManager()||this.isGateKeeper())&&o.createElement(Je.a,{path:"/all-takeways",exact:!0,component:rn}),o.createElement(Je.a,{path:"/notice",exact:!0,component:Ra}),o.createElement(Je.a,{path:"/my-profile",exact:!0,component:wn}),this.props.user.role.indexOf(",")>0&&o.createElement(Je.a,{path:"/my-role",exact:!0,component:On}),o.createElement(Je.a,{path:"/my-documents",exact:!0,component:na}),o.createElement(Je.a,{path:"/change-password",exact:!0,component:bn}),o.createElement(Je.a,{path:"/info",exact:!0,component:Ma}),o.createElement(Je.a,{component:Ba})):o.createElement(De,{style:{margin:20,padding:15,paddingLeft:59}},"No home assigned to you. Please contact administrator/manager."),ee(this.props.user)&&$(this.props.user._id)&&o.createElement(st,null),o.createElement(Be,{visible:this.state.isLoading,text:"Loading..."}))}}]),t}(o.Component),Wa={container:{flex:1,backgroundColor:G,alignItems:"flex-start",justifyContent:"flex-start"}},Ha=Object(p.b)(function(e,t){return{appUser:e.AppUser,user:e.User}},function(e){return{getProfile:function(t){return e(function(e){return function(t){(new se).get("account/profile",function(n,a){if(ee(n)&&ee(n.data)&&$(n.data._id)){t(ue(n.data)),t(me($(n.data.homes)?0:-1));var o=n.data.role.split(",");$(o)&&t(ce(o[0])),(o.indexOf(X.ADMIN)>=0||o.indexOf(X.MANAGER)>=0)&&((new se).get("members",function(e,n){ee(e)&&$(e.data)&&t(de(e.data,!0,!1,""))}),(new se).get("blocks/"+n.data.client._id,function(e,n){ee(e)&&$(e.data)&&t(he(e.data,!0,!1,""))})),(o.indexOf(X.ADMIN)>=0||o.indexOf(X.MANAGER)>=0||o.indexOf(X.GATEKEEPER)>=0)&&(new se).get("homes/"+n.data.client._id,function(e,n){ee(e)&&$(e.data)&&(e.data.forEach(function(e){e.memberIds=e.members,delete e.members}),t(pe(e.data,!0,!1,"")))}),e(!0,"")}else e(!1,a)})}}(t))},onHomeChange:function(t,n){return e(function(e,t){return function(n){n(me(e)),t(!0)}}(t,n))},onLogout:function(t){return e(re(t))}}})(Fa),Va=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){$(sessionStorage.getItem("auth_token"))&&this.props.setLogin(!0)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.appUser.isLoggedIn?o.createElement(ge.a,null,o.createElement(Ha,null)):o.createElement(Ze,null)}}]),t}(o.Component),Ga=Object(p.b)(function(e,t){return{appUser:e.AppUser}},function(e){return{setLogin:function(t){return e(function(e){return function(t){t(le(e))}}(t))}}})(Va),Ka=n(72),Ya=(n(130),n(126),n(127),n(128),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){!function(){try{var e=Ka.initializeApp({apiKey:"AIzaSyCrGumtbn2McvNXzZdhShhLaW0QsIFZxOk",authDomain:"nest-df0a7.firebaseapp.com",databaseURL:"https://nest-df0a7.firebaseio.com",projectId:"nest-df0a7",storageBucket:"nest-df0a7.appspot.com",messagingSenderId:"422026408390",appId:"1:422026408390:web:cf0e6a945e7f1ec0d602c7"}).messaging();e.usePublicVapidKey("BExnmgKfYLBd44lIqI5xRAD55I5Qhsaa7sI_wJ19zcIuq05y2Z1AtuaNBChU--UhjFxpA2XLR2lI02otUje4Rkk"),e.requestPermission().then(Object(_.a)(R.a.mark(function t(){var n;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:n=t.sent,localStorage.setItem("fcm_token",n);case 4:case"end":return t.stop()}},t)}))).catch(function(e){console.log("Unable to get permission to notify.",e)})}catch(t){console.log("FCM ERROR: ",t)}}()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(p.a,{store:L},s.a.createElement(Ga,null),s.a.createElement(h.ToastsContainer,{store:h.ToastsStore,position:h.ToastsContainerPosition.TOP_RIGHT}))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),i.a.render(s.a.createElement(Ya,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,n){e.exports=n(129)}},[[77,1,2]]]);
//# sourceMappingURL=main.d6c10063.chunk.js.map